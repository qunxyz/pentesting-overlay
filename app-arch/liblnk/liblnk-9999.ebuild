# Copyright 1999-2013 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Header: app-pda/libplist/libplist-9999.ebuild,v 1.0 2014/01/13 17:21:55 srcs Exp $

EAPI=3
PYTHON_COMPAT=( python{2_7,3_4,3_5} )
inherit git-2 autotools autotools-utils python-any-r1

DESCRIPTION="Library and tools to access the Windows Shortcut File (LNK) format"
HOMEPAGE="https://github.com/libyal/liblnk"
EGIT_REPO_URI="https://github.com/libyal/liblnk.git"

LICENSE="GPL-2 LGPL-2.1"
SLOT="0"
KEYWORDS="amd64 ~arm ~ppc ~ppc64 x86"
IUSE="cjk python threads nls"

src_prepare() {
	sh ./synclibs.sh
	sh ./autogen.sh
}

src_configure() {
	local econfargs=()
	if use cjk; then
		econfargs+=(
			--enable-wide-character-type
		)
	fi
	if use threads; then
		econfargs+=(
			--enable-multi-threading-support
		)
	fi
	if use python; then
		econfargs+=(
			--enable-python \
			--enable-python2 \
			--enable-python3
		)
	fi

    econf
}

src_compile() {
    emake
}

src_install() {
	python-any-r1_pkg_setup
	emake DESTDIR="${D}" install
}