# Copyright 1999-2013 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Header: app-pda/libplist/libplist-9999.ebuild,v 1.0 2014/01/13 17:21:55 srcs Exp $

EAPI=5
PYTHON_COMPAT=( python2_7 )
inherit git-2 autotools autotools-utils python-r1

DESCRIPTION="Library and tools to access the Windows Shortcut File (LNK) format"
HOMEPAGE="https://github.com/libyal/liblnk"
EGIT_REPO_URI="https://github.com/libyal/liblnk.git"

LICENSE="GPL-2 LGPL-2.1"
SLOT="0"
KEYWORDS="amd64 ~arm ~ppc ~ppc64 x86"
IUSE="cjk python threads nls"

src_prepare() {
	sh ./synclibs.sh
	eautoconf
}

src_configure() {
	local econfargs=()
	if in_iuse cjk; then
		econfargs+=(
			--enable-wide-character-type
		)
	fi
	if in_iuse threads; then
		econfargs+=(
			--enable-multi-threading-support
		)
	fi
	if in_iuse python; then
		econfargs+=(
			--enable-nls
		)
	fi
	if in_iuse python2; then
		econfargs+=(
			--enable-python2
		)
	fi
	if in_iuse python3; then
		econfargs+=(
			--enable-python3
		)
	fi

	econf econfargs

    autotools-utils_src_configure
}

src_compile() {
    autotools-utils_src_compile
}

src_install() {
	autotools-utils_src_install
}