diff -uNr primecoin-0.1.2-linux-ori/src/src/net.cpp primecoin-0.1.2-linux/src/src/net.cpp
--- primecoin-0.1.2-linux-ori/src/src/net.cpp	2013-08-05 20:37:20.000000000 +0800
+++ primecoin-0.1.2-linux/src/src/net.cpp	2018-01-11 14:23:46.690911017 +0800
@@ -1082,10 +1082,14 @@
 #ifndef UPNPDISCOVER_SUCCESS
     /* miniupnpc 1.5 */
     devlist = upnpDiscover(2000, multicastif, minissdpdpath, 0);
-#else
+#elif MINIUPNPC_API_VERSION < 14
     /* miniupnpc 1.6 */
     int error = 0;
     devlist = upnpDiscover(2000, multicastif, minissdpdpath, 0, 0, &error);
+#else
+    /* miniupnpc 1.9.20150730 */
+    int error = 0;
+    devlist = upnpDiscover(2000, multicastif, minissdpdpath, 0, 0, 2, &error);
 #endif
 
     struct UPNPUrls urls;
