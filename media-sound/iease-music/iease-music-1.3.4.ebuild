# Copyright 1999-2015 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Id$

EAPI=6

inherit eutils gnome2-utils xdg-utils

DESCRIPTION="A opensource netease cloud music player"
HOMEPAGE="https://github.com/trazyn/ieaseMusic"
SRC_URI="https://github.com/trazyn/ieaseMusic/releases/download/v${PV}/ieaseMusic-${PV}-linux-amd64.deb -> ${P}.deb"

LICENSE=""
SLOT="0"
KEYWORDS="~amd64"
IUSE=""

DEPEND=""
RDEPEND="${DEPEND}"

S="${WORKDIR}"

src_unpack() {
	ar x ${DISTDIR}/${A}
	unpack ${WORKDIR}/data.tar.xz
}

src_install() {
	doins -r opt
	doins -r usr
	fperms +x /opt/ieaseMusic/ieaseMusic
}

pkg_postinst() {
	gnome2_icon_cache_update
	xdg_desktop_database_update
}

pkg_postrm() {
	gnome2_icon_cache_update
	xdg_desktop_database_update
}
