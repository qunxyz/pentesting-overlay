# Copyright 1999-2018 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
EAPI=7
PYTHON_COMPAT=( python2_7 python3_{6,7,8,9} )
inherit distutils-r1 python-utils-r1 gnome2-utils

PY_PN=${PN//-/_}

DESCRIPTION="context-menu entry for opening other terminal in nautilus"
HOMEPAGE="https://github.com/Stunkymonkey/nautilus-open-any-terminal"
LICENSE="GPL3"
KEYWORDS="~amd64 ~x86"
SRC_URI="mirror://pypi/${PY_PN:0:1}/${PY_PN}/${PY_PN}-${PV}.tar.gz"
SLOT="0"
IUSE=""
RESTRICT="mirror"
RDEPEND="dev-python/setuptools[${PYTHON_USEDEP}]"
DEPEND="${RDEPEND}
		dev-lang/python"

PATCHES=(
	"${FILESDIR}"/terminal-params.patch
)

S="${WORKDIR}/${PY_PN}-${PV}"

pkg_preinst(){
	gnome2_schemas_savelist
}

pkg_postinst(){
	gnome2_gconf_install
	gnome2_schemas_update
}

pkg_postrm(){
	gnome2_gconf_uninstall
	gnome2_schemas_update
}
