# Copyright 1999-2016 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Id$

EAPI=7

PYTHON_COMPAT=( python3_{6..10} )
DISTUTILS_USE_SETUPTOOLS=no
inherit distutils-r1 eutils

DESCRIPTION="Variety changes the wallpaper on a regular interval using user-specified or automatically downloaded images."
HOMEPAGE="http://peterlevi.com/variety/"
SRC_URI="https://github.com/varietywalls/variety/archive/${PV}.tar.gz -> ${P}.tar.gz"

LICENSE="GPL3"
SLOT="0"
KEYWORDS="x86 amd64"
IUSE="help"

DEPEND="dev-python/python-distutils-extra[${PYTHON_USEDEP}]"
RDEPEND="${DEPEND}
	>=x11-libs/libnotify-0.7[introspection]
		games-misc/fortune-mod
		dev-python/configobj[${PYTHON_USEDEP}]
		media-libs/gexiv2[${PYTHON_USEDEP}]
		dev-python/dbus-python[${PYTHON_USEDEP}]
		dev-python/requests[${PYTHON_USEDEP}]
		dev-python/pycurl[${PYTHON_USEDEP}]
		dev-python/pillow[${PYTHON_USEDEP}]
		dev-python/pycairo[${PYTHON_USEDEP}]
		dev-python/beautifulsoup4[${PYTHON_USEDEP}]
		dev-python/lxml[${PYTHON_USEDEP}]
		dev-python/pygobject[cairo,${PYTHON_USEDEP}]
	x11-libs/gtk+:3[introspection]
	>=x11-libs/pango-1[introspection]
	>=dev-libs/glib-2
	>=x11-libs/gdk-pixbuf-2[introspection]
	net-libs/webkit-gtk[introspection]
	dev-libs/libappindicator[introspection]
	help? ( gnome-extra/yelp )
	media-gfx/imagemagick"

PATCHES=(
	"${FILESDIR}"/kde.patch
	# "${FILESDIR}"/multiple_monitors.patch
	"${FILESDIR}"/fix_data_path.patch
)
