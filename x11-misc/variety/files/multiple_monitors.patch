diff -uNr variety-0.8.3-ori/variety/VarietyWindow.py variety-0.8.3/variety/VarietyWindow.py
--- variety-0.8.3-ori/variety/VarietyWindow.py	2020-04-05 01:23:41.684522058 +0800
+++ variety-0.8.3/variety/VarietyWindow.py	2020-04-05 04:18:43.767614000 +0800
@@ -2652,6 +2652,74 @@
             logger.exception(lambda: "Cannot remove all old wallpaper files from %s:" % folder)
 
     def set_desktop_wallpaper(self, wallpaper, original_file, refresh_level):
+        from PIL import Image
+        images = [Image.open(x) for x in [self.used[self.position+1], wallpaper]]
+        widths, heights = zip(*(i.size for i in images))
+        total_width = sum(widths)
+        max_height = max(heights)
+
+        #new_im = Image.new('RGB', (total_width, max_height))
+        new_im = Image.new('RGB', (1920*2, 1080))
+
+        x_offset = 0
+        y_offset = 0
+        for im in images:
+          width, height = im.size
+          if (width/height >= 1920/1080):
+            new_height = height
+            if (height >= 1080):
+              new_width = height*(1920/1080)
+              left = (width - new_width)/2
+              right = left + new_width
+              top = 0
+              bottom = top + height
+              im = im.crop((left, top, right, bottom))
+              im = im.resize((1920, 1080))
+              #im.save(wallpaper + ".width_big.png")
+            else:
+              new_width = height*(1920/1080)
+              im1_x_offset = (1920-new_with)/2
+              im1_y_offset = (1080-new_height)/2
+              im1 = Image.new('RGB', (1920, 1080))
+              im1.paste(im, (im1_x_offset,im1_y_offset))
+              im = im1
+              #im.save(wallpaper + ".width_small.png")
+          else:
+            new_width = width
+            if (new_width >= 1920):
+              new_height = new_width*(1080/1920)
+              left = 0
+              right = left + new_width
+              top = (height - new_height)/2
+              bottom = top + new_height
+              rate = '%.1f' % (new_height/new_width)
+              im = im.crop((left, top, right, bottom))
+              im = im.resize((1920, 1080))
+              #im.save(wallpaper + ".height_big." + rate + ".png")
+            else:
+              new_height = new_width*(1920/1080)
+              im1_x_offset = (1920 - new_width)/2
+              im1_y_offset = 0
+              im1 = Image.new('RGB', (1920, 1080))
+              im1.paste(im, (im1_x_offset,im1_y_offset))
+              #im1.save(wallpaper + ".height_small.png")
+              im = im1
+
+
+          new_im.paste(im, (x_offset,0))
+          #new_im.paste(im, (x_offset,y_offset))
+          # x_offset += im.size[0]
+          x_offset += 1920
+
+        new_im.save(wallpaper + ".merged.png")
+        wallpaper = wallpaper + ".merged.png"
+        import glob
+        wallpaper_path, wallpaper_name = os.path.split(wallpaper)
+        for file in glob.glob(wallpaper_path + "/*.merged.png"):
+          if (file == wallpaper):
+            continue
+          os.remove(file)
+
         script = os.path.join(self.scripts_folder, "set_wallpaper")
         if os.access(script, os.X_OK):
             auto = (
