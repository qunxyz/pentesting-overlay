diff -uNr rabbitvcs-0.17.1/README.md rabbitvcs/README.md
--- rabbitvcs-0.17.1/README.md	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/README.md	2019-09-13 08:36:17.233342569 +0800
@@ -2,45 +2,49 @@
 =========
 
 RabbitVCS is a set of graphical tools written to provide simple and 
-straightforward access to the version control systems you use.  We currently support
-Subversion and Git on a variety of clients such as Nautilus, Thunar, Nemo, Caja, and on the command line.
+straightforward access to the version control systems you use. We currently
+support Subversion and Git on a variety of clients such as Nautilus, Thunar,
+Nemo, Caja, and on the command line.
 
 
 System Requirements
 -------------------
-* pygtk             >= 2.12
+* gtk               >= 3.0
 * python-configobj  >= 4.4.0
 * python-gobject    >= 2.14
-* python-simplejson >= 2.1.1
-
-For spell checking of commit messages:
-* python-gtkspell
 
 For subversion:
 * python-svn >= 1.7.2
 * subversion >= 1.4.6
 
 For git:
-* dulwich >= 0.9.7
+* dulwich >= 0.19.0
 * git
 * tkinter (for now)
 
+For spell checking of commit messages (optional):
+* python-gtkspell
+* hunspell langpacks
+
+For syntax highlighting (optional):
+* python-pygments
+
 Recommends:
 * meld (graphical diff tool)
 
 
 For Debian-based distros you can run: 
 ```
-# apt-get install python-gtk2 python-configobj python-gobject python-simplejson python-gtkspell python-svn subversion python-dulwich git meld tkinter
+# apt-get install python-gtk3 python-configobj python-gobject python-gtkspell python-svn subversion python-dulwich python-pygments git meld tkinter
 ```
 
 For Fedora-based distros you can run:
 ```
-# dnf install nautilus-python pysvn python-configobj python-devel dbus-python python-dulwich tkinter subversion meld
+# dnf install python[23]-nautilus python[23]-pysvn python[23]-configobj python[23]-dbus python[23]-dulwich python[23]-tkinter python[23]-gtkspell3 python[23]-pygments subversion git meld
 ```
 
 Manual Installation
-------------
+-------------------
 Note that you will require superuser rights in order to install RabbitVCS.
 Execute the following as root or using sudo:
 ```
@@ -54,24 +58,39 @@
 
 Once this is run, make sure you install one or more client below.
 
+Note
+----
+
+Please note that if there is a `PYTHON` environment variable it will be used
+as a Runtime environtment for the rabbitvcs module. For example, if `PYTHON`
+points to Python3, then the code in the rabbitvcs module will should be located
+in the Python 3 module search path.
+
 
 Clients
 -------
-RabbitVCS is the core library and set of dialogs, but you interact with them through our clients.  Each client needs to be purposefully installed and has its own README.  Here is a list of our currently working clients:
+RabbitVCS is the core library and set of dialogs, but you interact with them
+through our clients. Each client needs to be purposefully installed and has
+its own README. Here is a list of our currently working clients:
 
- * [Nautilus 3](https://github.com/rabbitvcs/rabbitvcs/tree/master/clients/nautilus-3.0)
+ * [Nautilus](https://github.com/rabbitvcs/rabbitvcs/tree/master/clients/nautilus)
  * [Thunar](https://github.com/rabbitvcs/rabbitvcs/tree/master/clients/thunar)
  * [Nemo](https://github.com/rabbitvcs/rabbitvcs/tree/master/clients/nemo)
  * [Caja](https://github.com/rabbitvcs/rabbitvcs/tree/master/clients/caja)
  * [Command Line](https://github.com/rabbitvcs/rabbitvcs/tree/master/clients/cli)
 
-We have some others as well that are either incomplete, experimental, or non-working.  [Check them out!](https://github.com/rabbitvcs/rabbitvcs/tree/master/clients)
+We have some others as well that are either incomplete, experimental
+or non-working.
+[Check them out!](https://github.com/rabbitvcs/rabbitvcs/tree/master/clients)
 
 
 Upgrade
---------------
-To upgrade an existing version manually, copy the contents of the repository to the rabbitvcs lib folder.
-Most likely it is located at `/usr/lib/pymodules/python2.7/rabbitvcs`. In case of Debian-based distros this is will be `/usr/lib/python2.7/dist-packages/rabbitvcs`.  For Fedora-based distros on 64-bit make sure to check `/usr/lib64`.
+-------
+To upgrade an existing version manually, copy the contents of the repository
+to the rabbitvcs lib folder. Most likely it is located at
+`/usr/lib/pymodules/python2.7/rabbitvcs`. In case of Debian-based distros this
+is will be `/usr/lib/python2.7/dist-packages/rabbitvcs`.
+For Fedora-based distros on 64-bit make sure to check `/usr/lib64`.
 
 
 References
diff -uNr rabbitvcs-0.17.1/clients/caja/RabbitVCS.py rabbitvcs/clients/caja/RabbitVCS.py
--- rabbitvcs-0.17.1/clients/caja/RabbitVCS.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/caja/RabbitVCS.py	2019-09-13 08:36:17.237342674 +0800
@@ -29,7 +29,6 @@
 """
 from __future__ import with_statement
 from __future__ import absolute_import
-import six
 from six.moves import range
 
 def log_all_exceptions(type, value, tb):
@@ -60,14 +59,17 @@
 
 import os
 # Do NOT change this to "CAJA". RabbitVCS has an internal reference to this name.
-os.environ["NAUTILUS_PYTHON_REQUIRE_GTK3"] = "1"
+os.environ["REQUIRE_GTK3"] = "1"
 
 import os.path
-from os.path import isdir, isfile, realpath, basename
+from os.path import isdir, isfile, realpath, basename, dirname
 import datetime
 
-#import matevfs
+from rabbitvcs.util import helper
+
+sa = helper.SanitizeArgv()
 from gi.repository import Caja, GObject, Gtk, GdkPixbuf
+sa.restore()
 
 import pysvn
 
@@ -77,11 +79,14 @@
 from rabbitvcs.util.helper import launch_ui_window, launch_diff_tool
 from rabbitvcs.util.helper import get_file_extension, get_common_directory
 from rabbitvcs.util.helper import pretty_timedelta
+from rabbitvcs.util.helper import unquote_url
 
 from rabbitvcs.util.decorators import timeit, disable
 
 from rabbitvcs.util.contextmenu import MenuBuilder, MainContextMenu, SEPARATOR, ContextMenuConditions
 
+from rabbitvcs.util.strings import S
+
 import rabbitvcs.ui
 import rabbitvcs.ui.property_page
 
@@ -137,9 +142,14 @@
         factory = Gtk.IconFactory()
 
         rabbitvcs_icons = [
+            "scalable/actions/rabbitvcs-cancel.svg",
+            "scalable/actions/rabbitvcs-ok.svg",
+            "scalable/actions/rabbitvcs-no.svg",
+            "scalable/actions/rabbitvcs-yes.svg",
             "scalable/actions/rabbitvcs-settings.svg",
             "scalable/actions/rabbitvcs-export.svg",
             "scalable/actions/rabbitvcs-properties.svg",
+            "scalable/actions/rabbitvcs-editprops.svg",
             "scalable/actions/rabbitvcs-show_log.svg",
             "scalable/actions/rabbitvcs-delete.svg",
             "scalable/actions/rabbitvcs-run.svg",
@@ -183,7 +193,7 @@
             "scalable/apps/rabbitvcs-small.svg",
             "16x16/actions/rabbitvcs-push.png"
         ]
-        
+
         rabbitvcs_icon_path = get_icon_path()
         for rel_icon_path in rabbitvcs_icons:
             icon_path = "%s/%s" % (rabbitvcs_icon_path, rel_icon_path)
@@ -195,16 +205,16 @@
             factory.add(root, iconset)
 
         factory.add_default()
-    
+
         # Create a global client we can use to do VCS related stuff
         self.vcs_client = VCS()
 
         self.status_checker = StatusChecker()
-        
+
         self.status_checker.assert_version(EXT_VERSION)
-        
+
         self.items_cache = {}
-        
+
     def get_columns(self):
         """
         Return all the columns we support.
@@ -259,12 +269,12 @@
         """
         enable_emblems = bool(int(settings.get("general", "enable_emblems")))
         enable_attrs = bool(int(settings.get("general", "enable_attributes")))
-        
+
         if not (enable_emblems or enable_attrs): return Caja.OperationResult.COMPLETE
-                
+
         if not self.valid_uri(item.get_uri()): return Caja.OperationResult.FAILED
-        
-        path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
+
+        path = unquote_url(self.get_local_path(item.get_uri()))
 
         # log.debug("update_file_info() called for %s" % path)
 
@@ -314,7 +324,7 @@
         # FIXME: when did this get disabled?
         if enable_attrs: self.update_columns(item, path, status)
         if enable_emblems: self.update_status(item, path, status)
-        
+
         return Caja.OperationResult.COMPLETE
 
     def update_columns(self, item, path, status):
@@ -348,7 +358,7 @@
         }
 
         for key, value in list(values.items()):
-            item.add_string_attribute(key, value)
+            item.add_string_attribute(key, value if not value is None else "")
 
     def update_status(self, item, path, status):
         if status.summary in rabbitvcs.ui.STATUS_EMBLEMS:
@@ -381,43 +391,45 @@
         paths = []
         for item in items:
             if self.valid_uri(item.get_uri()):
-                path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
+                path = unquote_url(self.get_local_path(item.get_uri()))
                 paths.append(path)
                 self.nautilusVFSFile_table[path] = item
 
         if len(paths) == 0: return []
-        
+
         # log.debug("get_file_items_full() called")
 
         paths_str = "-".join(paths)
-        
+        base_dir = dirname(paths[0])
+
         conditions_dict = None
         if paths_str in self.items_cache:
             conditions_dict = self.items_cache[paths_str]
             if conditions_dict and conditions_dict != "in-progress":
                 conditions = CajaMenuConditions(conditions_dict)
-                menu = CajaMainContextMenu(self, window.base_dir, paths, conditions).get_menu()
+                menu = CajaMainContextMenu(self, base_dir, paths, conditions).get_menu()
                 return menu
-        
+
         if conditions_dict != "in-progress":
-            self.status_checker.generate_menu_conditions_async(provider, window.base_dir, paths, self.update_file_items)        
+            self.status_checker.generate_menu_conditions_async(provider, base_dir, paths, self.update_file_items)
             self.items_cache[path] = "in-progress"
-            
+
         return ()
 
     def get_file_items(self, window, items):
         paths = []
         for item in items:
             if self.valid_uri(item.get_uri()):
-                path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
+                path = unquote_url(self.get_local_path(item.get_uri()))
                 paths.append(path)
                 self.nautilusVFSFile_table[path] = item
 
         if len(paths) == 0: return []
-        
+
         # log.debug("get_file_items() called")
-        
-        return CajaMainContextMenu(self, window.base_dir, paths).get_menu()
+
+        base_dir = dirname(paths[0])
+        return CajaMainContextMenu(self, base_dir, paths).get_menu()
 
     def update_file_items(self, provider, base_dir, paths, conditions_dict):
         paths_str = "-".join(paths)
@@ -426,24 +438,22 @@
 
     #~ @disable
     # This is useful for profiling. Rename it to "get_background_items" and then
-    # rename the real function "get_background_items_real". 
+    # rename the real function "get_background_items_real".
     def get_background_items_profile(self, window, item):
         import cProfile
-        import rabbitvcs.util.helper
-        
-        path = six.text_type(gnomevfs.get_local_path_from_uri(item.get_uri()),
-                       "utf-8").replace("/", ":")
-        
+
+        path = S(gnomevfs.get_local_path_from_uri(item.get_uri())).replace("/", ":")
+
         profile_data_file = os.path.join(
-                               rabbitvcs.util.helper.get_home_folder(),
+                               helper.get_home_folder(),
                                "checkerservice_%s.stats" % path)
-        
+
         prof = cProfile.Profile()
         retval = prof.runcall(self.get_background_items_real, window, item)
         prof.dump_stats(profile_data_file)
         log.debug("Dumped: %s" % profile_data_file)
         return retval
-       
+
     def get_background_items_full(self, provider, window, item):
         """
         Menu activated on entering a directory. Builds context menu for File
@@ -461,7 +471,7 @@
         """
 
         if not self.valid_uri(item.get_uri()): return
-        path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
+        path = unquote_url(self.get_local_path(item.get_uri()))
         self.nautilusVFSFile_table[path] = item
 
         # log.debug("get_background_items_full() called")
@@ -471,26 +481,22 @@
             conditions_dict = self.items_cache[path]
             if conditions_dict and conditions_dict != "in-progress":
                 conditions = CajaMenuConditions(conditions_dict)
-                menu = CajaMainContextMenu(self, path, [path], conditions).get_menu()                
+                menu = CajaMainContextMenu(self, path, [path], conditions).get_menu()
                 return menu
 
-        window.base_dir = path
-
         if conditions_dict != "in-progress":
             self.status_checker.generate_menu_conditions_async(provider, path, [path], self.update_background_items)
             self.items_cache[path] = "in-progress"
-                    
+
         return ()
 
     def get_background_items(self, window, item):
         if not self.valid_uri(item.get_uri()): return
-        path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
+        path = unquote_url(self.get_local_path(item.get_uri()))
         self.nautilusVFSFile_table[path] = item
 
         # log.debug("get_background_items() called")
-        
-        window.base_dir = path
-        
+
         return CajaMainContextMenu(self, path, [path]).get_menu()
 
     def update_background_items(self, provider, base_dir, paths, conditions_dict):
@@ -620,8 +626,8 @@
 
         for item in items:
             if self.valid_uri(item.get_uri()):
-                path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
-                
+                path = unquote_url(self.get_local_path(item.get_uri()))
+
                 if self.vcs_client.is_in_a_or_a_working_copy(path):
                     paths.append(path)
                     self.nautilusVFSFile_table[path] = item
diff -uNr rabbitvcs-0.17.1/clients/cli/rabbitvcs rabbitvcs/clients/cli/rabbitvcs
--- rabbitvcs-0.17.1/clients/cli/rabbitvcs	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/cli/rabbitvcs	2019-09-13 08:36:17.237342674 +0800
@@ -1,4 +1,4 @@
-#!/usr/bin/env python
+#!/usr/bin/env python3
 
 #
 # This is a command line tool to allow better 
@@ -26,7 +26,12 @@
 
 from rabbitvcs.util.helper import launch_ui_window
 
-usage = """Usage: rabbitvcs <module> [path1] [path2] ...
+from rabbitvcs.util._locale import initialize_locale
+from rabbitvcs import gettext
+_ = gettext.gettext
+
+initialize_locale()
+usage = _("""Usage: rabbitvcs <module> [path1] [path2] ...
 
 Available Modules
 ------------------
@@ -34,8 +39,8 @@
 SVN:
     about, add, annotate, applypatch, branch, browser, changes, checkmods, 
     checkout, cleanup, commit, createpatch, create, delete, diff, editconflicts,
-    export, ignore, import, lock, log, merge, properties, open, relocate, rename, 
-    markresolved, revert, settings, switch, unlock, update, updateto
+    export, ignore, import, lock, log, merge, properties, open, relocate,
+    rename, markresolved, revert, settings, switch, unlock, update, updateto
 
 Git:
     about, add, annotate, applybranch, branches, changes, checkout, clean, 
@@ -44,7 +49,7 @@
     tags, update
 
 For module specific help type: rabbitvcs <module> -h
-"""
+""")
 
 args = sys.argv
 
diff -uNr rabbitvcs-0.17.1/clients/dolphin/rabbitvcs_svn_actionmenu_directory.desktop rabbitvcs/clients/dolphin/rabbitvcs_svn_actionmenu_directory.desktop
--- rabbitvcs-0.17.1/clients/dolphin/rabbitvcs_svn_actionmenu_directory.desktop	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/dolphin/rabbitvcs_svn_actionmenu_directory.desktop	1970-01-01 08:00:00.000000000 +0800
@@ -1,125 +0,0 @@
-[Desktop Entry]
-Type=Service
-ServiceTypes=KonqPopupMenu/Plugin,inode/directory
-X-KDE-Submenu=RabbitVCS
-
-X-KDE-GetActionMenu=org.kde.kded getActionMenu
-Actions=Log;Annotate;Add;ApplyPatch;CompareChanges;BranchTag;Browser;CheckMods;Checkout;Clean;Commit;CreatePatch;Create;Diff;
-
-[Desktop RabbitVCS Log]
-Name=Show log
-Name[de]=Zeige Log
-Name[pl]=Pokaz Log
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-show_log.svg
-Exec=rabbitvcs log %U
-Comment=Displays the subversion log
-Comment[de]=Zeigt die Subversion Historie
-Comment[de]=Pokazuje Historje Subversion
-
-[Desktop Action Add]
-Name=Add to Repository...
-Name[de]=Zu Repository hinzufuegen...
-Name[pl]=Dodaj to repository...
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-add.svg
-Exec=rabbitvcs add %U
-
-
-[Desktop Action ApplyPatch]
-Name=Apply patch...
-Name[de]=Patch anwenden...
-Name[pl]=Zastosuj Patch...
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-applypatch.svg
-Exec=rabbitvcs applypatch %U
-
-
-[Desktop Action CompareChanges]
-Name=Compare changes
-Name[de]=Vergleiche Aenderungen
-Name[pl]=Porownaj zmiany
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-compare.svg
-Exec=rabbitvcs changes %U
-
-
-[Desktop Action BranchTag]
-Name=Branch/tag
-Name[de]=Verzweige/markiere
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-branch.svg
-Exec=rabbitvcs branch %U
-
-
-
-[Desktop Action Browser]
-Name=Open Repository Browser
-Name[de]=Oeffne Repository Browser
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-about.svg
-Exec=rabbitvcs browser %U
-
-
-
-[Desktop Action CheckMods]
-Name=Check for modifications
-Name[de]=Pruefe auf Aenderungen
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-checkmods.svg
-Exec=rabbitvcs checkmods %U
-
-
-
-[Desktop Action Checkout]
-Name=Checkout
-Name[de]=Checke aus
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-checkout.svg
-Exec=rabbitvcs checkout %U
-
-
-
-[Desktop Action Clean]
-Name=Clean...
-Name[de]=Raeume auf...
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-cleanup.svg
-Exec=rabbitvcs clean %U
-
-
-
-[Desktop Action Commit]
-Name=Commit...
-Name[de]=Committe...
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-commit.svg
-Exec=rabbitvcs commit %U
-
-
-
-[Desktop Action CreatePatch]
-Name=Create Patch
-Name[de]=Erstelle Patch
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-createpatch.svg
-Exec=rabbitvcs createpatch %U
-
-
-
-[Desktop Action Create]
-Name=Create new SVN repository here
-Name[de]=Erstelle hier ein neues SVN Repository
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-about.svg
-Exec=rabbitvcs create --vcs=svn %U
-
-# Skip delete because it has no confirmation dialog!
-
-
-[Desktop Action Diff]
-Name=Show differences
-Name[de]=Zeige Unterschiede
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-diff.svg
-Exec=rabbitvcs diff -s %U
diff -uNr rabbitvcs-0.17.1/clients/dolphin/rabbitvcs_svn_actionmenu_file.desktop rabbitvcs/clients/dolphin/rabbitvcs_svn_actionmenu_file.desktop
--- rabbitvcs-0.17.1/clients/dolphin/rabbitvcs_svn_actionmenu_file.desktop	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/dolphin/rabbitvcs_svn_actionmenu_file.desktop	1970-01-01 08:00:00.000000000 +0800
@@ -1,38 +0,0 @@
-[Desktop Entry]
-Type=Service
-ServiceTypes=KonqPopupMenu/Plugin,all/allfiles
-X-KDE-Submenu=Subversion (RabbitVCS)
-
-X-KDE-GetActionMenu=org.kde.kded getActionMenu
-Actions=Log;Annotate;AddSelected;
-
-
-[Desktop Action Annotate]
-Name=Annotate
-Name[de]=Annotieren
-Name[pl]=Anotuj
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-annotate.svg
-Exec=rabbitvcs annotate %F
-
-
-[Desktop Action LogSelected]
-Name=Show log
-Name[de]=Zeige Log
-Name[pl]=Pokaz Log
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-show_log.svg
-Exec=rabbitvcs log %F
-Comment=Displays the subversion log for selection
-Comment[de]=Zeigt die Subversion Historie fuer die Auswahl an
-Comment[de]=Pokazuje Historje Subversion dla wyboru
-
-[Desktop Action AddSelected]
-Name=Add selection to Repository
-Name[de]=Auswahl zu Repository hinzufuegen
-Name[pl]=Dodaj selekcje to repository
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-add.svg
-Exec=rabbitvcs add %F
-
-
diff -uNr rabbitvcs-0.17.1/clients/dolphin/rabbitvcs_svn_submenu_directory.desktop rabbitvcs/clients/dolphin/rabbitvcs_svn_submenu_directory.desktop
--- rabbitvcs-0.17.1/clients/dolphin/rabbitvcs_svn_submenu_directory.desktop	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/clients/dolphin/rabbitvcs_svn_submenu_directory.desktop	2019-09-13 08:36:17.237342674 +0800
@@ -0,0 +1,219 @@
+[Desktop Entry]
+Type=Service
+ServiceTypes=KonqPopupMenu/Plugin,inode/directory
+Actions=Update;Commit;Checkout;_SEPARATOR_;Log;Browser;CheckMods;_SEPARATOR_;Resolve;UpdateToRev;Rename;Delete;Revert;CleanUp;GetLock;ReleaseLock;_SEPARATOR_;BranchTag;Switch;Merge;Export;Relocate;_SEPARATOR_;CreatePatch;ApplyPatch;Properties;_SEPARATOR_;CreateRepo;Add;Import;Ignore;_SEPARATOR_;Settings;About;
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs.svg
+
+X-KDE-Priority=TopLevel
+X-KDE-Submenu=RabbitVCS (SVN)
+
+[Desktop Action Update]
+Name=Update
+Name[de]=Aktualisieren
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-update.svg
+Exec=rabbitvcs update %U
+
+[Desktop Action Commit]
+Name=Commit...
+Name[de]=Committen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-commit.svg
+Exec=rabbitvcs commit %U
+
+[Desktop Action Checkout]
+Name=Checkout...
+Name[de]=Auschecken …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-checkout.svg
+Exec=rabbitvcs checkout
+
+# SEPARATOR
+
+[Desktop Action Log]
+Name=Show log
+Name[de]=Historie anzeigen
+Name[pl]=Pokaz Log
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-show_log.svg
+Exec=rabbitvcs log %U
+
+[Desktop Action Browser]
+Name=Repo-browser
+Name[de]=Repository-Browser
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-drive.svg
+Exec=rabbitvcs browser %U
+
+[Desktop Action CheckMods]
+Name=Check for modifications
+Name[de]=Auf Änderungen prüfen
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-checkmods.svg
+Exec=rabbitvcs checkmods %U
+
+# SEPARATOR
+
+[Desktop Action Resolve]
+Name=Resolve...
+Name[de]=Konflikte lösen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-resolve.svg
+Exec=rabbitvcs editconflicts %U
+
+[Desktop Action UpdateToRev]
+Name=Update to revision...
+Name[de]=Auf Revision aktualisieren …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-update.svg
+Exec=rabbitvcs updateto %U
+
+[Desktop Action Rename]
+Name=Rename...
+Name[de]=Umbenennen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-rename.svg
+Exec=rabbitvcs rename %U
+
+[Desktop Action Delete]
+Name=Delete
+Name[de]=Löschen
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-delete.svg
+Exec=rabbitvcs delete %U
+
+[Desktop Action Revert]
+Name=Revert...
+Name[de]=Rückgängig machen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-revert.svg
+Exec=rabbitvcs revert %U
+
+[Desktop Action CleanUp]
+Name=Clean up...
+Name[de]=Aufräumen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-cleanup.svg
+Exec=rabbitvcs cleanup %U
+
+[Desktop Action GetLock]
+Name=Get lock...
+Name[de]=Sperren …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-lock.svg
+Exec=rabbitvcs lock %U
+
+[Desktop Action ReleaseLock]
+Name=Release lock...
+Name[de]=Sperrung aufheben …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-unlock.svg
+Exec=rabbitvcs unlock %U
+
+# SEPARATOR
+
+[Desktop Action BranchTag]
+Name=Branch/tag...
+Name[de]=Verzweigen/markieren …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-branch.svg
+Exec=rabbitvcs branch %U
+
+[Desktop Action Switch]
+Name=Switch...
+Name[de]=Wechseln …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-switch.svg
+Exec=rabbitvcs switch %U
+
+[Desktop Action Merge]
+Name=Merge...
+Name[de]=Zusammenführen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-merge.svg
+Exec=rabbitvcs merge %U
+
+[Desktop Action Export]
+Name=Export...
+Name[de]=Exportieren …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-export.svg
+Exec=rabbitvcs export %U
+
+[Desktop Action Relocate]
+Name=Relocate...
+Name[de]=Verschieben …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-relocate.svg
+Exec=rabbitvcs relocate %U
+
+# SEPARATOR
+
+[Desktop Action CreatePatch]
+Name=Create patch...
+Name[de]=Patch erstellen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-createpatch.svg
+Exec=rabbitvcs createpatch %U
+
+[Desktop Action ApplyPatch]
+Name=Apply patch...
+Name[de]=Patch anwenden …
+Name[pl]=Zastosuj Patch...
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-applypatch.svg
+Exec=rabbitvcs applypatch %U
+
+[Desktop Action Properties]
+Name=Properties
+Name[de]=Eigenschaften
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-properties.svg
+Exec=rabbitvcs properties %U
+
+# SEPARATOR
+
+[Desktop Action CreateRepo]
+Name=Create repository here
+Name[de]=Hier ein Repository erstellen
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-drive.svg
+Exec=rabbitvcs properties %U
+
+[Desktop Action Add]
+Name=Add...
+Name[de]=Hinzufuegen …
+Name[pl]=Dodaj...
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-add.svg
+Exec=rabbitvcs add %U
+
+[Desktop Action Import]
+Name=Import...
+Name[de]=Importieren …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-import.svg
+Exec=rabbitvcs import %U
+
+[Desktop Action Ignore]
+Name=Add to ignore list
+Name[de]=Zur Ignorierliste hinzufügen
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-ignore.svg
+Exec=rabbitvcs ignore %U
+
+# SEPARATOR
+
+[Desktop Action Settings]
+Name=Settings
+Name[de]=Einstellungen
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-settings.svg
+Exec=rabbitvcs settings
+
+[Desktop Action About]
+Name=About
+Name[de]=Über
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-about.svg
+Exec=rabbitvcs about
diff -uNr rabbitvcs-0.17.1/clients/dolphin/rabbitvcs_svn_submenu_file.desktop rabbitvcs/clients/dolphin/rabbitvcs_svn_submenu_file.desktop
--- rabbitvcs-0.17.1/clients/dolphin/rabbitvcs_svn_submenu_file.desktop	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/clients/dolphin/rabbitvcs_svn_submenu_file.desktop	2019-09-13 08:36:17.237342674 +0800
@@ -0,0 +1,169 @@
+[Desktop Entry]
+Type=Service
+ServiceTypes=KonqPopupMenu/Plugin,application/octet-stream
+Actions=Update;Commit;_SEPARATOR_;Log;Browser;CheckMods;_SEPARATOR_;Resolve;UpdateToRev;Rename;Delete;Revert;GetLock;ReleaseLock;_SEPARATOR_;BranchTag;Switch;Merge;_SEPARATOR_;CreatePatch;Properties;_SEPARATOR_;Add;Ignore;_SEPARATOR_;Settings;About;
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs.svg
+
+X-KDE-Priority=TopLevel
+X-KDE-Submenu=RabbitVCS (SVN)
+
+[Desktop Action Update]
+Name=Update
+Name[de]=Aktualisieren
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-update.svg
+Exec=rabbitvcs update %U
+
+[Desktop Action Commit]
+Name=Commit...
+Name[de]=Committen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-commit.svg
+Exec=rabbitvcs commit %U
+
+# SEPARATOR
+
+[Desktop Action Log]
+Name=Show log
+Name[de]=Historie anzeigen
+Name[pl]=Pokaz Log
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-show_log.svg
+Exec=rabbitvcs log %U
+
+[Desktop Action Browser]
+Name=Repo-browser
+Name[de]=Repository-Browser
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-drive.svg
+Exec=rabbitvcs browser %U
+
+[Desktop Action CheckMods]
+Name=Check for modifications
+Name[de]=Auf Änderungen prüfen
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-checkmods.svg
+Exec=rabbitvcs checkmods %U
+
+# SEPARATOR
+
+[Desktop Action Resolve]
+Name=Resolve...
+Name[de]=Konflikte lösen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-resolve.svg
+Exec=rabbitvcs editconflicts %U
+
+[Desktop Action UpdateToRev]
+Name=Update to revision...
+Name[de]=Auf Revision aktualisieren …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-update.svg
+Exec=rabbitvcs updateto %U
+
+[Desktop Action Rename]
+Name=Rename...
+Name[de]=Umbenennen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-rename.svg
+Exec=rabbitvcs rename %U
+
+[Desktop Action Delete]
+Name=Delete
+Name[de]=Löschen
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-delete.svg
+Exec=rabbitvcs delete %U
+
+[Desktop Action Revert]
+Name=Revert...
+Name[de]=Rückgängig machen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-revert.svg
+Exec=rabbitvcs revert %U
+
+[Desktop Action GetLock]
+Name=Get lock...
+Name[de]=Sperren …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-lock.svg
+Exec=rabbitvcs lock %U
+
+[Desktop Action ReleaseLock]
+Name=Release lock...
+Name[de]=Sperrung aufheben …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-unlock.svg
+Exec=rabbitvcs unlock %U
+
+# SEPARATOR
+
+[Desktop Action BranchTag]
+Name=Branch/tag...
+Name[de]=Verzweigen/markieren …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-branch.svg
+Exec=rabbitvcs branch %U
+
+[Desktop Action Switch]
+Name=Switch...
+Name[de]=Wechseln …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-switch.svg
+Exec=rabbitvcs switch %U
+
+[Desktop Action Merge]
+Name=Merge...
+Name[de]=Zusammenführen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-merge.svg
+Exec=rabbitvcs merge %U
+
+# SEPARATOR
+
+[Desktop Action CreatePatch]
+Name=Create patch...
+Name[de]=Patch erstellen …
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-createpatch.svg
+Exec=rabbitvcs createpatch %U
+
+[Desktop Action Properties]
+Name=Properties
+Name[de]=Eigenschaften
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-properties.svg
+Exec=rabbitvcs properties %U
+
+# SEPARATOR
+
+[Desktop Action Add]
+Name=Add...
+Name[de]=Hinzufuegen …
+Name[pl]=Dodaj...
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-add.svg
+Exec=rabbitvcs add %U
+
+[Desktop Action Ignore]
+Name=Add to ignore list
+Name[de]=Zur Ignorierliste hinzufügen
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-ignore.svg
+Exec=rabbitvcs ignore %U
+
+# SEPARATOR
+
+[Desktop Action Settings]
+Name=Settings
+Name[de]=Einstellungen
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-settings.svg
+Exec=rabbitvcs settings
+
+[Desktop Action About]
+Name=About
+Name[de]=Über
+
+Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-about.svg
+Exec=rabbitvcs about
diff -uNr rabbitvcs-0.17.1/clients/dolphin/rabbitvcs_svn_toplevel.desktop rabbitvcs/clients/dolphin/rabbitvcs_svn_toplevel.desktop
--- rabbitvcs-0.17.1/clients/dolphin/rabbitvcs_svn_toplevel.desktop	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/dolphin/rabbitvcs_svn_toplevel.desktop	1970-01-01 08:00:00.000000000 +0800
@@ -1,22 +0,0 @@
-[Desktop Entry]
-Type=Service
-ServiceTypes=KonqPopupMenu/Plugin,inode/directory,all/all,all/allfiles
-X-KDE-Priority=TopLevel
-
-X-KDE-GetActionMenu=org.kde.kded getTopLevelActionMenu
-Actions=Log;
-
-
-[Desktop Action Log]
-Name=Subversion Log (RabbitVCS)
-Name[de]=Subversion Log (RabbitVCS)
-Name[pl]=Subversion Log (RabbitVCS)
-
-Icon=/usr/share/icons/hicolor/scalable/actions/rabbitvcs-show_log.svg
-Exec=rabbitvcs log %U
-Comment=Displays the subversion log
-Comment[de]=Zeigt die Subversion Historie
-Comment[de]=Pokazuje Historje Subversion
-
-
-
diff -uNr rabbitvcs-0.17.1/clients/gedit/rabbitvcs-plugin.py rabbitvcs/clients/gedit/rabbitvcs-plugin.py
--- rabbitvcs-0.17.1/clients/gedit/rabbitvcs-plugin.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/gedit/rabbitvcs-plugin.py	2019-09-13 08:36:17.237342674 +0800
@@ -2,19 +2,19 @@
 #
 # This is a Gedit plugin to allow for RabbitVCS integration in the Gedit
 # text editor.
-# 
+#
 # Copyright (C) 2008-2011 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -26,7 +26,7 @@
 try:
     from gi.repository import Gedit, GObject
     from gi.repository import Gtk as gtk
-    os.environ["NAUTILUS_PYTHON_REQUIRE_GTK3"] = "1"
+    os.environ["REQUIRE_GTK3"] = "1"
     GTK3 = True
 except ImportError:
     import gedit
@@ -239,7 +239,7 @@
         self.base_dir = self._default_base_dir
         self._menubar_menu = None
         self._menu_action = None
-        
+
         self.vcs_client = create_vcs_instance()
 
         # Insert menu items
@@ -261,7 +261,7 @@
 
         self._menubar_menu = GeditMenu(self, self.vcs_client, self.base_dir, [self._get_document_path()])
         self._menu_action = gtk.Action( name="RabbitVCSMenu", label="RabbitVCS", tooltip="Excellent Version Control for Linux", stock_id=None )
-        
+
         self._action_group = gtk.ActionGroup("RabbitVCSActions")
         self._action_group = self._menubar_menu.get_action_group(self._action_group)
         self._action_group.add_action( self._menu_action )
@@ -287,7 +287,7 @@
 
     def update_ui(self):
         self.update_base_dir()
-        
+
         document = self._window.get_active_document()
         self._action_group.set_sensitive(document != None)
         if document != None:
@@ -302,7 +302,7 @@
 
     def disconnect_view(self, view, id_name):
         view.disconnect(view.get_data(id_name)[0])
-        
+
     def on_view_populate_popup(self, view, menu):
         separator = gtk.SeparatorMenuItem()
         menu.append(separator)
@@ -315,7 +315,7 @@
     def _get_document_path(self):
         document = self._window.get_active_document()
         path = self.base_dir
-        
+
         if document:
             tmp_path = document.get_uri_for_display()
             if os.path.exists(tmp_path):
@@ -336,7 +336,7 @@
 
     def _determine_menu_sensitivity(self, paths):
         self._menubar_menu.update_conditions(paths)
-        
+
         manager = self._window.get_ui_manager()
         for menu_path in self._menu_paths:
             # Gtk3 changes how we access a widget's action.  Get it from the
@@ -360,7 +360,7 @@
     class RabbitVCSGedit3Plugin(GObject.Object, Gedit.WindowActivatable):
         __gtype_name__ = "RabbitVCSGedit3Plugin"
         window = GObject.property(type=Gedit.Window)
-        
+
         def __init__(self):
             GObject.Object.__init__(self)
             self._instances = {}
@@ -373,7 +373,7 @@
             for signal in ('tab-added', 'tab-removed'):
                 method = getattr(self, 'on_window_' + signal.replace('-', '_'))
                 handler_ids.append(self.window.connect(signal, method))
-            
+
             self.window.set_data(self.id_name, handler_ids)
             if self.window in self._instances:
                 for view in self.window.get_views():
@@ -402,7 +402,7 @@
         def on_window_tab_added(self, window, tab):
             if self.window in self._instances:
                 self._instances[self.window].connect_view(tab.get_view(), self.id_name)
-        
+
         def on_window_tab_removed(self, window, tab):
             if window in self._instances:
                 self._instances[self.window].disconnect_view(tab.get_view(), self.id_name)
@@ -420,7 +420,7 @@
             for signal in ('tab-added', 'tab-removed'):
                 method = getattr(self, 'on_window_' + signal.replace('-', '_'))
                 handler_ids.append(window.connect(signal, method))
-            
+
             window.set_data(self.id_name, handler_ids)
             if window in self._instances:
                 for view in window.get_views():
@@ -446,7 +446,7 @@
         def on_window_tab_added(self, window, tab):
             if window in self._instances:
                 self._instances[window].connect_view(tab.get_view(), self.id_name)
-        
+
         def on_window_tab_removed(self, window, tab):
             if window in self._instances:
                 self._instances[window].disconnect_view(tab.get_view(), self.id_name)
@@ -464,35 +464,35 @@
 class GeditMenuBuilder(object):
     """
     Generalised menu builder class. Subclasses must provide:
-    
+
     make_menu_item(self, item, id_magic) - create the menu item for whatever
     toolkit (usually this should be just call a  convenience method on the
     MenuItem instance).
-    
+
     attach_submenu(self, menu_node, submenu_list) - given a list of whatever
     make_menu_item(...) returns, create a submenu and attach it to the given
     node.
-    
+
     top_level_menu(self, items) - in some circumstances we need to treat the top
     level menu differently (eg. Nautilus, because Xenu said so). This processes
     a list of menu items returned by make_menu_item(...) to create the overall
-    menu.  
+    menu.
     """
-    
+
     def __init__(self, structure, conditions, callbacks, action_group):
         """
         @param  structure: Menu structure
         @type   structure: list
-                
-        Note on "structure". The menu structure is defined in a list of tuples 
+
+        Note on "structure". The menu structure is defined in a list of tuples
         of two elements each.  The first element is a class - the MenuItem
         subclass that defines the menu interface (see below).
-        
+
         The second element is either None (if there is no submenu) or a list of
-        tuples if there is a submenu.  The submenus are generated recursively. 
+        tuples if there is a submenu.  The submenus are generated recursively.
         FYI, this is a list of tuples so that we retain the desired menu item
         order (dicts do not retain order)
-        
+
             Example:
             [
                 (MenuClassOne, [
@@ -502,78 +502,78 @@
                 (MenuClassTwo,
                 (MenuClassThree
             ]
-            
+
         """
 
         self.action_group = action_group
 
         for item_class in structure:
-            
+
             item = item_class(conditions, callbacks)
 
-            default_name = MenuItem.make_default_name(item.identifier)            
+            default_name = MenuItem.make_default_name(item.identifier)
             action = RabbitVCSAction(item.identifier, item.label, item.tooltip, item.icon)
 
             if item.icon and hasattr(action, "set_icon_name"):
                 action.set_icon_name(item.icon)
-           
+
             if item.callback:
                 if item.callback_args:
                     action.connect("activate", item.callback, item.callback_args)
                 else:
                     action.connect("activate", item.callback)
-            
+
             action.set_property("visible", item.show())
-            
+
             action.set_data("item", item)
-             
+
             self.action_group.add_action(action)
 
     def _get_function(self, object, name):
-        
+
         function = None
-        
+
         if hasattr(object, name):
-            
+
             attr = getattr(object, name)
             if callable(attr):
                 function = attr
-        
+
         return function
-        
+
 class GeditMenu:
     def __init__(self, caller, vcs_client, base_dir, paths):
-        """    
+        """
         @param  caller: The calling object
         @type   caller: RabbitVCS extension
-        
+
         @param  vcs_client: The vcs client
         @type   vcs_client: rabbitvcs.vcs
-        
+
         @param  base_dir: The curent working directory
         @type   base_dir: string
-        
+
         @param  paths: The selected paths
         @type   paths: list
-        
+
         @param  conditions: The conditions class that determines menu item visibility
         @kind   conditions: ContextMenuConditions
-        
+
         @param  callbacks: The callbacks class that determines what actions are taken
         @kind   callbacks: ContextMenuCallbacks
-        
-        """        
+
+        """
         self.caller = caller
         self.paths = paths
         self.base_dir = base_dir
         self.vcs_client = vcs_client
-        
+
         self.conditions = GtkFilesContextMenuConditions(self.vcs_client, self.paths)
 
         self.callbacks = GtkFilesContextMenuCallbacks(
-            self.caller, 
+            self.caller,
             self.base_dir,
-            self.vcs_client, 
+            self.vcs_client,
             self.paths
         )
 
@@ -587,7 +587,7 @@
             MenuInitializeRepository,
             MenuClone,
             MenuRabbitVCS,
-            MenuDiffMenu, 
+            MenuDiffMenu,
             MenuDiff,
             MenuDiffPrevRev,
             MenuDiffMultiple,
@@ -601,7 +601,7 @@
             MenuAdd,
             MenuStage,
             MenuUnstage,
-            MenuAddToIgnoreList, 
+            MenuAddToIgnoreList,
             MenuUpdateToRevision,
             MenuRename,
             MenuDelete,
@@ -646,11 +646,11 @@
 
     def get_action_group(self, action_group):
         return GeditMenuBuilder(self.structure, self.conditions, self.callbacks, action_group).action_group
-    
+
     def update_conditions(self, paths):
         self.conditions.generate_statuses(paths)
         self.conditions.generate_path_dict(paths)
-    
+
     def update_action(self, action):
         action.set_property("visible", action.get_data("item").show())
 
@@ -661,44 +661,44 @@
     """
 
     signal = "activate"
-        
+
     def make_menu_item(self, item, id_magic):
         if GTK3:
             return item.make_gtk3_menu_item(id_magic)
         else:
             return item.make_gtk_menu_item(id_magic)
-    
+
     def attach_submenu(self, menu_node, submenu_list):
         submenu = gtk.Menu()
         menu_node.set_submenu(submenu)
         [submenu.append(item) for item in submenu_list]
-    
+
     def top_level_menu(self, items):
         return items
 
 class GeditMainContextMenu(MainContextMenu):
-    def __init__(self, caller, vcs_client, base_dir, paths=[], 
+    def __init__(self, caller, vcs_client, base_dir, paths=[],
             conditions=None, callbacks=None):
-        """    
+        """
         @param  caller: The calling object
         @type   caller: RabbitVCS extension
-        
+
         @param  vcs_client: The vcs client
         @type   vcs_client: rabbitvcs.vcs
-        
+
         @param  base_dir: The curent working directory
         @type   base_dir: string
-        
+
         @param  paths: The selected paths
         @type   paths: list
-        
+
         @param  conditions: The conditions class that determines menu item visibility
         @kind   conditions: ContextMenuConditions
-        
+
         @param  callbacks: The callbacks class that determines what actions are taken
         @kind   callbacks: ContextMenuCallbacks
-        
-        """        
+
+        """
         self.caller = caller
         self.paths = paths
         self.base_dir = base_dir
@@ -711,17 +711,17 @@
         self.callbacks = callbacks
         if self.callbacks is None:
             self.callbacks = MainContextMenuCallbacks(
-                self.caller, 
+                self.caller,
                 self.base_dir,
-                self.vcs_client, 
+                self.vcs_client,
                 paths
             )
-            
+
         ignore_items = get_ignore_list_items(paths)
 
         # The first element of each tuple is a key that matches a
         # ContextMenuItems item.  The second element is either None when there
-        # is no submenu, or a recursive list of tuples for desired submenus.        
+        # is no submenu, or a recursive list of tuples for desired submenus.
         self.structure = [
             (MenuUpdate, None),
             (MenuCommit, None),
@@ -814,6 +814,6 @@
                 (MenuAbout, None)
             ])
         ]
-        
+
     def get_menu(self):
         return GeditContextMenu(self.structure, self.conditions, self.callbacks).menu
diff -uNr rabbitvcs-0.17.1/clients/nautilus/README rabbitvcs/clients/nautilus/README
--- rabbitvcs-0.17.1/clients/nautilus/README	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/nautilus/README	2019-09-13 08:36:17.237342674 +0800
@@ -1,24 +1,21 @@
-RabbitVCS Nautilus Extension
+RabbitVCS Nautilus3 Extension
 
-This extension is meant to be used with the Nautilus File Manager,
+This extension is meant to be used with the Nautilus File Manager v3,
 
 Requirements:
-    * nautilus (>= v2.22.0)
-    * nautilus-python (>= 0.5.1)
+    * nautilus (>= v3.0)
+    * nautilus-python (>= 1.0)
     * python-dbus (> 0.80)
     * (all other RabbitVCS requirements)
 
 To install:
     To install for all users, copy RabbitVCS.py to:
-        /usr/lib/nautilus/extensions-2.0/python
+        /usr/share/nautilus-python/extensions
     
     To install for a single user, copy RabbitVCS.py to:
-        ~/.nautilus/python-extensions
-
-        If you are using nautilus-python >= 1.0 you should install to:
         ~/.local/share/nautilus-python/extensions
     
-    In both cases, you may need to create the python/python-extensions folder.
+    In both cases, you may need to create the nautilus-python/extensions folder.
     
     Restart nautilus with the following commands:
         $ nautilus -q
@@ -29,4 +26,4 @@
 
     See the known-issues section of our website:
         http://wiki.rabbitvcs.org/wiki/support/known-issues
-    
+    
\ No newline at end of file
diff -uNr rabbitvcs-0.17.1/clients/nautilus/RabbitVCS.py rabbitvcs/clients/nautilus/RabbitVCS.py
--- rabbitvcs-0.17.1/clients/nautilus/RabbitVCS.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/nautilus/RabbitVCS.py	2019-09-13 08:36:17.237342674 +0800
@@ -27,13 +27,12 @@
 """
 from __future__ import with_statement
 from __future__ import absolute_import
-import six
 from six.moves import range
 
 def log_all_exceptions(type, value, tb):
     import sys, traceback
     from rabbitvcs.util.log import Log
-    log = Log("rabbitvcs.util.extensions.nautilus.RabbitVCS")
+    log = Log("rabbitvcs.util.extensions.Nautilus.RabbitVCS")
     log.exception_info("Error caught by master exception hook!",
                        (type, value, tb))
 
@@ -55,15 +54,21 @@
 # sys.excepthook = log_all_exceptions
 
 import copy
+
+import os
+os.environ["REQUIRE_GTK3"] = "1"
+
 import os.path
-from os.path import isdir, isfile, realpath, basename
+from os.path import isdir, isfile, realpath, basename, dirname
 import datetime
 
-import gnomevfs
-import nautilus
+from rabbitvcs.util import helper
+
+sa = helper.SanitizeArgv()
+from gi.repository import Nautilus, GObject, Gtk, GdkPixbuf
+sa.restore()
+
 import pysvn
-import gobject
-import gtk
 
 from rabbitvcs.vcs import VCS
 import rabbitvcs.vcs.status
@@ -71,16 +76,21 @@
 from rabbitvcs.util.helper import launch_ui_window, launch_diff_tool
 from rabbitvcs.util.helper import get_file_extension, get_common_directory
 from rabbitvcs.util.helper import pretty_timedelta
+from rabbitvcs.util.helper import unquote_url
+
 from rabbitvcs.util.decorators import timeit, disable
+
 from rabbitvcs.util.contextmenu import MenuBuilder, MainContextMenu, SEPARATOR, ContextMenuConditions
 
+from rabbitvcs.util.strings import S
+
 import rabbitvcs.ui
 import rabbitvcs.ui.property_page
 
 from rabbitvcs.util.log import Log, reload_log_settings
-log = Log("rabbitvcs.util.extensions.nautilus.RabbitVCS")
+log = Log("rabbitvcs.util.extensions.Nautilus.RabbitVCS")
 
-from rabbitvcs import gettext
+from rabbitvcs import gettext, get_icon_path
 _ = gettext.gettext
 
 from rabbitvcs import version as EXT_VERSION
@@ -91,8 +101,8 @@
 import rabbitvcs.services.service
 from rabbitvcs.services.checkerservice import StatusCheckerStub as StatusChecker
 
-class RabbitVCS(nautilus.InfoProvider, nautilus.MenuProvider,
-                 nautilus.ColumnProvider, nautilus.PropertyPageProvider):
+class RabbitVCS(Nautilus.InfoProvider, Nautilus.MenuProvider,
+                 Nautilus.ColumnProvider, Nautilus.PropertyPageProvider, GObject.GObject):
     """
     This is the main class that implements all of our awesome features.
 
@@ -122,16 +132,86 @@
     #: use. This is of the form: [("path/to", {...status dict...}), ...]
     statuses_from_callback = []
 
+    def get_local_path(self, path):
+        return path.replace("file://", "")
+
     def __init__(self):
+        factory = Gtk.IconFactory()
+
+        rabbitvcs_icons = [
+            "scalable/actions/rabbitvcs-cancel.svg",
+            "scalable/actions/rabbitvcs-ok.svg",
+            "scalable/actions/rabbitvcs-no.svg",
+            "scalable/actions/rabbitvcs-yes.svg",
+            "scalable/actions/rabbitvcs-settings.svg",
+            "scalable/actions/rabbitvcs-export.svg",
+            "scalable/actions/rabbitvcs-properties.svg",
+            "scalable/actions/rabbitvcs-editprops.svg",
+            "scalable/actions/rabbitvcs-show_log.svg",
+            "scalable/actions/rabbitvcs-delete.svg",
+            "scalable/actions/rabbitvcs-run.svg",
+            "scalable/actions/rabbitvcs-unlock.svg",
+            "scalable/actions/rabbitvcs-dbus.svg",
+            "scalable/actions/rabbitvcs-rename.svg",
+            "scalable/actions/rabbitvcs-help.svg",
+            "scalable/actions/rabbitvcs-update.svg",
+            "scalable/actions/rabbitvcs-diff.svg",
+            "scalable/actions/rabbitvcs-resolve.svg",
+            "scalable/actions/rabbitvcs-about.svg",
+            "scalable/actions/rabbitvcs-add.svg",
+            "scalable/actions/rabbitvcs-changes.svg",
+            "scalable/actions/rabbitvcs-createpatch.svg",
+            "scalable/actions/rabbitvcs-merge.svg",
+            "scalable/actions/rabbitvcs-drive.svg",
+            "scalable/actions/rabbitvcs-stop.svg",
+            "scalable/actions/rabbitvcs-checkout.svg",
+            "scalable/actions/rabbitvcs-import.svg",
+            "scalable/actions/rabbitvcs-branch.svg",
+            "scalable/actions/rabbitvcs-refresh.svg",
+            "scalable/actions/rabbitvcs-editconflicts.svg",
+            "scalable/actions/rabbitvcs-monkey.svg",
+            "scalable/actions/rabbitvcs-applypatch.svg",
+            "scalable/actions/rabbitvcs-switch.svg",
+            "scalable/actions/rabbitvcs-lock.svg",
+            "scalable/actions/rabbitvcs-annotate.svg",
+            "scalable/actions/rabbitvcs-compare.svg",
+            "scalable/actions/rabbitvcs-revert.svg",
+            "scalable/actions/rabbitvcs-bug.svg",
+            "scalable/actions/rabbitvcs-cleanup.svg",
+            "scalable/actions/rabbitvcs-clear.svg",
+            "scalable/actions/rabbitvcs-unstage.svg",
+            "scalable/actions/rabbitvcs-emblems.svg",
+            "scalable/actions/rabbitvcs-relocate.svg",
+            "scalable/actions/rabbitvcs-reset.svg",
+            "scalable/actions/rabbitvcs-asynchronous.svg",
+            "scalable/actions/rabbitvcs-commit.svg",
+            "scalable/actions/rabbitvcs-checkmods.svg",
+            "scalable/apps/rabbitvcs.svg",
+            "scalable/apps/rabbitvcs-small.svg",
+            "16x16/actions/rabbitvcs-push.png"
+        ]
+
+        rabbitvcs_icon_path = get_icon_path()
+        for rel_icon_path in rabbitvcs_icons:
+            icon_path = "%s/%s" % (rabbitvcs_icon_path, rel_icon_path)
+            file = os.path.basename(rel_icon_path)
+            (root, ext) = os.path.splitext(file)
+
+            pixbuf = GdkPixbuf.Pixbuf.new_from_file(icon_path)
+            iconset = Gtk.IconSet.new_from_pixbuf(pixbuf)
+            factory.add(root, iconset)
+
+        factory.add_default()
+
         # Create a global client we can use to do VCS related stuff
         self.vcs_client = VCS()
 
         self.status_checker = StatusChecker()
-        
+
         self.status_checker.assert_version(EXT_VERSION)
-        
+
         self.items_cache = {}
-        
+
     def get_columns(self):
         """
         Return all the columns we support.
@@ -139,29 +219,29 @@
         """
 
         return (
-            nautilus.Column(
-                "RabbitVCS::status_column",
-                "status",
-                _("RVCS Status"),
-                ""
+            Nautilus.Column(
+                name="RabbitVCS::status_column",
+                attribute="status",
+                label=_("RVCS Status"),
+                description=""
             ),
-            nautilus.Column(
-                "RabbitVCS::revision_column",
-                "revision",
-                _("RVCS Revision"),
-                ""
+            Nautilus.Column(
+                name="RabbitVCS::revision_column",
+                attribute="revision",
+                label=_("RVCS Revision"),
+                description=""
             ),
-            nautilus.Column(
-                "RabbitVCS::author_column",
-                "author",
-                _("RVCS Author"),
-                ""
+            Nautilus.Column(
+                name="RabbitVCS::author_column",
+                attribute="author",
+                label=_("RVCS Author"),
+                description=""
             ),
-            nautilus.Column(
-                "RabbitVCS::age_column",
-                "age",
-                _("RVCS Age"),
-                ""
+            Nautilus.Column(
+                name="RabbitVCS::age_column",
+                attribute="age",
+                label=_("RVCS Age"),
+                description=""
             )
         )
 
@@ -186,12 +266,12 @@
         """
         enable_emblems = bool(int(settings.get("general", "enable_emblems")))
         enable_attrs = bool(int(settings.get("general", "enable_attributes")))
-        
-        if not (enable_emblems or enable_attrs): return nautilus.OPERATION_COMPLETE
-                
-        if not self.valid_uri(item.get_uri()): return nautilus.OPERATION_FAILED
-        
-        path = six.text_type(gnomevfs.get_local_path_from_uri(item.get_uri()), "utf-8")
+
+        if not (enable_emblems or enable_attrs): return Nautilus.OperationResult.COMPLETE
+
+        if not self.valid_uri(item.get_uri()): return Nautilus.OperationResult.FAILED
+
+        path = unquote_url(self.get_local_path(item.get_uri()))
 
         # log.debug("update_file_info() called for %s" % path)
 
@@ -209,7 +289,7 @@
         # when we remove this line (detected as working copies, even though
         # they are not)? That shouldn't happen.
         is_in_a_or_a_working_copy = self.vcs_client.is_in_a_or_a_working_copy(path)
-        if not is_in_a_or_a_working_copy: return nautilus.OPERATION_COMPLETE
+        if not is_in_a_or_a_working_copy: return Nautilus.OperationResult.COMPLETE
 
         # Do our magic...
 
@@ -241,8 +321,8 @@
         # FIXME: when did this get disabled?
         if enable_attrs: self.update_columns(item, path, status)
         if enable_emblems: self.update_status(item, path, status)
-        
-        return nautilus.OPERATION_COMPLETE
+
+        return Nautilus.OperationResult.COMPLETE
 
     def update_columns(self, item, path, status):
         """
@@ -278,7 +358,6 @@
             item.add_string_attribute(key, value)
 
     def update_status(self, item, path, status):
-        import rabbitvcs.ui
         if status.summary in rabbitvcs.ui.STATUS_EMBLEMS:
             item.add_emblem(rabbitvcs.ui.STATUS_EMBLEMS[status.summary])
 
@@ -309,69 +388,54 @@
         paths = []
         for item in items:
             if self.valid_uri(item.get_uri()):
-                path = six.text_type(gnomevfs.get_local_path_from_uri(item.get_uri()), "utf-8")
+                path = unquote_url(self.get_local_path(item.get_uri()))
                 paths.append(path)
                 self.nautilusVFSFile_table[path] = item
 
         if len(paths) == 0: return []
-        
+
         # log.debug("get_file_items_full() called")
 
         paths_str = "-".join(paths)
-        
+        base_dir = dirname(paths[0])
+
         conditions_dict = None
         if paths_str in self.items_cache:
             conditions_dict = self.items_cache[paths_str]
             if conditions_dict and conditions_dict != "in-progress":
                 conditions = NautilusMenuConditions(conditions_dict)
-                menu = NautilusMainContextMenu(self, window.get_data("base_dir"), paths, conditions).get_menu()
+                menu = NautilusMainContextMenu(self, base_dir, paths, conditions).get_menu()
                 return menu
-        
+
         if conditions_dict != "in-progress":
-            self.status_checker.generate_menu_conditions_async(provider, window.get_data("base_dir"), paths, self.update_file_items)        
+            self.status_checker.generate_menu_conditions_async(provider, base_dir, paths, self.update_file_items)
             self.items_cache[path] = "in-progress"
-            
-        return ()
 
-    def get_file_items(self, window, items):
-        paths = []
-        for item in items:
-            if self.valid_uri(item.get_uri()):
-                path = six.text_type(gnomevfs.get_local_path_from_uri(item.get_uri()), "utf-8")
-                paths.append(path)
-                self.nautilusVFSFile_table[path] = item
-
-        if len(paths) == 0: return []
-        
-        # log.debug("get_file_items() called")
-        
-        return NautilusMainContextMenu(self, window.get_data("base_dir"), paths).get_menu()
+        return ()
 
     def update_file_items(self, provider, base_dir, paths, conditions_dict):
         paths_str = "-".join(paths)
         self.items_cache[paths_str] =  conditions_dict
-        self.emit_items_updated_signal(provider)
+        Nautilus.MenuProvider.emit_items_updated_signal(provider)
 
     #~ @disable
     # This is useful for profiling. Rename it to "get_background_items" and then
-    # rename the real function "get_background_items_real". 
+    # rename the real function "get_background_items_real".
     def get_background_items_profile(self, window, item):
         import cProfile
-        import rabbitvcs.util.helper
-        
-        path = six.text_type(gnomevfs.get_local_path_from_uri(item.get_uri()),
-                       "utf-8").replace("/", ":")
-        
+
+        path = S(gnomevfs.get_local_path_from_uri(item.get_uri())).replace("/", ":")
+
         profile_data_file = os.path.join(
-                               rabbitvcs.util.helper.get_home_folder(),
+                               helper.get_home_folder(),
                                "checkerservice_%s.stats" % path)
-        
+
         prof = cProfile.Profile()
         retval = prof.runcall(self.get_background_items_real, window, item)
         prof.dump_stats(profile_data_file)
         log.debug("Dumped: %s" % profile_data_file)
         return retval
-       
+
     def get_background_items_full(self, provider, window, item):
         """
         Menu activated on entering a directory. Builds context menu for File
@@ -389,43 +453,37 @@
         """
 
         if not self.valid_uri(item.get_uri()): return
-        path = six.text_type(gnomevfs.get_local_path_from_uri(item.get_uri()), "utf-8")
+        path = unquote_url(self.get_local_path(item.get_uri()))
         self.nautilusVFSFile_table[path] = item
 
         # log.debug("get_background_items_full() called")
 
+        # Schedule menu conditions computation for directory contents.
+        for file in os.listdir(path):
+            subpath = os.path.join(path, file)
+            if not subpath in self.items_cache:
+                self.items_cache[subpath] = "in-progress"
+                self.status_checker.generate_menu_conditions_async(provider, path, [subpath], self.update_background_items)
+
         conditions_dict = None
         if path in self.items_cache:
             conditions_dict = self.items_cache[path]
             if conditions_dict and conditions_dict != "in-progress":
                 conditions = NautilusMenuConditions(conditions_dict)
-                menu = NautilusMainContextMenu(self, path, [path], conditions).get_menu()                
+                menu = NautilusMainContextMenu(self, path, [path], conditions).get_menu()
                 return menu
 
-        window.set_data("base_dir", path)
-
         if conditions_dict != "in-progress":
             self.status_checker.generate_menu_conditions_async(provider, path, [path], self.update_background_items)
             self.items_cache[path] = "in-progress"
-                    
-        return ()
 
-    def get_background_items(self, window, item):
-        if not self.valid_uri(item.get_uri()): return
-        path = six.text_type(gnomevfs.get_local_path_from_uri(item.get_uri()), "utf-8")
-        self.nautilusVFSFile_table[path] = item
-
-        # log.debug("get_background_items() called")
-        
-        window.set_data("base_dir", path)
-        
-        return NautilusMainContextMenu(self, path, [path]).get_menu()
+        return ()
 
     def update_background_items(self, provider, base_dir, paths, conditions_dict):
         paths_str = "-".join(paths)
         conditions = NautilusMenuConditions(conditions_dict)
         self.items_cache[paths_str] =  conditions_dict
-        self.emit_items_updated_signal(provider)
+        Nautilus.MenuProvider.emit_items_updated_signal(provider)
 
     #
     # Helper functions
@@ -486,7 +544,7 @@
             return still_going
 
         # Add our callback function on a 1 second timeout
-        gobject.timeout_add_seconds(1, is_process_still_alive)
+        GObject.timeout_add_seconds(1, is_process_still_alive)
 
     #
     # Some other methods
@@ -544,13 +602,12 @@
             log.debug("Path [%s] not found in file table" % status.path)
 
     def get_property_pages(self, items):
-
         paths = []
 
         for item in items:
             if self.valid_uri(item.get_uri()):
-                path = six.text_type(gnomevfs.get_local_path_from_uri(item.get_uri()), "utf-8")
-                
+                path = unquote_url(self.get_local_path(item.get_uri()))
+
                 if self.vcs_client.is_in_a_or_a_working_copy(path):
                     paths.append(path)
                     self.nautilusVFSFile_table[path] = item
@@ -560,19 +617,18 @@
         label = rabbitvcs.ui.property_page.PropertyPageLabel(claim_domain=False).get_widget()
         page = rabbitvcs.ui.property_page.PropertyPage(paths, claim_domain=False).get_widget()
 
-        ppage = nautilus.PropertyPage('RabbitVCS::PropertyPage',
-            label,
-            page)
+        ppage = Nautilus.PropertyPage(name='RabbitVCS::PropertyPage',
+            label=label,
+            page=page)
 
         return [ppage]
 
-
 from rabbitvcs.util.contextmenuitems import *
 
 class NautilusContextMenu(MenuBuilder):
     """
     Provides a standard Nautilus context menu (ie. a list of
-    "nautilus.MenuItem"s).
+    "Nautilus.MenuItem"s).
     """
 
     signal = "activate"
@@ -581,7 +637,7 @@
         return item.make_nautilus_menu_item(id_magic)
 
     def attach_submenu(self, menu_node, submenu_list):
-        submenu = nautilus.Menu()
+        submenu = Nautilus.Menu()
         menu_node.set_submenu(submenu)
         [submenu.append_item(item) for item in submenu_list]
 
diff -uNr rabbitvcs-0.17.1/clients/nautilus-3.0/README rabbitvcs/clients/nautilus-3.0/README
--- rabbitvcs-0.17.1/clients/nautilus-3.0/README	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/nautilus-3.0/README	1970-01-01 08:00:00.000000000 +0800
@@ -1,29 +0,0 @@
-RabbitVCS Nautilus3 Extension
-
-This extension is meant to be used with the Nautilus File Manager v3,
-
-Requirements:
-    * nautilus (>= v3.0)
-    * nautilus-python (>= 1.0)
-    * python-dbus (> 0.80)
-    * (all other RabbitVCS requirements)
-
-To install:
-    To install for all users, copy RabbitVCS.py to:
-        /usr/share/nautilus-python/extensions
-    
-    To install for a single user, copy RabbitVCS.py to:
-        ~/.local/share/nautilus-python/extensions
-    
-    In both cases, you may need to create the nautilus-python/extensions folder.
-    
-    Restart nautilus with the following commands:
-        $ nautilus -q
-        $ pgrep -f service.py | xargs kill
-        $ nohup nautilus > /dev/null &
-
-Troubleshooting:
-
-    See the known-issues section of our website:
-        http://wiki.rabbitvcs.org/wiki/support/known-issues
-    
\ No newline at end of file
diff -uNr rabbitvcs-0.17.1/clients/nautilus-3.0/RabbitVCS.py rabbitvcs/clients/nautilus-3.0/RabbitVCS.py
--- rabbitvcs-0.17.1/clients/nautilus-3.0/RabbitVCS.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/nautilus-3.0/RabbitVCS.py	1970-01-01 08:00:00.000000000 +0800
@@ -1,663 +0,0 @@
-#
-# This is an extension to the Nautilus file manager to allow better
-# integration with the Subversion source control system.
-#
-# Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
-# Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
-# Copyright (C) 2008-2008 by Adam Plumb <adamplumb@gmail.com>
-#
-# RabbitVCS is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
-# (at your option) any later version.
-#
-# RabbitVCS is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-#
-# You should have received a copy of the GNU General Public License
-# along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
-#
-
-"""
-
-Our module for everything related to the Nautilus extension.
-
-"""
-from __future__ import with_statement
-from __future__ import absolute_import
-import six
-from six.moves import range
-
-def log_all_exceptions(type, value, tb):
-    import sys, traceback
-    from rabbitvcs.util.log import Log
-    log = Log("rabbitvcs.util.extensions.Nautilus.RabbitVCS")
-    log.exception_info("Error caught by master exception hook!",
-                       (type, value, tb))
-
-    text = ''.join(traceback.format_exception(type, value,
-                                              tb, limit=None))
-
-    try:
-        import rabbitvcs.ui.dialog
-        rabbitvcs.ui.dialog.ErrorNotification(text)
-    except Exception as ex:
-        log.exception("Additional exception when attempting"
-                      " to display error dialog.")
-        log.exception(ex)
-        raise
-
-    sys.__excepthook__(type, value, tb)
-
-# import sys
-# sys.excepthook = log_all_exceptions
-
-import copy
-
-import os
-os.environ["NAUTILUS_PYTHON_REQUIRE_GTK3"] = "1"
-
-import os.path
-from os.path import isdir, isfile, realpath, basename
-import datetime
-
-from gi.repository import Nautilus, GObject, Gtk, GdkPixbuf
-
-import pysvn
-
-from rabbitvcs.vcs import VCS
-import rabbitvcs.vcs.status
-
-from rabbitvcs.util.helper import launch_ui_window, launch_diff_tool
-from rabbitvcs.util.helper import get_file_extension, get_common_directory
-from rabbitvcs.util.helper import pretty_timedelta
-
-from rabbitvcs.util.decorators import timeit, disable
-
-from rabbitvcs.util.contextmenu import MenuBuilder, MainContextMenu, SEPARATOR, ContextMenuConditions
-
-import rabbitvcs.ui
-import rabbitvcs.ui.property_page
-
-from rabbitvcs.util.log import Log, reload_log_settings
-log = Log("rabbitvcs.util.extensions.Nautilus.RabbitVCS")
-
-from rabbitvcs import gettext, get_icon_path
-_ = gettext.gettext
-
-from rabbitvcs import version as EXT_VERSION
-
-from rabbitvcs.util.settings import SettingsManager
-settings = SettingsManager()
-
-import rabbitvcs.services.service
-from rabbitvcs.services.checkerservice import StatusCheckerStub as StatusChecker
-
-class RabbitVCS(Nautilus.InfoProvider, Nautilus.MenuProvider,
-                 Nautilus.ColumnProvider, Nautilus.PropertyPageProvider, GObject.GObject):
-    """
-    This is the main class that implements all of our awesome features.
-
-    """
-
-    #: This is our lookup table for C{NautilusVFSFile}s which we need for attaching
-    #: emblems. This is mostly a workaround for not being able to turn a path/uri
-    #: into a C{NautilusVFSFile}. It looks like:::
-    #:
-    #:     nautilusVFSFile_table = {
-    #:        "/foo/bar/baz": <NautilusVFSFile>
-    #:
-    #:     }
-    #:
-    #: Keeping track of C{NautilusVFSFile}s is a little bit complicated because
-    #: when an item is moved (renamed) C{update_file_info} doesn't get called. So
-    #: we also add C{NautilusVFSFile}s to this table from C{get_file_items} etc.
-    # FIXME: this may be the source of the memory hogging seen in the extension
-    # script itself.
-    nautilusVFSFile_table = {}
-
-    #: This is in case we want to permanently enable invalidation of the status
-    #: checker info.
-    always_invalidate = True
-
-    #: When we get the statuses from the callback, put them here for further
-    #: use. This is of the form: [("path/to", {...status dict...}), ...]
-    statuses_from_callback = []
-
-    def get_local_path(self, path):
-        return path.replace("file://", "")
-
-    def __init__(self):
-        factory = Gtk.IconFactory()
-
-        rabbitvcs_icons = [
-            "scalable/actions/rabbitvcs-settings.svg",
-            "scalable/actions/rabbitvcs-export.svg",
-            "scalable/actions/rabbitvcs-properties.svg",
-            "scalable/actions/rabbitvcs-show_log.svg",
-            "scalable/actions/rabbitvcs-delete.svg",
-            "scalable/actions/rabbitvcs-run.svg",
-            "scalable/actions/rabbitvcs-unlock.svg",
-            "scalable/actions/rabbitvcs-dbus.svg",
-            "scalable/actions/rabbitvcs-rename.svg",
-            "scalable/actions/rabbitvcs-help.svg",
-            "scalable/actions/rabbitvcs-update.svg",
-            "scalable/actions/rabbitvcs-diff.svg",
-            "scalable/actions/rabbitvcs-resolve.svg",
-            "scalable/actions/rabbitvcs-about.svg",
-            "scalable/actions/rabbitvcs-add.svg",
-            "scalable/actions/rabbitvcs-changes.svg",
-            "scalable/actions/rabbitvcs-createpatch.svg",
-            "scalable/actions/rabbitvcs-merge.svg",
-            "scalable/actions/rabbitvcs-drive.svg",
-            "scalable/actions/rabbitvcs-stop.svg",
-            "scalable/actions/rabbitvcs-checkout.svg",
-            "scalable/actions/rabbitvcs-import.svg",
-            "scalable/actions/rabbitvcs-branch.svg",
-            "scalable/actions/rabbitvcs-refresh.svg",
-            "scalable/actions/rabbitvcs-editconflicts.svg",
-            "scalable/actions/rabbitvcs-monkey.svg",
-            "scalable/actions/rabbitvcs-applypatch.svg",
-            "scalable/actions/rabbitvcs-switch.svg",
-            "scalable/actions/rabbitvcs-lock.svg",
-            "scalable/actions/rabbitvcs-annotate.svg",
-            "scalable/actions/rabbitvcs-compare.svg",
-            "scalable/actions/rabbitvcs-revert.svg",
-            "scalable/actions/rabbitvcs-bug.svg",
-            "scalable/actions/rabbitvcs-cleanup.svg",
-            "scalable/actions/rabbitvcs-clear.svg",
-            "scalable/actions/rabbitvcs-unstage.svg",
-            "scalable/actions/rabbitvcs-emblems.svg",
-            "scalable/actions/rabbitvcs-relocate.svg",
-            "scalable/actions/rabbitvcs-reset.svg",
-            "scalable/actions/rabbitvcs-asynchronous.svg",
-            "scalable/actions/rabbitvcs-commit.svg",
-            "scalable/actions/rabbitvcs-checkmods.svg",
-            "scalable/apps/rabbitvcs.svg",
-            "scalable/apps/rabbitvcs-small.svg",
-            "16x16/actions/rabbitvcs-push.png"
-        ]
-        
-        rabbitvcs_icon_path = get_icon_path()
-        for rel_icon_path in rabbitvcs_icons:
-            icon_path = "%s/%s" % (rabbitvcs_icon_path, rel_icon_path)
-            file = os.path.basename(rel_icon_path)
-            (root, ext) = os.path.splitext(file)
-
-            pixbuf = GdkPixbuf.Pixbuf.new_from_file(icon_path)
-            iconset = Gtk.IconSet.new_from_pixbuf(pixbuf)
-            factory.add(root, iconset)
-
-        factory.add_default()
-    
-        # Create a global client we can use to do VCS related stuff
-        self.vcs_client = VCS()
-
-        self.status_checker = StatusChecker()
-        
-        self.status_checker.assert_version(EXT_VERSION)
-        
-        self.items_cache = {}
-        
-    def get_columns(self):
-        """
-        Return all the columns we support.
-
-        """
-
-        return (
-            Nautilus.Column(
-                name="RabbitVCS::status_column",
-                attribute="status",
-                label=_("RVCS Status"),
-                description=""
-            ),
-            Nautilus.Column(
-                name="RabbitVCS::revision_column",
-                attribute="revision",
-                label=_("RVCS Revision"),
-                description=""
-            ),
-            Nautilus.Column(
-                name="RabbitVCS::author_column",
-                attribute="author",
-                label=_("RVCS Author"),
-                description=""
-            ),
-            Nautilus.Column(
-                name="RabbitVCS::age_column",
-                attribute="age",
-                label=_("RVCS Age"),
-                description=""
-            )
-        )
-
-    def update_file_info(self, item):
-        """
-
-        C{update_file_info} is called only when:
-
-          - When you enter a directory (once for each item but only when the
-            item was modified since the last time it was listed)
-          - When you refresh (once for each item visible)
-          - When an item viewable from the current window is created or modified
-
-        This is insufficient for our purpose because:
-
-          - You're not notified about items you don't see (which is needed to
-            keep the emblem for the directories above the item up-to-date)
-
-        @type   item: NautilusVFSFile
-        @param  item:
-
-        """
-        enable_emblems = bool(int(settings.get("general", "enable_emblems")))
-        enable_attrs = bool(int(settings.get("general", "enable_attributes")))
-        
-        if not (enable_emblems or enable_attrs): return Nautilus.OperationResult.COMPLETE
-                
-        if not self.valid_uri(item.get_uri()): return Nautilus.OperationResult.FAILED
-
-        path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
-
-        # log.debug("update_file_info() called for %s" % path)
-
-        invalidate = False
-        if path in self.nautilusVFSFile_table:
-            invalidate = True
-
-        # Always replace the item in the table with the one we receive, because
-        # for example if an item is deleted and recreated the NautilusVFSFile
-        # we had before will be invalid (think pointers and such).
-        self.nautilusVFSFile_table[path] = item
-
-        # This check should be pretty obvious :-)
-        # TODO: how come the statuses for a few directories are incorrect
-        # when we remove this line (detected as working copies, even though
-        # they are not)? That shouldn't happen.
-        is_in_a_or_a_working_copy = self.vcs_client.is_in_a_or_a_working_copy(path)
-        if not is_in_a_or_a_working_copy: return Nautilus.OperationResult.COMPLETE
-
-        # Do our magic...
-
-        # I have added extra logic in cb_status, using a list
-        # (paths_from_callback) that should allow us to work around this for
-        # now. But it'd be good to have an actual status monitor.
-
-        found = False
-        status = None
-        # Could replace with (st for st in self.... if st.path ...).next()
-        # Need to catch exception
-        for idx in range(len(self.statuses_from_callback)):
-            found = (self.statuses_from_callback[idx].path) == path
-            if found: break
-
-        if found: # We're here because we were triggered by a callback
-            status = self.statuses_from_callback[idx]
-            del self.statuses_from_callback[idx]
-
-        # Don't bother the checker if we already have the info from a callback
-        if not found:
-            status = \
-                self.status_checker.check_status(path,
-                                                 recurse=True,
-                                                 summary=True,
-                                                 callback=self.cb_status,
-                                                 invalidate=invalidate)
-
-        # FIXME: when did this get disabled?
-        if enable_attrs: self.update_columns(item, path, status)
-        if enable_emblems: self.update_status(item, path, status)
-        
-        return Nautilus.OperationResult.COMPLETE
-
-    def update_columns(self, item, path, status):
-        """
-        Update the columns (attributes) for a given Nautilus item,
-        filling them in with information from the version control
-        server.
-
-        """
-
-        revision = ""
-        if status.revision:
-            revision = str(status.revision)
-
-        age = ""
-        if status.date:
-            age = pretty_timedelta(
-                datetime.datetime.fromtimestamp(status.date),
-                datetime.datetime.now()
-            )
-
-        author = ""
-        if status.author:
-            author = str(status.author)
-
-        values = {
-            "status": status.simple_content_status(),
-            "revision": revision,
-            "author": author,
-            "age": age
-        }
-
-        for key, value in list(values.items()):
-            item.add_string_attribute(key, value)
-
-    def update_status(self, item, path, status):
-        if status.summary in rabbitvcs.ui.STATUS_EMBLEMS:
-            item.add_emblem(rabbitvcs.ui.STATUS_EMBLEMS[status.summary])
-
-    #~ @disable
-    # @timeit
-    # FIXME: this is a bottleneck. See generate_statuses() in
-    # MainContextMenuConditions.
-    def get_file_items_full(self, provider, window, items):
-        """
-        Menu activated with items selected. Nautilus also calls this function
-        when rendering submenus, even though this is not needed since the entire
-        menu has already been returned.
-
-        Note that calling C{nautilusVFSFile.invalidate_extension_info()} will
-        also cause get_file_items to be called.
-
-        @type   window: NautilusNavigationWindow
-        @param  window:
-
-        @type   items:  list of NautilusVFSFile
-        @param  items:
-
-        @rtype:         list of MenuItems
-        @return:        The context menu entries to add to the menu.
-
-        """
-
-        paths = []
-        for item in items:
-            if self.valid_uri(item.get_uri()):
-                path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
-                paths.append(path)
-                self.nautilusVFSFile_table[path] = item
-
-        if len(paths) == 0: return []
-        
-        # log.debug("get_file_items_full() called")
-
-        paths_str = "-".join(paths)
-        
-        conditions_dict = None
-        if paths_str in self.items_cache:
-            conditions_dict = self.items_cache[paths_str]
-            if conditions_dict and conditions_dict != "in-progress":
-                conditions = NautilusMenuConditions(conditions_dict)
-                menu = NautilusMainContextMenu(self, window.base_dir, paths, conditions).get_menu()
-                return menu
-        
-        if conditions_dict != "in-progress":
-            self.status_checker.generate_menu_conditions_async(provider, window.base_dir, paths, self.update_file_items)        
-            self.items_cache[path] = "in-progress"
-            
-        return ()
-
-    def get_file_items(self, window, items):
-        paths = []
-        for item in items:
-            if self.valid_uri(item.get_uri()):
-                path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
-                paths.append(path)
-                self.nautilusVFSFile_table[path] = item
-
-        if len(paths) == 0: return []
-        
-        # log.debug("get_file_items() called")
-        
-        return NautilusMainContextMenu(self, window.base_dir, paths).get_menu()
-
-    def update_file_items(self, provider, base_dir, paths, conditions_dict):
-        paths_str = "-".join(paths)
-        self.items_cache[paths_str] =  conditions_dict
-        Nautilus.MenuProvider.emit_items_updated_signal(provider)
-
-    #~ @disable
-    # This is useful for profiling. Rename it to "get_background_items" and then
-    # rename the real function "get_background_items_real". 
-    def get_background_items_profile(self, window, item):
-        import cProfile
-        import rabbitvcs.util.helper
-        
-        path = six.text_type(gnomevfs.get_local_path_from_uri(item.get_uri()),
-                       "utf-8").replace("/", ":")
-        
-        profile_data_file = os.path.join(
-                               rabbitvcs.util.helper.get_home_folder(),
-                               "checkerservice_%s.stats" % path)
-        
-        prof = cProfile.Profile()
-        retval = prof.runcall(self.get_background_items_real, window, item)
-        prof.dump_stats(profile_data_file)
-        log.debug("Dumped: %s" % profile_data_file)
-        return retval
-       
-    def get_background_items_full(self, provider, window, item):
-        """
-        Menu activated on entering a directory. Builds context menu for File
-        menu and for window background.
-
-        @type   window: NautilusNavigationWindow
-        @param  window:
-
-        @type   item:   NautilusVFSFile
-        @param  item:
-
-        @rtype:         list of MenuItems
-        @return:        The context menu entries to add to the menu.
-
-        """
-
-        if not self.valid_uri(item.get_uri()): return
-        path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
-        self.nautilusVFSFile_table[path] = item
-
-        # log.debug("get_background_items_full() called")
-
-        conditions_dict = None
-        if path in self.items_cache:
-            conditions_dict = self.items_cache[path]
-            if conditions_dict and conditions_dict != "in-progress":
-                conditions = NautilusMenuConditions(conditions_dict)
-                menu = NautilusMainContextMenu(self, path, [path], conditions).get_menu()                
-                return menu
-
-        window.base_dir = path
-
-        if conditions_dict != "in-progress":
-            self.status_checker.generate_menu_conditions_async(provider, path, [path], self.update_background_items)
-            self.items_cache[path] = "in-progress"
-                    
-        return ()
-
-    def get_background_items(self, window, item):
-        if not self.valid_uri(item.get_uri()): return
-        path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
-        self.nautilusVFSFile_table[path] = item
-
-        # log.debug("get_background_items() called")
-        
-        window.base_dir = path
-        
-        return NautilusMainContextMenu(self, path, [path]).get_menu()
-
-    def update_background_items(self, provider, base_dir, paths, conditions_dict):
-        paths_str = "-".join(paths)
-        conditions = NautilusMenuConditions(conditions_dict)
-        self.items_cache[paths_str] =  conditions_dict
-        Nautilus.MenuProvider.emit_items_updated_signal(provider)
-
-    #
-    # Helper functions
-    #
-
-    def valid_uri(self, uri):
-        """
-        Check whether or not it's a good idea to have RabbitVCS do
-        its magic for this URI. Some examples of URI schemes:
-
-        x-nautilus-desktop:/// # e.g. mounted devices on the desktop
-
-        """
-
-        if not uri.startswith("file://"): return False
-
-        return True
-
-    #
-    # Some methods to help with keeping emblems up-to-date
-    #
-
-    def rescan_after_process_exit(self, proc, paths):
-
-        def do_check():
-            # We'll check the paths first (these were the paths that
-            # were originally passed along to the context menu).
-            #
-            # This is needed among other things for:
-            #
-            #   - When a directory is normal and you add files inside it
-            #
-            for path in paths:
-                # We're not interested in the result now, just the callback
-                self.status_checker.check_status(path,
-                                                 recurse=True,
-                                                 invalidate=True,
-                                                 callback=self.cb_status,
-                                                 summary=True)
-
-        self.execute_after_process_exit(proc, do_check)
-
-    def execute_after_process_exit(self, proc, func=None):
-
-        def is_process_still_alive():
-            log.debug("is_process_still_alive() for pid: %i" % proc.pid)
-            # First we need to see if the commit process is still running
-
-            retval = proc.poll()
-
-            log.debug("%s" % retval)
-
-            still_going = (retval is None)
-
-            if not still_going and callable(func):
-                func()
-
-            return still_going
-
-        # Add our callback function on a 1 second timeout
-        GObject.timeout_add_seconds(1, is_process_still_alive)
-
-    #
-    # Some other methods
-    #
-
-    def reload_settings(self, proc):
-        """
-        Used to re-load settings after the settings dialog has been closed.
-
-        FIXME: This probably doesn't belong here, ideally the settings manager
-        does this itself and make sure everything is reloaded properly
-        after the settings dialogs saves.
-        """
-
-        def do_reload_settings():
-            globals()["settings"] = SettingsManager()
-            globals()["log"] = reload_log_settings()("rabbitvcs.util.extensions.nautilus")
-            log.debug("Re-scanning settings")
-
-        self.execute_after_process_exit(proc, do_reload_settings)
-
-
-    #
-    # Callbacks
-    #
-
-    def cb_status(self, status):
-        """
-        This is the callback that C{StatusMonitor} calls.
-
-        @type   path:   string
-        @param  path:   The path of the item something interesting happened to.
-
-        @type   statuses: list of status objects
-        @param  statuses: The statuses
-        """
-        if status.path in self.nautilusVFSFile_table:
-            item = self.nautilusVFSFile_table[status.path]
-            # We need to invalidate the extension info for only one reason:
-            #
-            # - Invalidating the extension info will cause Nautilus to remove all
-            #   temporary emblems we applied so we don't have overlay problems
-            #   (with ourselves, we'd still have some with other extensions).
-            #
-            # After invalidating C{update_file_info} applies the correct emblem.
-            # Since invalidation triggers an "update_file_info" call, we can
-            # tell it NOT to invalidate the status checker path.
-            self.statuses_from_callback.append(status)
-            # NOTE! There is a call to "update_file_info" WITHIN the call to
-            # invalidate_extension_info() - beware recursion!
-            item.invalidate_extension_info()
-            if status.path in self.items_cache:
-                del self.items_cache[status.path]
-        else:
-            log.debug("Path [%s] not found in file table" % status.path)
-
-    def get_property_pages(self, items):
-        paths = []
-
-        for item in items:
-            if self.valid_uri(item.get_uri()):
-                path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
-                
-                if self.vcs_client.is_in_a_or_a_working_copy(path):
-                    paths.append(path)
-                    self.nautilusVFSFile_table[path] = item
-
-        if len(paths) == 0: return []
-
-        label = rabbitvcs.ui.property_page.PropertyPageLabel(claim_domain=False).get_widget()
-        page = rabbitvcs.ui.property_page.PropertyPage(paths, claim_domain=False).get_widget()
-
-        ppage = Nautilus.PropertyPage(name='RabbitVCS::PropertyPage',
-            label=label,
-            page=page)
-
-        return [ppage]
-
-from rabbitvcs.util.contextmenuitems import *
-
-class NautilusContextMenu(MenuBuilder):
-    """
-    Provides a standard Nautilus context menu (ie. a list of
-    "Nautilus.MenuItem"s).
-    """
-
-    signal = "activate"
-
-    def make_menu_item(self, item, id_magic):
-        return item.make_nautilus_menu_item(id_magic)
-
-    def attach_submenu(self, menu_node, submenu_list):
-        submenu = Nautilus.Menu()
-        menu_node.set_submenu(submenu)
-        [submenu.append_item(item) for item in submenu_list]
-
-    def top_level_menu(self, items):
-        return items
-
-class NautilusMenuConditions(ContextMenuConditions):
-    def __init__(self, path_dict):
-        self.path_dict = path_dict
-
-class NautilusMainContextMenu(MainContextMenu):
-    def get_menu(self):
-        return NautilusContextMenu(self.structure, self.conditions, self.callbacks).menu
diff -uNr rabbitvcs-0.17.1/clients/nautilusold/README rabbitvcs/clients/nautilusold/README
--- rabbitvcs-0.17.1/clients/nautilusold/README	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/nautilusold/README	1970-01-01 08:00:00.000000000 +0800
@@ -1,27 +0,0 @@
-RabbitVCS NautilusOld Extension
-
-This extension is meant to be used with older versions of the Nautilus
-File Manager.
-
-Requirements:
-    * nautilus (<= v2.22.0)
-    * nautilus-python (>= 0.4.3)
-    * (all other RabbitVCS requirements)
-
-To install:
-    To install for all users, copy RabbitVCS.py to:
-        /usr/lib/nautilus/extensions-1.0/python
-
-    To install for a single user, copy RabbitVCS.py to:
-        ~/.nautilus/python-extensions
-    
-    In both cases, you may need to create the python/python-extensions folder.
-    
-    Restart nautilus with the following commands:
-        $ nautilus -q
-        $ nohup nautilus > /dev/null &
-
-Troubleshooting:
-
-    See the known-issues section of our website:
-        http://wiki.rabbitvcs.org/wiki/support/known-issues
diff -uNr rabbitvcs-0.17.1/clients/nautilusold/RabbitVCS.py rabbitvcs/clients/nautilusold/RabbitVCS.py
--- rabbitvcs-0.17.1/clients/nautilusold/RabbitVCS.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/nautilusold/RabbitVCS.py	1970-01-01 08:00:00.000000000 +0800
@@ -1,527 +0,0 @@
-#
-# This is an extension to the Nautilus file manager to allow better 
-# integration with the Subversion source control system.
-# 
-# Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
-# Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
-# Copyright (C) 2008-2008 by Adam Plumb <adamplumb@gmail.com>
-# 
-# RabbitVCS is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
-# (at your option) any later version.
-# 
-# RabbitVCS is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-# 
-# You should have received a copy of the GNU General Public License
-# along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
-#
-
-"""
-TODO
-    1. Integrate translations
-    2. Add more of the v0.13 menu items
-    3.  or figure out a way to use the regular nautilus extension's menu items/logic
-    4.  or clean up the current menuitem logic in some other way
-"""
-from __future__ import absolute_import
-import six
-
-__version__ = "0.13.beta1"
-
-import copy
-import glob
-import gnomevfs
-import gobject
-import gtk
-import nautilus
-import os
-import pysvn
-import sys
-
-# RabbitVCS is actually more than just this module so we need to add the entire
-# directory to the path to be able to find our other modules. Because on import
-# Python generates compiled (.pyc) versions of Python source code files we have
-# to strip the 'c' from the extension to find the actual file.
-sys.path.append(os.path.dirname(os.path.realpath(__file__.rstrip("c"))))
-
-# FIXME: this (and other) should be moved into a rabbitvcs module to prevent 
-# collisions with other modules on the path.
-import rabbitvcs.util.helper
-
-#============================================================================== 
-
-ENABLE_ATTRIBUTES = True
-RECURSIVE_STATUS = True
-ENABLE_EMBLEMS = True
-
-class RabbitVCS(nautilus.InfoProvider, nautilus.MenuProvider, nautilus.ColumnProvider):
-    """ This is the main class that implements all of our awesome features.
-    """
-    
-    #: Maps statuses to emblems.
-    #: TODO: should probably be possible to create this dynamically
-    EMBLEMS = {
-        pysvn.wc_status_kind.added :       "rabbitvcs-added",
-        pysvn.wc_status_kind.deleted:      "rabbitvcs-deleted",
-        pysvn.wc_status_kind.modified:     "rabbitvcs-modified",
-        pysvn.wc_status_kind.conflicted:   "rabbitvcs-conflicted",
-        pysvn.wc_status_kind.normal:       "rabbitvcs-normal",
-        pysvn.wc_status_kind.ignored:      "rabbitvcs-ignored",
-        pysvn.wc_status_kind.obstructed:   "rabbitvcs-obstructed"
-    }
-
-    #-------------------------------------------------------------------------- 
-    def __init__(self):
-        """ Constructor - initialise our required storage
-        """
-
-        # This list keeps track of any files we have come across that will
-        # need to be re-scanned if there is a commit/revert.
-        self.monitoredFiles = []
-
-        # This list keeps a record of all of the files we're planning to scan
-        # when we get some idle time
-        self.scanStack = []
-
-    #--------------------------------------------------------------------------
-    def OnIdle(self):
-        """ We use the idle handler to pop items from our scan stack and run a
-            status scan on them. We do this so that we don't hog the processor
-            each time a folder is opened.
-        """
-        if len(self.scanStack):
-            self.ScanFile(self.scanStack.pop())
-            return True
-        else:
-            return False
-
-    #-------------------------------------------------------------------------- 
-    def get_columns(self):
-        """ This is the function called by Nautilus to find out what extra
-            columns we can supply to it.
-        """
-        return (nautilus.Column("NautilusPython::revision_column",
-                               "revision",
-                               "Revision",
-                               "The file revision"),
-                nautilus.Column("NautilusPython::user_column",
-                               "user",
-                               "SVN User",
-                               "The SVN user")
-
-                )
-
-    #-------------------------------------------------------------------------- 
-    def update_file_info (self, file):
-        """ Callback from Nautilus to get the file status.
-        """
-
-        if file.get_uri_scheme() != 'file':
-            return
-
-        path = gnomevfs.get_local_path_from_uri(file.get_uri())
-
-        c = pysvn.Client()
-        try:
-            entry = c.info(path)
-        except:
-            return
-
-        if not entry:
-            return
-
-        # We'll scan the files during idle time, so add it to our stack
-        self.scanStack.append(file)
-        if len(self.scanStack) == 1:
-            gobject.idle_add(self.OnIdle)
-
-    #--------------------------------------------------------------------------
-    def ScanFile(self, file):
-        """ This is where the magic happens! This function check the current
-            status of *file*, and updates the display with the relevant emblem.
-
-            file - A NautilusFileItem to check
-        """
-
-        # Transform the URI to a path
-        path = gnomevfs.get_local_path_from_uri(file.get_uri())
-
-        # Get the SVN info about the path
-        c = pysvn.Client()
-        entry = c.info(path)
-
-        # Update the columns if we're supposed to
-        if ENABLE_ATTRIBUTES:
-            file.add_string_attribute('revision', str(entry.revision.number))
-            author = entry.commit_author
-            if not author:
-                author = ""
-            file.add_string_attribute('user', author)
-
-        # Update the display emblems if we're supposed to
-        if ENABLE_EMBLEMS:
-            if os.path.isdir(path):
-                # We're a folder
-                st = c.status(path, recurse=RECURSIVE_STATUS)
-
-                # Check if this folder had been added
-                for x in st:
-                    if x.path == path and x.text_status == pysvn.wc_status_kind.added:
-                        file.add_emblem(self.EMBLEMS[pysvn.wc_status_kind.added])
-                        return
-
-                # Check if any of the contents of the folder have been modified
-                t = set([    pysvn.wc_status_kind.modified,
-                            pysvn.wc_status_kind.added,
-                            pysvn.wc_status_kind.deleted])
-                statuses = set([s.text_status for s in st])
-
-                if len( t & statuses ):
-                    file.add_emblem(self.EMBLEMS[pysvn.wc_status_kind.modified])
-                else:
-                    file.add_emblem(self.EMBLEMS[pysvn.wc_status_kind.normal])
-            else:
-                # We're a file
-
-                # Get our status
-                st = c.status(path, recurse=False)[0]
-
-                # Display an emblem if we have a match for the status
-                if st.text_status in self.EMBLEMS:
-                    file.add_emblem(self.EMBLEMS[st.text_status])
-
-                # Keep a note of this file object in case we have commits etc.
-                t = [ pysvn.wc_status_kind.modified, 
-                      pysvn.wc_status_kind.added, 
-                      pysvn.wc_status_kind.deleted]
-                if st.text_status in t:
-                    if file not in self.monitoredFiles:
-                        self.monitoredFiles.append(file)
-                else:
-                    try:
-                        self.monitoredFiles.remove(file)
-                    except:
-                        pass
-
-    #-------------------------------------------------------------------------- 
-    def get_file_items(self, window, files):
-        """ Menu activated with files selected
-        """
-
-        # At the moment we're only handling single files or folders
-        if len(files) < 1:
-            return
-
-        file = files[0]
-        if file is None:
-            return
-
-        path = gnomevfs.get_local_path_from_uri(file.get_uri())
-
-        items = [ ('NautilusPython::svndelete_file_item', 'Delete' , 'Remove files from the repository.', self.OnDelete, "rabbitvcs-delete"),
-		          ('NautilusPython::svnrename_file_item', 'Rename' , 'Rename a file in the repository', self.OnRename, "rabbitvcs-rename"),
-                  ('NautilusPython::svnrefreshstatus_file_item', 'Refresh Status', 'Refresh the display status of the selected files.', self.OnRefreshStatus, "rabbitvcs-refresh"),
-                  ('NautilusPython::svnrepo_file_item', 'Repository Browser' , 'View Repository Sources', self.OnRepoBrowser, gtk.STOCK_FIND)
-        ]
-
-        if len( files ) == 1:
-            items += [    ('NautilusPython::svnlog_file_item', 'Log' , 'Log of %s' % file.get_name(), self.OnShowLog, "rabbitvcs-show_log"),
-                        ('NautilusPython::svnupdate_file_item', 'Update' , 'Get the latest code from the repository.', self.OnUpdate, "rabbitvcs-update")
-            ]
-
-        # Check if this is a folder, and if so if it's under source control
-        if os.path.isdir(path):
-            # Check if this folder is versioned
-            if os.path.isdir(os.path.join(path, ".svn")):
-                # Check if any of our children are modified.
-                c = pysvn.Client()
-                st = c.status(path, recurse=RECURSIVE_STATUS)
-                statuses = set([x.text_status for x in st])
-                t = set([    pysvn.wc_status_kind.modified,
-                            pysvn.wc_status_kind.added,
-                            pysvn.wc_status_kind.deleted])
-                if len( t & statuses ):
-                    # If so, add some useful menu items
-                    items += [    ('NautilusPython::svnmkdiff_file_item', 'Patch', 'Create a patch of %s from the repository version'%file.get_name(), self.OnMkDiff, "rabbitvcs-diff"), 
-                                ('NautilusPython::svnrevert_file_item', 'Revert' , 'Revert %s back to the repository version.'%file.get_name(), self.OnRevert, "rabbitvcs-revert")]
-
-                items += [
-                    ('NautilusPython::svncommit_file_item', 'Commit' , 'Commit %s to the repository.' % file.get_name(), self.OnCommit, "rabbitvcs-commit"),
-                    ('NautilusPython::svnproperties_file_item', 'Properties', 'File properties for %s.'%file.get_name(), self.OnProperties, "rabbitvcs-properties")
-                ]
-
-            else:
-                # Check if the parent is under source control
-                if os.path.isdir(os.path.join(os.path.split(path)[0], ".svn")):
-                    items = [('NautilusPython::svnadd_file_item', 'Add' , 'Add %s to the repository.'%file.get_name(), self.OnAdd, "rabbitvcs-add")]
-                else:
-		            items = [('NautilusPython::svncheckout_file_item', 'Checkout' , 'Checkout code from an SVN repository', self.OnCheckout, "rabbitvcs-checkout")]
-
-        else:
-            # We're a file, so lets check if we're in a versioned folder
-            if os.path.isdir(os.path.join(os.path.split(path)[0], ".svn")):
-                # OK we're in a versioned folder - are we already in SVN?
-                c = pysvn.Client()
-                st = c.status(path)[0]
-                if not st.is_versioned:
-                    # If not, we can only offer to add the file.
-                    items = [('NautilusPython::svnadd_file_item', 'Add' , 'Add %s to the repository.'%file.get_name(), self.OnAdd, "rabbitvcs-add")]
-
-                # Add the revert and diff items if we've changed from the repos version
-                if st.text_status in [pysvn.wc_status_kind.added, pysvn.wc_status_kind.modified]:
-                    items += [    ('NautilusPython::svnrevert_file_item', 'Revert' , 'Revert %s back to the repository version.'%file.get_name(), self.OnRevert, "rabbitvcs-revert"), ]
-
-                    if len(files) == 1:
-                        items += [    ('NautilusPython::svncommit_file_item', 'Commit' , 'Commit %s to the repository.' % file.get_name(), self.OnCommit, "rabbitvcs-commit"),
-                                    ('NautilusPython::svndiff_file_item', 'Diff' , 'Diff %s against the repository version' % file.get_name(), self.OnShowDiff, "rabbitvcs-diff"),
-                                    ('NautilusPython::svnmkdiff_file_item', 'Patch', 'Create a patch of %s from the repository version'%file.get_name(), self.OnMkDiff, "rabbitvcs-createpatch"), 
-	            ]
-
-                # Add the conflict resolution menu items
-                if st.text_status in [pysvn.wc_status_kind.conflicted]:
-                    items += [    ('NautilusPython::svnrevert_file_item', 'Revert' , 'Revert %s back to the repository version.'%file.get_name(), self.OnRevert, "rabbitvcs-revert"), ]
-
-                    if len(files) == 1:
-                        items += [  ('NautilusPython::svneditconflict_file_item', 'Edit Conflicts' , 'Edit the conflicts found when updating %s.'%file.get_name(), self.OnEditConflicts, None),
-                                    ('NautilusPython::svnresolveconflict_file_item', 'Resolved' , 'Mark %s as resolved.'%file.get_name(), self.OnResolveConflicts, "rabbitvcs-resolve")]
-
-                items += [
-                    ('NautilusPython::svnproperties_file_item', 'Properties', 'File properties for %s.'%file.get_name(), self.OnProperties, "rabbitvcs-properties")
-                ]
-
-            else:
-                items = []
-
-        return self.create_menu(window, items, files)
-
-    #-------------------------------------------------------------------------- 
-    def get_background_items(self, window, file):
-        """ Menu activated on window background
-        """
-
-        if file.get_uri() == "x-nautilus-desktop:///":
-            return
-
-        path = gnomevfs.get_local_path_from_uri(file.get_uri())
-
-        window.set_data("base_dir", os.path.realpath(six.text_type(path)))
-
-        if not os.path.isdir(os.path.join(path,".svn")):
-            items = [     ('NautilusPython::svncheckout_file_item', 'Checkout' , 'Checkout code from an SVN repository', self.OnCheckout, "rabbitvcs-checkout")
-                    ]
-        else:
-            items = [     ('NautilusPython::svnlog_file_item', 'Log' , 'SVN Log of %s' % file.get_name(), self.OnShowLog, "rabbitvcs-show_log"),
-                        ('NautilusPython::svncommit_file_item', 'Commit' , 'Commit %s back to the repository.' % file.get_name(), self.OnCommit, "rabbitvcs-commit"),
-                        ('NautilusPython::svnrepo_file_item', 'Repository Browser' , 'View Repository Sources', self.OnRepoBrowser, gtk.STOCK_FIND),
-                        ('NautilusPython::svnupdate_file_item', 'Update' , 'Get the latest code from the repository.', self.OnUpdate, "rabbitvcs-update"),
-                        ('NautilusPython::svnrefreshstatus_file_item', 'Refresh', 'Refresh the display status of %s.'%file.get_name(), self.OnRefreshStatus, "rabbitvcs-refresh"),
-                        ('NautilusPython::svnmkdiffdir_file_item', 'Patch', 'Create a patch of %s from the repository version'%file.get_name(), self.OnMkDiffDir, "rabbitvcs-diff"),
-                ('NautilusPython::svnproperties_file_item', 'Properties', 'File properties for %s.'%file.get_name(), self.OnProperties, "rabbitvcs-properties")
-            ]
-
-        return self.create_menu(window, items, [file])
-
-    def create_menu(self, window, items, paths):
-        """
-        While I can add submenu items in nautilus-python 0.5.0, I can't get
-        the submenu item activate signal to connect to a callback method
-        
-        menuitem = nautilus.MenuItem('NautilusPython::Svn', 'RabbitVCS', '', "rabbitvcs")
-        if hasattr(menuitem, "set_submenu"):
-            submenu = nautilus.Menu()
-            menuitem.set_submenu(submenu)
-            for item in items:
-                i = nautilus.MenuItem( item[0], item[1], item[2], item[4] )
-                i.connect('activate', item[3], window, paths)
-                submenu.append_item( i )
-
-            return menuitem,
-		"""
-		
-        menuitems = []
-        for item in items:
-            i = nautilus.MenuItem( item[0], item[1], item[2], item[4] )
-            i.connect('activate', item[3], window, paths)
-            menuitems.append(i)
-
-        return menuitems
-            
-    #--------------------------------------------------------------------------
-    def RescanFilesAfterProcess(self, pid):
-        """ Rescans all of the files on our *monitoredFiles* list after the
-            process specified by *pid* completes.
-        """
-        # We need a function that can check the file status once the process has completed.
-        def ThreadProc():
-            # First we need to see if the commit process is still running
-            if os.path.exists("/proc/" + str(pid)):
-                # If so, check its status by reading the status file from /proc
-                f = open("/proc/%d/status"%pid).readlines()
-                # if it's a zombie process, then we can waitpid() on it to end the process
-                if "zombie" in f[1]:
-                    os.waitpid(pid, 0)
-
-                # Return true to get another callback after the next timeout
-                return True
-            else:
-                # The process has completed, so we now want to rescan the 
-                # files we're monitoring to see if their status has changed. We
-                # need to make a copy of monitoredFiles as the rescanning process
-                # will affect it.
-                checkList = copy.copy(self.monitoredFiles)
-                while len(checkList):
-                    checkList.pop().invalidate_extension_info()
-                return False
-
-        # Add our callback function on a 1 second timeout
-        gobject.timeout_add(1000, ThreadProc)
-
-
-
-    #--------------------------------------------------------------------------
-    def OnEditConflicts(self, menuitem, window, files):
-        """ Edit Conflicts menu handler.
-        """
-        file = files[0]    
-
-        path = gnomevfs.get_local_path_from_uri(file.get_uri())
-        rabbitvcs.util.helper.launch_diff_tool(path + ".mine", path)
-
-    #-------------------------------------------------------------------------- 
-    def OnResolveConflicts(self, menuitem, window, files):
-        """ Resolve Conflicts menu handler.
-        """
-        paths = self.get_paths_from_files(files)
-        pid = rabbitvcs.util.helper.launch_ui_window("resolve", paths)
-        self.RescanFilesAfterProcess(pid)
-
-    #--------------------------------------------------------------------------
-    def OnRevert(self, menuitem, window, files):
-        """ Revert menu handler.
-        """
-
-        paths = self.get_paths_from_files(files)
-        pid = rabbitvcs.util.helper.launch_ui_window("revert", paths)
-        self.RescanFilesAfterProcess(pid)
-
-    #--------------------------------------------------------------------------
-    def OnCheckout(self, menuitem, window, files):
-        """ Checkout menu handler.
-        """
-        paths = self.get_paths_from_files(files)
-        pid = rabbitvcs.util.helper.launch_ui_window("checkout", paths)
-
-    #--------------------------------------------------------------------------
-    def OnShowDiff(self, menuitem, window, files):
-        """ Diff menu handler.
-        """
-
-        paths = self.get_paths_from_files(files)
-        rabbitvcs.util.helper.launch_diff_tool(*paths)
-
-    #--------------------------------------------------------------------------
-    def OnShowLog(self, menuitem, window, files):
-        """ Show Log menu handler.
-        """
-        
-        paths = self.get_paths_from_files(files)
-        pid = rabbitvcs.util.helper.launch_ui_window("log", paths)
-        self.RescanFilesAfterProcess(pid)
-
-    #-------------------------------------------------------------------------- 
-    def OnCommit(self, menuitem, window, files):
-        """ Commit menu handler.
-        """
-        paths = self.get_paths_from_files(files)
-        pid = rabbitvcs.util.helper.launch_ui_window("commit", ["--base-dir=" + window.get_data("base_dir")] + paths)
-        self.RescanFilesAfterProcess(pid)
-
-    #--------------------------------------------------------------------------
-    def OnUpdate(self, menuitem, window, files):
-        """ Update menu handler.
-        """
-        paths = self.get_paths_from_files(files)
-        pid = rabbitvcs.util.helper.launch_ui_window("update", paths)
-        self.RescanFilesAfterProcess(pid)
-
-    #--------------------------------------------------------------------------
-    def OnAdd(self, menuitem, window, files):
-        """ Add menu handler.
-        """
-        paths = self.get_paths_from_files(files)
-        pid = rabbitvcs.util.helper.launch_ui_window("add", paths)
-        self.RescanFilesAfterProcess(pid)
-
-    #-------------------------------------------------------------------------- 
-    def OnDelete(self, menuitem, window, files):
-        """ Delete menu handler.
-        """
-
-        paths = self.get_paths_from_files(files)
-        pid = rabbitvcs.util.helper.launch_ui_window("delete", paths)
-        self.RescanFilesAfterProcess(pid)
-
-    #-------------------------------------------------------------------------- 
-    def OnRename(self, menuitem, window, files):
-        """ Delete menu handler.
-        """
-
-        paths = self.get_paths_from_files(files)
-        pid = rabbitvcs.util.helper.launch_ui_window("rename", paths)
-        self.RescanFilesAfterProcess(pid)
-
-    #-------------------------------------------------------------------------- 
-    def OnRepoBrowser(self, menuitem, window, files):
-        """ Repository Browser menu handler.
-        """
-
-        paths = self.get_paths_from_files(files)
-        pid = rabbitvcs.util.helper.launch_ui_window("browser", [paths[0]])
-        self.RescanFilesAfterProcess(pid)
-        
-    #--------------------------------------------------------------------------
-    def OnRefreshStatus(self, menuitem, window, files):
-        """ Refresh status menu handler. Invalidates the status of all of the selected files.
-        """
-        for file in files:
-            file.invalidate_extension_info()
-
-    #--------------------------------------------------------------------------
-    def OnProperties(self, menuitem, window, files):
-        """ Properties menu handler.
-        """
-        file = files[0]
-        path = gnomevfs.get_local_path_from_uri(file.get_uri())
-        pid = rabbitvcs.util.helper.launch_ui_window("property_editor", [path])
-        self.RescanFilesAfterProcess(pid)
-
-    #--------------------------------------------------------------------------
-    def OnMkDiff(self, menuitem, window, files):
-        """ MkDiff menu handler.
-        """
-
-        paths = self.get_paths_from_files(files)	    
-        proc = launch_ui_window("createpatch", paths)
-        self.rabbitvcs_extension.execute_after_process_exit(proc)
-
-    #--------------------------------------------------------------------------
-    def OnMkDiffDir(self, menuitem, window, files):
-        """ MkDiffDir menu handler.
-        """
-
-        paths = self.get_paths_from_files(files)
-        proc = launch_ui_window("createpatch", paths)
-        self.rabbitvcs_extension.execute_after_process_exit(proc)
-
-    def get_paths_from_files(self, files):
-        paths = []
-        for file in files:
-            paths.append(gnomevfs.get_local_path_from_uri(file.get_uri()))
-        
-        return paths
-
-#============================================================================== 
diff -uNr rabbitvcs-0.17.1/clients/nemo/RabbitVCS.py rabbitvcs/clients/nemo/RabbitVCS.py
--- rabbitvcs-0.17.1/clients/nemo/RabbitVCS.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/nemo/RabbitVCS.py	2019-09-13 08:36:17.237342674 +0800
@@ -1,5 +1,5 @@
 #
-# This is an extension to the Nautilus file manager to allow better
+# This is an extension to the Nemo file manager to allow better
 # integration with the Subversion source control system.
 #
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
@@ -22,14 +22,19 @@
 
 """
 
-Our module for everything related to the Nautilus extension.
+Our module for everything related to the Nemo extension.
 
 """
+
+
 from __future__ import with_statement
+
 from __future__ import absolute_import
-import six
 from six.moves import range
 
+import signal
+signal.signal(signal.SIGINT, signal.SIG_DFL)
+
 def log_all_exceptions(type, value, tb):
     import sys, traceback
     from rabbitvcs.util.log import Log
@@ -57,13 +62,20 @@
 import copy
 
 import os
-os.environ["NAUTILUS_PYTHON_REQUIRE_GTK3"] = "1"
+# Do NOT change this to "Nemo". RabbitVCS has an internal reference to this name.
+os.environ["REQUIRE_GTK3"] = "1"
 
 import os.path
 from os.path import isdir, isfile, realpath, basename
 import datetime
 
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version('Nemo', '3.0')
+sa = helper.SanitizeArgv()
 from gi.repository import Nemo, GObject, Gtk, GdkPixbuf
+sa.restore()
 
 import pysvn
 
@@ -72,7 +84,11 @@
 
 from rabbitvcs.util.helper import launch_ui_window, launch_diff_tool
 from rabbitvcs.util.helper import get_file_extension, get_common_directory
+from rabbitvcs.util.helper import get_home_folder
 from rabbitvcs.util.helper import pretty_timedelta
+from rabbitvcs.util.helper import unquote_url
+
+from rabbitvcs.util.strings import S
 
 from rabbitvcs.util.decorators import timeit, disable
 
@@ -96,27 +112,27 @@
 from rabbitvcs.services.checkerservice import StatusCheckerStub as StatusChecker
 
 class RabbitVCS(Nemo.InfoProvider, Nemo.MenuProvider,
-                 Nemo.ColumnProvider, Nemo.PropertyPageProvider, GObject.GObject):
+                Nemo.ColumnProvider, Nemo.PropertyPageProvider, Nemo.NameAndDescProvider, GObject.GObject):
     """
     This is the main class that implements all of our awesome features.
 
     """
 
-    #: This is our lookup table for C{NautilusVFSFile}s which we need for attaching
+    #: This is our lookup table for C{NemoVFSFile}s which we need for attaching
     #: emblems. This is mostly a workaround for not being able to turn a path/uri
-    #: into a C{NautilusVFSFile}. It looks like:::
+    #: into a C{NemoVFSFile}. It looks like:::
     #:
-    #:     nautilusVFSFile_table = {
-    #:        "/foo/bar/baz": <NautilusVFSFile>
+    #:     nemoVFSFile_table = {
+    #:        "/foo/bar/baz": <NemoVFSFile>
     #:
     #:     }
     #:
-    #: Keeping track of C{NautilusVFSFile}s is a little bit complicated because
+    #: Keeping track of C{NemoVFSFile}s is a little bit complicated because
     #: when an item is moved (renamed) C{update_file_info} doesn't get called. So
-    #: we also add C{NautilusVFSFile}s to this table from C{get_file_items} etc.
+    #: we also add C{NemoVFSFile}s to this table from C{get_file_items} etc.
     # FIXME: this may be the source of the memory hogging seen in the extension
     # script itself.
-    nautilusVFSFile_table = {}
+    nemoVFSFile_table = {}
 
     #: This is in case we want to permanently enable invalidation of the status
     #: checker info.
@@ -133,9 +149,14 @@
         factory = Gtk.IconFactory()
 
         rabbitvcs_icons = [
+            "scalable/actions/rabbitvcs-cancel.svg",
+            "scalable/actions/rabbitvcs-ok.svg",
+            "scalable/actions/rabbitvcs-no.svg",
+            "scalable/actions/rabbitvcs-yes.svg",
             "scalable/actions/rabbitvcs-settings.svg",
             "scalable/actions/rabbitvcs-export.svg",
             "scalable/actions/rabbitvcs-properties.svg",
+            "scalable/actions/rabbitvcs-editprops.svg",
             "scalable/actions/rabbitvcs-show_log.svg",
             "scalable/actions/rabbitvcs-delete.svg",
             "scalable/actions/rabbitvcs-run.svg",
@@ -179,7 +200,7 @@
             "scalable/apps/rabbitvcs-small.svg",
             "16x16/actions/rabbitvcs-push.png"
         ]
-        
+
         rabbitvcs_icon_path = get_icon_path()
         for rel_icon_path in rabbitvcs_icons:
             icon_path = "%s/%s" % (rabbitvcs_icon_path, rel_icon_path)
@@ -191,16 +212,16 @@
             factory.add(root, iconset)
 
         factory.add_default()
-    
+
         # Create a global client we can use to do VCS related stuff
         self.vcs_client = VCS()
 
         self.status_checker = StatusChecker()
-        
+
         self.status_checker.assert_version(EXT_VERSION)
-        
+
         self.items_cache = {}
-        
+
     def get_columns(self):
         """
         Return all the columns we support.
@@ -249,29 +270,29 @@
           - You're not notified about items you don't see (which is needed to
             keep the emblem for the directories above the item up-to-date)
 
-        @type   item: NautilusVFSFile
+        @type   item: NemoVFSFile
         @param  item:
 
         """
         enable_emblems = bool(int(settings.get("general", "enable_emblems")))
         enable_attrs = bool(int(settings.get("general", "enable_attributes")))
-        
+
         if not (enable_emblems or enable_attrs): return Nemo.OperationResult.COMPLETE
-                
+
         if not self.valid_uri(item.get_uri()): return Nemo.OperationResult.FAILED
 
-        path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
+        path = unquote_url(self.get_local_path(item.get_uri()))
 
         # log.debug("update_file_info() called for %s" % path)
 
         invalidate = False
-        if path in self.nautilusVFSFile_table:
+        if path in self.nemoVFSFile_table:
             invalidate = True
 
         # Always replace the item in the table with the one we receive, because
-        # for example if an item is deleted and recreated the NautilusVFSFile
+        # for example if an item is deleted and recreated the NemoVFSFile
         # we had before will be invalid (think pointers and such).
-        self.nautilusVFSFile_table[path] = item
+        self.nemoVFSFile_table[path] = item
 
         # This check should be pretty obvious :-)
         # TODO: how come the statuses for a few directories are incorrect
@@ -310,12 +331,12 @@
         # FIXME: when did this get disabled?
         if enable_attrs: self.update_columns(item, path, status)
         if enable_emblems: self.update_status(item, path, status)
-        
+
         return Nemo.OperationResult.COMPLETE
 
     def update_columns(self, item, path, status):
         """
-        Update the columns (attributes) for a given Nautilus item,
+        Update the columns (attributes) for a given Nemo item,
         filling them in with information from the version control
         server.
 
@@ -343,7 +364,7 @@
             "age": age
         }
 
-        for key, value in list(values.items()):
+        for key, value in values.items():
             item.add_string_attribute(key, value)
 
     def update_status(self, item, path, status):
@@ -356,17 +377,17 @@
     # MainContextMenuConditions.
     def get_file_items_full(self, provider, window, items):
         """
-        Menu activated with items selected. Nautilus also calls this function
+        Menu activated with items selected. Nemo also calls this function
         when rendering submenus, even though this is not needed since the entire
         menu has already been returned.
 
-        Note that calling C{nautilusVFSFile.invalidate_extension_info()} will
+        Note that calling C{nemoVFSFile.invalidate_extension_info()} will
         also cause get_file_items to be called.
 
-        @type   window: NautilusNavigationWindow
+        @type   window: NemoNavigationWindow
         @param  window:
 
-        @type   items:  list of NautilusVFSFile
+        @type   items:  list of NemoVFSFile
         @param  items:
 
         @rtype:         list of MenuItems
@@ -377,43 +398,43 @@
         paths = []
         for item in items:
             if self.valid_uri(item.get_uri()):
-                path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
+                path = unquote_url(self.get_local_path(item.get_uri()))
                 paths.append(path)
-                self.nautilusVFSFile_table[path] = item
+                self.nemoVFSFile_table[path] = item
 
         if len(paths) == 0: return []
-        
+
         # log.debug("get_file_items_full() called")
 
         paths_str = "-".join(paths)
-        
+
         conditions_dict = None
         if paths_str in self.items_cache:
             conditions_dict = self.items_cache[paths_str]
-            if conditions_dict and conditions_dict != "in-progress":
-                conditions = NautilusMenuConditions(conditions_dict)
-                menu = NautilusMainContextMenu(self, window.base_dir, paths, conditions).get_menu()
+            if conditions_dict and conditions_dict != "in-progress" and hasattr(window, 'base_dir'):
+                conditions = NemoMenuConditions(conditions_dict)
+                menu = NemoMainContextMenu(self, window.base_dir, paths, conditions).get_menu()
                 return menu
-        
-        if conditions_dict != "in-progress":
-            self.status_checker.generate_menu_conditions_async(provider, window.base_dir, paths, self.update_file_items)        
+
+        if conditions_dict != "in-progress" and hasattr(window, 'base_dir'):
+            self.status_checker.generate_menu_conditions_async(provider, window.base_dir, paths, self.update_file_items)
             self.items_cache[path] = "in-progress"
-            
+
         return ()
 
     def get_file_items(self, window, items):
         paths = []
         for item in items:
             if self.valid_uri(item.get_uri()):
-                path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
+                path = unquote_url(self.get_local_path(item.get_uri()))
                 paths.append(path)
-                self.nautilusVFSFile_table[path] = item
+                self.nemoVFSFile_table[path] = item
 
         if len(paths) == 0: return []
-        
+
         # log.debug("get_file_items() called")
-        
-        return NautilusMainContextMenu(self, window.base_dir, paths).get_menu()
+
+        return NemoMainContextMenu(self, window.base_dir, paths).get_menu()
 
     def update_file_items(self, provider, base_dir, paths, conditions_dict):
         paths_str = "-".join(paths)
@@ -422,33 +443,31 @@
 
     #~ @disable
     # This is useful for profiling. Rename it to "get_background_items" and then
-    # rename the real function "get_background_items_real". 
+    # rename the real function "get_background_items_real".
     def get_background_items_profile(self, window, item):
         import cProfile
-        import rabbitvcs.util.helper
-        
-        path = six.text_type(gnomevfs.get_local_path_from_uri(item.get_uri()),
-                       "utf-8").replace("/", ":")
-        
+
+        path = S(gnomevfs.get_local_path_from_uri(item.get_uri())).replace("/", ":")
+
         profile_data_file = os.path.join(
-                               rabbitvcs.util.helper.get_home_folder(),
-                               "checkerservice_%s.stats" % path)
-        
+            get_home_folder(),
+            "checkerservice_%s.stats" % path)
+
         prof = cProfile.Profile()
         retval = prof.runcall(self.get_background_items_real, window, item)
         prof.dump_stats(profile_data_file)
         log.debug("Dumped: %s" % profile_data_file)
         return retval
-       
+
     def get_background_items_full(self, provider, window, item):
         """
         Menu activated on entering a directory. Builds context menu for File
         menu and for window background.
 
-        @type   window: NautilusNavigationWindow
+        @type   window: NemoNavigationWindow
         @param  window:
 
-        @type   item:   NautilusVFSFile
+        @type   item:   NemoVFSFile
         @param  item:
 
         @rtype:         list of MenuItems
@@ -457,8 +476,8 @@
         """
 
         if not self.valid_uri(item.get_uri()): return
-        path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
-        self.nautilusVFSFile_table[path] = item
+        path = unquote_url(self.get_local_path(item.get_uri()))
+        self.nemoVFSFile_table[path] = item
 
         # log.debug("get_background_items_full() called")
 
@@ -466,8 +485,8 @@
         if path in self.items_cache:
             conditions_dict = self.items_cache[path]
             if conditions_dict and conditions_dict != "in-progress":
-                conditions = NautilusMenuConditions(conditions_dict)
-                menu = NautilusMainContextMenu(self, path, [path], conditions).get_menu()                
+                conditions = NemoMenuConditions(conditions_dict)
+                menu = NemoMainContextMenu(self, path, [path], conditions).get_menu()
                 return menu
 
         window.base_dir = path
@@ -475,23 +494,23 @@
         if conditions_dict != "in-progress":
             self.status_checker.generate_menu_conditions_async(provider, path, [path], self.update_background_items)
             self.items_cache[path] = "in-progress"
-                    
+
         return ()
 
     def get_background_items(self, window, item):
         if not self.valid_uri(item.get_uri()): return
-        path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
-        self.nautilusVFSFile_table[path] = item
+        path = unquote_url(self.get_local_path(item.get_uri()))
+        self.nemoVFSFile_table[path] = item
 
         # log.debug("get_background_items() called")
-        
+
         window.base_dir = path
-        
-        return NautilusMainContextMenu(self, path, [path]).get_menu()
+
+        return NemoMainContextMenu(self, path, [path]).get_menu()
 
     def update_background_items(self, provider, base_dir, paths, conditions_dict):
         paths_str = "-".join(paths)
-        conditions = NautilusMenuConditions(conditions_dict)
+        conditions = NemoMenuConditions(conditions_dict)
         self.items_cache[paths_str] =  conditions_dict
         Nemo.MenuProvider.emit_items_updated_signal(provider)
 
@@ -504,7 +523,7 @@
         Check whether or not it's a good idea to have RabbitVCS do
         its magic for this URI. Some examples of URI schemes:
 
-        x-nautilus-desktop:/// # e.g. mounted devices on the desktop
+        x-nemo-desktop:/// # e.g. mounted devices on the desktop
 
         """
 
@@ -571,7 +590,7 @@
 
         def do_reload_settings():
             globals()["settings"] = SettingsManager()
-            globals()["log"] = reload_log_settings()("rabbitvcs.util.extensions.nautilus")
+            globals()["log"] = reload_log_settings()("rabbitvcs.util.extensions.nemo")
             log.debug("Re-scanning settings")
 
         self.execute_after_process_exit(proc, do_reload_settings)
@@ -591,11 +610,11 @@
         @type   statuses: list of status objects
         @param  statuses: The statuses
         """
-        if status.path in self.nautilusVFSFile_table:
-            item = self.nautilusVFSFile_table[status.path]
+        if status.path in self.nemoVFSFile_table:
+            item = self.nemoVFSFile_table[status.path]
             # We need to invalidate the extension info for only one reason:
             #
-            # - Invalidating the extension info will cause Nautilus to remove all
+            # - Invalidating the extension info will cause Nemo to remove all
             #   temporary emblems we applied so we don't have overlay problems
             #   (with ourselves, we'd still have some with other extensions).
             #
@@ -616,45 +635,44 @@
 
         for item in items:
             if self.valid_uri(item.get_uri()):
-                path = rabbitvcs.util.helper.unquote_url(self.get_local_path(item.get_uri()))
-                
+                path = unquote_url(self.get_local_path(item.get_uri()))
+
                 if self.vcs_client.is_in_a_or_a_working_copy(path):
                     paths.append(path)
-                    self.nautilusVFSFile_table[path] = item
+                    self.nemoVFSFile_table[path] = item
 
         if len(paths) == 0: return []
 
-        label = rabbitvcs.ui.property_page.PropertyPageLabel(claim_domain=False).get_widget()
+        label = rabbitvcs.ui.property_page.PropertyPageLabel(claim_domain=False).get_widget("rabbitvcs-title")
         page = rabbitvcs.ui.property_page.PropertyPage(paths, claim_domain=False).get_widget()
 
         ppage = Nemo.PropertyPage(name='RabbitVCS::PropertyPage',
-            label=label,
-            page=page)
+                                  label=label,
+                                  page=page)
 
         return [ppage]
 
+
+    def get_name_and_desc(self):
+        return [("Nemo RabbitVCS:::Access RabbitVCS from the context menu")]
+
 from rabbitvcs.util.contextmenuitems import *
 
-class NautilusContextMenu(MenuBuilder):
+class NemoContextMenu(MenuBuilder):
     """
-    Provides a standard Nautilus context menu (ie. a list of
+    Provides a standard Nemo context menu (ie. a list of
     "Nemo.MenuItem"s).
     """
 
     signal = "activate"
 
     def make_menu_item(self, item, id_magic):
-#        return item.make_nautilus_menu_item(id_magic)
-
         identifier = item.make_magic_id(id_magic)
+        menuitem = Nemo.MenuItem(name=identifier,
+                                 label=item.make_label(),
+                                 tip=item.tooltip,
+                                 icon=item.icon)
 
-        menuitem = Nemo.MenuItem(
-        name=identifier,
-        label=item.make_label(),
-        tip=item.tooltip,
-        icon=item.icon
-        )
-                    
         return menuitem
 
     def attach_submenu(self, menu_node, submenu_list):
@@ -665,10 +683,10 @@
     def top_level_menu(self, items):
         return items
 
-class NautilusMenuConditions(ContextMenuConditions):
+class NemoMenuConditions(ContextMenuConditions):
     def __init__(self, path_dict):
         self.path_dict = path_dict
 
-class NautilusMainContextMenu(MainContextMenu):
+class NemoMainContextMenu(MainContextMenu):
     def get_menu(self):
-        return NautilusContextMenu(self.structure, self.conditions, self.callbacks).menu
+        return NemoContextMenu(self.structure, self.conditions, self.callbacks).menu
diff -uNr rabbitvcs-0.17.1/clients/pluma/README rabbitvcs/clients/pluma/README
--- rabbitvcs-0.17.1/clients/pluma/README	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/clients/pluma/README	2019-09-13 08:36:17.241342778 +0800
@@ -0,0 +1,29 @@
+RabbitVCS Pluma Plugin
+
+This plugin is meant to be used with the Pluma Text Editor.  It provides the 
+familiar RabbitVCS Context menu in the Tools menu as well as in various 
+context menus.
+
+Requirements:
+    * pluma
+    * (all other RabbitVCS requirements)
+
+Installation:
+    To install for all users, copy rabbitvcs-plugin.py and 
+    rabbitvcs-pluma.plugin to:
+        /usr/lib{64}/pluma/plugins
+
+    To install for a single user, copy rabbitvcs-plugin.py and 
+    rabbitvcs-pluma.plugin to:
+        ~/.local/share/pluma/plugins        
+
+
+Troubleshooting:
+    If Pluma supports Python 3 but not Python 2, edit installed file
+    rabbitvcs-pluma.plugin and change line
+        Loader=python
+    to
+        Loader=python3
+
+    See the known-issues section of our website:
+        http://wiki.rabbitvcs.org/wiki/support/known-issues
diff -uNr rabbitvcs-0.17.1/clients/pluma/rabbitvcs-plugin.py rabbitvcs/clients/pluma/rabbitvcs-plugin.py
--- rabbitvcs-0.17.1/clients/pluma/rabbitvcs-plugin.py	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/clients/pluma/rabbitvcs-plugin.py	2019-09-13 08:36:17.241342778 +0800
@@ -0,0 +1,767 @@
+from __future__ import absolute_import
+#
+# This is a Pluma plugin to allow for RabbitVCS integration in the Pluma
+# text editor.
+#
+# Copyright (C) 2008-2011 by Adam Plumb <adamplumb@gmail.com>
+#
+# RabbitVCS is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# RabbitVCS is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
+#
+
+from gettext import gettext as _
+
+import os
+import gi
+
+from rabbitvcs.util import helper
+
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk
+sa.restore()
+from gi.repository import Pluma, GObject, Peas
+
+
+from rabbitvcs.vcs import create_vcs_instance
+from rabbitvcs.util.contextmenu import GtkFilesContextMenuConditions, \
+    GtkFilesContextMenuCallbacks, MainContextMenu, MainContextMenuCallbacks, \
+    MenuBuilder, GtkContextMenuCaller
+from rabbitvcs.util.contextmenuitems import *
+
+# Menu item, insert a new item on the menu bar.
+ui_str = """<ui>
+  <menubar name="MenuBar">
+    <placeholder name="ExtraMenu_1">
+    <menu name="RabbitVCSMenu" action="RabbitVCSMenu">
+        <menu name="RabbitVCS::RabbitVCS_Svn" action="RabbitVCS::RabbitVCS_Svn">
+            <menuitem name="RabbitVCS::Update" action="RabbitVCS::Update" />
+            <menuitem name="RabbitVCS::Commit" action="RabbitVCS::Commit" />
+            <menuitem name="RabbitVCS::Checkout" action="RabbitVCS::Checkout" />
+            <menu name="RabbitVCS::Diff_Menu" action="RabbitVCS::Diff_Menu">
+                <menuitem name="RabbitVCS::Diff" action="RabbitVCS::Diff" />
+                <menuitem name="RabbitVCS::Diff_Previous_Revision" action="RabbitVCS::Diff_Previous_Revision" />
+                <menuitem name="RabbitVCS::Diff_Multiple" action="RabbitVCS::Diff_Multiple" />
+                <menuitem name="RabbitVCS::Compare_Tool" action="RabbitVCS::Compare_Tool" />
+                <menuitem name="RabbitVCS::Compare_Tool_Previous_Revision" action="RabbitVCS::Compare_Tool_Previous_Revision" />
+                <menuitem name="RabbitVCS::Compare_Tool_Multiple" action="RabbitVCS::Compare_Tool_Multiple" />
+                <menuitem name="RabbitVCS::Show_Changes" action="RabbitVCS::Show_Changes" />
+            </menu>
+            <menuitem name="RabbitVCS::Show_Log" action="RabbitVCS::Show_Log" />
+            <menuitem name="RabbitVCS::Repo_Browser" action="RabbitVCS::Repo_Browser" />
+            <menuitem name="RabbitVCS::Check_For_Modifications" action="RabbitVCS::Check_For_Modifications" />
+            <separator />
+            <menuitem name="RabbitVCS::Add" action="RabbitVCS::Add" />
+            <menu name="RabbitVCS::Add_To_Ignore_List" action="RabbitVCS::Add_To_Ignore_List">
+                <menuitem name="RabbitVCS::Ignore_By_Filename" action="RabbitVCS::Ignore_By_Filename" />
+                <menuitem name="RabbitVCS::Ignore_By_File_Extension" action="RabbitVCS::Ignore_By_File_Extension" />
+            </menu>
+            <separator />
+            <menuitem name="RabbitVCS::Update_To_Revision" action="RabbitVCS::Update_To_Revision" />
+            <menuitem name="RabbitVCS::Rename" action="RabbitVCS::Rename" />
+            <menuitem name="RabbitVCS::Delete" action="RabbitVCS::Delete" />
+            <menuitem name="RabbitVCS::Revert" action="RabbitVCS::Revert" />
+            <menuitem name="RabbitVCS::Edit_Conflicts" action="RabbitVCS::Edit_Conflicts" />
+            <menuitem name="RabbitVCS::Mark_Resolved" action="RabbitVCS::Mark_Resolved" />
+            <menuitem name="RabbitVCS::Relocate" action="RabbitVCS::Relocate" />
+            <menuitem name="RabbitVCS::Get_Lock" action="RabbitVCS::Get_Lock" />
+            <menuitem name="RabbitVCS::Unlock" action="RabbitVCS::Unlock" />
+            <menuitem name="RabbitVCS::Cleanup" action="RabbitVCS::Cleanup" />
+            <menuitem name="RabbitVCS::Annotate" action="RabbitVCS::Annotate" />
+            <separator />
+            <menuitem name="RabbitVCS::Export" action="RabbitVCS::Export" />
+            <menuitem name="RabbitVCS::Create_Repository" action="RabbitVCS::Create_Repository" />
+            <menuitem name="RabbitVCS::Import" action="RabbitVCS::Import" />
+            <separator />
+            <menuitem name="RabbitVCS::Branch_Tag" action="RabbitVCS::Branch_Tag" />
+            <menuitem name="RabbitVCS::Switch" action="RabbitVCS::Switch" />
+            <menuitem name="RabbitVCS::Merge" action="RabbitVCS::Merge" />
+            <separator />
+            <menuitem name="RabbitVCS::Apply_Patch" action="RabbitVCS::Apply_Patch" />
+            <menuitem name="RabbitVCS::Create_Patch" action="RabbitVCS::Create_Patch" />
+            <menuitem name="RabbitVCS::Properties" action="RabbitVCS::Properties" />
+            <separator />
+        </menu>
+        <menu name="RabbitVCS::RabbitVCS_Git" action="RabbitVCS::RabbitVCS_Git">
+            <menuitem name="RabbitVCS::Update" action="RabbitVCS::Update" />
+            <menuitem name="RabbitVCS::Commit" action="RabbitVCS::Commit" />
+            <menuitem name="RabbitVCS::Push" action="RabbitVCS::Push" />
+            <separator />
+            <menuitem name="RabbitVCS::Clone" action="RabbitVCS::Clone" />
+            <menuitem name="RabbitVCS::Initialize_Repository" action="RabbitVCS::Initialize_Repository" />
+            <separator />
+            <menu name="RabbitVCS::Diff_Menu" action="RabbitVCS::Diff_Menu">
+                <menuitem name="RabbitVCS::Diff" action="RabbitVCS::Diff" />
+                <menuitem name="RabbitVCS::Diff_Previous_Revision" action="RabbitVCS::Diff_Previous_Revision" />
+                <menuitem name="RabbitVCS::Diff_Multiple" action="RabbitVCS::Diff_Multiple" />
+                <menuitem name="RabbitVCS::Compare_Tool" action="RabbitVCS::Compare_Tool" />
+                <menuitem name="RabbitVCS::Compare_Tool_Previous_Revision" action="RabbitVCS::Compare_Tool_Previous_Revision" />
+                <menuitem name="RabbitVCS::Compare_Tool_Multiple" action="RabbitVCS::Compare_Tool_Multiple" />
+                <menuitem name="RabbitVCS::Show_Changes" action="RabbitVCS::Show_Changes" />
+            </menu>
+            <menuitem name="RabbitVCS::Show_Log" action="RabbitVCS::Show_Log" />
+            <separator />
+            <menuitem name="RabbitVCS::Stage" action="RabbitVCS::Stage" />
+            <menuitem name="RabbitVCS::Unstage" action="RabbitVCS::Unstage" />
+            <menu name="RabbitVCS::Add_To_Ignore_List" action="RabbitVCS::Add_To_Ignore_List">
+                <menuitem name="RabbitVCS::Ignore_By_Filename" action="RabbitVCS::Ignore_By_Filename" />
+                <menuitem name="RabbitVCS::Ignore_By_File_Extension" action="RabbitVCS::Ignore_By_File_Extension" />
+            </menu>
+            <separator />
+            <menuitem name="RabbitVCS::Rename" action="RabbitVCS::Rename" />
+            <menuitem name="RabbitVCS::Delete" action="RabbitVCS::Delete" />
+            <menuitem name="RabbitVCS::Revert" action="RabbitVCS::Revert" />
+            <menuitem name="RabbitVCS::Edit_Conflicts" action="RabbitVCS::Edit_Conflicts" />
+            <menuitem name="RabbitVCS::Clean" action="RabbitVCS::Clean" />
+            <menuitem name="RabbitVCS::Reset" action="RabbitVCS::Reset" />
+            <menuitem name="RabbitVCS::Checkout" action="RabbitVCS::Checkout" />
+            <separator />
+            <menuitem name="RabbitVCS::Branches" action="RabbitVCS::Branches" />
+            <menuitem name="RabbitVCS::Tags" action="RabbitVCS::Tags" />
+            <menuitem name="RabbitVCS::Remotes" action="RabbitVCS::Remotes" />
+            <separator />
+            <menuitem name="RabbitVCS::Export" action="RabbitVCS::Export" />
+            <menuitem name="RabbitVCS::Merge" action="RabbitVCS::Merge" />
+            <separator />
+            <menuitem name="RabbitVCS::Annotate" action="RabbitVCS::Annotate" />
+            <separator />
+            <menuitem name="RabbitVCS::Apply_Patch" action="RabbitVCS::Apply_Patch" />
+            <menuitem name="RabbitVCS::Create_Patch" action="RabbitVCS::Create_Patch" />
+            <separator />
+        </menu>
+        <menuitem name="RabbitVCS::Settings" action="RabbitVCS::Settings" />
+        <menuitem name="RabbitVCS::About" action="RabbitVCS::About" />
+    </menu>
+    </placeholder>
+  </menubar>
+</ui>
+"""
+class RabbitVCSWindowHelper(GtkContextMenuCaller):
+
+    _menu_paths = [
+#        "/MenuBar/RabbitVCSMenu",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Commit",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Update",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Checkout",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Diff_Menu",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Diff_Menu/RabbitVCS::Diff",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Diff_Menu/RabbitVCS::Diff_Previous_Revision",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Diff_Menu/RabbitVCS::Diff_Multiple",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Diff_Menu/RabbitVCS::Compare_Tool",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Diff_Menu/RabbitVCS::Compare_Tool_Previous_Revision",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Diff_Menu/RabbitVCS::Compare_Tool_Multiple",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Diff_Menu/RabbitVCS::Show_Changes",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Show_Log",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Repo_Browser",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Check_For_Modifications",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Add",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Add_To_Ignore_List",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Add_To_Ignore_List/RabbitVCS::Ignore_By_Filename",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Add_To_Ignore_List/RabbitVCS::Ignore_By_File_Extension",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Update_To_Revision",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Rename",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Delete",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Revert",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Edit_Conflicts",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Mark_Resolved",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Get_Lock",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Unlock",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Cleanup",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Annotate",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Export",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Create_Repository",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Import",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Branch_Tag",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Switch",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Merge",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Apply_Patch",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Create_Patch",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Svn/RabbitVCS::Properties",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Update",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Commit",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Push",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Clone",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Initialize_Repository",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Diff_Menu",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Diff_Menu/RabbitVCS::Diff",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Diff_Menu/RabbitVCS::Diff_Previous_Revision",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Diff_Menu/RabbitVCS::Diff_Multiple",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Diff_Menu/RabbitVCS::Compare_Tool",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Diff_Menu/RabbitVCS::Compare_Tool_Previous_Revision",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Diff_Menu/RabbitVCS::Compare_Tool_Multiple",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Diff_Menu/RabbitVCS::Show_Changes",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Show_Log",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Stage",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Unstage",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Add_To_Ignore_List",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Add_To_Ignore_List/RabbitVCS::Ignore_By_Filename",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Add_To_Ignore_List/RabbitVCS::Ignore_By_File_Extension",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Rename",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Delete",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Revert",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Edit_Conflicts",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Clean",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Reset",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Checkout",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Branches",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Tags",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Remotes",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Export",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Merge",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Annotate",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Apply_Patch",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::RabbitVCS_Git/RabbitVCS::Create_Patch",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::Settings",
+        "/MenuBar/ExtraMenu_1/RabbitVCSMenu/RabbitVCS::About"
+    ]
+
+    _default_base_dir = os.path.expanduser("~")
+
+    def __init__(self, plugin, window):
+        self._window = window
+        self._plugin = plugin
+        self.base_dir = self._default_base_dir
+        self._menubar_menu = None
+        self._menu_action = None
+
+        self.vcs_client = create_vcs_instance()
+
+        # Insert menu items
+        self._insert_menu()
+
+    def deactivate(self):
+        # Remove any installed menu items
+        self._remove_menu()
+
+        self._window = None
+        self.base_dir = None
+        self._plugin = None
+        self._menubar_menu = None
+        self._action_group = None
+
+    def _insert_menu(self):
+        # Get the GtkUIManager
+        manager = self._window.get_ui_manager()
+
+        self._menubar_menu = PlumaMenu(self, self.vcs_client, self.base_dir, [self._get_document_path()])
+        self._menu_action = Gtk.Action(name="RabbitVCSMenu",
+                                       label="RabbitVCS",
+                                       tooltip=_("Excellent Version Control"),
+                                       stock_id=None)
+
+        self._action_group = Gtk.ActionGroup("RabbitVCSActions")
+        self._action_group = self._menubar_menu.get_action_group(self._action_group)
+        self._action_group.add_action( self._menu_action )
+
+        # Insert the action group
+        manager.insert_action_group(self._action_group, 0)
+
+        # Merge the UI
+        self._ui_id = manager.add_ui_from_string(ui_str)
+
+    def _remove_menu(self):
+        # Get the GtkUIManager
+        manager = self._window.get_ui_manager()
+
+        # Remove the ui
+        manager.remove_ui(self._ui_id)
+
+        # Remove the action group
+        manager.remove_action_group(self._action_group)
+
+        # Make sure the manager updates
+        manager.ensure_update()
+
+    def update_ui(self):
+        self.update_base_dir()
+
+        document = self._window.get_active_document()
+        self._action_group.set_sensitive(document != None)
+        if document != None:
+            manager = self._window.get_ui_manager()
+            manager.get_widget("/MenuBar/ExtraMenu_1/RabbitVCSMenu").set_sensitive(True)
+            self._menubar_menu.set_paths([self._get_document_path()])
+            self._determine_menu_sensitivity([self._get_document_path()])
+
+    def connect_view(self, view, id_name):
+        handler_id = view.connect("populate-popup", self.on_view_populate_popup)
+        setattr(view, id_name, [handler_id])
+
+    def disconnect_view(self, view, id_name):
+        view.disconnect(getattr(view, id_name)[0])
+
+    def on_view_populate_popup(self, view, menu):
+        separator = Gtk.SeparatorMenuItem()
+        menu.append(separator)
+        separator.show()
+
+        context_menu = PlumaMainContextMenu(self, self.vcs_client, self.base_dir, [self._get_document_path()]).get_menu()
+        for context_menu_item in context_menu:
+            menu.append(context_menu_item)
+
+    def _get_document_path(self):
+        document = self._window.get_active_document()
+        path = self.base_dir
+
+        if document:
+            tmp_path = document.get_uri_for_display()
+            if os.path.exists(tmp_path):
+                path = tmp_path
+
+        return path
+
+    def update_base_dir(self):
+        document = self._window.get_active_document()
+        if document:
+            path = document.get_uri_for_display()
+            if os.path.exists(path):
+                self.base_dir = os.path.dirname(path)
+        else:
+            self.base_dir = self._default_base_dir
+
+        self._menubar_menu.set_base_dir(self.base_dir)
+
+    def _determine_menu_sensitivity(self, paths):
+        self._menubar_menu.update_conditions(paths)
+
+        manager = self._window.get_ui_manager()
+        for menu_path in self._menu_paths:
+            # Gtk3 changes how we access a widget's action.  Get it from the
+            # UI Manager instead of the widget directly
+            if hasattr(manager, "get_action"):
+                action = manager.get_action(menu_path)
+            else:
+                widget = manager.get_widget(menu_path)
+                action = widget.get_action()
+
+            self._menubar_menu.update_action(action)
+
+    # Menu activate handlers
+    def reload_settings(self, proc):
+        self.update_ui()
+
+    def on_context_menu_command_finished(self):
+        self.update_ui()
+
+class RabbitVCSPlumaPlugin(GObject.Object, Peas.Activatable):
+    __gtype_name__ = "RabbitVCSPlumaPlugin"
+    object = GObject.property(type=GObject.Object)
+
+    def __init__(self):
+        GObject.Object.__init__(self)
+        self._instances = {}
+        self.id_name = "RabbitVCSContextMenuID"
+
+    def do_activate(self):
+        self._instances[self.object] = RabbitVCSWindowHelper(self, self.object)
+
+        handler_ids = []
+        for signal in ('tab-added', 'tab-removed'):
+            method = getattr(self, 'on_window_' + signal.replace('-', '_'))
+            handler_ids.append(self.object.connect(signal, method))
+
+        setattr(self.object, self.id_name, handler_ids)
+        if self.object in self._instances:
+            for view in self.object.get_views():
+                self._instances[self.object].connect_view(view, self.id_name)
+
+    def do_deactivate(self):
+        widgets = [self.object] + self.object.get_views()
+        for widget in widgets:
+            handler_ids = getattr(widget, self.id_name)
+            if handler_ids is not None:
+                for handler_id in handler_ids:
+                    widget.disconnect(handler_id)
+                setattr(widget, self.id_name, None)
+
+        if self.object in self._instances:
+            self._instances[self.object].deactivate()
+            del self._instances[self.object]
+
+    def do_update_state(self):
+        self.update_ui()
+
+    def update_ui(self):
+        if self.object in self._instances:
+            self._instances[self.object].update_ui()
+
+    def on_window_tab_added(self, window, tab):
+        if window in self._instances:
+            self._instances[window].connect_view(tab.get_view(), self.id_name)
+
+    def on_window_tab_removed(self, window, tab):
+        if window in self._instances:
+            self._instances[window].disconnect_view(tab.get_view(), self.id_name)
+
+class MenuIgnoreByFilename(MenuItem):
+    identifier = "RabbitVCS::Ignore_By_Filename"
+    label = _("Ignore by File Name")
+    tooltip = _("Ignore item by filename")
+
+class MenuIgnoreByFileExtension(MenuItem):
+    identifier = "RabbitVCS::Ignore_By_File_Extension"
+    label = _("Ignore by File Extension")
+    tooltip = _("Ignore item by extension")
+
+class PlumaMenuBuilder(object):
+    """
+    Generalised menu builder class. Subclasses must provide:
+
+    make_menu_item(self, item, id_magic) - create the menu item for whatever
+    toolkit (usually this should be just call a  convenience method on the
+    MenuItem instance).
+
+    attach_submenu(self, menu_node, submenu_list) - given a list of whatever
+    make_menu_item(...) returns, create a submenu and attach it to the given
+    node.
+
+    top_level_menu(self, items) - in some circumstances we need to treat the top
+    level menu differently (eg. Nautilus, because Xenu said so). This processes
+    a list of menu items returned by make_menu_item(...) to create the overall
+    menu.
+    """
+
+    def __init__(self, structure, conditions, callbacks, action_group):
+        """
+        @param  structure: Menu structure
+        @type   structure: list
+
+        Note on "structure". The menu structure is defined in a list of tuples
+        of two elements each.  The first element is a class - the MenuItem
+        subclass that defines the menu interface (see below).
+
+        The second element is either None (if there is no submenu) or a list of
+        tuples if there is a submenu.  The submenus are generated recursively.
+        FYI, this is a list of tuples so that we retain the desired menu item
+        order (dicts do not retain order)
+
+            Example:
+            [
+                (MenuClassOne, [
+                    (MenuClassOneSubA,
+                    (MenuClassOneSubB
+                ]),
+                (MenuClassTwo,
+                (MenuClassThree
+            ]
+
+        """
+
+        self.action_group = action_group
+
+        for item_class in structure:
+
+            item = item_class(conditions, callbacks)
+
+            default_name = MenuItem.make_default_name(item.identifier)
+            action = Gtk.Action(item.identifier, item.label, item.tooltip, item.icon)
+
+            if item.icon and hasattr(action, "set_icon_name"):
+                action.set_icon_name(item.icon)
+
+            if item.callback:
+                if item.callback_args:
+                    action.connect("activate", item.callback, item.callback_args)
+                else:
+                    action.connect("activate", item.callback)
+
+            action.set_property("visible", item.show())
+            setattr(action, "item", item)
+            self.action_group.add_action(action)
+
+    def _get_function(self, object, name):
+
+        function = None
+
+        if hasattr(object, name):
+
+            attr = getattr(object, name)
+            if callable(attr):
+                function = attr
+
+        return function
+
+class PlumaMenu:
+    def __init__(self, caller, vcs_client, base_dir, paths):
+        """
+        @param  caller: The calling object
+        @type   caller: RabbitVCS extension
+
+        @param  vcs_client: The vcs client
+        @type   vcs_client: rabbitvcs.vcs
+
+        @param  base_dir: The curent working directory
+        @type   base_dir: string
+
+        @param  paths: The selected paths
+        @type   paths: list
+
+        @param  conditions: The conditions class that determines menu item visibility
+        @kind   conditions: ContextMenuConditions
+
+        @param  callbacks: The callbacks class that determines what actions are taken
+        @kind   callbacks: ContextMenuCallbacks
+
+        """
+        self.caller = caller
+        self.paths = paths
+        self.base_dir = base_dir
+        self.vcs_client = vcs_client
+
+        self.conditions = GtkFilesContextMenuConditions(self.vcs_client, self.paths)
+
+        self.callbacks = GtkFilesContextMenuCallbacks(
+            self.caller,
+            self.base_dir,
+            self.vcs_client,
+            self.paths
+        )
+
+        self.structure = [
+            MenuRabbitVCSSvn,
+            MenuRabbitVCSGit,
+            MenuCheckout,
+            MenuUpdate,
+            MenuCommit,
+            MenuPush,
+            MenuInitializeRepository,
+            MenuClone,
+            MenuRabbitVCS,
+            MenuDiffMenu,
+            MenuDiff,
+            MenuDiffPrevRev,
+            MenuDiffMultiple,
+            MenuCompareTool,
+            MenuCompareToolPrevRev,
+            MenuCompareToolMultiple,
+            MenuShowChanges,
+            MenuShowLog,
+            MenuRepoBrowser,
+            MenuCheckForModifications,
+            MenuAdd,
+            MenuStage,
+            MenuUnstage,
+            MenuAddToIgnoreList,
+            MenuUpdateToRevision,
+            MenuRename,
+            MenuDelete,
+            MenuRevert,
+            MenuEditConflicts,
+            MenuMarkResolved,
+            MenuRelocate,
+            MenuGetLock,
+            MenuUnlock,
+            MenuClean,
+            MenuReset,
+            MenuCleanup,
+            MenuExport,
+            MenuCreateRepository,
+            MenuImport,
+            MenuBranches,
+            MenuTags,
+            MenuRemotes,
+            MenuBranchTag,
+            MenuSwitch,
+            MenuMerge,
+            MenuAnnotate,
+            MenuCreatePatch,
+            MenuApplyPatch,
+            MenuProperties,
+            MenuHelp,
+            MenuSettings,
+            MenuAbout,
+            MenuIgnoreByFilename,
+            MenuIgnoreByFileExtension
+        ]
+
+    def set_paths(self, paths):
+        self.paths = paths
+        self.conditions.paths = paths
+        self.callbacks.paths = paths
+
+    def set_base_dir(self, base_dir):
+        self.base_dir = base_dir
+        self.callbacks.base_dir = base_dir
+        self.conditions.base_dir = base_dir
+
+    def get_action_group(self, action_group):
+        return PlumaMenuBuilder(self.structure, self.conditions, self.callbacks, action_group).action_group
+
+    def update_conditions(self, paths):
+        self.conditions.generate_statuses(paths)
+        self.conditions.generate_path_dict(paths)
+
+    def update_action(self, action):
+        action.set_property("visible", action.item.show())
+
+class PlumaContextMenu(MenuBuilder):
+    """
+    Provides a standard Gtk context menu (ie. a list of Gtk.MenuItem"s).
+    """
+
+    signal = "activate"
+
+    def make_menu_item(self, item, id_magic):
+        return item.make_gtk3_menu_item(id_magic)
+
+    def attach_submenu(self, menu_node, submenu_list):
+        submenu = Gtk.Menu()
+        menu_node.set_submenu(submenu)
+        [submenu.append(item) for item in submenu_list]
+
+    def top_level_menu(self, items):
+        return items
+
+class PlumaMainContextMenu(MainContextMenu):
+    def __init__(self, caller, vcs_client, base_dir, paths=[],
+            conditions=None, callbacks=None):
+        """
+        @param  caller: The calling object
+        @type   caller: RabbitVCS extension
+
+        @param  vcs_client: The vcs client
+        @type   vcs_client: rabbitvcs.vcs
+
+        @param  base_dir: The curent working directory
+        @type   base_dir: string
+
+        @param  paths: The selected paths
+        @type   paths: list
+
+        @param  conditions: The conditions class that determines menu item visibility
+        @kind   conditions: ContextMenuConditions
+
+        @param  callbacks: The callbacks class that determines what actions are taken
+        @kind   callbacks: ContextMenuCallbacks
+
+        """
+        self.caller = caller
+        self.paths = paths
+        self.base_dir = base_dir
+        self.vcs_client = vcs_client
+
+        self.conditions = conditions
+        if self.conditions is None:
+            self.conditions = GtkFilesContextMenuConditions(self.vcs_client, paths)
+
+        self.callbacks = callbacks
+        if self.callbacks is None:
+            self.callbacks = MainContextMenuCallbacks(
+                self.caller,
+                self.base_dir,
+                self.vcs_client,
+                paths
+            )
+
+        ignore_items = get_ignore_list_items(paths)
+
+        # The first element of each tuple is a key that matches a
+        # ContextMenuItems item.  The second element is either None when there
+        # is no submenu, or a recursive list of tuples for desired submenus.
+        self.structure = [
+            (MenuUpdate, None),
+            (MenuCommit, None),
+            (MenuPush, None),
+            (MenuRabbitVCSSvn, [
+                (MenuCheckout, None),
+                (MenuDiffMenu, [
+                    (MenuDiff, None),
+                    (MenuDiffPrevRev, None),
+                    (MenuDiffMultiple, None),
+                    (MenuCompareTool, None),
+                    (MenuCompareToolPrevRev, None),
+                    (MenuCompareToolMultiple, None),
+                    (MenuShowChanges, None),
+                ]),
+                (MenuShowLog, None),
+                (MenuRepoBrowser, None),
+                (MenuCheckForModifications, None),
+                (MenuSeparator, None),
+                (MenuAdd, None),
+                (MenuAddToIgnoreList, ignore_items),
+                (MenuSeparator, None),
+                (MenuUpdateToRevision, None),
+                (MenuRename, None),
+                (MenuDelete, None),
+                (MenuRevert, None),
+                (MenuEditConflicts, None),
+                (MenuMarkResolved, None),
+                (MenuRelocate, None),
+                (MenuGetLock, None),
+                (MenuUnlock, None),
+                (MenuCleanup, None),
+                (MenuSeparator, None),
+                (MenuExport, None),
+                (MenuCreateRepository, None),
+                (MenuImport, None),
+                (MenuSeparator, None),
+                (MenuBranchTag, None),
+                (MenuSwitch, None),
+                (MenuMerge, None),
+                (MenuSeparator, None),
+                (MenuAnnotate, None),
+                (MenuSeparator, None),
+                (MenuCreatePatch, None),
+                (MenuApplyPatch, None),
+                (MenuProperties, None),
+                (MenuSeparator, None),
+                (MenuSettings, None),
+                (MenuAbout, None)
+            ]),
+            (MenuRabbitVCSGit, [
+                (MenuClone, None),
+                (MenuInitializeRepository, None),
+                (MenuSeparator, None),
+                (MenuDiffMenu, [
+                    (MenuDiff, None),
+                    (MenuDiffPrevRev, None),
+                    (MenuDiffMultiple, None),
+                    (MenuCompareTool, None),
+                    (MenuCompareToolPrevRev, None),
+                    (MenuCompareToolMultiple, None),
+                    (MenuShowChanges, None),
+                ]),
+                (MenuShowLog, None),
+                (MenuStage, None),
+                (MenuUnstage, None),
+                (MenuAddToIgnoreList, ignore_items),
+                (MenuSeparator, None),
+                (MenuRename, None),
+                (MenuDelete, None),
+                (MenuRevert, None),
+                (MenuEditConflicts, None),
+                (MenuClean, None),
+                (MenuReset, None),
+                (MenuCheckout, None),
+                (MenuSeparator, None),
+                (MenuBranches, None),
+                (MenuTags, None),
+                (MenuRemotes, None),
+                (MenuSeparator, None),
+                (MenuExport, None),
+                (MenuMerge, None),
+                (MenuSeparator, None),
+                (MenuAnnotate, None),
+                (MenuSeparator, None),
+                (MenuCreatePatch, None),
+                (MenuApplyPatch, None),
+                (MenuSeparator, None),
+                (MenuSettings, None),
+                (MenuAbout, None)
+            ])
+        ]
+
+    def get_menu(self):
+        return PlumaContextMenu(self.structure, self.conditions, self.callbacks).menu
diff -uNr rabbitvcs-0.17.1/clients/pluma/rabbitvcs-pluma.plugin rabbitvcs/clients/pluma/rabbitvcs-pluma.plugin
--- rabbitvcs-0.17.1/clients/pluma/rabbitvcs-pluma.plugin	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/clients/pluma/rabbitvcs-pluma.plugin	2019-09-13 08:36:17.241342778 +0800
@@ -0,0 +1,9 @@
+[Plugin]
+Loader=python
+Module=rabbitvcs-plugin
+IAge=2
+Name=RabbitVCS
+Description=RabbitVCS plugin for Pluma
+Authors=Adam Plumb <adamplumb@gmail.com>
+Copyright=Copyright © 2011 Adam Plumb
+Website=http://www.rabbitvcs.org
diff -uNr rabbitvcs-0.17.1/clients/thunar/README rabbitvcs/clients/thunar/README
--- rabbitvcs-0.17.1/clients/thunar/README	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/thunar/README	2019-09-13 08:36:17.241342778 +0800
@@ -1,23 +1,26 @@
-RabbitVCS Thunar Extension
+RabbitVCS Thunar Gtk+3 Extension
 
-This extension is meant to be used with the Thunar File Manager.  Bear in mind that
-Thunar's extension framework does not allow the setting of emblems so file statuses
-will not be overlayed like it does on Nautilus.
+This extension is meant to be used with the Thunar File Manager v1.7 or higher.
+As of the v1.7 release, Thunar requires Gtk+3 and allows for Python3, so this
+client makes sure it can work with both. Bear in mind that
+Thunar's extension framework still does not allow the setting of emblems so file statuses
+will not be overlayed like they do on Nautilus.
 
 Requirements:
-    * thunar (>= v0.4.0)
-    * thunarx-python (>= v0.2.0)
+    * thunar (>= v1.7)
+    * thunarx-python (>= v0.5.0)
     * dbus-python (>= 0.80)
     * (all other RabbitVCS requirements)
 
 To install:
-    If you are running Thunar v1.1.0 or later, copy RabbitVCS.py to:
-        /usr/lib/thunarx-2/python or /usr/lib64/thunarx-2/python
-    
-    If you are running Thunar < v1.1.0, copy RabbitVCS.py to:
-        /usr/lib/thunarx-1/python or /usr/lib64/thunarx-2/python
-        
-    In both cases, you may need to create the python folder.  Some systems like Fedora use /usr/lib64 on 64-bit systems.
+    Copy RabbitVCS.py to one of:
+        1. $XDG_DATA_HOME/thunarx-python/extensions (i.e. ~/.local)
+        2. thunar_prefix/share/thunarx-python/extensions (i.e. ~/Development/Thunar)
+        3. $XDG_DATA_DIRS/thunarx-python/extensions (i.e. /usr/share)
+        4. THUNARX_EXTENSION_DIR/python (i.e. /usr/lib64/thunarx-3/python)
+
+    In both cases, you may need to create the python folder.
+    Some systems like Fedora use /usr/lib64 on 64-bit systems.
 
 Troubleshooting:
 
diff -uNr rabbitvcs-0.17.1/clients/thunar/RabbitVCS.py rabbitvcs/clients/thunar/RabbitVCS.py
--- rabbitvcs-0.17.1/clients/thunar/RabbitVCS.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/clients/thunar/RabbitVCS.py	2019-09-13 08:36:17.241342778 +0800
@@ -1,19 +1,19 @@
 #
-# This is an extension to the Thunar file manager to allow better 
+# This is an extension to the Thunar file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2008-2008 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -21,7 +21,7 @@
 """
 
 Our module for everything related to the Thunar extension.
-  
+
 """
 
 from __future__ import with_statement
@@ -32,24 +32,31 @@
 import datetime
 import time
 import threading
-import urllib
-import thunarx
-import pysvn
-import gobject
-import gtk
+
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import GObject, Gtk, Thunarx
+sa.restore()
 
 from rabbitvcs.vcs.svn import SVN
 
+import os
+os.environ["REQUIRE_GTK3"] = "1"
+
 import rabbitvcs.ui
 import rabbitvcs.ui.property_page
 from rabbitvcs.util.helper import launch_ui_window, launch_diff_tool
 from rabbitvcs.util.helper import get_file_extension, get_common_directory
 from rabbitvcs.util.helper import pretty_timedelta
+from rabbitvcs.util.helper import unquote
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.decorators import timeit, disable
-from rabbitvcs.util.contextmenu import MainContextMenu, SEPARATOR
+from rabbitvcs.util.contextmenu import MenuBuilder, MainContextMenu, SEPARATOR
 
 from rabbitvcs.util.log import Log, reload_log_settings
-import six
 log = Log("rabbitvcs.util.extensions.thunarx.RabbitVCS")
 
 from rabbitvcs import gettext
@@ -61,17 +68,17 @@
 import rabbitvcs.services.service
 from rabbitvcs.services.checkerservice import StatusCheckerStub as StatusChecker
 
-class RabbitVCS(thunarx.MenuProvider, thunarx.PropertyPageProvider):
-    """ 
+class RabbitVCS(GObject.GObject, Thunarx.MenuProvider, Thunarx.PropertyPageProvider):
+    """
     This is the main class that implements all of our awesome features.
-    
+
     """
-    
+
     #: Maps statuses to emblems.
     #: TODO: should probably be possible to create this dynamically
     EMBLEMS = rabbitvcs.ui.STATUS_EMBLEMS
-    
-    #: A list of statuses which count as modified (for a directory) in 
+
+    #: A list of statuses which count as modified (for a directory) in
     #: TortoiseSVN emblem speak.
     MODIFIED_STATUSES = [
         SVN.STATUS["added"],
@@ -80,51 +87,51 @@
         SVN.STATUS["modified"],
         SVN.STATUS["missing"]
     ]
-    
+
     MODIFIED_TEXT_STATUSES = [
-        "added", 
+        "added",
         "deleted",
         "replaced",
         "modified",
         "missing"
     ]
-    
+
     #: This is our lookup table for C{NautilusVFSFile}s which we need for attaching
     #: emblems. This is mostly a workaround for not being able to turn a path/uri
     #: into a C{NautilusVFSFile}. It looks like:::
-    #: 
+    #:
     #:     nautilusVFSFile_table = {
     #:        "/foo/bar/baz": <NautilusVFSFile>
-    #:     
+    #:
     #:     }
-    #: 
+    #:
     #: Keeping track of C{NautilusVFSFile}s is a little bit complicated because
     #: when an item is moved (renamed) C{update_file_info} doesn't get called. So
     #: we also add C{NautilusVFSFile}s to this table from C{get_file_items} etc.
     nautilusVFSFile_table = {}
-    
+
     #: Without an actual status monitor it's not possible to just keep
     #: track of stuff that happens (e.g. a commit happens, files are added,
     #: such things). So at the moment we just add all interesting items
     #: to this list.
     monitored_files = []
-    
+
     #: This is in case we want to permanently enable invalidation of the status
     #: checker info. We put a path here before we invalidate the item, so that
     #: we don't enter an endless loop when updating the status.
     #: The callback should acquire this lock when pushing the path to this.
     always_invalidate = True
-    
+
     #: When we get the statuses from the callback, but them here for further
     #: use. There is a possible memory problem here if we put a lot of data in
     #: this - even when it's removed, Python may not release the memory. I do
     #: not know this for sure.
     #: This is of the form: [("path/to", {...status dict...}), ...]
     paths_from_callback = []
-    
+
     paths_last_lookup = {}
     paths_lookup_timeout = 30
-    
+
     #: It appears that the "update_file_info" call that is triggered by the
     #: "invalidate_extension_info" in the callback function happens
     #: synchronously (ie. in the same thread). However, given the nature of the
@@ -133,7 +140,7 @@
     #: change in the future? Who knows. This should work for both the current
     #: situation, and the possibility that they are asynchronous.
     callback_paths_lock = threading.RLock()
-    
+
     #: A list of statuses that we want to keep track of for when a process
     #: might have done something.
     STATUSES_TO_MONITOR = copy.copy(MODIFIED_TEXT_STATUSES)
@@ -144,112 +151,112 @@
         # checkout likely hasn't completed yet and the status will be:
         "incomplete"
     ])
-    
+
     def __init__(self):
         threading.currentThread().setName("RabbitVCS extension thread")
-        
+
         self.status_checker = StatusChecker()
-    
+
     def get_local_path(self, item):
-        return urllib.unquote(item.get_uri().replace("file://", ""))
+        return unquote(item.get_uri().replace("file://", ""))
 
     #~ @disable
     # @timeit
-    def get_file_actions(self, window, items):
+    def get_file_menu_items(self, window, items):
         """
         Menu activated with items selected. Nautilus also calls this function
         when rendering submenus, even though this is not needed since the entire
         menu has already been returned.
-        
-        Note that calling C{nautilusVFSFile.invalidate_extension_info()} will 
+
+        Note that calling C{nautilusVFSFile.invalidate_extension_info()} will
         also cause get_file_items to be called.
-        
+
         @type   window: NautilusNavigationWindow
         @param  window:
-        
+
         @type   items:  list of NautilusVFSFile
         @param  items:
-        
+
         @rtype:         list of MenuItems
         @return:        The context menu entries to add to the menu.
-        
+
         """
 
         paths = []
         for item in items:
             if self.valid_uri(item.get_uri()):
-                path = realpath(six.text_type(self.get_local_path(item), "utf-8"))
+                path = realpath(S(self.get_local_path(item)))
                 paths.append(path)
                 self.nautilusVFSFile_table[path] = item
 
         if len(paths) == 0: return []
-        
-        return ThunarxMainContextMenu(self, window.get_data("base_dir"), paths).get_menu()
-    
+
+        return ThunarxMainContextMenu(self, window.base_dir, paths).get_menu()
+
     #~ @disable
     @timeit
-    def get_folder_actions(self, window, item):
+    def get_folder_menu_items(self, window, item):
         """
         Menu activated on entering a directory. Builds context menu for File
         menu and for window background.
-        
+
         @type   window: NautilusNavigationWindow
         @param  window:
-        
+
         @type   item:   NautilusVFSFile
         @param  item:
-        
+
         @rtype:         list of MenuItems
         @return:        The context menu entries to add to the menu.
-        
+
         """
-        
+
         if not self.valid_uri(item.get_uri()): return
-        path = realpath(six.text_type(self.get_local_path(item), "utf-8"))
+        path = realpath(S(self.get_local_path(item)))
         self.nautilusVFSFile_table[path] = item
-        
+
         # log.debug("get_background_items() called")
-        
-        window.set_data("base_dir", path)
-        
+
+        window.base_dir = path
+
         return ThunarxMainContextMenu(self, path, [path]).get_menu()
-            
+
     #
     # Helper functions
     #
-    
+
     def valid_uri(self, uri):
         """
         Check whether or not it's a good idea to have RabbitVCS do
         its magic for this URI. Some examples of URI schemes:
-        
+
         x-nautilus-desktop:/// # e.g. mounted devices on the desktop
-        
+
         """
-        
+
         if not uri.startswith("file://"): return False
-        
+
         return True
-    
+
     #
     # Some methods to help with keeping emblems up-to-date
     #
-    
+
     def rescan_after_process_exit(self, proc, paths):
-        """ 
+        """
         Rescans all of the items on our C{monitored_files} list after the
         process specified by C{proc} completes. Also checks the paths
         that were passed.
-        
+
         TODO: the monitored_files list could grow quite large if somebody
         browses a lot of working copies. It probably won't affect anything
         (most importantly performance) all that negatively.
-        
+
         """
-        
+
         def do_check():
             # We'll check the paths first (these were the paths that
-            # were originally passed along to the context menu). 
+            # were originally passed along to the context menu).
             #
             # This is needed among other things for:
             #
@@ -261,9 +268,9 @@
                                                  recurse=True,
                                                  invalidate=True,
                                                  summary=True)
-            
+
         self.execute_after_process_exit(proc, do_check)
-        
+
     def execute_after_process_exit(self, proc, func=None):
 
         def is_process_still_alive():
@@ -271,37 +278,37 @@
             # First we need to see if the commit process is still running
 
             retval = proc.poll()
-            
+
             log.debug("%s" % retval)
-            
+
             still_going = (retval is None)
 
             if not still_going and callable(func):
                 func()
-            
+
             return still_going
 
         # Add our callback function on a 1 second timeout
-        gobject.timeout_add_seconds(1, is_process_still_alive)
-        
-    # 
+        GObject.timeout_add_seconds(1, is_process_still_alive)
+
+    #
     # Some other methods
-    # 
-    
+    #
+
     def reload_settings(self, proc):
         """
         Used to re-load settings after the settings dialog has been closed.
-        
+
         FIXME: This probably doesn't belong here, ideally the settings manager
-        does this itself and make sure everything is reloaded properly 
+        does this itself and make sure everything is reloaded properly
         after the settings dialogs saves.
         """
-    
+
         def do_reload_settings():
             globals()["settings"] = SettingsManager()
             globals()["log"] = reload_log_settings()("rabbitvcs.util.extensions.thunar")
             log.debug("Re-scanning settings")
-            
+
         self.execute_after_process_exit(proc, do_reload_settings)
 
     def get_property_pages(self, items):
@@ -309,7 +316,7 @@
         paths = []
         for item in items:
             if self.valid_uri(item.get_uri()):
-                path = realpath(six.text_type(self.get_local_path(item), "utf-8"))
+                path = realpath(S(self.get_local_path(item)))
                 paths.append(path)
                 self.nautilusVFSFile_table[path] = item
 
@@ -317,30 +324,31 @@
 
         label = rabbitvcs.ui.property_page.PropertyPageLabel().get_widget()
         page = rabbitvcs.ui.property_page.PropertyPage(paths).get_widget()
-        
-        ppage = thunarx.PropertyPage("")
+
+        ppage = Thunarx.PropertyPage.new("")
         ppage.set_label_widget(label)
-        ppage.add(page)        
-        
+        ppage.add(page)
+
         return [ppage]
 
 from rabbitvcs.util.contextmenuitems import *
 
-class ThunarxContextMenu(rabbitvcs.util.contextmenu.MenuBuilder):
+class ThunarxContextMenu(MenuBuilder):
     """
-    Provides a standard Gtk Context Menu class used for all context menus
-    in gtk dialogs/windows.
-    
+    Provides a standard Thunar context menu (ie. a list of
+    "Thunarx.MenuItem"s).
     """
-    
+
     signal = "activate"
-        
+
     def make_menu_item(self, item, id_magic):
-        return item.make_thunar_action(id_magic)
-    
+        return item.make_thunarx_menu_item(id_magic)
+
     def attach_submenu(self, menu_node, submenu_list):
-		menu_node.set_sub_actions(submenu_list)
-    
+        submenu = Thunarx.Menu()
+        menu_node.set_menu(submenu)
+        [submenu.append_item(item) for item in submenu_list]
+
     def top_level_menu(self, items):
         return items
 
diff -uNr rabbitvcs-0.17.1/data/icons/hicolor/scalable/actions/rabbitvcs-cancel.svg rabbitvcs/data/icons/hicolor/scalable/actions/rabbitvcs-cancel.svg
--- rabbitvcs-0.17.1/data/icons/hicolor/scalable/actions/rabbitvcs-cancel.svg	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/data/icons/hicolor/scalable/actions/rabbitvcs-cancel.svg	2019-09-13 08:36:17.245342882 +0800
@@ -0,0 +1,299 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48.000000px"
+   height="48.000000px"
+   id="svg6361"
+   sodipodi:version="0.32"
+   inkscape:version="0.92.4 (unknown)"
+   sodipodi:docname="rabbitvcs-cancel.svg"
+   version="1.1">
+  <defs
+     id="defs3">
+    <linearGradient
+       id="linearGradient2256">
+      <stop
+         style="stop-color:#ff0202;stop-opacity:1;"
+         offset="0"
+         id="stop2258" />
+      <stop
+         style="stop-color:#ff9b9b;stop-opacity:1;"
+         offset="1"
+         id="stop2260" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       id="linearGradient2248">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0"
+         id="stop2250" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0;"
+         offset="1"
+         id="stop2252" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient9647">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0"
+         id="stop9649" />
+      <stop
+         style="stop-color:#dbdbdb;stop-opacity:1;"
+         offset="1"
+         id="stop9651" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       id="linearGradient21644">
+      <stop
+         style="stop-color:#000000;stop-opacity:1;"
+         offset="0"
+         id="stop21646" />
+      <stop
+         style="stop-color:#000000;stop-opacity:0;"
+         offset="1"
+         id="stop21648" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient21644"
+       id="radialGradient21650"
+       cx="25.125"
+       cy="36.75"
+       fx="25.125"
+       fy="36.75"
+       r="15.75"
+       gradientTransform="matrix(1.000000,0.000000,0.000000,0.595238,-2.300678e-15,14.87500)"
+       gradientUnits="userSpaceOnUse" />
+    <linearGradient
+       inkscape:collect="always"
+       id="linearGradient7895">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0"
+         id="stop7897" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0;"
+         offset="1"
+         id="stop7899" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient4981">
+      <stop
+         style="stop-color:#cc0000;stop-opacity:1;"
+         offset="0"
+         id="stop4983" />
+      <stop
+         style="stop-color:#b30000;stop-opacity:1.0000000;"
+         offset="1.0000000"
+         id="stop4985" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient15762"
+       inkscape:collect="always">
+      <stop
+         id="stop15764"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop15766"
+         offset="1"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient14236">
+      <stop
+         id="stop14238"
+         offset="0.0000000"
+         style="stop-color:#ed4040;stop-opacity:1.0000000;" />
+      <stop
+         id="stop14240"
+         offset="1.0000000"
+         style="stop-color:#a40000;stop-opacity:1.0000000;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11780">
+      <stop
+         style="stop-color:#ff8b8b;stop-opacity:1.0000000;"
+         offset="0.0000000"
+         id="stop11782" />
+      <stop
+         style="stop-color:#ec1b1b;stop-opacity:1.0000000;"
+         offset="1.0000000"
+         id="stop11784" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11014">
+      <stop
+         style="stop-color:#a80000;stop-opacity:1.0000000;"
+         offset="0.0000000"
+         id="stop11016" />
+      <stop
+         style="stop-color:#c60000;stop-opacity:1.0000000;"
+         offset="0.0000000"
+         id="stop13245" />
+      <stop
+         style="stop-color:#e50000;stop-opacity:1.0000000;"
+         offset="1.0000000"
+         id="stop11018" />
+    </linearGradient>
+    <linearGradient
+       y2="9.6507530"
+       x2="9.8940229"
+       y1="5.3855424"
+       x1="5.7365270"
+       gradientTransform="matrix(-1.000000,0.000000,0.000000,-1.000000,31.72170,31.29079)"
+       gradientUnits="userSpaceOnUse"
+       id="linearGradient15772"
+       xlink:href="#linearGradient15762"
+       inkscape:collect="always" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient4981"
+       id="linearGradient4987"
+       x1="23.995985"
+       y1="20.105337"
+       x2="41.047836"
+       y2="37.959785"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(0.000000,-2.000000)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7895"
+       id="linearGradient7901"
+       x1="15.578875"
+       y1="16.285088"
+       x2="32.166405"
+       y2="28.394291"
+       gradientUnits="userSpaceOnUse" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient4981"
+       id="linearGradient2243"
+       gradientUnits="userSpaceOnUse"
+       x1="23.995985"
+       y1="20.105337"
+       x2="41.047836"
+       y2="37.959785"
+       gradientTransform="matrix(0.988373,0.000000,0.000000,0.988373,0.279002,0.278984)" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient2248"
+       id="radialGradient2254"
+       cx="16.75"
+       cy="10.666344"
+       fx="16.75"
+       fy="10.666344"
+       r="21.25"
+       gradientTransform="matrix(4.154957,-2.979206e-24,3.255657e-24,3.198723,-52.84553,-23.50921)"
+       gradientUnits="userSpaceOnUse" />
+  </defs>
+  <sodipodi:namedview
+     inkscape:guide-bbox="true"
+     showguides="true"
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#666666"
+     borderopacity="0.15294118"
+     inkscape:pageopacity="0.0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="8"
+     inkscape:cx="19.223361"
+     inkscape:cy="15.539422"
+     inkscape:current-layer="layer1"
+     showgrid="false"
+     inkscape:grid-bbox="true"
+     inkscape:document-units="px"
+     inkscape:window-width="1067"
+     inkscape:window-height="803"
+     inkscape:window-x="95"
+     inkscape:window-y="98"
+     inkscape:showpageshadow="false"
+     inkscape:window-maximized="0" />
+  <metadata
+     id="metadata4">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:title>Cancel</dc:title>
+        <dc:date>2005-10-16</dc:date>
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Andreas Nilsson</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>Cancel</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/by-sa/2.0/" />
+        <dc:contributor>
+          <cc:Agent>
+            <dc:title>Jakub Steiner</dc:title>
+          </cc:Agent>
+        </dc:contributor>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/by-sa/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Attribution" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     id="layer1"
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer">
+    <path
+       sodipodi:type="arc"
+       style="opacity:0.63068183;color:#000000;fill:url(#radialGradient21650);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;visibility:visible;display:inline;overflow:visible"
+       id="path21642"
+       sodipodi:cx="25.125"
+       sodipodi:cy="36.75"
+       sodipodi:rx="15.75"
+       sodipodi:ry="9.375"
+       d="M 40.875 36.75 A 15.75 9.375 0 1 1  9.375,36.75 A 15.75 9.375 0 1 1  40.875 36.75 z"
+       transform="matrix(1.173803,0.000000,0.000000,0.600000,-5.265866,19.57500)" />
+    <path
+       style="fill:url(#linearGradient4987);fill-opacity:1;fill-rule:evenodd;stroke:#860000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
+       d="M 15.591006,0.4919213 L 32.676311,0.4919213 L 45.497585,13.586385 L 45.497585,31.48003 L 32.848986,43.496929 L 15.418649,43.496929 L 2.4943857,30.658264 L 2.4943857,13.464078 L 15.591006,0.4919213 z "
+       id="path9480"
+       sodipodi:nodetypes="ccccccccc" />
+    <path
+       style="opacity:0.81318683;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffdfdf;stroke-width:1.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"
+       d="M 16.020655,1.5003424 L 32.248563,1.5003424 L 44.496456,13.922717 L 44.496456,31.037001 L 32.638472,42.48783 L 15.870253,42.48783 L 3.5090792,30.208718 L 3.5090792,13.84561 L 16.020655,1.5003424 z "
+       id="path9482"
+       sodipodi:nodetypes="ccccccccc" />
+    <path
+       style="opacity:0.28977272;fill:url(#radialGradient2254);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
+       d="M 15.6875,0.75 L 2.75,13.5625 L 2.75,30.5625 L 5.6875,33.46875 C 22.450041,33.526299 22.164665,20.450067 45.25,21.59375 L 45.25,13.6875 L 32.5625,0.75 L 15.6875,0.75 z "
+       id="path2241"
+       sodipodi:nodetypes="cccccccc" />
+  </g>
+</svg>
diff -uNr rabbitvcs-0.17.1/data/icons/hicolor/scalable/actions/rabbitvcs-editprops.svg rabbitvcs/data/icons/hicolor/scalable/actions/rabbitvcs-editprops.svg
--- rabbitvcs-0.17.1/data/icons/hicolor/scalable/actions/rabbitvcs-editprops.svg	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/data/icons/hicolor/scalable/actions/rabbitvcs-editprops.svg	2019-09-13 08:36:17.245342882 +0800
@@ -0,0 +1,535 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg7854"
+   sodipodi:version="0.32"
+   inkscape:version="0.92.4 (unknown)"
+   version="1.0"
+   sodipodi:docname="rabbitvcs-editprops.svg"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape">
+  <defs
+     id="defs7856">
+    <linearGradient
+       inkscape:collect="always"
+       id="linearGradient5788">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0"
+         id="stop5790" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0;"
+         offset="1"
+         id="stop5792" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient5772">
+      <stop
+         id="stop5774"
+         offset="0"
+         style="stop-color:#e2b369;stop-opacity:1" />
+      <stop
+         id="stop5776"
+         offset="1"
+         style="stop-color:#c79b55;stop-opacity:1" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient5586">
+      <stop
+         style="stop-color:#bfbcb3;stop-opacity:1;"
+         offset="0"
+         id="stop5588" />
+      <stop
+         style="stop-color:#9c988a;stop-opacity:1;"
+         offset="1"
+         id="stop5590" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient5586"
+       id="linearGradient5592"
+       x1="24.635435"
+       y1="7.202693"
+       x2="24.635435"
+       y2="12.380689"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1,0,0,1,51.823723,0)" />
+    <filter
+       inkscape:collect="always"
+       x="-0.085321058"
+       width="1.1706421"
+       y="-0.73719835"
+       height="2.4743967"
+       id="filter5670">
+      <feGaussianBlur
+         inkscape:collect="always"
+         stdDeviation="0.38394476"
+         id="feGaussianBlur5672" />
+    </filter>
+    <filter
+       inkscape:collect="always"
+       x="-0.090666526"
+       width="1.1813331"
+       y="-0.31875174"
+       height="1.6375035"
+       id="filter5766">
+      <feGaussianBlur
+         inkscape:collect="always"
+         stdDeviation="0.79295562"
+         id="feGaussianBlur5768" />
+    </filter>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient5772"
+       id="linearGradient5784"
+       gradientUnits="userSpaceOnUse"
+       x1="25.5"
+       y1="-13.625"
+       x2="26"
+       y2="-39.125"
+       gradientTransform="translate(-51.823723)" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient5788"
+       id="linearGradient5794"
+       x1="24.499998"
+       y1="-38.500011"
+       x2="24.499998"
+       y2="-1.6250113"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="translate(-51.823723)" />
+    <filter
+       inkscape:collect="always"
+       x="-0.083650827"
+       width="1.1673017"
+       y="-0.4520362"
+       height="1.9040724"
+       id="filter5830">
+      <feGaussianBlur
+         inkscape:collect="always"
+         stdDeviation="1.4691176"
+         id="feGaussianBlur5832" />
+    </filter>
+    <linearGradient
+       id="linearGradient6732">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0"
+         id="stop6734" />
+      <stop
+         style="stop-color:#dddddd;stop-opacity:1;"
+         offset="1"
+         id="stop6736" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient6732"
+       id="linearGradient5968"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(0.9716096,0,0,1.283333,-40.47809,-6.1310478)"
+       x1="37.926636"
+       y1="37.668934"
+       x2="5.4959755"
+       y2="10.982666" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient2966"
+       id="linearGradient2468"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.1096722,0,0,1.1096722,-15.40275,-2.3927604)"
+       x1="48.90625"
+       y1="17.376184"
+       x2="50.988335"
+       y2="22.250591" />
+    <linearGradient
+       id="linearGradient2966">
+      <stop
+         style="stop-color:#ffd1d1;stop-opacity:1;"
+         offset="0"
+         id="stop2968" />
+      <stop
+         id="stop3006"
+         offset="0.5"
+         style="stop-color:#ff1d1d;stop-opacity:1;" />
+      <stop
+         style="stop-color:#6f0000;stop-opacity:1;"
+         offset="1"
+         id="stop2970" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient2974"
+       id="linearGradient2470"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.1096722,0,0,1.1096722,-15.40275,-2.3927604)"
+       x1="46"
+       y1="19.8125"
+       x2="47.6875"
+       y2="22.625" />
+    <linearGradient
+       id="linearGradient2974">
+      <stop
+         style="stop-color:#c1c1c1;stop-opacity:1;"
+         offset="0"
+         id="stop2976" />
+      <stop
+         style="stop-color:#acacac;stop-opacity:1;"
+         offset="1"
+         id="stop2978" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient2984"
+       id="radialGradient2472"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(3.2441988,0,0,2.2523205,-77.417921,-33.335049)"
+       cx="29.053354"
+       cy="27.640751"
+       fx="29.053354"
+       fy="27.640751"
+       r="3.2408545" />
+    <linearGradient
+       inkscape:collect="always"
+       id="linearGradient2984">
+      <stop
+         style="stop-color:#e7e2b8;stop-opacity:1;"
+         offset="0"
+         id="stop2986" />
+      <stop
+         style="stop-color:#e7e2b8;stop-opacity:0;"
+         offset="1"
+         id="stop2988" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient2994"
+       id="linearGradient2474"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.1096722,0,0,1.1096722,-15.576136,-2.2540513)"
+       x1="25.71875"
+       y1="31.046875"
+       x2="25.514589"
+       y2="30.703125" />
+    <linearGradient
+       id="linearGradient2994">
+      <stop
+         style="stop-color:#000000;stop-opacity:1;"
+         offset="0"
+         id="stop2996" />
+      <stop
+         style="stop-color:#c9c9c9;stop-opacity:1;"
+         offset="1"
+         id="stop2998" />
+    </linearGradient>
+  </defs>
+  <sodipodi:namedview
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#e0e0e0"
+     borderopacity="1"
+     gridtolerance="10000"
+     guidetolerance="10"
+     objecttolerance="10"
+     inkscape:pageopacity="0.0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="5.6568542"
+     inkscape:cx="5.2534225"
+     inkscape:cy="28.868481"
+     inkscape:document-units="px"
+     inkscape:current-layer="layer1"
+     width="48px"
+     height="48px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="1129"
+     inkscape:window-height="632"
+     inkscape:window-x="139"
+     inkscape:window-y="27"
+     showgrid="false"
+     inkscape:window-maximized="0" />
+  <metadata
+     id="metadata7859">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Jakub Steiner</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source>http://jimmac.musichall.cz</dc:source>
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>Edit Properties</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>edit properties</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     id="layer1">
+    <rect
+       ry="7.272984"
+       rx="4.4858322"
+       y="38.438263"
+       x="19.514534"
+       height="6.5"
+       width="35.125"
+       id="rect5984"
+       style="color:#000000;display:block;overflow:visible;visibility:visible;opacity:0.35294118;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;filter:url(#filter5830);enable-background:accumulate"
+       transform="matrix(-0.7245031,0,0,0.4468592,45.652037,23.280448)" />
+    <rect
+       style="color:#000000;display:block;overflow:visible;visibility:visible;opacity:0.41764706;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;filter:url(#filter5830);enable-background:accumulate"
+       id="rect5796"
+       width="35.125"
+       height="6.5"
+       x="6.8749995"
+       y="35.875"
+       rx="3.2499998"
+       ry="5.28125"
+       transform="matrix(-1,0,0,0.6153846,51.823723,15.798077)" />
+    <rect
+       style="color:#000000;display:block;overflow:visible;visibility:visible;opacity:1;fill:url(#linearGradient5784);fill-opacity:1;fill-rule:nonzero;stroke:#8f5902;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;enable-background:accumulate"
+       id="rect4613"
+       width="29.999996"
+       height="31.999998"
+       x="-42.323723"
+       y="-40.5"
+       rx="2.7499998"
+       ry="2.75"
+       transform="scale(-1)" />
+    <path
+       sodipodi:nodetypes="ccccccccc"
+       id="path5674"
+       d="m 16.722015,14.506832 h 15.632463 c 0.972272,0.04419 1.026805,-1.889084 1.026805,-1.889084 l -2.88421,-2.310477 0.0091,-0.7545235 c 0,0 -12.01513,-0.02055 -12.01513,-0.02055 v 0.8902013 l -2.600867,2.242637 c 0,0 -0.05203,1.797602 0.83185,1.841796 z"
+       style="color:#000000;display:block;overflow:visible;visibility:visible;opacity:0.44117647;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;filter:url(#filter5766);enable-background:accumulate"
+       transform="matrix(-1.0502474,0,0,1.0502474,53.06159,-1.6664683)"
+       inkscape:connector-curvature="0" />
+    <rect
+       transform="scale(-1)"
+       ry="1.2499995"
+       rx="1.2499995"
+       y="-39.289101"
+       x="-41.188496"
+       height="29.578182"
+       width="27.729544"
+       id="rect5786"
+       style="color:#000000;display:block;overflow:visible;visibility:visible;opacity:0.41764706;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:url(#linearGradient5794);stroke-width:0.99999994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;enable-background:accumulate" />
+    <path
+       style="color:#000000;display:block;overflow:visible;visibility:visible;opacity:1;fill:url(#linearGradient5592);fill-opacity:1;fill-rule:nonzero;stroke:#555753;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;enable-background:accumulate"
+       d="M 35.101708,12.506832 H 19.469245 c -0.972272,0.04419 -1.026805,-1.889084 -1.026805,-1.889084 l 2.88421,-2.3104767 -0.0091,-3.7545238 c 0,-0.8226142 0.691802,-1.9332784 1.698805,-1.9332784 l 8.520043,-0.088388 c 1.212428,0 1.796282,1.1881512 1.796282,2.0011169 v 3.8902012 l 2.600867,2.2426371 c 0,0 0.05203,1.797602 -0.83185,1.841796 z"
+       id="path5584"
+       sodipodi:nodetypes="ccccccccccc"
+       inkscape:connector-curvature="0" />
+    <rect
+       style="color:#000000;display:block;overflow:visible;visibility:visible;opacity:0.46470588;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;enable-background:accumulate"
+       id="rect5594"
+       width="15"
+       height="1.0416322"
+       x="-34.823723"
+       y="10"
+       rx="0.52081609"
+       ry="0.52081609"
+       transform="scale(-1,1)" />
+    <rect
+       ry="0.52081609"
+       rx="0.52081609"
+       y="4"
+       x="20"
+       height="1.0416322"
+       width="9"
+       id="rect5596"
+       style="color:#000000;display:block;overflow:visible;visibility:visible;opacity:0.53529412;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;filter:url(#filter5670);enable-background:accumulate"
+       transform="matrix(-1,0,0,1,51.823723,0)" />
+    <g
+       id="g5945"
+       transform="translate(-78.176286,1.3465954)">
+      <g
+         transform="matrix(0.5454547,0,0,0.5454547,106.45908,17.135117)"
+         id="g5646">
+        <g
+           transform="matrix(1.1,0,0,1,-43.74165,5.918957)"
+           id="layer6"
+           inkscape:label="Shadow">
+          <g
+             id="g2043"
+             inkscape:label="Shadow"
+             transform="matrix(1,0,0,0.555556,-4.549998e-7,13.88887)">
+            <g
+               style="display:inline"
+               id="g2036"
+               inkscape:label="Shadow">
+              <g
+                 id="g3712"
+                 style="opacity:0.4"
+                 transform="matrix(1.052632,0,0,1.285713,-1.263158,-13.42854)" />
+            </g>
+          </g>
+          <g
+             id="g2285"
+             inkscape:label="pixmap"
+             style="display:inline"
+             transform="translate(50.6887,6.21499)" />
+          <g
+             transform="matrix(0.186703,0,0,0.186703,29.5814,63.83798)"
+             id="g891" />
+        </g>
+        <g
+           style="display:inline"
+           inkscape:label="Base"
+           id="g5657" />
+        <g
+           id="layer5"
+           inkscape:label="Text"
+           style="display:inline">
+          <rect
+             style="color:#000000;display:inline;overflow:visible;visibility:visible;fill:url(#linearGradient5968);fill-opacity:1;fill-rule:evenodd;stroke:#939393;stroke-width:1.8333329;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none"
+             id="rect2373"
+             width="38.499989"
+             height="38.499989"
+             x="-36.591621"
+             y="5.4189425"
+             rx="2.6242812"
+             ry="2.6242814"
+             inkscape:r_cx="true"
+             inkscape:r_cy="true" />
+          <rect
+             inkscape:r_cy="true"
+             inkscape:r_cx="true"
+             ry="1.0501654"
+             rx="1.0501657"
+             y="7.252274"
+             x="-34.758289"
+             height="34.833324"
+             width="34.833324"
+             id="rect2423"
+             style="color:#000000;display:inline;overflow:visible;visibility:visible;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#ffffff;stroke-width:1.8333317;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none" />
+        </g>
+      </g>
+      <rect
+         inkscape:r_cy="true"
+         inkscape:r_cx="true"
+         ry="0"
+         rx="0"
+         y="23.590904"
+         x="89.000008"
+         height="2.0625005"
+         width="16"
+         id="rect6916"
+         style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#adaeab;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;enable-background:accumulate" />
+      <rect
+         inkscape:r_cy="true"
+         inkscape:r_cx="true"
+         ry="0"
+         rx="0"
+         y="27.590904"
+         x="89.000008"
+         height="2.0625005"
+         width="16"
+         id="rect5972"
+         style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#adaeab;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;enable-background:accumulate" />
+      <rect
+         inkscape:r_cy="true"
+         inkscape:r_cx="true"
+         ry="0"
+         rx="0"
+         y="31.64636"
+         x="89.000008"
+         height="2.0070443"
+         width="16"
+         id="rect5976"
+         style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#adaeab;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;enable-background:accumulate" />
+      <rect
+         inkscape:r_cy="true"
+         inkscape:r_cx="true"
+         ry="0"
+         rx="0"
+         y="35.590904"
+         x="89.000008"
+         height="2.0625005"
+         width="9.000001"
+         id="rect5980"
+         style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:1;fill:#adaeab;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;enable-background:accumulate" />
+    </g>
+    <g
+       id="layer1-3"
+       inkscape:label="Layer 1"
+       inkscape:groupmode="layer"
+       transform="matrix(0.70106024,-0.41232863,0.47028638,0.61466209,-2.6476336,21.495066)">
+      <path
+         style="display:inline;overflow:visible;visibility:visible;opacity:1;fill:#cb9022;fill-opacity:1;fill-rule:evenodd;stroke:#5c410c;stroke-width:1.10967219;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none"
+         d="m 10.131309,33.671585 6.241906,-6.241906 22.297474,-10.819303 c 3.606435,-1.387091 5.756425,3.745143 2.566117,5.548361 l -22.22812,10.403176 z"
+         id="path2960"
+         sodipodi:nodetypes="cccccc"
+         inkscape:connector-curvature="0" />
+      <path
+         sodipodi:nodetypes="czcczcc"
+         id="path2964"
+         d="m 33.422826,19.800683 c 0,0 1.595154,0.104032 2.219345,1.491122 0.643047,1.428993 0,2.947567 0,2.947567 l 5.583038,-2.739503 c 0,0 1.61128,-0.978029 0.728222,-3.155631 -0.870995,-2.147856 -2.982244,-1.283058 -2.982244,-1.283058 z"
+         style="display:inline;overflow:visible;visibility:visible;opacity:1;fill:url(#linearGradient2468);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none"
+         inkscape:connector-curvature="0" />
+      <path
+         style="display:inline;overflow:visible;visibility:visible;opacity:1;fill:url(#linearGradient2470);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none"
+         d="m 33.422826,19.800683 c 0,0 1.595154,0.104032 2.219345,1.491122 0.643047,1.428993 0,2.947567 0,2.947567 L 37.861515,23.1297 c 0,0 0.917735,-1.46351 0.242741,-2.982244 -0.693545,-1.560477 -2.462085,-1.456445 -2.462085,-1.456445 z"
+         id="path2962"
+         sodipodi:nodetypes="czcczcc"
+         inkscape:connector-curvature="0" />
+      <path
+         style="display:inline;overflow:visible;visibility:visible;opacity:1;fill:url(#radialGradient2472);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none"
+         d="m 11.714864,32.874009 4.993525,-4.993525 c 1.664508,0.901608 2.53144,2.39273 2.080635,4.126593 z"
+         id="path2982"
+         sodipodi:nodetypes="cccc"
+         inkscape:connector-curvature="0" />
+      <path
+         style="display:inline;overflow:visible;visibility:visible;opacity:1;fill:url(#linearGradient2474);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none"
+         d="m 13.205986,31.313532 -1.803217,1.76854 2.600794,-0.346772 C 14.246304,31.937723 13.7955,31.556273 13.205986,31.313532 Z"
+         id="path2992"
+         sodipodi:nodetypes="cccc"
+         inkscape:connector-curvature="0" />
+      <path
+         style="display:inline;overflow:visible;visibility:visible;opacity:1;fill:#ffffff;fill-opacity:0.36363639;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none"
+         d="m 16.708389,27.845806 1.733863,1.387091 17.074903,-8.121325 c -0.493174,-0.949928 -1.377954,-1.203547 -2.112127,-1.28973 z"
+         id="path3002"
+         sodipodi:nodetypes="ccccc"
+         inkscape:connector-curvature="0" />
+      <path
+         style="display:inline;overflow:visible;visibility:visible;opacity:1;fill:#000000;fill-opacity:0.36363639;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none"
+         d="m 18.789024,32.076432 0.208064,-0.832254 16.901517,-7.911519 c 0,0 -0.122241,0.680925 -0.239555,0.831533 z"
+         id="path3004"
+         sodipodi:nodetypes="ccccc"
+         inkscape:connector-curvature="0" />
+    </g>
+  </g>
+</svg>
diff -uNr rabbitvcs-0.17.1/data/icons/hicolor/scalable/actions/rabbitvcs-no.svg rabbitvcs/data/icons/hicolor/scalable/actions/rabbitvcs-no.svg
--- rabbitvcs-0.17.1/data/icons/hicolor/scalable/actions/rabbitvcs-no.svg	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/data/icons/hicolor/scalable/actions/rabbitvcs-no.svg	2019-09-13 08:36:17.245342882 +0800
@@ -0,0 +1,235 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48.000000px"
+   height="48.000000px"
+   id="svg6361"
+   sodipodi:version="0.32"
+   inkscape:version="0.92.4 (unknown)"
+   sodipodi:docname="rabbitvcs-no.svg"
+   version="1.1">
+  <defs
+     id="defs3">
+    <linearGradient
+       id="linearGradient2256">
+      <stop
+         style="stop-color:#ff0202;stop-opacity:1;"
+         offset="0"
+         id="stop2258" />
+      <stop
+         style="stop-color:#ff9b9b;stop-opacity:1;"
+         offset="1"
+         id="stop2260" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient9647">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0"
+         id="stop9649" />
+      <stop
+         style="stop-color:#dbdbdb;stop-opacity:1;"
+         offset="1"
+         id="stop9651" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       id="linearGradient7895">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0"
+         id="stop7897" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0;"
+         offset="1"
+         id="stop7899" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient4981">
+      <stop
+         style="stop-color:#cc0000;stop-opacity:1;"
+         offset="0"
+         id="stop4983" />
+      <stop
+         style="stop-color:#b30000;stop-opacity:1.0000000;"
+         offset="1.0000000"
+         id="stop4985" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient15762"
+       inkscape:collect="always">
+      <stop
+         id="stop15764"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop15766"
+         offset="1"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient14236">
+      <stop
+         id="stop14238"
+         offset="0.0000000"
+         style="stop-color:#ed4040;stop-opacity:1.0000000;" />
+      <stop
+         id="stop14240"
+         offset="1.0000000"
+         style="stop-color:#a40000;stop-opacity:1.0000000;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11780">
+      <stop
+         style="stop-color:#ff8b8b;stop-opacity:1.0000000;"
+         offset="0.0000000"
+         id="stop11782" />
+      <stop
+         style="stop-color:#ec1b1b;stop-opacity:1.0000000;"
+         offset="1.0000000"
+         id="stop11784" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11014">
+      <stop
+         style="stop-color:#a80000;stop-opacity:1.0000000;"
+         offset="0.0000000"
+         id="stop11016" />
+      <stop
+         style="stop-color:#c60000;stop-opacity:1.0000000;"
+         offset="0.0000000"
+         id="stop13245" />
+      <stop
+         style="stop-color:#e50000;stop-opacity:1.0000000;"
+         offset="1.0000000"
+         id="stop11018" />
+    </linearGradient>
+    <linearGradient
+       y2="9.6507530"
+       x2="9.8940229"
+       y1="5.3855424"
+       x1="5.7365270"
+       gradientTransform="matrix(-1.000000,0.000000,0.000000,-1.000000,31.72170,31.29079)"
+       gradientUnits="userSpaceOnUse"
+       id="linearGradient15772"
+       xlink:href="#linearGradient15762"
+       inkscape:collect="always" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7895"
+       id="linearGradient7901"
+       x1="15.578875"
+       y1="16.285088"
+       x2="32.166405"
+       y2="28.394291"
+       gradientUnits="userSpaceOnUse" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient4981"
+       id="linearGradient2243"
+       gradientUnits="userSpaceOnUse"
+       x1="23.995985"
+       y1="20.105337"
+       x2="41.047836"
+       y2="37.959785"
+       gradientTransform="matrix(0.988373,0.000000,0.000000,0.988373,0.279002,0.278984)" />
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient14236"
+       id="radialGradient864"
+       cx="24.085232"
+       cy="24.008034"
+       fx="24.085232"
+       fy="24.008034"
+       r="21.918055"
+       gradientTransform="matrix(1,0,0,1.0030899,0,-0.07418202)"
+       gradientUnits="userSpaceOnUse" />
+  </defs>
+  <sodipodi:namedview
+     inkscape:guide-bbox="true"
+     showguides="true"
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#666666"
+     borderopacity="0.15294118"
+     inkscape:pageopacity="0.0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="6.7175144"
+     inkscape:cx="42.957058"
+     inkscape:cy="38.085766"
+     inkscape:current-layer="svg6361"
+     showgrid="false"
+     inkscape:grid-bbox="true"
+     inkscape:document-units="px"
+     inkscape:window-width="1067"
+     inkscape:window-height="803"
+     inkscape:window-x="95"
+     inkscape:window-y="98"
+     inkscape:showpageshadow="false"
+     inkscape:window-maximized="0" />
+  <metadata
+     id="metadata4">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:title>No</dc:title>
+        <dc:date>2005-10-16</dc:date>
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Andreas Nilsson</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>No</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/by-sa/2.0/" />
+        <dc:contributor>
+          <cc:Agent>
+            <dc:title>Jakub Steiner</dc:title>
+          </cc:Agent>
+        </dc:contributor>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/by-sa/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Attribution" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     id="layer1"
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer" />
+  <ellipse
+     style="stroke:none;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:1.0;fill:url(#radialGradient864)"
+     id="path48"
+     cx="24.085232"
+     cy="24.008034"
+     rx="21.174494"
+     ry="21.242218" />
+</svg>
diff -uNr rabbitvcs-0.17.1/data/icons/hicolor/scalable/actions/rabbitvcs-ok.svg rabbitvcs/data/icons/hicolor/scalable/actions/rabbitvcs-ok.svg
--- rabbitvcs-0.17.1/data/icons/hicolor/scalable/actions/rabbitvcs-ok.svg	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/data/icons/hicolor/scalable/actions/rabbitvcs-ok.svg	2019-09-13 08:36:17.245342882 +0800
@@ -0,0 +1,277 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48"
+   height="48"
+   id="svg11300"
+   sodipodi:version="0.32"
+   inkscape:version="0.92.4 (unknown)"
+   sodipodi:docname="rabbitvcs-ok.svg"
+   version="1.0"
+   inkscape:r_cx="true"
+   inkscape:r_cy="true"
+   inkscape:output_extension="org.inkscape.output.svg.inkscape">
+  <defs
+     id="defs3">
+    <linearGradient
+       id="linearGradient5313">
+      <stop
+         id="stop5315"
+         offset="0"
+         style="stop-color:#99b8df;stop-opacity:1" />
+      <stop
+         style="stop-color:#3969a8;stop-opacity:1;"
+         offset="0.23705086"
+         id="stop5333" />
+      <stop
+         style="stop-color:#4f7eba;stop-opacity:1;"
+         offset="0.54706067"
+         id="stop5317" />
+      <stop
+         id="stop5321"
+         offset="0.74557692"
+         style="stop-color:#96b6d7;stop-opacity:1" />
+      <stop
+         style="stop-color:#a0bddc;stop-opacity:1"
+         offset="0.87321436"
+         id="stop5331" />
+      <stop
+         id="stop5319"
+         offset="1"
+         style="stop-color:#729fcf;stop-opacity:1;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient8152">
+      <stop
+         style="stop-color:#3465a4;stop-opacity:1;"
+         offset="0"
+         id="stop8154" />
+      <stop
+         id="stop3174"
+         offset="0.5"
+         style="stop-color:#4f7eba;stop-opacity:1;" />
+      <stop
+         style="stop-color:#729fcf;stop-opacity:1;"
+         offset="1"
+         id="stop8156" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient3207">
+      <stop
+         style="stop-color:#eeeeec;stop-opacity:0.47058824;"
+         offset="0"
+         id="stop3209" />
+      <stop
+         style="stop-color:#eeeeec;stop-opacity:0;"
+         offset="1"
+         id="stop3211" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       id="linearGradient2847">
+      <stop
+         style="stop-color:#3465a4;stop-opacity:1;"
+         offset="0"
+         id="stop2849" />
+      <stop
+         style="stop-color:#3465a4;stop-opacity:0;"
+         offset="1"
+         id="stop2851" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient2831">
+      <stop
+         style="stop-color:#3465a4;stop-opacity:1;"
+         offset="0"
+         id="stop2833" />
+      <stop
+         id="stop2855"
+         offset="0.33333334"
+         style="stop-color:#5b86be;stop-opacity:1;" />
+      <stop
+         style="stop-color:#83a8d8;stop-opacity:0;"
+         offset="1"
+         id="stop2835" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       id="linearGradient8662">
+      <stop
+         style="stop-color:#000000;stop-opacity:1;"
+         offset="0"
+         id="stop8664" />
+      <stop
+         style="stop-color:#000000;stop-opacity:0;"
+         offset="1"
+         id="stop8666" />
+    </linearGradient>
+    <radialGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient8662"
+       id="radialGradient1503"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.5146484,0,0,0.47064594,-60.868499,-57.345308)"
+       cx="24.837126"
+       cy="36.421127"
+       fx="24.837126"
+       fy="36.421127"
+       r="15.644737" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient2831"
+       id="linearGradient8170"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(-1.3096777,0,0,-1.6407386,49.454961,36.043112)"
+       x1="13.272219"
+       y1="10.762897"
+       x2="16.890039"
+       y2="22.128948" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient2847"
+       id="linearGradient8172"
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1.3096777,0,0,1.6407386,-12.181757,-39.635946)"
+       x1="37.128052"
+       y1="29.729605"
+       x2="37.40255"
+       y2="26.800913" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient8152"
+       id="linearGradient8174"
+       gradientUnits="userSpaceOnUse"
+       x1="49.412277"
+       y1="37.904068"
+       x2="11.881318"
+       y2="19.776045" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient5313"
+       id="linearGradient8180"
+       gradientUnits="userSpaceOnUse"
+       x1="61.572533"
+       y1="28.049652"
+       x2="10.969182"
+       y2="20.333939" />
+  </defs>
+  <sodipodi:namedview
+     stroke="#3465a4"
+     fill="#729fcf"
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#e8e8e8"
+     borderopacity="0.86666667"
+     inkscape:pageopacity="0.0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="9.7381848"
+     inkscape:cx="23.839402"
+     inkscape:cy="27.402221"
+     inkscape:current-layer="layer1"
+     showgrid="true"
+     inkscape:grid-bbox="true"
+     inkscape:document-units="px"
+     inkscape:showpageshadow="false"
+     inkscape:window-width="977"
+     inkscape:window-height="937"
+     inkscape:window-x="289"
+     inkscape:window-y="27"
+     width="48px"
+     height="48px"
+     borderlayer="true"
+     inkscape:window-maximized="0" />
+  <metadata
+     id="metadata4">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Jakub Steiner</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:source>http://jimmac.musichall.cz</dc:source>
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
+        <dc:title>OK</dc:title>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>ok</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+        <dc:contributor>
+          <cc:Agent>
+            <dc:title>Ricardo 'Rick' González</dc:title>
+          </cc:Agent>
+        </dc:contributor>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/SourceCode" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     id="layer1"
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer"
+     inkscape:r_cx="true"
+     inkscape:r_cy="true">
+    <ellipse
+       transform="scale(-1)"
+       id="path8660"
+       style="color:#000000;display:inline;overflow:visible;visibility:visible;opacity:0.36111109;fill:url(#radialGradient1503);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1.15246558;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none"
+       inkscape:r_cx="true"
+       inkscape:r_cy="true"
+       cx="-23.248985"
+       cy="-40.20385"
+       rx="23.696276"
+       ry="7.3631353" />
+    <path
+       sodipodi:nodetypes="cccc"
+       inkscape:r_cy="true"
+       inkscape:r_cx="true"
+       id="path8160"
+       d="m 26.932311,19.0524 c 0,0 2.943885,0.406366 2.223026,-16.389093 L 42.283993,2.4160632 c 0.0023,0 -0.804189,20.1967768 -15.351682,16.6363368 z"
+       style="color:#000000;display:block;overflow:visible;visibility:visible;opacity:0.51807233;fill:url(#linearGradient8170);fill-opacity:1;fill-rule:nonzero;stroke:url(#linearGradient8172);stroke-width:1.39102995;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none"
+       inkscape:connector-curvature="0" />
+    <g
+       style="fill:url(#linearGradient8174);fill-opacity:1;stroke:#204a87;stroke-width:1.24932528;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
+       inkscape:r_cy="true"
+       inkscape:r_cx="true"
+       transform="matrix(0.93061628,-0.02461973,-0.02592886,-0.88435103,-6.2072654,44.158387)"
+       id="g8162">
+      <path
+         inkscape:r_cy="true"
+         inkscape:r_cx="true"
+         style="color:#000000;display:block;overflow:visible;visibility:visible;opacity:1;fill:url(#linearGradient8180);fill-opacity:1;fill-rule:nonzero;stroke:#204a87;stroke-width:1.25256371;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;marker-start:none;marker-mid:none;marker-end:none;enable-background:accumulate"
+         d="m 53.930127,45.420124 c -0.257578,-8.530815 -0.720551,-22.286985 -0.720551,-22.286985 -0.170489,-4.582762 -2.516017,-8.888447 -6.342797,-9.457036 -3.185823,-0.473355 -8.097257,0.03676 -20.021985,0.04209 L 26.56069,3.4206089 10.686406,22.231507 27.693381,39.144592 27.42357,27.91546 c 5.138675,-0.02762 12.197504,-1.758775 17.799092,2.516047 5.187105,3.958511 7.14845,7.000191 8.707465,14.988617 z"
+         id="path8164"
+         sodipodi:nodetypes="ccscccccsc"
+         inkscape:connector-curvature="0" />
+    </g>
+  </g>
+</svg>
diff -uNr rabbitvcs-0.17.1/data/icons/hicolor/scalable/actions/rabbitvcs-yes.svg rabbitvcs/data/icons/hicolor/scalable/actions/rabbitvcs-yes.svg
--- rabbitvcs-0.17.1/data/icons/hicolor/scalable/actions/rabbitvcs-yes.svg	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/data/icons/hicolor/scalable/actions/rabbitvcs-yes.svg	2019-09-13 08:36:17.245342882 +0800
@@ -0,0 +1,257 @@
+<?xml version="1.0" encoding="UTF-8" standalone="no"?>
+<!-- Created with Inkscape (http://www.inkscape.org/) -->
+
+<svg
+   xmlns:dc="http://purl.org/dc/elements/1.1/"
+   xmlns:cc="http://creativecommons.org/ns#"
+   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
+   xmlns:svg="http://www.w3.org/2000/svg"
+   xmlns="http://www.w3.org/2000/svg"
+   xmlns:xlink="http://www.w3.org/1999/xlink"
+   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
+   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
+   width="48.000000px"
+   height="48.000000px"
+   id="svg6361"
+   sodipodi:version="0.32"
+   inkscape:version="0.92.4 (unknown)"
+   sodipodi:docname="rabbitvcs-yes.svg"
+   version="1.1">
+  <defs
+     id="defs3">
+    <linearGradient
+       id="linearGradient14236">
+      <stop
+         style="stop-color:#ed4040;stop-opacity:1.0000000;"
+         offset="0.0000000"
+         id="stop850" />
+      <stop
+         style="stop-color:#a40000;stop-opacity:1.0000000;"
+         offset="1.0000000"
+         id="stop852" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient2256">
+      <stop
+         style="stop-color:#ff0202;stop-opacity:1;"
+         offset="0"
+         id="stop2258" />
+      <stop
+         style="stop-color:#ff9b9b;stop-opacity:1;"
+         offset="1"
+         id="stop2260" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient9647">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0"
+         id="stop9649" />
+      <stop
+         style="stop-color:#dbdbdb;stop-opacity:1;"
+         offset="1"
+         id="stop9651" />
+    </linearGradient>
+    <linearGradient
+       inkscape:collect="always"
+       id="linearGradient7895">
+      <stop
+         style="stop-color:#ffffff;stop-opacity:1;"
+         offset="0"
+         id="stop7897" />
+      <stop
+         style="stop-color:#ffffff;stop-opacity:0;"
+         offset="1"
+         id="stop7899" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient4981">
+      <stop
+         style="stop-color:#cc0000;stop-opacity:1;"
+         offset="0"
+         id="stop4983" />
+      <stop
+         style="stop-color:#b30000;stop-opacity:1.0000000;"
+         offset="1.0000000"
+         id="stop4985" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient15762"
+       inkscape:collect="always">
+      <stop
+         id="stop15764"
+         offset="0"
+         style="stop-color:#ffffff;stop-opacity:1;" />
+      <stop
+         id="stop15766"
+         offset="1"
+         style="stop-color:#ffffff;stop-opacity:0;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient14236-3">
+      <stop
+         id="stop14238"
+         offset="0.0000000"
+         style="stop-color:#ed4040;stop-opacity:1.0000000;" />
+      <stop
+         id="stop14240"
+         offset="1.0000000"
+         style="stop-color:#a40000;stop-opacity:1.0000000;" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11780">
+      <stop
+         style="stop-color:#ff8b8b;stop-opacity:1.0000000;"
+         offset="0.0000000"
+         id="stop11782" />
+      <stop
+         style="stop-color:#ec1b1b;stop-opacity:1.0000000;"
+         offset="1.0000000"
+         id="stop11784" />
+    </linearGradient>
+    <linearGradient
+       id="linearGradient11014">
+      <stop
+         style="stop-color:#a80000;stop-opacity:1.0000000;"
+         offset="0.0000000"
+         id="stop11016" />
+      <stop
+         style="stop-color:#c60000;stop-opacity:1.0000000;"
+         offset="0.0000000"
+         id="stop13245" />
+      <stop
+         style="stop-color:#e50000;stop-opacity:1.0000000;"
+         offset="1.0000000"
+         id="stop11018" />
+    </linearGradient>
+    <linearGradient
+       y2="9.6507530"
+       x2="9.8940229"
+       y1="5.3855424"
+       x1="5.7365270"
+       gradientTransform="matrix(-1.000000,0.000000,0.000000,-1.000000,31.72170,31.29079)"
+       gradientUnits="userSpaceOnUse"
+       id="linearGradient15772"
+       xlink:href="#linearGradient15762"
+       inkscape:collect="always" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient7895"
+       id="linearGradient7901"
+       x1="15.578875"
+       y1="16.285088"
+       x2="32.166405"
+       y2="28.394291"
+       gradientUnits="userSpaceOnUse" />
+    <linearGradient
+       inkscape:collect="always"
+       xlink:href="#linearGradient4981"
+       id="linearGradient2243"
+       gradientUnits="userSpaceOnUse"
+       x1="23.995985"
+       y1="20.105337"
+       x2="41.047836"
+       y2="37.959785"
+       gradientTransform="matrix(0.988373,0.000000,0.000000,0.988373,0.279002,0.278984)" />
+    <radialGradient
+       gradientUnits="userSpaceOnUse"
+       gradientTransform="matrix(1,0,0,1.0030899,0,-0.07418202)"
+       r="21.918055"
+       fy="24.008034"
+       fx="24.085232"
+       cy="24.008034"
+       cx="24.085232"
+       id="radialGradient864-480"
+       xlink:href="#linearGradient14236-3-70"
+       inkscape:collect="always" />
+    <linearGradient
+       id="linearGradient14236-3-70">
+      <stop
+         style="stop-color:#40ed40;stop-opacity:1.0000000;;opacity:1"
+         offset="0.0000000"
+         id="stop888" />
+      <stop
+         style="stop-color:#00a400;stop-opacity:1.0000000;;opacity:1"
+         offset="1.0000000"
+         id="stop890" />
+    </linearGradient>
+  </defs>
+  <sodipodi:namedview
+     inkscape:guide-bbox="true"
+     showguides="true"
+     id="base"
+     pagecolor="#ffffff"
+     bordercolor="#666666"
+     borderopacity="0.15294118"
+     inkscape:pageopacity="0.0"
+     inkscape:pageshadow="2"
+     inkscape:zoom="7.9770484"
+     inkscape:cx="24.556809"
+     inkscape:cy="26.514821"
+     inkscape:current-layer="svg6361"
+     showgrid="false"
+     inkscape:grid-bbox="true"
+     inkscape:document-units="px"
+     inkscape:window-width="1067"
+     inkscape:window-height="803"
+     inkscape:window-x="95"
+     inkscape:window-y="98"
+     inkscape:showpageshadow="false"
+     inkscape:window-maximized="0" />
+  <metadata
+     id="metadata4">
+    <rdf:RDF>
+      <cc:Work
+         rdf:about="">
+        <dc:format>image/svg+xml</dc:format>
+        <dc:type
+           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
+        <dc:title>Yes</dc:title>
+        <dc:date>2005-10-16</dc:date>
+        <dc:creator>
+          <cc:Agent>
+            <dc:title>Andreas Nilsson</dc:title>
+          </cc:Agent>
+        </dc:creator>
+        <dc:subject>
+          <rdf:Bag>
+            <rdf:li>Yes</rdf:li>
+          </rdf:Bag>
+        </dc:subject>
+        <cc:license
+           rdf:resource="http://creativecommons.org/licenses/by-sa/2.0/" />
+        <dc:contributor>
+          <cc:Agent>
+            <dc:title>Jakub Steiner</dc:title>
+          </cc:Agent>
+        </dc:contributor>
+      </cc:Work>
+      <cc:License
+         rdf:about="http://creativecommons.org/licenses/by-sa/2.0/">
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Reproduction" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/Distribution" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Notice" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/Attribution" />
+        <cc:permits
+           rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
+        <cc:requires
+           rdf:resource="http://web.resource.org/cc/ShareAlike" />
+      </cc:License>
+    </rdf:RDF>
+  </metadata>
+  <g
+     id="layer1"
+     inkscape:label="Layer 1"
+     inkscape:groupmode="layer" />
+  <ellipse
+     ry="21.242218"
+     rx="21.174494"
+     cy="24.008034"
+     cx="24.085232"
+     id="path48"
+     style="stroke:none;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:1.0;fill:url(#radialGradient864-480);opacity:1" />
+</svg>
Binary files rabbitvcs-0.17.1/locale/fr/LC_MESSAGES/RabbitVCS.mo and rabbitvcs/locale/fr/LC_MESSAGES/RabbitVCS.mo differ
Binary files rabbitvcs-0.17.1/locale/hu/LC_MESSAGES/RabbitVCS.mo and rabbitvcs/locale/hu/LC_MESSAGES/RabbitVCS.mo differ
Binary files rabbitvcs-0.17.1/locale/ru/LC_MESSAGES/RabbitVCS.mo and rabbitvcs/locale/ru/LC_MESSAGES/RabbitVCS.mo differ
diff -uNr rabbitvcs-0.17.1/po/POTFILES.in rabbitvcs/po/POTFILES.in
--- rabbitvcs-0.17.1/po/POTFILES.in	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/po/POTFILES.in	2019-09-13 08:36:17.253343091 +0800
@@ -1,79 +1,78 @@
 util/helper.py
-ui/export.py
+util/contextmenuitems.py
+ui/delete.py
+ui/revert.py
+ui/remotes.py
+ui/unstage.py
 ui/reset.py
-ui/merge.py
-ui/update.py
-ui/create.py
-ui/xml/about.xml.h
-ui/xml/merge.xml.h
-ui/xml/update.xml.h
+ui/markresolved.py
+ui/ignore.py
+ui/wraplabel.py
+ui/renderers/__init__.py
+ui/stage.py
+ui/lock.py
+ui/log.py
+ui/unlock.py
+ui/__init__.py
+ui/clean.py
+ui/editconflicts.py
+ui/action.py
+ui/about.py
+ui/xml/revert.xml.h
 ui/xml/commit.xml.h
 ui/xml/property_editor.xml.h
-ui/xml/annotate.xml.h
-ui/xml/log.xml.h
-ui/xml/notification.xml.h
-ui/xml/properties.xml.h
-ui/xml/lock.xml.h
 ui/xml/browser.xml.h
-ui/xml/pull.xml.h
-ui/xml/ignore.xml.h
-ui/xml/dialogs/name_email_prompt.xml.h
+ui/xml/manager.xml.h
+ui/xml/relocate.xml.h
+ui/xml/update.xml.h
+ui/xml/merge.xml.h
+ui/xml/settings.xml.h
+ui/xml/add.xml.h
+ui/xml/dialogs/delete_confirmation.xml.h
 ui/xml/dialogs/certificate.xml.h
-ui/xml/dialogs/conflict_decision.xml.h
-ui/xml/dialogs/error_notification.xml.h
+ui/xml/dialogs/name_email_prompt.xml.h
 ui/xml/dialogs/confirmation.xml.h
 ui/xml/dialogs/ssl_client_cert_prompt.xml.h
-ui/xml/dialogs/delete_confirmation.xml.h
 ui/xml/dialogs/message_box.xml.h
-ui/xml/dialogs/loading.xml.h
+ui/xml/dialogs/previous_messages.xml.h
+ui/xml/dialogs/mark_resolved_prompt.xml.h
 ui/xml/dialogs/property.xml.h
+ui/xml/dialogs/error_notification.xml.h
+ui/xml/dialogs/conflict_decision.xml.h
 ui/xml/dialogs/create_folder.xml.h
-ui/xml/dialogs/previous_messages.xml.h
+ui/xml/dialogs/loading.xml.h
+ui/xml/ignore.xml.h
 ui/xml/clean.xml.h
-ui/xml/settings.xml.h
-ui/xml/add.xml.h
-ui/xml/cleanup.xml.h
-ui/xml/reset.xml.h
-ui/xml/import.xml.h
+ui/xml/properties.xml.h
+ui/xml/notification.xml.h
 ui/xml/git-update.xml.h
-ui/xml/manager.xml.h
-ui/xml/relocate.xml.h
+ui/xml/log.xml.h
+ui/xml/lock.xml.h
+ui/xml/annotate.xml.h
+ui/xml/import.xml.h
+ui/xml/reset.xml.h
 ui/xml/property_page.xml.h
-ui/editconflicts.py
+ui/rename.py
+ui/update.py
 ui/revprops.py
-ui/annotate.py
 ui/widget.py
-ui/property_editor.py
-ui/commit.py
-ui/revert.py
-ui/settings.py
-ui/markresolved.py
-ui/__init__.py
-ui/add.py
+ui/browser.py
 ui/relocate.py
-ui/property_page.py
+ui/add.py
+ui/updateto.py
+ui/create.py
 ui/tags.py
-ui/ignore.py
-ui/import.py
-ui/unlock.py
+ui/property_page.py
 ui/properties.py
-ui/action.py
-ui/renderers/__init__.py
-ui/rename.py
-ui/wraplabel.py
-ui/clone.py
-ui/browser.py
-ui/delete.py
-ui/open.py
+ui/merge.py
 ui/dialog.py
-ui/lock.py
-ui/about.py
-ui/stage.py
-ui/log.py
-ui/clean.py
-ui/updateto.py
+ui/annotate.py
+ui/property_editor.py
+ui/open.py
 ui/cleanup.py
-ui/unstage.py
-ui/remotes.py
+ui/import.py
+ui/clone.py
+ui/settings.py
+ui/commit.py
 ui/diff.py
-util/contextmenuitems.py
+ui/export.py
diff -uNr rabbitvcs-0.17.1/po/RabbitVCS.pot rabbitvcs/po/RabbitVCS.pot
--- rabbitvcs-0.17.1/po/RabbitVCS.pot	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/po/RabbitVCS.pot	2019-09-13 08:36:17.253343091 +0800
@@ -8,1968 +8,2104 @@
 msgstr ""
 "Project-Id-Version: PACKAGE VERSION\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2012-08-24 08:37-0400\n"
+"POT-Creation-Date: 2019-06-14 01:58+0200\n"
 "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
 "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
 "Language-Team: LANGUAGE <LL@li.org>\n"
+"Language: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=CHARSET\n"
 "Content-Transfer-Encoding: 8bit\n"
 "Plural-Forms: nplurals=INTEGER; plural=EXPRESSION;\n"
 
-#: util/helper.py:127
+#: util/helper.py:73
+msgid "%I:%M%P"
+msgstr ""
+
+#: util/helper.py:74
+msgid "%a %I:%M%p"
+msgstr ""
+
+#: util/helper.py:75
+msgid "%b %d"
+msgstr ""
+
+#: util/helper.py:76
+msgid "%b %d %Y"
+msgstr ""
+
+#: util/helper.py:215
+msgid "(no date)"
+msgstr ""
+
+#: util/helper.py:219
 msgid "just now"
 msgstr ""
 
-#: util/helper.py:129
+#: util/helper.py:221
 #, python-format
 msgid "%d minute(s) ago"
 msgstr ""
 
-#: util/helper.py:688
+#: util/helper.py:833
 #, python-format
 msgid "%i second"
 msgid_plural "%i seconds"
 msgstr[0] ""
 msgstr[1] ""
 
-#: util/helper.py:691
+#: util/helper.py:836
 #, python-format
 msgid "%i minute"
 msgid_plural "%i minutes"
 msgstr[0] ""
 msgstr[1] ""
 
-#: util/helper.py:694
+#: util/helper.py:839
 #, python-format
 msgid "%i hour"
 msgid_plural "%i hours"
 msgstr[0] ""
 msgstr[1] ""
 
-#: util/helper.py:697
+#: util/helper.py:842
 #, python-format
 msgid "%i day"
 msgid_plural "%i days"
 msgstr[0] ""
 msgstr[1] ""
 
-#: util/helper.py:700
+#: util/helper.py:845
 #, python-format
 msgid "%i week"
 msgid_plural "%i weeks"
 msgstr[0] ""
 msgstr[1] ""
 
-#: util/helper.py:703
+#: util/helper.py:848
 #, python-format
 msgid "%i month"
 msgid_plural "%i months"
 msgstr[0] ""
 msgstr[1] ""
 
-#: util/helper.py:706
+#: util/helper.py:851
 #, python-format
 msgid "%i year"
 msgid_plural "%i years"
 msgstr[0] ""
 msgstr[1] ""
 
-#: ui/export.py:45 ui/export.py:124
-#, python-format
-msgid "Export - %s"
+#: util/contextmenuitems.py:321
+msgid "Debug"
 msgstr ""
 
-#: ui/export.py:72 ui/export.py:141 ui/clone.py:57
-msgid "The repository URL and destination path are both required fields."
+#: util/contextmenuitems.py:326
+msgid "Bugs"
 msgstr ""
 
-#: ui/export.py:92 ui/export.py:161
-msgid "Export"
+#: util/contextmenuitems.py:331
+msgid "Open Shell"
 msgstr ""
 
-#: ui/export.py:93 ui/export.py:162
-msgid "Running Export Command..."
+#: util/contextmenuitems.py:337
+msgid "Refresh Status"
 msgstr ""
 
-#: ui/export.py:104 ui/export.py:170
-msgid "Completed Export"
+#: util/contextmenuitems.py:342
+msgid "Debug Revert"
 msgstr ""
 
-#: ui/reset.py:105 ui/xml/reset.xml.h:14 util/contextmenuitems.py:695
-msgid "Reset"
+#: util/contextmenuitems.py:343
+msgid "Reverts everything it sees"
 msgstr ""
 
-#: ui/reset.py:106
-msgid "Running Reset Command..."
+#: util/contextmenuitems.py:349
+msgid "Invalidate"
 msgstr ""
 
-#: ui/reset.py:113
-msgid "Completed Reset"
+#: util/contextmenuitems.py:350
+msgid "Force an invalidate_extension_info() call"
 msgstr ""
 
-#: ui/merge.py:94
-msgid "Running Merge Test"
+#: util/contextmenuitems.py:356
+msgid "Add Emblem"
 msgstr ""
 
-#: ui/merge.py:95
-msgid "Completed Merge Test"
+#: util/contextmenuitems.py:357
+msgid "Add an emblem"
 msgstr ""
 
-#: ui/merge.py:97
-msgid "Running Merge Command"
+#: util/contextmenuitems.py:363
+msgid "Checkout..."
 msgstr ""
 
-#: ui/merge.py:98 ui/merge.py:543
-msgid "Completed Merge"
+#: util/contextmenuitems.py:364
+msgid "Check out a working copy"
 msgstr ""
 
-#: ui/merge.py:109 ui/merge.py:536
-msgid "Merge"
+#: util/contextmenuitems.py:369 ui/xml/update.xml.h:1 ui/update.py:55
+#: ui/update.py:104
+msgid "Update"
 msgstr ""
 
-#: ui/merge.py:451
-msgid "No active branch"
+#: util/contextmenuitems.py:370
+msgid "Update a working copy"
 msgstr ""
 
-#: ui/merge.py:462
-msgid "Author:"
+#: util/contextmenuitems.py:375 ui/xml/commit.xml.h:1 ui/commit.py:318
+#: ui/commit.py:386
+msgid "Commit"
 msgstr ""
 
-#: ui/merge.py:474 ui/tags.py:165
-msgid "Date:"
+#: util/contextmenuitems.py:376
+msgid "Commit modifications to the repository"
 msgstr ""
 
-#: ui/merge.py:485 ui/xml/browser.xml.h:3 ui/tags.py:109 ui/tags.py:176
-msgid "Revision:"
+#: util/contextmenuitems.py:381 ui/xml/property_page.xml.h:5
+msgid "RabbitVCS"
 msgstr ""
 
-#: ui/merge.py:497 ui/tags.py:128 ui/tags.py:188
-msgid "Message:"
+#: util/contextmenuitems.py:386
+msgid "RabbitVCS SVN"
 msgstr ""
 
-#: ui/merge.py:537
-msgid "Running Merge Command..."
+#: util/contextmenuitems.py:391
+msgid "RabbitVCS Git"
 msgstr ""
 
-#: ui/update.py:53 ui/update.py:97 ui/xml/update.xml.h:6
-#: util/contextmenuitems.py:351
-msgid "Update"
+#: util/contextmenuitems.py:396
+msgid "RabbitVCS Hg"
 msgstr ""
 
-#: ui/update.py:54 ui/update.py:98 ui/updateto.py:95
-msgid "Updating..."
+#: util/contextmenuitems.py:401 ui/xml/browser.xml.h:1
+msgid "Repository Browser"
 msgstr ""
 
-#: ui/update.py:56 ui/update.py:103 ui/updateto.py:103
-msgid "Completed Update"
+#: util/contextmenuitems.py:402
+msgid "Browse a repository tree"
 msgstr ""
 
-#: ui/create.py:51
-msgid "Repository successfully created"
+#: util/contextmenuitems.py:407
+msgid "Check for Modifications..."
 msgstr ""
 
-#: ui/create.py:53
-msgid ""
-"There was an error creating the repository.  Make sure the given folder is "
-"empty."
+#: util/contextmenuitems.py:408
+msgid "Check for modifications made to the repository"
 msgstr ""
 
-#: ui/create.py:67 util/contextmenuitems.py:656
-msgid "Initialize Repository"
+#: util/contextmenuitems.py:413
+msgid "Diff Menu..."
 msgstr ""
 
-#: ui/create.py:68
-msgid "Setting up repository..."
+#: util/contextmenuitems.py:414
+msgid "List of comparison options"
 msgstr ""
 
-#: ui/create.py:70
-msgid "Completed repository setup"
+#: util/contextmenuitems.py:419
+msgid "View diff against base"
 msgstr ""
 
-#: ui/xml/about.xml.h:1
-msgid "<b>Links</b>"
+#: util/contextmenuitems.py:420
+msgid "View the modifications made to a file"
 msgstr ""
 
-#: ui/xml/about.xml.h:2
-msgid "<b>Version Information</b>"
+#: util/contextmenuitems.py:425
+msgid "View diff between files/folders"
 msgstr ""
 
-#: ui/xml/about.xml.h:3
-msgid "<span size=\"xx-large\"><b>RabbitVCS</b></span>"
+#: util/contextmenuitems.py:426
+msgid "View the differences between two files"
 msgstr ""
 
-#: ui/xml/about.xml.h:4 util/contextmenuitems.py:603
-msgid "About"
+#: util/contextmenuitems.py:431 ui/log.py:988
+msgid "View diff against previous revision"
 msgstr ""
 
-#: ui/xml/about.xml.h:5
-msgid "Authors:"
+#: util/contextmenuitems.py:432
+msgid "View the modifications made to a file since its last change"
 msgstr ""
 
-#: ui/xml/about.xml.h:6
-msgid "Thanks:"
+#: util/contextmenuitems.py:437
+msgid "Compare with base"
 msgstr ""
 
-#: ui/xml/merge.xml.h:1
-msgid "<b>From URL</b>"
+#: util/contextmenuitems.py:438
+msgid "Compare with base using side-by-side comparison tool"
 msgstr ""
 
-#: ui/xml/merge.xml.h:2
-msgid "<b>From: (URL and revision to merge)</b>"
+#: util/contextmenuitems.py:443
+msgid "Compare files/folders"
 msgstr ""
 
-#: ui/xml/merge.xml.h:3 ui/xml/update.xml.h:1 ui/xml/reset.xml.h:1
-#: ui/xml/git-update.xml.h:1
-msgid "<b>Options</b>"
+#: util/contextmenuitems.py:444
+msgid "Compare the differences between two items"
 msgstr ""
 
-#: ui/xml/merge.xml.h:4
-msgid "<b>Revision Range</b>"
+#: util/contextmenuitems.py:449 ui/log.py:1003
+msgid "Compare with previous revision"
 msgstr ""
 
-#: ui/xml/merge.xml.h:5
-msgid "<b>To: (URL and revision to merge)</b>"
+#: util/contextmenuitems.py:450
+msgid "Compare with previous revision using side-by-side comparison tool"
 msgstr ""
 
-#: ui/xml/merge.xml.h:6
-msgid "<b>URL to merge from</b>"
+#: util/contextmenuitems.py:455
+msgid "Show Changes..."
 msgstr ""
 
-#: ui/xml/merge.xml.h:7
-msgid "<b>Working Copy</b>"
+#: util/contextmenuitems.py:456
+msgid "Show changes between paths and revisions"
 msgstr ""
 
-#: ui/xml/merge.xml.h:8
-msgid ""
-"Choose this method if you have made some changes to a branch and wish to "
-"merge your changes with another branch."
+#: util/contextmenuitems.py:461
+msgid "Show Log"
 msgstr ""
 
-#: ui/xml/merge.xml.h:9
-msgid ""
-"Choose this method if you wish to merge two different branches into your "
-"working copy."
+#: util/contextmenuitems.py:462
+msgid "Show a file's log information"
 msgstr ""
 
-#: ui/xml/merge.xml.h:10
-msgid "Choose this method if you wish to reintegrate a branch into the trunk."
+#: util/contextmenuitems.py:467 ui/xml/add.xml.h:1 ui/widget.py:1431
+#: ui/add.py:215 ui/add.py:240 ui/tags.py:284
+msgid "Add"
 msgstr ""
 
-#: ui/xml/merge.xml.h:11 ui/widget.py:908 ui/widget.py:914
-msgid "HEAD"
+#: util/contextmenuitems.py:468
+msgid "Schedule items to be added to the repository"
 msgstr ""
 
-#: ui/xml/merge.xml.h:12
-msgid "Ignore ancestry"
+#: util/contextmenuitems.py:473
+msgid "Add to ignore list"
 msgstr ""
 
-#: ui/xml/merge.xml.h:13
-msgid "Merge Assistant"
+#: util/contextmenuitems.py:478
+msgid "Update to revision..."
 msgstr ""
 
-#: ui/xml/merge.xml.h:14
-msgid "Merge a range of revisions"
+#: util/contextmenuitems.py:479
+msgid "Update a file to a specific revision"
 msgstr ""
 
-#: ui/xml/merge.xml.h:15
-msgid "Merge two different trees"
+#: util/contextmenuitems.py:484
+msgid "Rename..."
 msgstr ""
 
-#: ui/xml/merge.xml.h:16
-msgid "Only record the merge"
+#: util/contextmenuitems.py:485
+msgid "Schedule an item to be renamed on the repository"
 msgstr ""
 
-#: ui/xml/merge.xml.h:17 ui/xml/update.xml.h:4
-msgid "Recursive"
+#: util/contextmenuitems.py:490
+msgid "Delete"
 msgstr ""
 
-#: ui/xml/merge.xml.h:18
-msgid "Reintegrate a branch"
+#: util/contextmenuitems.py:491
+msgid "Schedule an item to be deleted from the repository"
 msgstr ""
 
-#: ui/xml/merge.xml.h:19 ui/annotate.py:127 ui/annotate.py:228
-#: ui/widget.py:909 ui/browser.py:89 ui/log.py:48 ui/log.py:337 ui/log.py:570
-msgid "Revision"
+#: util/contextmenuitems.py:496 ui/revert.py:175 ui/revert.py:201
+#: ui/xml/revert.xml.h:1
+msgid "Revert"
 msgstr ""
 
-#: ui/xml/merge.xml.h:20
-msgid "Show log"
+#: util/contextmenuitems.py:497
+msgid "Revert an item to its unmodified state"
 msgstr ""
 
-#: ui/xml/merge.xml.h:21
-msgid "Test Merge"
+#: util/contextmenuitems.py:502 ui/markresolved.py:45 ui/markresolved.py:76
+msgid "Mark as Resolved"
 msgstr ""
 
-#: ui/xml/merge.xml.h:22
-msgid ""
-"Use the log dialog to select the revisions that you wish to merge.  Or write "
-"out the revisions manually, each separated by a comma.  You can specify a "
-"revision range by a dash. \n"
-"\n"
-"Example: 4-7,9,11,15-HEAD\n"
-"\n"
-"To merge all revisions, leave the box empty."
+#: util/contextmenuitems.py:503
+msgid "Mark a conflicted item as resolved"
 msgstr ""
 
-#: ui/xml/update.xml.h:2 ui/xml/reset.xml.h:4
-msgid "<b>Revision</b>"
+#: util/contextmenuitems.py:508
+msgid "Restore"
 msgstr ""
 
-#: ui/xml/update.xml.h:3
-msgid "Omit Externals"
+#: util/contextmenuitems.py:509
+msgid "Restore a missing item"
 msgstr ""
 
-#: ui/xml/update.xml.h:5
-msgid "Rollback to specified revision number"
+#: util/contextmenuitems.py:513
+msgid "Relocate..."
 msgstr ""
 
-#: ui/xml/commit.xml.h:1 ui/xml/dialogs/create_folder.xml.h:1
-msgid "<b>Add Message</b>"
+#: util/contextmenuitems.py:514
+msgid "Relocate your working copy"
 msgstr ""
 
-#: ui/xml/commit.xml.h:2
-msgid "<b>Changed Files</b> (double-click to compare with base)"
+#: util/contextmenuitems.py:519
+msgid "Get Lock..."
 msgstr ""
 
-#: ui/xml/commit.xml.h:3
-msgid "<b>Commit to:</b>"
+#: util/contextmenuitems.py:520
+msgid "Locally lock items"
 msgstr ""
 
-#: ui/xml/commit.xml.h:4 ui/commit.py:307 ui/commit.py:360 ui/commit.py:423
-#: util/contextmenuitems.py:357
-msgid "Commit"
+#: util/contextmenuitems.py:525
+msgid "Release Lock..."
 msgstr ""
 
-#: ui/xml/commit.xml.h:5 ui/xml/lock.xml.h:4
-#: ui/xml/dialogs/previous_messages.xml.h:3 ui/xml/import.xml.h:5
-msgid "Previous Messages"
+#: util/contextmenuitems.py:526
+msgid "Release lock on an item"
 msgstr ""
 
-#: ui/xml/commit.xml.h:6 ui/xml/lock.xml.h:5 ui/xml/add.xml.h:2
-msgid "Select / Deselect all"
+#: util/contextmenuitems.py:531 ui/cleanup.py:56
+msgid "Cleanup"
 msgstr ""
 
-#: ui/xml/commit.xml.h:7
-msgid "Show unversioned files"
+#: util/contextmenuitems.py:532
+msgid "Clean up working copy"
 msgstr ""
 
-#: ui/xml/property_editor.xml.h:1
-msgid "<b>Remote URI:</b>"
+#: util/contextmenuitems.py:537
+msgid "Export..."
 msgstr ""
 
-#: ui/xml/property_editor.xml.h:2
-msgid "<b>Working Copy:</b>"
+#: util/contextmenuitems.py:538
+msgid "Export a working copy or repository with no versioning information"
 msgstr ""
 
-#: ui/xml/property_editor.xml.h:3
-msgid "Add a new property."
+#: util/contextmenuitems.py:551
+msgid "Create Repository here"
 msgstr ""
 
-#: ui/xml/property_editor.xml.h:4
-msgid "Close this dialog."
+#: util/contextmenuitems.py:552
+msgid "Create a repository in a folder"
 msgstr ""
 
-#: ui/xml/property_editor.xml.h:5
-msgid "Property Editor"
+#: util/contextmenuitems.py:557 ui/xml/import.xml.h:1 ui/import.py:75
+msgid "Import"
 msgstr ""
 
-#: ui/xml/property_editor.xml.h:6
-msgid "Refresh the list of properties."
+#: util/contextmenuitems.py:558
+msgid "Import an item into a repository"
 msgstr ""
 
-#: ui/xml/annotate.xml.h:1
-msgid "<b>From Revision</b>"
+#: util/contextmenuitems.py:567
+msgid "Branch/tag..."
 msgstr ""
 
-#: ui/xml/annotate.xml.h:2
-msgid "<b>To Revision</b>"
+#: util/contextmenuitems.py:568
+msgid "Copy an item to another location in the repository"
 msgstr ""
 
-#: ui/xml/annotate.xml.h:3
-msgid "Annotate"
+#: util/contextmenuitems.py:573
+msgid "Switch..."
 msgstr ""
 
-#: ui/xml/log.xml.h:1
-msgid "100"
+#: util/contextmenuitems.py:574
+msgid "Change the repository location of a working copy"
 msgstr ""
 
-#: ui/xml/log.xml.h:2
-msgid "<b>Affected File(s)</b> (double-click to compare with base)"
+#: util/contextmenuitems.py:579
+msgid "Merge..."
 msgstr ""
 
-#: ui/xml/log.xml.h:3 ui/xml/dialogs/previous_messages.xml.h:1
-msgid "<b>Message</b>"
+#: util/contextmenuitems.py:580
+msgid "A wizard with steps for merging"
 msgstr ""
 
-#: ui/xml/log.xml.h:4
-msgid "<b>Revisions Table</b>"
+#: util/contextmenuitems.py:585
+msgid "Annotate..."
 msgstr ""
 
-#: ui/xml/log.xml.h:5
-msgid "Limit:"
+#: util/contextmenuitems.py:586
+msgid "Annotate a file"
 msgstr ""
 
-#: ui/xml/log.xml.h:6
-msgid "Log"
+#: util/contextmenuitems.py:591
+msgid "Create Patch..."
 msgstr ""
 
-#: ui/xml/log.xml.h:7 ui/log.py:271 ui/log.py:272
-msgid "N/A"
+#: util/contextmenuitems.py:592
+msgid "Creates a unified diff file with all changes you made"
 msgstr ""
 
-#: ui/xml/log.xml.h:8
-msgid "Refresh"
+#: util/contextmenuitems.py:597
+msgid "Apply Patch..."
 msgstr ""
 
-#: ui/xml/log.xml.h:9
-msgid "Showing Revisions:"
+#: util/contextmenuitems.py:598
+msgid "Applies a unified diff file to the working copy"
 msgstr ""
 
-#: ui/xml/log.xml.h:10
-msgid "Stop on copy"
+#: util/contextmenuitems.py:603 ui/xml/properties.xml.h:1
+msgid "Properties"
 msgstr ""
 
-#: ui/xml/log.xml.h:11 ui/dialog.py:136
-msgid "to"
+#: util/contextmenuitems.py:604
+msgid "View the properties of an item"
 msgstr ""
 
-#: ui/xml/notification.xml.h:1
-msgid "Notification Messages"
+#: util/contextmenuitems.py:609
+msgid "Help"
 msgstr ""
 
-#: ui/xml/properties.xml.h:1
-msgid "<b>Properties for:</b>"
+#: util/contextmenuitems.py:610
+msgid "View help"
 msgstr ""
 
-#: ui/xml/properties.xml.h:2
-msgid "<i>Selected properties will be applied recursively.</i>"
+#: util/contextmenuitems.py:615 ui/xml/settings.xml.h:1
+msgid "Settings"
 msgstr ""
 
-#: ui/xml/properties.xml.h:3 util/contextmenuitems.py:472
-msgid "Delete"
+#: util/contextmenuitems.py:616
+msgid "View or change RabbitVCS settings"
 msgstr ""
 
-#: ui/xml/properties.xml.h:4
-msgid "Delete properties recursively"
+#: util/contextmenuitems.py:621
+msgid "About"
 msgstr ""
 
-#: ui/xml/properties.xml.h:5
-msgid "Edit..."
+#: util/contextmenuitems.py:622
+msgid "About RabbitVCS"
 msgstr ""
 
-#: ui/xml/properties.xml.h:6
-msgid "New..."
+#: util/contextmenuitems.py:627
+msgid "Open"
 msgstr ""
 
-#: ui/xml/properties.xml.h:7 util/contextmenuitems.py:585
-msgid "Properties"
+#: util/contextmenuitems.py:628
+msgid "Open a file"
 msgstr ""
 
-#: ui/xml/properties.xml.h:8
-msgid "URL/Path:"
+#: util/contextmenuitems.py:636
+msgid "Browse to"
 msgstr ""
 
-#: ui/xml/lock.xml.h:1
-msgid "<b>Files to lock</b>"
+#: util/contextmenuitems.py:637
+msgid "Browse to a file or folder"
 msgstr ""
 
-#: ui/xml/lock.xml.h:2
-msgid "<b>Please describe why you are locking these files</b>"
+#: util/contextmenuitems.py:642
+msgid "Revert property"
 msgstr ""
 
-#: ui/xml/lock.xml.h:3
-msgid "Lock Files"
+#: util/contextmenuitems.py:644
+msgid "Revert this property to its original state"
 msgstr ""
 
-#: ui/xml/lock.xml.h:6
-msgid "Steal the locks"
+#: util/contextmenuitems.py:648
+msgid "Revert property (recursive)"
 msgstr ""
 
-#: ui/xml/browser.xml.h:1
-msgid "Load/Refresh"
+#: util/contextmenuitems.py:650
+msgid "Revert this property to its original state (recursive)"
 msgstr ""
 
-#: ui/xml/browser.xml.h:2 util/contextmenuitems.py:383
-msgid "Repository Browser"
+#: util/contextmenuitems.py:655
+msgid "Delete property"
 msgstr ""
 
-#: ui/xml/browser.xml.h:4
-msgid "URL:"
+#: util/contextmenuitems.py:657
+msgid "Delete this property"
 msgstr ""
 
-#: ui/xml/pull.xml.h:1
-msgid "<b>Pull Information</b>"
+#: util/contextmenuitems.py:661
+msgid "Delete property (recursive)"
 msgstr ""
 
-#: ui/xml/pull.xml.h:2 ui/xml/git-update.xml.h:2
-msgid "Merge changes into local branch"
+#: util/contextmenuitems.py:663
+msgid "Delete this property (recursive)"
 msgstr ""
 
-#: ui/xml/pull.xml.h:3
-msgid "Pull"
+#: util/contextmenuitems.py:668
+msgid "Edit details"
 msgstr ""
 
-#: ui/xml/ignore.xml.h:1
-msgid "<b>Ignore and exclude files from being tracked</b>"
+#: util/contextmenuitems.py:670
+msgid "Show and edit property details"
 msgstr ""
 
-#: ui/xml/ignore.xml.h:2
-msgid "Ignore"
+#: util/contextmenuitems.py:674 ui/create.py:68
+msgid "Initialize Repository"
 msgstr ""
 
-#: ui/xml/dialogs/name_email_prompt.xml.h:1
-msgid "<b>Enter Name and Email Details</b>"
+#: util/contextmenuitems.py:679 ui/clone.py:47 ui/clone.py:68
+msgid "Clone"
 msgstr ""
 
-#: ui/xml/dialogs/name_email_prompt.xml.h:2
-msgid "Email:"
+#: util/contextmenuitems.py:684
+msgid "Fetch/Pull"
 msgstr ""
 
-#: ui/xml/dialogs/name_email_prompt.xml.h:3
-msgid "Name and Email"
+#: util/contextmenuitems.py:689
+msgid "Push"
 msgstr ""
 
-#: ui/xml/dialogs/name_email_prompt.xml.h:4 ui/xml/property_page.xml.h:2
-#: ui/tags.py:99
-msgid "Name:"
+#: util/contextmenuitems.py:694
+msgid "Branches"
 msgstr ""
 
-#: ui/xml/dialogs/certificate.xml.h:1
-msgid "<b>Certificate Details</b>"
+#: util/contextmenuitems.py:699
+msgid "Tags"
 msgstr ""
 
-#: ui/xml/dialogs/certificate.xml.h:2
-msgid "Accept Forever"
+#: util/contextmenuitems.py:704
+msgid "Remotes"
 msgstr ""
 
-#: ui/xml/dialogs/certificate.xml.h:3
-msgid "Accept Once"
+#: util/contextmenuitems.py:709 ui/clean.py:66 ui/xml/clean.xml.h:1
+msgid "Clean"
 msgstr ""
 
-#: ui/xml/dialogs/certificate.xml.h:4
-msgid "Check Certificate"
+#: util/contextmenuitems.py:713 ui/reset.py:96 ui/xml/reset.xml.h:1
+msgid "Reset"
 msgstr ""
 
-#: ui/xml/dialogs/certificate.xml.h:5
-msgid "Deny"
+#: util/contextmenuitems.py:718 ui/stage.py:48 ui/stage.py:73
+msgid "Stage"
 msgstr ""
 
-#: ui/xml/dialogs/certificate.xml.h:6
-msgid "Fingerprint:"
+#: util/contextmenuitems.py:723 ui/unstage.py:48 ui/unstage.py:73
+msgid "Unstage"
 msgstr ""
 
-#: ui/xml/dialogs/certificate.xml.h:7 ui/widget.py:1187
-msgid "Host:"
+#: util/contextmenuitems.py:728
+msgid "Edit conflicts"
 msgstr ""
 
-#: ui/xml/dialogs/certificate.xml.h:8
-msgid "Issuer:"
+#: util/contextmenuitems.py:754
+msgid "Ignore item by filename"
 msgstr ""
 
-#: ui/xml/dialogs/certificate.xml.h:9
-#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:3
-msgid "Realm:"
+#: util/contextmenuitems.py:773
+msgid "Ignore item by file extension"
 msgstr ""
 
-#: ui/xml/dialogs/certificate.xml.h:10
-msgid "Valid:"
+#: ui/revert.py:74 ui/markresolved.py:50 ui/lock.py:71 ui/log.py:392
+#: ui/log.py:678 ui/action.py:120 ui/browser.py:91 ui/add.py:77 ui/commit.py:85
+msgid "Path"
 msgstr ""
 
-#: ui/xml/dialogs/conflict_decision.xml.h:1
-msgid "<b>A conflict was found in the following file:</b>"
+#: ui/revert.py:74 ui/markresolved.py:51 ui/lock.py:71 ui/add.py:78
+#: ui/commit.py:85
+msgid "Extension"
 msgstr ""
 
-#: ui/xml/dialogs/conflict_decision.xml.h:2
-msgid "Accept Mine"
+#: ui/revert.py:106 ui/lock.py:111 ui/unlock.py:67 ui/add.py:111
+#: ui/commit.py:131
+msgid "Loading..."
 msgstr ""
 
-#: ui/xml/dialogs/conflict_decision.xml.h:3
-msgid "Accept Theirs"
+#: ui/revert.py:110 ui/lock.py:114 ui/unlock.py:90 ui/add.py:133
+#, python-format
+msgid "Found %d item(s)"
 msgstr ""
 
-#: ui/xml/dialogs/conflict_decision.xml.h:4
-msgid "After the editing conflict, mark the file as resolved."
+#: ui/revert.py:176 ui/revert.py:202
+msgid "Running Revert Command..."
 msgstr ""
 
-#: ui/xml/dialogs/conflict_decision.xml.h:5
-msgid "Cancel"
+#: ui/revert.py:178 ui/revert.py:204
+msgid "Completed Revert"
 msgstr ""
 
-#: ui/xml/dialogs/conflict_decision.xml.h:6
-msgid "Edit Conflicts"
+#: ui/remotes.py:61
+msgid "Remote Repository Manager"
 msgstr ""
 
-#: ui/xml/dialogs/conflict_decision.xml.h:7
-msgid "Merge Manually"
+#: ui/remotes.py:62
+msgid "<b>Remote Repositories</b>"
 msgstr ""
 
-#: ui/xml/dialogs/error_notification.xml.h:1
-msgid "<span weight=\"bold\" size=\"xx-large\">RabbitVCS Error</span>"
+#: ui/remotes.py:68 ui/properties.py:64 ui/property_editor.py:114
+msgid "Name"
 msgstr ""
 
-#: ui/xml/dialogs/error_notification.xml.h:2
-msgid "RabbitVCS Error"
+#: ui/remotes.py:68
+msgid "Host"
 msgstr ""
 
-#: ui/xml/dialogs/confirmation.xml.h:1 ui/dialog.py:297
-msgid "Are you sure you want to continue?"
+#: ui/remotes.py:123 ui/tags.py:238
+#, python-format
+msgid "Are you sure you want to delete %s?"
 msgstr ""
 
-#: ui/xml/dialogs/confirmation.xml.h:2
-msgid "Confirmation"
+#: ui/unstage.py:74
+msgid "Running Unstage Command..."
 msgstr ""
 
-#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:1
-msgid "<b>Please provide your ssl certification file</b>"
+#: ui/unstage.py:77
+msgid "Completed Unstage"
 msgstr ""
 
-#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:2
-msgid "Path:"
+#: ui/reset.py:97
+msgid "Running Reset Command..."
 msgstr ""
 
-#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:4
-msgid "SSL Client Certification"
+#: ui/reset.py:104
+msgid "Completed Reset"
 msgstr ""
 
-#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:5
-msgid "Save Authentication"
+#: ui/markresolved.py:51 ui/commit.py:86
+msgid "Text Status"
 msgstr ""
 
-#: ui/xml/dialogs/delete_confirmation.xml.h:2
-msgid ""
-"<span size=\"large\"><b>Are you sure you want to delete %item%?</b></span>"
+#: ui/markresolved.py:51 ui/commit.py:86
+msgid "Property Status"
 msgstr ""
 
-#: ui/xml/dialogs/delete_confirmation.xml.h:3
-msgid "Delete Confirmation"
+#: ui/markresolved.py:77
+msgid "Running Resolved Command..."
 msgstr ""
 
-#: ui/xml/dialogs/delete_confirmation.xml.h:4
-msgid "The item(s) will be sent to the trash can."
+#: ui/markresolved.py:80
+msgid "Completed Mark as Resolved"
+msgstr ""
+
+#: ui/ignore.py:101
+msgid "Ignore file:"
+msgstr ""
+
+#: ui/stage.py:74
+msgid "Running Stage Command..."
+msgstr ""
+
+#: ui/stage.py:77
+msgid "Completed Stage"
+msgstr ""
+
+#: ui/lock.py:72
+msgid "Locked"
 msgstr ""
 
-#: ui/xml/dialogs/message_box.xml.h:1 ui/dialog.py:52 ui/log.py:338
-#: ui/log.py:571
+#: ui/lock.py:121
+msgid "Yes"
+msgstr ""
+
+#: ui/lock.py:156
+msgid "Get Lock"
+msgstr ""
+
+#: ui/lock.py:157
+msgid "Running Lock Command..."
+msgstr ""
+
+#: ui/lock.py:166
+msgid "Completed Lock"
+msgstr ""
+
+#: ui/log.py:51 ui/log.py:375 ui/log.py:662 ui/xml/merge.xml.h:19
+#: ui/widget.py:1038 ui/browser.py:91 ui/annotate.py:131 ui/annotate.py:235
+msgid "Revision"
+msgstr ""
+
+#: ui/log.py:52 ui/log.py:376 ui/log.py:663 ui/browser.py:91 ui/dialog.py:51
+#: ui/annotate.py:132 ui/annotate.py:236
+msgid "Date"
+msgstr ""
+
+#: ui/log.py:53 ui/log.py:375 ui/log.py:662 ui/browser.py:91 ui/annotate.py:131
+#: ui/annotate.py:235
+msgid "Author"
+msgstr ""
+
+#: ui/log.py:126
+#, python-format
+msgid "Log - %s"
+msgstr ""
+
+#: ui/log.py:307 ui/log.py:308 ui/xml/log.xml.h:7
+msgid "N/A"
+msgstr ""
+
+#: ui/log.py:376 ui/log.py:663 ui/xml/dialogs/message_box.xml.h:1
+#: ui/dialog.py:51
 msgid "Message"
 msgstr ""
 
-#: ui/xml/dialogs/loading.xml.h:1 ui/commit.py:124 ui/add.py:94
-#: ui/unlock.py:85 ui/lock.py:111
-msgid "Loading..."
+#: ui/log.py:377
+msgid "Color"
 msgstr ""
 
-#: ui/xml/dialogs/property.xml.h:1
-msgid "<b>Edit Property Details</b>"
+#: ui/log.py:392 ui/log.py:678 ui/action.py:120
+msgid "Action"
 msgstr ""
 
-#: ui/xml/dialogs/property.xml.h:2
-msgid "Apply property recursively"
+#: ui/log.py:393
+msgid "Copy From Path"
 msgstr ""
 
-#: ui/xml/dialogs/property.xml.h:3
-msgid "Property"
+#: ui/log.py:393
+msgid "Copy From Revision"
 msgstr ""
 
-#: ui/xml/dialogs/property.xml.h:4
-msgid "Property:"
+#: ui/log.py:662
+msgid "Graph"
 msgstr ""
 
-#: ui/xml/dialogs/property.xml.h:5
-msgid "Value:"
+#: ui/log.py:929 ui/browser.py:322 ui/dialog.py:110
+msgid "_Select"
 msgstr ""
 
-#: ui/xml/dialogs/create_folder.xml.h:2
-msgid "<b>Folder Name</b>"
+#: ui/log.py:983
+msgid "View diff against working copy"
 msgstr ""
 
-#: ui/xml/dialogs/create_folder.xml.h:3
-msgid "Create Folder..."
+#: ui/log.py:993
+msgid "View diff between revisions"
 msgstr ""
 
-#: ui/xml/dialogs/previous_messages.xml.h:2
-msgid "<b>Previous Messages</b>"
+#: ui/log.py:998
+msgid "Compare with working copy"
 msgstr ""
 
-#: ui/xml/clean.xml.h:1
-msgid "<b>Clean your Repository</b>"
+#: ui/log.py:1008
+msgid "Compare revisions"
 msgstr ""
 
-#: ui/xml/clean.xml.h:2 ui/clean.py:75 util/contextmenuitems.py:691
-msgid "Clean"
+#: ui/log.py:1014
+msgid "Show changes against previous revision"
 msgstr ""
 
-#: ui/xml/clean.xml.h:3
-msgid "Dry run"
+#: ui/log.py:1020
+msgid "Show changes between revisions"
 msgstr ""
 
-#: ui/xml/clean.xml.h:4
-msgid "Force"
+#: ui/log.py:1025
+msgid "Update to this revision"
 msgstr ""
 
-#: ui/xml/clean.xml.h:5
-msgid "Remove directories"
+#: ui/log.py:1026
+msgid "Update the selected path to this revision"
 msgstr ""
 
-#: ui/xml/clean.xml.h:6
-msgid "Remove ignored files, too"
+#: ui/log.py:1031
+msgid "Revert changes from this revision"
 msgstr ""
 
-#: ui/xml/clean.xml.h:7
-msgid "Remove only ignored files"
+#: ui/log.py:1032
+msgid "Update the selected path by reverse merging the changes"
 msgstr ""
 
-#: ui/xml/clean.xml.h:8
-msgid "Remove untracked files from the working tree"
+#: ui/log.py:1037
+msgid "Copy to clipboard"
 msgstr ""
 
-#: ui/xml/settings.xml.h:1
-msgid "<b>Authentication</b>"
+#: ui/log.py:1038
+msgid "Copy to clipboard the full data of these revisions"
 msgstr ""
 
-#: ui/xml/settings.xml.h:2
-msgid "<b>Checker type:</b>"
+#: ui/log.py:1042 ui/log.py:1046
+msgid "Edit author..."
 msgstr ""
 
-#: ui/xml/settings.xml.h:3
-msgid "<b>Configuration Editor</b>"
+#: ui/log.py:1050
+msgid "Edit log message..."
 msgstr ""
 
-#: ui/xml/settings.xml.h:4
-msgid "<b>Log Messages</b>"
+#: ui/log.py:1054
+msgid "Edit revision properties..."
 msgstr ""
 
-#: ui/xml/settings.xml.h:5
-msgid "<b>Logging Options</b>"
+#: ui/log.py:1334
+msgid "Edit author"
 msgstr ""
 
-#: ui/xml/settings.xml.h:6
-msgid "<b>Memory usage:</b> "
+#: ui/log.py:1346
+msgid "Edit log message"
 msgstr ""
 
-#: ui/xml/settings.xml.h:7
-msgid "<b>Other Information</b>"
+#: ui/unlock.py:46 ui/unlock.py:108
+msgid "Unlock"
 msgstr ""
 
-#: ui/xml/settings.xml.h:8
-msgid "<b>Process ID:</b>"
+#: ui/unlock.py:109
+msgid "Running Unlock Command..."
 msgstr ""
 
-#: ui/xml/settings.xml.h:9
-msgid "<b>Program used to compare files</b>"
+#: ui/unlock.py:112
+msgid "Completed Unlock"
 msgstr ""
 
-#: ui/xml/settings.xml.h:10
-msgid "<b>RabbitVCS</b>"
+#: ui/__init__.py:52
+msgid ""
+"You must specify a version control system using the --vcs [svn|git] option"
 msgstr ""
 
-#: ui/xml/settings.xml.h:11
-msgid "<b>URL History</b>"
+#: ui/clean.py:67
+msgid "Running Clean Command..."
 msgstr ""
 
-#: ui/xml/settings.xml.h:12
-msgid "Browse..."
+#: ui/clean.py:77
+msgid "Completed Clean"
 msgstr ""
 
-#: ui/xml/settings.xml.h:13
-msgid "Clear your authentication information"
+#: ui/action.py:120
+msgid "Mime Type"
 msgstr ""
 
-#: ui/xml/settings.xml.h:14
-msgid "Enable emblems"
+#: ui/action.py:360
+msgid "Finished"
 msgstr ""
 
-#: ui/xml/settings.xml.h:15
-msgid "Enable file attributes"
+#: ui/action.py:364
+#, python-format
+msgid "%s - Finished"
 msgstr ""
 
-#: ui/xml/settings.xml.h:16
-msgid "Enable recursive status checks"
+#: ui/action.py:386
+msgid "Log Message"
 msgstr ""
 
-#: ui/xml/settings.xml.h:17
-msgid "External Programs"
+#: ui/xml/revert.xml.h:2 ui/xml/commit.xml.h:2 ui/xml/relocate.xml.h:2
+#: ui/xml/update.xml.h:2 ui/xml/settings.xml.h:2 ui/xml/add.xml.h:2
+#: ui/xml/dialogs/delete_confirmation.xml.h:2
+#: ui/xml/dialogs/name_email_prompt.xml.h:2
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:2
+#: ui/xml/dialogs/previous_messages.xml.h:2 ui/xml/dialogs/property.xml.h:2
+#: ui/xml/dialogs/create_folder.xml.h:2 ui/xml/dialogs/loading.xml.h:2
+#: ui/xml/ignore.xml.h:2 ui/xml/clean.xml.h:2 ui/xml/properties.xml.h:2
+#: ui/xml/notification.xml.h:2 ui/xml/git-update.xml.h:1 ui/xml/lock.xml.h:2
+#: ui/xml/import.xml.h:2 ui/xml/reset.xml.h:2 ui/dialog.py:109 ui/dialog.py:281
+#: ui/dialog.py:301
+msgid "_Cancel"
 msgstr ""
 
-#: ui/xml/settings.xml.h:18
-msgid "General"
+#: ui/xml/revert.xml.h:3 ui/xml/commit.xml.h:3 ui/xml/relocate.xml.h:3
+#: ui/xml/update.xml.h:3 ui/xml/settings.xml.h:3 ui/xml/add.xml.h:3
+#: ui/xml/dialogs/name_email_prompt.xml.h:3
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:3
+#: ui/xml/dialogs/message_box.xml.h:2 ui/xml/dialogs/previous_messages.xml.h:3
+#: ui/xml/dialogs/property.xml.h:3 ui/xml/dialogs/create_folder.xml.h:3
+#: ui/xml/ignore.xml.h:3 ui/xml/clean.xml.h:3 ui/xml/notification.xml.h:3
+#: ui/xml/git-update.xml.h:2 ui/xml/lock.xml.h:3 ui/xml/import.xml.h:3
+#: ui/xml/reset.xml.h:3
+msgid "_OK"
 msgstr ""
 
-#: ui/xml/settings.xml.h:19
-msgid "Git"
+#: ui/xml/revert.xml.h:4 ui/xml/commit.xml.h:8 ui/xml/add.xml.h:5
+#: ui/xml/lock.xml.h:5
+msgid "Select / Deselect all"
 msgstr ""
 
-#: ui/xml/settings.xml.h:20
-msgid "Language:"
+#: ui/xml/commit.xml.h:4 ui/xml/log.xml.h:2
+msgid "Refresh"
 msgstr ""
 
-#: ui/xml/settings.xml.h:21
-msgid "Logging"
+#: ui/xml/commit.xml.h:5 ui/xml/dialogs/previous_messages.xml.h:1
+#: ui/xml/lock.xml.h:7 ui/xml/import.xml.h:5
+msgid "Previous Messages"
 msgstr ""
 
-#: ui/xml/settings.xml.h:22
-msgid "Minimum level to log"
+#: ui/xml/commit.xml.h:6 ui/xml/dialogs/create_folder.xml.h:5
+msgid "<b>Add Message</b>"
 msgstr ""
 
-#: ui/xml/settings.xml.h:23
-msgid "Number of URLs to remember"
+#: ui/xml/commit.xml.h:7
+msgid "Show unversioned files"
 msgstr ""
 
-#: ui/xml/settings.xml.h:24
-msgid "Number of messages to remember"
+#: ui/xml/commit.xml.h:9
+msgid "<b>Changed Files</b> (double-click to compare with base)"
 msgstr ""
 
-#: ui/xml/settings.xml.h:25
-msgid "Refresh Information"
+#: ui/xml/commit.xml.h:10
+msgid "<b>Commit to:</b>"
 msgstr ""
 
-#: ui/xml/settings.xml.h:26
-msgid "Restart Checker"
+#: ui/xml/property_editor.xml.h:1
+msgid "Property Editor"
 msgstr ""
 
-#: ui/xml/settings.xml.h:27
-msgid "Saved Data"
+#: ui/xml/property_editor.xml.h:2 ui/xml/browser.xml.h:3 ui/xml/manager.xml.h:1
+#: ui/xml/dialogs/error_notification.xml.h:2 ui/xml/log.xml.h:1
+#: ui/xml/annotate.xml.h:3
+msgid "_Close"
 msgstr ""
 
-#: ui/xml/settings.xml.h:28 util/contextmenuitems.py:597
-msgid "Settings"
+#: ui/xml/property_editor.xml.h:3
+msgid "Close this dialog."
 msgstr ""
 
-#: ui/xml/settings.xml.h:29
-msgid "Show RabbitVCS debugging tools"
+#: ui/xml/property_editor.xml.h:4
+msgid "_Refresh"
 msgstr ""
 
-#: ui/xml/settings.xml.h:30
-msgid "Show new version on the left side"
+#: ui/xml/property_editor.xml.h:5
+msgid "Refresh the list of properties."
 msgstr ""
 
-#: ui/xml/settings.xml.h:31
-msgid "Status Checker"
+#: ui/xml/property_editor.xml.h:6
+msgid "_New"
 msgstr ""
 
-#: ui/xml/settings.xml.h:32
-msgid "Stop Checker"
+#: ui/xml/property_editor.xml.h:7
+msgid "Add a new property."
 msgstr ""
 
-#: ui/xml/settings.xml.h:33
-msgid "The debug menu is used to diagnose problems with RabbitVCS itself"
+#: ui/xml/property_editor.xml.h:8
+msgid "<b>Remote URI:</b>"
 msgstr ""
 
-#: ui/xml/settings.xml.h:34
-msgid "Type:"
+#: ui/xml/property_editor.xml.h:9
+msgid "<b>Working Copy:</b>"
 msgstr ""
 
-#: ui/xml/settings.xml.h:35 ui/settings.py:43
-msgid "Unknown"
+#: ui/xml/browser.xml.h:2
+msgid "Load/Refresh"
 msgstr ""
 
-#: ui/xml/add.xml.h:1 ui/widget.py:1301 ui/add.py:178 ui/add.py:203
-#: ui/tags.py:273 util/contextmenuitems.py:449
-msgid "Add"
+#: ui/xml/browser.xml.h:4 ui/tags.py:108 ui/tags.py:176 ui/merge.py:508
+msgid "Revision:"
 msgstr ""
 
-#: ui/xml/cleanup.xml.h:1 ui/cleanup.py:56
-msgid "Cleaning Up..."
+#: ui/xml/browser.xml.h:5
+msgid "URL:"
 msgstr ""
 
-#: ui/xml/cleanup.xml.h:2
-msgid ""
-"Cleanup Requested....\n"
-"\n"
-"Begin working copy cleanup?"
+#: ui/xml/relocate.xml.h:1 ui/relocate.py:82
+msgid "Relocate"
 msgstr ""
 
-#: ui/xml/reset.xml.h:2
-msgid "<b>Path</b>"
+#: ui/xml/relocate.xml.h:4
+msgid "To:"
 msgstr ""
 
-#: ui/xml/reset.xml.h:3
-msgid "<b>Reset your Repository</b>"
+#: ui/xml/relocate.xml.h:5
+msgid "From:"
 msgstr ""
 
-#: ui/xml/reset.xml.h:5
-msgid ""
-"<i>Hard</i> - Matches the working tree and index to that of the \n"
-"tree being switched to"
+#: ui/xml/relocate.xml.h:6
+msgid "<b>Change the repository of your working copy</b>"
 msgstr ""
 
-#: ui/xml/reset.xml.h:7
-msgid ""
-"<i>Merge</i> - Resets the index to match the tree recorded by the named "
-"commit,\n"
-"and updates the files that are different between the named commit\n"
-"and the current commit in the working tree"
+#: ui/xml/update.xml.h:4
+msgid "Rollback to specified revision number"
 msgstr ""
 
-#: ui/xml/reset.xml.h:10
-msgid "<i>Mixed</i> - Reset the index but not the working tree"
+#: ui/xml/update.xml.h:5
+msgid "Omit Externals"
 msgstr ""
 
-#: ui/xml/reset.xml.h:11
-msgid ""
-"<i>Soft</i> - Does not touch the index file or working tree at all, \n"
-"but requires them to be in good working order"
+#: ui/xml/update.xml.h:6 ui/xml/merge.xml.h:29
+msgid "Recursive"
 msgstr ""
 
+#: ui/xml/update.xml.h:7 ui/xml/merge.xml.h:30 ui/xml/git-update.xml.h:7
 #: ui/xml/reset.xml.h:13
-msgid "None"
+msgid "<b>Options</b>"
 msgstr ""
 
-#: ui/xml/reset.xml.h:15
-msgid "Reset current HEAD to specified state."
+#: ui/xml/update.xml.h:8 ui/xml/reset.xml.h:14
+msgid "<b>Revision</b>"
 msgstr ""
 
-#: ui/xml/import.xml.h:1
-msgid "<b>Import Message</b>"
+#: ui/xml/merge.xml.h:1
+msgid "Merge Assistant"
 msgstr ""
 
-#: ui/xml/import.xml.h:2
-msgid "<b>Repository</b>"
+#: ui/xml/merge.xml.h:2
+msgid "Choose this method if you wish to reintegrate a branch into the trunk."
 msgstr ""
 
-#: ui/xml/import.xml.h:3 ui/import.py:80 util/contextmenuitems.py:539
-msgid "Import"
+#: ui/xml/merge.xml.h:3
+msgid "Reintegrate a branch"
 msgstr ""
 
-#: ui/xml/import.xml.h:4
-msgid "Include ignored files"
+#: ui/xml/merge.xml.h:4
+msgid ""
+"Choose this method if you wish to merge two different branches into your "
+"working copy."
 msgstr ""
 
-#: ui/xml/git-update.xml.h:3
-msgid "Update Local Repository"
+#: ui/xml/merge.xml.h:5
+msgid "Merge two different trees"
 msgstr ""
 
-#: ui/xml/manager.xml.h:1
-msgid "label"
+#: ui/xml/merge.xml.h:6
+msgid ""
+"Choose this method if you have made some changes to a branch and wish to "
+"merge your changes with another branch."
 msgstr ""
 
-#: ui/xml/relocate.xml.h:1
-msgid "<b>Change the repository of your working copy</b>"
+#: ui/xml/merge.xml.h:7
+msgid "Merge a range of revisions"
 msgstr ""
 
-#: ui/xml/relocate.xml.h:2
-msgid "From:"
+#: ui/xml/merge.xml.h:8
+msgid "Step 1: Merge Type"
 msgstr ""
 
-#: ui/xml/relocate.xml.h:3 ui/relocate.py:87
-msgid "Relocate"
+#: ui/xml/merge.xml.h:9
+msgid "<b>Working Copy</b>"
 msgstr ""
 
-#: ui/xml/relocate.xml.h:4
-msgid "To:"
+#: ui/xml/merge.xml.h:10
+msgid ""
+"Use the log dialog to select the revisions that you wish to merge.  Or write "
+"out the revisions manually, each separated by a comma.  You can specify a "
+"revision range by a dash. \n"
+"\n"
+"Example: 4-7,9,11,15-HEAD\n"
+"\n"
+"To merge all revisions, leave the box empty."
 msgstr ""
 
-#: ui/xml/property_page.xml.h:1
-msgid "Content status:"
+#: ui/xml/merge.xml.h:15
+msgid "Show log"
 msgstr ""
 
-#: ui/xml/property_page.xml.h:3
-msgid "Property status:"
+#: ui/xml/merge.xml.h:16
+msgid "<b>Revision Range</b>"
 msgstr ""
 
-#: ui/xml/property_page.xml.h:4 util/contextmenuitems.py:363
-msgid "RabbitVCS"
+#: ui/xml/merge.xml.h:17
+msgid "<b>URL to merge from</b>"
 msgstr ""
 
-#: ui/xml/property_page.xml.h:5
-msgid "VCS:"
+#: ui/xml/merge.xml.h:18
+msgid "Step 2: Merge a Range of Revisions"
 msgstr ""
 
-#: ui/revprops.py:65 ui/property_editor.py:155 ui/properties.py:158
-msgid "Unable to retrieve properties list"
+#: ui/xml/merge.xml.h:20 ui/widget.py:1037 ui/widget.py:1043
+msgid "HEAD"
 msgstr ""
 
-#: ui/annotate.py:57
-msgid "Cannot annotate a directory"
+#: ui/xml/merge.xml.h:21
+msgid "<b>To: (URL and revision to merge)</b>"
 msgstr ""
 
-#: ui/annotate.py:63
-#, python-format
-msgid "Annotate - %s"
+#: ui/xml/merge.xml.h:22
+msgid "<b>From: (URL and revision to merge)</b>"
 msgstr ""
 
-#: ui/annotate.py:127 ui/annotate.py:228
-msgid "Line"
+#: ui/xml/merge.xml.h:23
+msgid "Step 2: Merge two different trees"
 msgstr ""
 
-#: ui/annotate.py:127 ui/annotate.py:228 ui/browser.py:89 ui/log.py:337
-#: ui/log.py:570
-msgid "Author"
+#: ui/xml/merge.xml.h:24
+msgid "<b>From URL</b>"
 msgstr ""
 
-#: ui/annotate.py:128 ui/annotate.py:229 ui/browser.py:89 ui/dialog.py:52
-#: ui/log.py:338 ui/log.py:571
-msgid "Date"
+#: ui/xml/merge.xml.h:25
+msgid "Step 2: Reintegrate a Branch"
 msgstr ""
 
-#: ui/annotate.py:128 ui/annotate.py:229
-msgid "Text"
+#: ui/xml/merge.xml.h:26
+msgid "Test Merge"
 msgstr ""
 
-#: ui/annotate.py:143
-msgid "The from revision field must be an integer"
+#: ui/xml/merge.xml.h:27
+msgid "Only record the merge"
 msgstr ""
 
-#: ui/widget.py:910
-msgid "Branch"
+#: ui/xml/merge.xml.h:28
+msgid "Ignore ancestry"
 msgstr ""
 
-#: ui/widget.py:915
-msgid "Number"
+#: ui/xml/merge.xml.h:31
+msgid "Step 3: Final Options"
 msgstr ""
 
-#: ui/widget.py:918
-msgid "Working Copy"
+#: ui/xml/settings.xml.h:4
+msgid "<b>Version Control Systems</b>"
 msgstr ""
 
-#: ui/widget.py:1142
-msgid "Repository:"
+#: ui/xml/settings.xml.h:5
+msgid "Enable Subversion"
 msgstr ""
 
-#: ui/widget.py:1161
-msgid "Branch:"
+#: ui/xml/settings.xml.h:6
+msgid "Enable Git"
 msgstr ""
 
-#: ui/widget.py:1296
-msgid "Add line:"
+#: ui/xml/settings.xml.h:7
+msgid "Show RabbitVCS debugging tools"
 msgstr ""
 
-#: ui/property_editor.py:55
-msgid ""
-"<b>Note:</b> changes to properties are applied instantly. You may review and "
-"undo changes using the context menu for each item.\n"
+#: ui/xml/settings.xml.h:8
+msgid "The debug menu is used to diagnose problems with RabbitVCS itself"
 msgstr ""
 
-#: ui/property_editor.py:60
+#: ui/xml/settings.xml.h:9
+msgid "Enable emblems"
+msgstr ""
+
+#: ui/xml/settings.xml.h:10
+msgid "Enable recursive status checks"
+msgstr ""
+
+#: ui/xml/settings.xml.h:11
+msgid "Enable file attributes"
+msgstr ""
+
+#: ui/xml/settings.xml.h:12
+msgid "<b>RabbitVCS</b>"
+msgstr ""
+
+#: ui/xml/settings.xml.h:13
+msgid "General"
+msgstr ""
+
+#: ui/xml/settings.xml.h:14
+msgid "<b>Configure the program to resolve conflicted files.</b>"
+msgstr ""
+
+#: ui/xml/settings.xml.h:16
 msgid ""
-"Do you want to delete the selected properties from all files and "
-"subdirectories\n"
-"beneath this directory?"
+"Use the following macros to configure the merge tool:\n"
+"%base       - The common ancestor of the two files to be merged.\n"
+"%mine      - The file you modified in your working copy.\n"
+"%theirs    - The file being merged into your working copy.\n"
+"%merged - The file to store the merged result."
 msgstr ""
 
-#: ui/property_editor.py:101
-msgid "File is not under version control."
+#: ui/xml/settings.xml.h:21
+msgid "Browse..."
 msgstr ""
 
-#: ui/property_editor.py:111 ui/properties.py:63 ui/remotes.py:66
-msgid "Name"
+#: ui/xml/settings.xml.h:22
+msgid "Show new version on the left side"
 msgstr ""
 
-#: ui/property_editor.py:111 ui/properties.py:63
-msgid "Value"
+#: ui/xml/settings.xml.h:23
+msgid "<b>Program used to compare files</b>"
 msgstr ""
 
-#: ui/property_editor.py:111
-msgid "Reserved"
+#: ui/xml/settings.xml.h:24
+msgid "External Programs"
 msgstr ""
 
-#: ui/property_editor.py:111 ui/revert.py:129
-msgid "Status"
+#: ui/xml/settings.xml.h:25
+msgid "Clear"
 msgstr ""
 
-#: ui/property_editor.py:189
-msgid "Unable to set new value for property."
+#: ui/xml/settings.xml.h:26
+msgid "Clear your authentication information"
 msgstr ""
 
-#: ui/commit.py:80 ui/revert.py:62 ui/revert.py:128 ui/markresolved.py:61
-#: ui/add.py:71 ui/unlock.py:61 ui/action.py:122 ui/browser.py:89
-#: ui/lock.py:70 ui/stage.py:63 ui/log.py:348 ui/log.py:586 ui/unstage.py:63
-msgid "Path"
+#: ui/xml/settings.xml.h:27
+msgid "<b>Authentication</b>"
 msgstr ""
 
-#: ui/commit.py:80 ui/revert.py:62 ui/revert.py:128 ui/markresolved.py:61
-#: ui/add.py:71 ui/unlock.py:61 ui/lock.py:70 ui/stage.py:63 ui/unstage.py:63
-msgid "Extension"
+#: ui/xml/settings.xml.h:28
+msgid "Number of messages to remember"
 msgstr ""
 
-#: ui/commit.py:81 ui/revert.py:63 ui/markresolved.py:62
-msgid "Text Status"
+#: ui/xml/settings.xml.h:29
+msgid "<b>Log Messages</b>"
 msgstr ""
 
-#: ui/commit.py:81 ui/revert.py:63 ui/markresolved.py:62
-msgid "Property Status"
+#: ui/xml/settings.xml.h:30
+msgid "Number of URLs to remember"
 msgstr ""
 
-#: ui/commit.py:131 ui/add.py:97 ui/unlock.py:109 ui/lock.py:114
-#, python-format
-msgid "Found %d item(s)"
+#: ui/xml/settings.xml.h:31
+msgid "<b>URL History</b>"
 msgstr ""
 
-#: ui/commit.py:308 ui/commit.py:361 ui/commit.py:424
-msgid "Running Commit Command..."
+#: ui/xml/settings.xml.h:32
+msgid "Saved Data"
 msgstr ""
 
-#: ui/commit.py:314 ui/commit.py:370 ui/commit.py:433
-msgid "Completed Commit"
+#: ui/xml/settings.xml.h:33
+msgid "<b>Logging Options</b>"
 msgstr ""
 
-#: ui/commit.py:387
-msgid "Close Branch"
+#: ui/xml/settings.xml.h:34
+msgid "Minimum level to log:"
 msgstr ""
 
-#: ui/revert.py:50 ui/revert.py:103 ui/revert.py:115 ui/revert.py:168
-#: util/contextmenuitems.py:478
-msgid "Revert"
+#: ui/xml/settings.xml.h:35
+msgid "Type:"
 msgstr ""
 
-#: ui/revert.py:104 ui/revert.py:169
-msgid "Running Revert Command..."
+#: ui/xml/settings.xml.h:36
+msgid "Logging"
 msgstr ""
 
-#: ui/revert.py:106 ui/revert.py:171
-msgid "Completed Revert"
+#: ui/xml/settings.xml.h:37
+msgid "Refresh Information"
 msgstr ""
 
-#: ui/settings.py:45
-msgid "There was an error communicating with the status checker service."
+#: ui/xml/settings.xml.h:38
+msgid "Restart Checker"
 msgstr ""
 
-#: ui/settings.py:59
-msgid "English"
+#: ui/xml/settings.xml.h:39
+msgid "Stop Checker"
 msgstr ""
 
-#: ui/settings.py:119
-msgid "Config file:"
+#: ui/xml/settings.xml.h:40
+msgid "<b>Other Information</b>"
 msgstr ""
 
-#: ui/settings.py:297
-msgid "Select a program"
+#: ui/xml/settings.xml.h:41
+msgid "<b>Checker type:</b>"
 msgstr ""
 
-#: ui/settings.py:306
-msgid "Are you sure you want to clear your repository paths?"
+#: ui/xml/settings.xml.h:42 ui/settings.py:43
+msgid "Unknown"
 msgstr ""
 
-#: ui/settings.py:313
-msgid "Repository paths cleared"
+#: ui/xml/settings.xml.h:43
+msgid "<b>Process ID:</b>"
 msgstr ""
 
-#: ui/settings.py:317
-msgid "Are you sure you want to clear your previous messages?"
+#: ui/xml/settings.xml.h:44
+msgid "<b>Memory usage:</b> "
 msgstr ""
 
-#: ui/settings.py:324
-msgid "Previous messages cleared"
+#: ui/xml/settings.xml.h:45
+msgid "<b>Locale:</b> "
 msgstr ""
 
-#: ui/settings.py:328
-msgid "Are you sure you want to clear your authentication information?"
+#: ui/xml/settings.xml.h:46
+msgid "Status Checker"
 msgstr ""
 
-#: ui/settings.py:345
-msgid "Authentication information cleared"
+#: ui/xml/settings.xml.h:47
+msgid "<b>Configuration Editor</b>"
 msgstr ""
 
-#: ui/markresolved.py:48 ui/markresolved.py:102 util/contextmenuitems.py:484
-msgid "Mark as Resolved"
+#: ui/xml/settings.xml.h:48
+msgid "Git"
 msgstr ""
 
-#: ui/markresolved.py:103
-msgid "Running Resolved Command..."
+#: ui/xml/add.xml.h:4
+msgid "Show ignored files"
 msgstr ""
 
-#: ui/markresolved.py:106
-msgid "Completed Mark as Resolved"
+#: ui/xml/dialogs/delete_confirmation.xml.h:1
+msgid "Delete Confirmation"
+msgstr ""
+
+#: ui/xml/dialogs/delete_confirmation.xml.h:3 ui/xml/properties.xml.h:6
+msgid "_Delete"
+msgstr ""
+
+#: ui/xml/dialogs/delete_confirmation.xml.h:4
+msgid "The item(s) will be sent to the trash can."
 msgstr ""
 
-#: ui/__init__.py:55
+#: ui/xml/dialogs/delete_confirmation.xml.h:6
 msgid ""
-"You must specify a version control system using the --vcs [svn|git] option"
+"<span size=\"large\"><b>Are you sure you want to delete %item%?</b></span>"
 msgstr ""
 
-#: ui/add.py:179 ui/add.py:204
-msgid "Running Add Command..."
+#: ui/xml/dialogs/certificate.xml.h:1
+msgid "Check Certificate"
 msgstr ""
 
-#: ui/add.py:181 ui/add.py:206
-msgid "Completed Add"
+#: ui/xml/dialogs/certificate.xml.h:2
+msgid "Accept Once"
 msgstr ""
 
-#: ui/relocate.py:77
-msgid "The from and to url fields are both required."
+#: ui/xml/dialogs/certificate.xml.h:3
+msgid "Accept Forever"
 msgstr ""
 
-#: ui/relocate.py:88
-msgid "Running Relocate Command..."
+#: ui/xml/dialogs/certificate.xml.h:4
+msgid "Deny"
 msgstr ""
 
-#: ui/relocate.py:95
-msgid "Completed Relocate"
+#: ui/xml/dialogs/certificate.xml.h:5
+msgid "Fingerprint:"
 msgstr ""
 
-#: ui/property_page.py:146
-msgid "Repository URL"
+#: ui/xml/dialogs/certificate.xml.h:6
+msgid "Valid:"
 msgstr ""
 
-#: ui/tags.py:62
-msgid "Tag Manager"
+#: ui/xml/dialogs/certificate.xml.h:7
+msgid "Issuer:"
 msgstr ""
 
-#: ui/tags.py:63
-msgid "<b>Tags</b>"
+#: ui/xml/dialogs/certificate.xml.h:8 ui/widget.py:1310
+msgid "Host:"
 msgstr ""
 
-#: ui/tags.py:74
-msgid "Tag"
+#: ui/xml/dialogs/certificate.xml.h:9
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:6
+msgid "Realm:"
 msgstr ""
 
-#: ui/tags.py:145 ui/tags.py:284
-msgid "Save"
+#: ui/xml/dialogs/certificate.xml.h:10
+msgid "<b>Certificate Details</b>"
 msgstr ""
 
-#: ui/tags.py:153
-msgid "Tagger:"
+#: ui/xml/dialogs/name_email_prompt.xml.h:1
+msgid "Name and Email"
 msgstr ""
 
-#: ui/tags.py:230 ui/remotes.py:128
-#, python-format
-msgid "Are you sure you want to delete %s?"
+#: ui/xml/dialogs/name_email_prompt.xml.h:4
+msgid "<b>Enter Name and Email Details</b>"
 msgstr ""
 
-#: ui/tags.py:275
-msgid "<b>Add Tag</b>"
+#: ui/xml/dialogs/name_email_prompt.xml.h:5
+msgid "Email:"
 msgstr ""
 
-#: ui/tags.py:293
-msgid "<b>Tag Detail</b>"
+#: ui/xml/dialogs/name_email_prompt.xml.h:6 ui/xml/property_page.xml.h:4
+#: ui/tags.py:98
+msgid "Name:"
 msgstr ""
 
-#: ui/ignore.py:100
-msgid "Ignore file:"
+#: ui/xml/dialogs/confirmation.xml.h:1
+msgid "Confirmation"
 msgstr ""
 
-#: ui/import.py:40
-#, python-format
-msgid "Import - %s"
+#: ui/xml/dialogs/confirmation.xml.h:2
+msgid "_No"
 msgstr ""
 
-#: ui/import.py:68
-msgid "The repository URL field is required."
+#: ui/xml/dialogs/confirmation.xml.h:3
+msgid "_Yes"
 msgstr ""
 
-#: ui/import.py:81
-msgid "Running Import Command..."
+#: ui/xml/dialogs/confirmation.xml.h:4 ui/dialog.py:316
+msgid "Are you sure you want to continue?"
 msgstr ""
 
-#: ui/import.py:89
-msgid "Completed Import"
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:1
+msgid "SSL Client Certification"
 msgstr ""
 
-#: ui/unlock.py:48 ui/unlock.py:127
-msgid "Unlock"
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:4
+msgid "Save Authentication"
 msgstr ""
 
-#: ui/unlock.py:128
-msgid "Running Unlock Command..."
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:5
+msgid "Path:"
 msgstr ""
 
-#: ui/unlock.py:131
-msgid "Completed Unlock"
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:7
+msgid "<b>Please provide your ssl certification file</b>"
 msgstr ""
 
-#: ui/properties.py:55
-#, python-format
-msgid "Properties - %s"
+#: ui/xml/dialogs/previous_messages.xml.h:4
+msgid "<b>Previous Messages</b>"
 msgstr ""
 
-#: ui/properties.py:179
-msgid "There was a problem saving your properties."
+#: ui/xml/dialogs/previous_messages.xml.h:5 ui/xml/log.xml.h:13
+msgid "<b>Message</b>"
 msgstr ""
 
-#: ui/action.py:122 ui/log.py:348 ui/log.py:586
-msgid "Action"
+#: ui/xml/dialogs/mark_resolved_prompt.xml.h:1
+msgid "Mark Resolved"
 msgstr ""
 
-#: ui/action.py:122
-msgid "Mime Type"
+#: ui/xml/dialogs/mark_resolved_prompt.xml.h:2
+msgid "Unresolved"
 msgstr ""
 
-#: ui/action.py:378
-msgid "Finished"
+#: ui/xml/dialogs/mark_resolved_prompt.xml.h:3
+msgid "Resolved"
 msgstr ""
 
-#: ui/action.py:382
-#, python-format
-msgid "%s - Finished"
+#: ui/xml/dialogs/mark_resolved_prompt.xml.h:4
+msgid "<b>Mark Conflict As</b>"
 msgstr ""
 
-#: ui/action.py:405
-msgid "Log Message"
+#: ui/xml/dialogs/property.xml.h:1
+msgid "Property"
 msgstr ""
 
-#: ui/rename.py:49
-msgid "The requested file or folder does not exist."
+#: ui/xml/dialogs/property.xml.h:4
+msgid "Apply property recursively"
 msgstr ""
 
-#: ui/rename.py:53 ui/rename.py:85 ui/rename.py:114 ui/browser.py:476
-msgid "Rename"
+#: ui/xml/dialogs/property.xml.h:5
+msgid "Value:"
 msgstr ""
 
-#: ui/rename.py:53 ui/browser.py:476
-msgid "New Name:"
+#: ui/xml/dialogs/property.xml.h:6
+msgid "Property:"
 msgstr ""
 
-#: ui/rename.py:61
-msgid "The new name field is required"
+#: ui/xml/dialogs/property.xml.h:7
+msgid "<b>Edit Property Details</b>"
 msgstr ""
 
-#: ui/rename.py:86 ui/rename.py:115
-msgid "Running Rename Command..."
+#: ui/xml/dialogs/error_notification.xml.h:1
+msgid "RabbitVCS Error"
 msgstr ""
 
-#: ui/rename.py:92 ui/rename.py:121
-msgid "Completed Rename"
+#: ui/xml/dialogs/error_notification.xml.h:3
+msgid "<span weight=\"bold\" size=\"xx-large\">RabbitVCS Error</span>"
 msgstr ""
 
-#: ui/clone.py:47 ui/clone.py:65 util/contextmenuitems.py:661
-msgid "Clone"
+#: ui/xml/dialogs/conflict_decision.xml.h:1
+msgid "Edit Conflicts"
 msgstr ""
 
-#: ui/clone.py:66
-msgid "Running Clone Command..."
+#: ui/xml/dialogs/conflict_decision.xml.h:2
+msgid "Cancel"
 msgstr ""
 
-#: ui/clone.py:73
-msgid "Completed Clone"
+#: ui/xml/dialogs/conflict_decision.xml.h:3
+msgid "Accept Mine"
 msgstr ""
 
-#: ui/browser.py:89
-msgid "Size"
+#: ui/xml/dialogs/conflict_decision.xml.h:4
+msgid "Accept Theirs"
 msgstr ""
 
-#: ui/browser.py:331
-msgid "Select"
+#: ui/xml/dialogs/conflict_decision.xml.h:5
+msgid "<b>A conflict was found in the following file:</b>"
 msgstr ""
 
-#: ui/browser.py:352
-msgid "Create folder..."
+#: ui/xml/dialogs/create_folder.xml.h:1
+msgid "Create Folder..."
 msgstr ""
 
-#: ui/browser.py:357
-msgid "Copy to..."
+#: ui/xml/dialogs/create_folder.xml.h:4
+msgid "<b>Folder Name</b>"
 msgstr ""
 
-#: ui/browser.py:362
-msgid "Copy URL to clipboard"
+#: ui/xml/dialogs/loading.xml.h:1
+msgid "Loading"
 msgstr ""
 
-#: ui/browser.py:367
-msgid "Move to..."
+#: ui/xml/ignore.xml.h:1
+msgid "Ignore"
 msgstr ""
 
-#: ui/browser.py:537
-msgid "Where do you want to copy the selection?"
+#: ui/xml/ignore.xml.h:4
+msgid "<b>Ignore and exclude files from being tracked</b>"
 msgstr ""
 
-#: ui/browser.py:538 ui/browser.py:567
-msgid "New Location:"
+#: ui/xml/clean.xml.h:4
+msgid "Force"
 msgstr ""
 
-#: ui/browser.py:566
-msgid "Where do you want to move the selection?"
+#: ui/xml/clean.xml.h:5
+msgid "Dry run"
 msgstr ""
 
-#: ui/dialog.py:36
-#, python-format
-msgid ""
-"An error has occurred in the RabbitVCS Nautilus extension. Please contact "
-"the <a href=\"%s\">RabbitVCS team</a> with the error details listed below:"
+#: ui/xml/clean.xml.h:6
+msgid "Remove only ignored files"
 msgstr ""
 
-#: ui/dialog.py:106
-msgid "Select a Folder"
+#: ui/xml/clean.xml.h:7
+msgid "Remove ignored files, too"
 msgstr ""
 
-#: ui/dialog.py:259
-msgid "Select a File"
+#: ui/xml/clean.xml.h:8
+msgid "Remove directories"
 msgstr ""
 
-#: ui/dialog.py:278
-msgid "Save As..."
+#: ui/xml/clean.xml.h:9
+msgid "Remove untracked files from the working tree"
 msgstr ""
 
-#: ui/dialog.py:325
-msgid "the selected item(s)"
+#: ui/xml/clean.xml.h:10
+msgid "<b>Clean your Repository</b>"
 msgstr ""
 
-#: ui/dialog.py:396
-msgid "Added a folder to the repository"
+#: ui/xml/properties.xml.h:3 ui/dialog.py:302
+msgid "_Save"
 msgstr ""
 
-#: ui/lock.py:71
-msgid "Locked"
+#: ui/xml/properties.xml.h:4
+msgid "_New..."
 msgstr ""
 
-#: ui/lock.py:122
-msgid "Yes"
+#: ui/xml/properties.xml.h:5
+msgid "_Edit..."
 msgstr ""
 
-#: ui/lock.py:163
-msgid "Get Lock"
+#: ui/xml/properties.xml.h:7
+msgid "Delete properties recursively"
 msgstr ""
 
-#: ui/lock.py:164
-msgid "Running Lock Command..."
+#: ui/xml/properties.xml.h:8
+msgid "<i>Selected properties will be applied recursively.</i>"
 msgstr ""
 
-#: ui/lock.py:173
-msgid "Completed Lock"
+#: ui/xml/properties.xml.h:9
+msgid "<b>Properties for:</b>"
 msgstr ""
 
-#: ui/stage.py:50 ui/stage.py:101 util/contextmenuitems.py:700
-msgid "Stage"
+#: ui/xml/notification.xml.h:1
+msgid "Notification Messages"
 msgstr ""
 
-#: ui/stage.py:102
-msgid "Running Stage Command..."
+#: ui/xml/notification.xml.h:4 ui/xml/annotate.xml.h:2
+msgid "Save _As"
 msgstr ""
 
-#: ui/stage.py:105
-msgid "Completed Stage"
+#: ui/xml/git-update.xml.h:3
+msgid "Fetch from all remotes"
 msgstr ""
 
-#: ui/log.py:120
-#, python-format
-msgid "Log - %s"
+#: ui/xml/git-update.xml.h:4
+msgid "Apply remote changes prior to local changes (rebase)"
 msgstr ""
 
-#: ui/log.py:349
-msgid "Copy From Path"
+#: ui/xml/git-update.xml.h:5
+msgid "Merge into local branch"
 msgstr ""
 
-#: ui/log.py:349
-msgid "Copy From Revision"
+#: ui/xml/git-update.xml.h:6
+msgid "Apply remote changes"
 msgstr ""
 
-#: ui/log.py:570
-msgid "Graph"
+#: ui/xml/log.xml.h:3
+msgid "100"
 msgstr ""
 
-#: ui/log.py:798
-msgid "View diff against working copy"
+#: ui/xml/log.xml.h:4
+msgid "Limit:"
 msgstr ""
 
-#: ui/log.py:803 util/contextmenuitems.py:413
-msgid "View diff against previous revision"
+#: ui/xml/log.xml.h:5
+msgid "_Back"
 msgstr ""
 
-#: ui/log.py:808
-msgid "View diff between revisions"
+#: ui/xml/log.xml.h:6
+msgid "_Forward"
 msgstr ""
 
-#: ui/log.py:813
-msgid "Compare with working copy"
+#: ui/xml/log.xml.h:8 ui/dialog.py:136
+msgid "to"
 msgstr ""
 
-#: ui/log.py:818 util/contextmenuitems.py:431
-msgid "Compare with previous revision"
+#: ui/xml/log.xml.h:9
+msgid "Showing Revisions:"
 msgstr ""
 
-#: ui/log.py:823
-msgid "Compare revisions"
+#: ui/xml/log.xml.h:10
+msgid "Stop on copy"
 msgstr ""
 
-#: ui/log.py:829
-msgid "Show changes against previous revision"
+#: ui/xml/log.xml.h:11
+msgid "<b>Revisions Table</b>"
 msgstr ""
 
-#: ui/log.py:835
-msgid "Show changes between revisions"
+#: ui/xml/log.xml.h:12
+msgid "<b>Affected File(s)</b> (double-click to compare with base)"
 msgstr ""
 
-#: ui/log.py:840
-msgid "Update to this revision"
+#: ui/xml/lock.xml.h:1
+msgid "Lock Files"
 msgstr ""
 
-#: ui/log.py:841
-msgid "Update the selected path to this revision"
+#: ui/xml/lock.xml.h:4
+msgid "Steal the locks"
 msgstr ""
 
-#: ui/log.py:846 ui/log.py:850
-msgid "Edit author..."
+#: ui/xml/lock.xml.h:6
+msgid "<b>Files to lock</b>"
 msgstr ""
 
-#: ui/log.py:854
-msgid "Edit log message..."
+#: ui/xml/lock.xml.h:8
+msgid "<b>Please describe why you are locking these files</b>"
 msgstr ""
 
-#: ui/log.py:858
-msgid "Edit revision properties..."
+#: ui/xml/annotate.xml.h:1
+msgid "Annotate"
 msgstr ""
 
-#: ui/log.py:1119
-msgid "Edit author"
+#: ui/xml/annotate.xml.h:4
+msgid "<b>To Revision</b>"
 msgstr ""
 
-#: ui/log.py:1131
-msgid "Edit log message"
+#: ui/xml/annotate.xml.h:5
+msgid "<b>From Revision</b>"
 msgstr ""
 
-#: ui/clean.py:76
-msgid "Running Clean Command..."
+#: ui/xml/import.xml.h:4
+msgid "Include ignored files"
 msgstr ""
 
-#: ui/clean.py:86
-msgid "Completed Clean"
+#: ui/xml/import.xml.h:6
+msgid "<b>Import Message</b>"
 msgstr ""
 
-#: ui/updateto.py:83
-msgid "Rollback To Revision"
+#: ui/xml/import.xml.h:7
+msgid "<b>Repository</b>"
 msgstr ""
 
-#: ui/updateto.py:84
-msgid "Rolling Back..."
+#: ui/xml/reset.xml.h:4
+msgid "None"
 msgstr ""
 
-#: ui/updateto.py:92
-msgid "Completed Rollback"
+#: ui/xml/reset.xml.h:5
+msgid ""
+"<i>Merge</i> - Resets the index to match the tree recorded by the named "
+"commit,\n"
+"and updates the files that are different between the named commit\n"
+"and the current commit in the working tree"
 msgstr ""
 
-#: ui/updateto.py:94
-msgid "Update To Revision"
+#: ui/xml/reset.xml.h:8
+msgid ""
+"<i>Hard</i> - Matches the working tree and index to that of the \n"
+"tree being switched to"
 msgstr ""
 
-#: ui/updateto.py:120
-msgid "What revision/branch do you want to checkout?"
+#: ui/xml/reset.xml.h:10
+msgid ""
+"<i>Soft</i> - Does not touch the index file or working tree at all, \n"
+"but requires them to be in good working order"
 msgstr ""
 
-#: ui/updateto.py:141
-msgid "Checkout"
+#: ui/xml/reset.xml.h:12
+msgid "<i>Mixed</i> - Reset the index but not the working tree"
 msgstr ""
 
-#: ui/updateto.py:142
-#, python-format
-msgid "Checking out %s..."
+#: ui/xml/reset.xml.h:15
+msgid "<b>Path</b>"
 msgstr ""
 
-#: ui/updateto.py:148
-msgid "Completed Checkout"
+#: ui/xml/reset.xml.h:16
+msgid "Reset current HEAD to specified state."
 msgstr ""
 
-#: ui/cleanup.py:55 util/contextmenuitems.py:513
-msgid "Cleanup"
+#: ui/xml/reset.xml.h:17
+msgid "<b>Reset your Repository</b>"
 msgstr ""
 
-#: ui/cleanup.py:58
-msgid "Completed Cleanup"
+#: ui/xml/property_page.xml.h:1
+msgid "Property status:"
 msgstr ""
 
-#: ui/unstage.py:50 ui/unstage.py:101 util/contextmenuitems.py:705
-msgid "Unstage"
+#: ui/xml/property_page.xml.h:2
+msgid "Content status:"
 msgstr ""
 
-#: ui/unstage.py:102
-msgid "Running Unstage Command..."
+#: ui/xml/property_page.xml.h:3
+msgid "VCS:"
 msgstr ""
 
-#: ui/unstage.py:105
-msgid "Completed Unstage"
+#: ui/rename.py:50
+msgid "The requested file or folder does not exist."
 msgstr ""
 
-#: ui/remotes.py:59
-msgid "Remote Repository Manager"
+#: ui/rename.py:54 ui/rename.py:86 ui/rename.py:115 ui/browser.py:465
+msgid "Rename"
 msgstr ""
 
-#: ui/remotes.py:60
-msgid "<b>Remote Repositories</b>"
+#: ui/rename.py:54 ui/browser.py:465
+msgid "New Name:"
 msgstr ""
 
-#: ui/remotes.py:66
-msgid "Host"
+#: ui/rename.py:62
+msgid "The new name field is required"
 msgstr ""
 
-#: ui/diff.py:321
-msgid "View diff as side-by-side comparison"
+#: ui/rename.py:87 ui/rename.py:116
+msgid "Running Rename Command..."
 msgstr ""
 
-#: util/contextmenuitems.py:303
-msgid "Debug"
+#: ui/rename.py:93 ui/rename.py:122
+msgid "Completed Rename"
 msgstr ""
 
-#: util/contextmenuitems.py:308
-msgid "Bugs"
+#: ui/update.py:56 ui/update.py:105 ui/updateto.py:92
+msgid "Updating..."
 msgstr ""
 
-#: util/contextmenuitems.py:313
-msgid "Open Shell"
+#: ui/update.py:58 ui/update.py:123 ui/updateto.py:100
+msgid "Completed Update"
 msgstr ""
 
-#: util/contextmenuitems.py:319
-msgid "Refresh Status"
+#: ui/revprops.py:66 ui/properties.py:153 ui/property_editor.py:158
+msgid "Unable to retrieve properties list"
 msgstr ""
 
-#: util/contextmenuitems.py:324
-msgid "Debug Revert"
+#: ui/widget.py:1039
+msgid "Branch"
 msgstr ""
 
-#: util/contextmenuitems.py:325
-msgid "Reverts everything it sees"
+#: ui/widget.py:1044
+msgid "Number"
 msgstr ""
 
-#: util/contextmenuitems.py:331
-msgid "Invalidate"
+#: ui/widget.py:1047
+msgid "Working Copy"
 msgstr ""
 
-#: util/contextmenuitems.py:332
-msgid "Force an invalidate_extension_info() call"
+#: ui/widget.py:1268
+msgid "Repository:"
 msgstr ""
 
-#: util/contextmenuitems.py:338
-msgid "Add Emblem"
+#: ui/widget.py:1285
+msgid "Branch:"
 msgstr ""
 
-#: util/contextmenuitems.py:339
-msgid "Add an emblem"
+#: ui/widget.py:1426
+msgid "Add line:"
 msgstr ""
 
-#: util/contextmenuitems.py:345
-msgid "Checkout..."
+#: ui/browser.py:91
+msgid "Size"
 msgstr ""
 
-#: util/contextmenuitems.py:346
-msgid "Check out a working copy"
+#: ui/browser.py:341
+msgid "Create folder..."
 msgstr ""
 
-#: util/contextmenuitems.py:352
-msgid "Update a working copy"
+#: ui/browser.py:346
+msgid "Copy to..."
 msgstr ""
 
-#: util/contextmenuitems.py:358
-msgid "Commit modifications to the repository"
+#: ui/browser.py:351
+msgid "Copy URL to clipboard"
 msgstr ""
 
-#: util/contextmenuitems.py:368
-msgid "RabbitVCS SVN"
+#: ui/browser.py:356
+msgid "Move to..."
 msgstr ""
 
-#: util/contextmenuitems.py:373
-msgid "RabbitVCS Git"
+#: ui/browser.py:526
+msgid "Where do you want to copy the selection?"
 msgstr ""
 
-#: util/contextmenuitems.py:378
-msgid "RabbitVCS Hg"
+#: ui/browser.py:527 ui/browser.py:556
+msgid "New Location:"
 msgstr ""
 
-#: util/contextmenuitems.py:384
-msgid "Browse a repository tree"
+#: ui/browser.py:555
+msgid "Where do you want to move the selection?"
 msgstr ""
 
-#: util/contextmenuitems.py:389
-msgid "Check for Modifications..."
+#: ui/relocate.py:72
+msgid "The from and to url fields are both required."
 msgstr ""
 
-#: util/contextmenuitems.py:390
-msgid "Check for modifications made to the repository"
+#: ui/relocate.py:83
+msgid "Running Relocate Command..."
 msgstr ""
 
-#: util/contextmenuitems.py:395
-msgid "Diff Menu..."
+#: ui/relocate.py:90
+msgid "Completed Relocate"
 msgstr ""
 
-#: util/contextmenuitems.py:396
-msgid "List of comparison options"
+#: ui/add.py:216 ui/add.py:241
+msgid "Running Add Command..."
 msgstr ""
 
-#: util/contextmenuitems.py:401
-msgid "View diff against base"
+#: ui/add.py:218 ui/add.py:243
+msgid "Completed Add"
 msgstr ""
 
-#: util/contextmenuitems.py:402
-msgid "View the modifications made to a file"
+#: ui/updateto.py:80
+msgid "Rollback To Revision"
 msgstr ""
 
-#: util/contextmenuitems.py:407
-msgid "View diff between files/folders"
+#: ui/updateto.py:81
+msgid "Rolling Back..."
 msgstr ""
 
-#: util/contextmenuitems.py:408
-msgid "View the differences between two files"
+#: ui/updateto.py:89
+msgid "Completed Rollback"
 msgstr ""
 
-#: util/contextmenuitems.py:414
-msgid "View the modifications made to a file since its last change"
+#: ui/updateto.py:91
+msgid "Update To Revision"
 msgstr ""
 
-#: util/contextmenuitems.py:419
-msgid "Compare with base"
+#: ui/updateto.py:117
+msgid "What revision/branch do you want to checkout?"
 msgstr ""
 
-#: util/contextmenuitems.py:420
-msgid "Compare with base using side-by-side comparison tool"
+#: ui/updateto.py:138
+msgid "Checkout"
 msgstr ""
 
-#: util/contextmenuitems.py:425
-msgid "Compare files/folders"
+#: ui/updateto.py:139
+#, python-format
+msgid "Checking out %s..."
 msgstr ""
 
-#: util/contextmenuitems.py:426
-msgid "Compare the differences between two items"
+#: ui/updateto.py:145
+msgid "Completed Checkout"
 msgstr ""
 
-#: util/contextmenuitems.py:432
-msgid "Compare with previous revision using side-by-side comparison tool"
+#: ui/create.py:52
+msgid "Repository successfully created"
 msgstr ""
 
-#: util/contextmenuitems.py:437
-msgid "Show Changes..."
+#: ui/create.py:54
+msgid ""
+"There was an error creating the repository.  Make sure the given folder is "
+"empty."
 msgstr ""
 
-#: util/contextmenuitems.py:438
-msgid "Show changes between paths and revisions"
+#: ui/create.py:69
+msgid "Setting up repository..."
 msgstr ""
 
-#: util/contextmenuitems.py:443
-msgid "Show Log"
+#: ui/create.py:71
+msgid "Completed repository setup"
 msgstr ""
 
-#: util/contextmenuitems.py:444
-msgid "Show a file's log information"
+#: ui/tags.py:62
+msgid "Tag Manager"
 msgstr ""
 
-#: util/contextmenuitems.py:450
-msgid "Schedule items to be added to the repository"
+#: ui/tags.py:63
+msgid "<b>Tags</b>"
 msgstr ""
 
-#: util/contextmenuitems.py:455
-msgid "Add to ignore list"
+#: ui/tags.py:74
+msgid "Tag"
 msgstr ""
 
-#: util/contextmenuitems.py:460
-msgid "Update to revision..."
+#: ui/tags.py:127 ui/tags.py:188 ui/merge.py:520
+msgid "Message:"
 msgstr ""
 
-#: util/contextmenuitems.py:461
-msgid "Update a file to a specific revision"
+#: ui/tags.py:145 ui/tags.py:295
+msgid "Save"
 msgstr ""
 
-#: util/contextmenuitems.py:466
-msgid "Rename..."
+#: ui/tags.py:153
+msgid "Tagger:"
 msgstr ""
 
-#: util/contextmenuitems.py:467
-msgid "Schedule an item to be renamed on the repository"
+#: ui/tags.py:165 ui/merge.py:497
+msgid "Date:"
 msgstr ""
 
-#: util/contextmenuitems.py:473
-msgid "Schedule an item to be deleted from the repository"
+#: ui/tags.py:286
+msgid "<b>Add Tag</b>"
 msgstr ""
 
-#: util/contextmenuitems.py:479
-msgid "Revert an item to its unmodified state"
+#: ui/tags.py:304
+msgid "<b>Tag Detail</b>"
 msgstr ""
 
-#: util/contextmenuitems.py:485
-msgid "Mark a conflicted item as resolved"
+#: ui/property_page.py:146 ui/property_page.py:152
+msgid "Repository URL"
 msgstr ""
 
-#: util/contextmenuitems.py:490
-msgid "Restore"
+#: ui/properties.py:56
+#, python-format
+msgid "Properties - %s"
 msgstr ""
 
-#: util/contextmenuitems.py:491
-msgid "Restore a missing item"
+#: ui/properties.py:64 ui/property_editor.py:114
+msgid "Value"
 msgstr ""
 
-#: util/contextmenuitems.py:495
-msgid "Relocate..."
+#: ui/properties.py:174
+msgid "There was a problem saving your properties."
 msgstr ""
 
-#: util/contextmenuitems.py:496
-msgid "Relocate your working copy"
+#: ui/merge.py:103
+msgid "Running Merge Test"
 msgstr ""
 
-#: util/contextmenuitems.py:501
-msgid "Get Lock..."
+#: ui/merge.py:104
+msgid "Completed Merge Test"
 msgstr ""
 
-#: util/contextmenuitems.py:502
-msgid "Locally lock items"
+#: ui/merge.py:106
+msgid "Running Merge Command"
 msgstr ""
 
-#: util/contextmenuitems.py:507
-msgid "Release Lock..."
+#: ui/merge.py:107 ui/merge.py:566
+msgid "Completed Merge"
 msgstr ""
 
-#: util/contextmenuitems.py:508
-msgid "Release lock on an item"
+#: ui/merge.py:118 ui/merge.py:559
+msgid "Merge"
 msgstr ""
 
-#: util/contextmenuitems.py:514
-msgid "Clean up working copy"
+#: ui/merge.py:474
+msgid "No active branch"
 msgstr ""
 
-#: util/contextmenuitems.py:519
-msgid "Export..."
+#: ui/merge.py:485
+msgid "Author:"
 msgstr ""
 
-#: util/contextmenuitems.py:520
-msgid "Export a working copy or repository with no versioning information"
+#: ui/merge.py:560
+msgid "Running Merge Command..."
 msgstr ""
 
-#: util/contextmenuitems.py:533
-msgid "Create Repository here"
+#: ui/dialog.py:35
+#, python-format
+msgid ""
+"An error has occurred in the RabbitVCS Nautilus extension. Please contact "
+"the <a href=\"%s\">RabbitVCS team</a> with the error details listed below:"
 msgstr ""
 
-#: util/contextmenuitems.py:534
-msgid "Create a repository in a folder"
+#: ui/dialog.py:106
+msgid "Select a Folder"
 msgstr ""
 
-#: util/contextmenuitems.py:540
-msgid "Import an item into a repository"
+#: ui/dialog.py:276
+msgid "Select a File"
 msgstr ""
 
-#: util/contextmenuitems.py:549
-msgid "Branch/tag..."
+#: ui/dialog.py:282
+msgid "_Open"
 msgstr ""
 
-#: util/contextmenuitems.py:550
-msgid "Copy an item to another location in the repository"
+#: ui/dialog.py:296
+msgid "Save As..."
 msgstr ""
 
-#: util/contextmenuitems.py:555
-msgid "Switch..."
+#: ui/dialog.py:344
+msgid "the selected item(s)"
 msgstr ""
 
-#: util/contextmenuitems.py:556
-msgid "Change the repository location of a working copy"
+#: ui/dialog.py:415
+msgid "Added a folder to the repository"
 msgstr ""
 
-#: util/contextmenuitems.py:561
-msgid "Merge..."
+#: ui/annotate.py:58
+msgid "Cannot annotate a directory"
 msgstr ""
 
-#: util/contextmenuitems.py:562
-msgid "A wizard with steps for merging"
+#: ui/annotate.py:64
+#, python-format
+msgid "Annotate - %s"
 msgstr ""
 
-#: util/contextmenuitems.py:567
-msgid "Annotate..."
+#: ui/annotate.py:131 ui/annotate.py:235
+msgid "Line"
 msgstr ""
 
-#: util/contextmenuitems.py:568
-msgid "Annotate a file"
+#: ui/annotate.py:132 ui/annotate.py:236
+msgid "Text"
 msgstr ""
 
-#: util/contextmenuitems.py:573
-msgid "Create Patch..."
+#: ui/annotate.py:149
+msgid "The from revision field must be an integer"
 msgstr ""
 
-#: util/contextmenuitems.py:574
-msgid "Creates a unified diff file with all changes you made"
+#: ui/property_editor.py:57
+msgid ""
+"<b>Note:</b> changes to properties are applied instantly. You may review and "
+"undo changes using the context menu for each item.\n"
 msgstr ""
 
-#: util/contextmenuitems.py:579
-msgid "Apply Patch..."
+#: ui/property_editor.py:62
+msgid ""
+"Do you want to delete the selected properties from all files and "
+"subdirectories\n"
+"beneath this directory?"
 msgstr ""
 
-#: util/contextmenuitems.py:580
-msgid "Applies a unified diff file to the working copy"
+#: ui/property_editor.py:104
+msgid "File is not under version control."
 msgstr ""
 
-#: util/contextmenuitems.py:586
-msgid "View the properties of an item"
+#: ui/property_editor.py:114
+msgid "Reserved"
 msgstr ""
 
-#: util/contextmenuitems.py:591
-msgid "Help"
+#: ui/property_editor.py:114
+msgid "Status"
 msgstr ""
 
-#: util/contextmenuitems.py:592
-msgid "View help"
+#: ui/property_editor.py:182
+msgid "Unable to set new value for property."
 msgstr ""
 
-#: util/contextmenuitems.py:598
-msgid "View or change RabbitVCS settings"
+#: ui/cleanup.py:57
+msgid "Cleaning Up..."
 msgstr ""
 
-#: util/contextmenuitems.py:604
-msgid "About RabbitVCS"
+#: ui/cleanup.py:59
+msgid "Completed Cleanup"
 msgstr ""
 
-#: util/contextmenuitems.py:609
-msgid "Open"
+#: ui/import.py:41
+#, python-format
+msgid "Import - %s"
 msgstr ""
 
-#: util/contextmenuitems.py:610
-msgid "Open a file"
+#: ui/import.py:63
+msgid "The repository URL field is required."
 msgstr ""
 
-#: util/contextmenuitems.py:618
-msgid "Browse to"
+#: ui/import.py:76
+msgid "Running Import Command..."
 msgstr ""
 
-#: util/contextmenuitems.py:619
-msgid "Browse to a file or folder"
+#: ui/import.py:84
+msgid "Completed Import"
 msgstr ""
 
-#: util/contextmenuitems.py:624
-msgid "Revert property"
+#: ui/clone.py:60 ui/export.py:73 ui/export.py:142
+msgid "The repository URL and destination path are both required fields."
 msgstr ""
 
-#: util/contextmenuitems.py:626
-msgid "Revert this property to its original state"
+#: ui/clone.py:69
+msgid "Running Clone Command..."
 msgstr ""
 
-#: util/contextmenuitems.py:630
-msgid "Revert property (recursive)"
+#: ui/clone.py:76
+msgid "Completed Clone"
 msgstr ""
 
-#: util/contextmenuitems.py:632
-msgid "Revert this property to its original state (recursive)"
+#: ui/settings.py:45
+msgid "There was an error communicating with the status checker service."
 msgstr ""
 
-#: util/contextmenuitems.py:637
-msgid "Delete property"
+#: ui/settings.py:124
+msgid "Config file:"
 msgstr ""
 
-#: util/contextmenuitems.py:639
-msgid "Delete this property"
+#: ui/settings.py:300
+msgid "Select a program"
 msgstr ""
 
-#: util/contextmenuitems.py:643
-msgid "Delete property (recursive)"
+#: ui/settings.py:309
+msgid "Are you sure you want to clear your repository paths?"
 msgstr ""
 
-#: util/contextmenuitems.py:645
-msgid "Delete this property (recursive)"
+#: ui/settings.py:316
+msgid "Repository paths cleared"
 msgstr ""
 
-#: util/contextmenuitems.py:650
-msgid "Edit details"
+#: ui/settings.py:320
+msgid "Are you sure you want to clear your previous messages?"
 msgstr ""
 
-#: util/contextmenuitems.py:652
-msgid "Show and edit property details"
+#: ui/settings.py:327
+msgid "Previous messages cleared"
 msgstr ""
 
-#: util/contextmenuitems.py:666
-msgid "Fetch/Pull"
+#: ui/settings.py:331
+msgid "Are you sure you want to clear your authentication information?"
 msgstr ""
 
-#: util/contextmenuitems.py:671
-msgid "Push"
+#: ui/settings.py:348
+msgid "Authentication information cleared"
 msgstr ""
 
-#: util/contextmenuitems.py:676
-msgid "Branches"
+#: ui/commit.py:267
+#, python-format
+msgid "Found %(changed)d changed and %(unversioned)d unversioned item(s)"
 msgstr ""
 
-#: util/contextmenuitems.py:681
-msgid "Tags"
+#: ui/commit.py:319 ui/commit.py:387
+msgid "Running Commit Command..."
 msgstr ""
 
-#: util/contextmenuitems.py:686
-msgid "Remotes"
+#: ui/commit.py:332 ui/commit.py:396
+msgid "Completed Commit"
 msgstr ""
 
-#: util/contextmenuitems.py:710
-msgid "Edit conflicts"
+#: ui/diff.py:311
+msgid "View diff as side-by-side comparison"
 msgstr ""
 
-#: util/contextmenuitems.py:736
-msgid "Ignore item by filename"
+#: ui/export.py:46 ui/export.py:125
+#, python-format
+msgid "Export - %s"
 msgstr ""
 
-#: util/contextmenuitems.py:755
-msgid "Ignore item by file extension"
+#: ui/export.py:93 ui/export.py:162
+msgid "Export"
+msgstr ""
+
+#: ui/export.py:94 ui/export.py:163
+msgid "Running Export Command..."
+msgstr ""
+
+#: ui/export.py:105 ui/export.py:171
+msgid "Completed Export"
 msgstr ""
diff -uNr rabbitvcs-0.17.1/po/fr.po rabbitvcs/po/fr.po
--- rabbitvcs-0.17.1/po/fr.po	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/po/fr.po	2019-09-13 08:36:17.253343091 +0800
@@ -2,2039 +2,2386 @@
 # Copyright (c) 2010 Rosetta Contributors and Canonical Ltd 2010
 # This file is distributed under the same license as the rabbitvcs package.
 # FIRST AUTHOR <EMAIL@ADDRESS>, 2010.
+# Patrick Monnerat <.>, 2019.
 #
 msgid ""
 msgstr ""
 "Project-Id-Version: rabbitvcs\n"
-"Report-Msgid-Bugs-To: FULL NAME <EMAIL@ADDRESS>\n"
-"POT-Creation-Date: 2010-11-26 09:51-0500\n"
-"PO-Revision-Date: 2010-12-01 23:05+0000\n"
-"Last-Translator: Clyssandre <angelique.ville@free.fr>\n"
-"Language-Team: French <fr@li.org>\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2019-06-14 01:58+0200\n"
+"PO-Revision-Date: 2019-06-14 13:08+0200\n"
+"Last-Translator: Patrick Monnerat <.>\n"
+"Language-Team: French <.>\n"
+"Language: fr\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=2; plural=n > 1;\n"
+"Plural-Forms: nplurals=2; plural=(n > 1)\n"
 "X-Launchpad-Export-Date: 2010-12-09 23:36+0000\n"
-"X-Generator: Launchpad (build Unknown)\n"
+"X-Generator: Gtranslator 3.30.1\n"
 
-#: util/helper.py:109
+#: util/helper.py:73
+msgid "%I:%M%P"
+msgstr "%H:%M"
+
+#: util/helper.py:74
+msgid "%a %I:%M%p"
+msgstr "%a %H:%M"
+
+#: util/helper.py:75
+msgid "%b %d"
+msgstr "%d %b"
+
+#: util/helper.py:76
+msgid "%b %d %Y"
+msgstr "%d %b %Y"
+
+#: util/helper.py:215
+#| msgid "(no author)"
+msgid "(no date)"
+msgstr "(pas de date)"
+
+#: util/helper.py:219
 msgid "just now"
 msgstr "À l'instant"
 
-#: util/helper.py:111
+#: util/helper.py:221
 #, python-format
 msgid "%d minute(s) ago"
 msgstr "Il y a %d minute(s)"
 
-#: util/helper.py:631
+#: util/helper.py:833
 #, python-format
 msgid "%i second"
 msgid_plural "%i seconds"
 msgstr[0] "%i seconde"
 msgstr[1] "%i secondes"
 
-#: util/helper.py:634
+#: util/helper.py:836
 #, python-format
 msgid "%i minute"
 msgid_plural "%i minutes"
 msgstr[0] "%i minute"
 msgstr[1] "%i minutes"
 
-#: util/helper.py:637
+#: util/helper.py:839
 #, python-format
 msgid "%i hour"
 msgid_plural "%i hours"
 msgstr[0] "%i heure"
 msgstr[1] "%i heures"
 
-#: util/helper.py:640
+#: util/helper.py:842
 #, python-format
 msgid "%i day"
 msgid_plural "%i days"
 msgstr[0] "%i jour"
 msgstr[1] "%i jours"
 
-#: util/helper.py:643
+#: util/helper.py:845
 #, python-format
 msgid "%i week"
 msgid_plural "%i weeks"
 msgstr[0] "%i semaine"
 msgstr[1] "%i semaines"
 
-#: util/helper.py:646
+#: util/helper.py:848
 #, python-format
 msgid "%i month"
 msgid_plural "%i months"
 msgstr[0] "%i mois"
 msgstr[1] "%i mois"
 
-#: util/helper.py:649
+#: util/helper.py:851
 #, python-format
 msgid "%i year"
 msgid_plural "%i years"
 msgstr[0] "%i année"
 msgstr[1] "%i années"
 
-#: util/contextmenuitems.py:270
+#: util/contextmenuitems.py:321
 msgid "Debug"
 msgstr "Debug"
 
-#: util/contextmenuitems.py:275
+#: util/contextmenuitems.py:326
 msgid "Bugs"
 msgstr "Bugs"
 
-#: util/contextmenuitems.py:280
+#: util/contextmenuitems.py:331
 msgid "Open Shell"
 msgstr "Ouvrir un terminal"
 
-#: util/contextmenuitems.py:286
+#: util/contextmenuitems.py:337
 msgid "Refresh Status"
 msgstr "Rafraîchir le statut"
 
-#: util/contextmenuitems.py:291
+#: util/contextmenuitems.py:342
 msgid "Debug Revert"
 msgstr "Debug inversé"
 
-#: util/contextmenuitems.py:292
+#: util/contextmenuitems.py:343
 msgid "Reverts everything it sees"
 msgstr "Rétablir tout ce qu'on voit"
 
-#: util/contextmenuitems.py:298
+#: util/contextmenuitems.py:349
 msgid "Invalidate"
 msgstr "Invalider"
 
-#: util/contextmenuitems.py:299
+#: util/contextmenuitems.py:350
 msgid "Force an invalidate_extension_info() call"
 msgstr "Forcer un appel à invalidate_extension_info()"
 
-#: util/contextmenuitems.py:305
+#: util/contextmenuitems.py:356
 msgid "Add Emblem"
 msgstr "Ajouter un emblème"
 
-#: util/contextmenuitems.py:306
+#: util/contextmenuitems.py:357
 msgid "Add an emblem"
 msgstr "Ajouter un emblème"
 
-#: util/contextmenuitems.py:312
+#: util/contextmenuitems.py:363
 msgid "Checkout..."
 msgstr "Mettre à jour"
 
-#: util/contextmenuitems.py:313
+#: util/contextmenuitems.py:364
 msgid "Check out a working copy"
 msgstr "Obtenir une copie de travail"
 
-#: util/contextmenuitems.py:318 ui/update.py:53 ui/update.py:97
-#: ui/glade/update.glade.h:6
+#: util/contextmenuitems.py:369 ui/xml/update.xml.h:1 ui/update.py:55
+#: ui/update.py:104
 msgid "Update"
 msgstr "Mettre à jour"
 
-#: util/contextmenuitems.py:319
+#: util/contextmenuitems.py:370
 msgid "Update a working copy"
 msgstr "Mettre à jour une copie de travail"
 
-#: util/contextmenuitems.py:324 ui/commit.py:288 ui/commit.py:384
-#: ui/glade/commit.glade.h:4
+#: util/contextmenuitems.py:375 ui/xml/commit.xml.h:1 ui/commit.py:318
+#: ui/commit.py:386
 msgid "Commit"
 msgstr "Envoyer"
 
-#: util/contextmenuitems.py:325
+#: util/contextmenuitems.py:376
 msgid "Commit modifications to the repository"
 msgstr "Envoyer les modifications au dépôt."
 
-#: util/contextmenuitems.py:330 ui/glade/property_page.glade.h:4
+#: util/contextmenuitems.py:381 ui/xml/property_page.xml.h:5
 msgid "RabbitVCS"
 msgstr "RabbitVCS"
 
-#: util/contextmenuitems.py:335
+#: util/contextmenuitems.py:386
 msgid "RabbitVCS SVN"
-msgstr ""
+msgstr "RabbitVCS SVN"
 
-#: util/contextmenuitems.py:340
+#: util/contextmenuitems.py:391
 msgid "RabbitVCS Git"
-msgstr ""
+msgstr "RabbitVCS Git"
+
+#: util/contextmenuitems.py:396
+#| msgid "RabbitVCS"
+msgid "RabbitVCS Hg"
+msgstr "RabbitVCS Hg"
 
-#: util/contextmenuitems.py:345 ui/glade/browser.glade.h:2
+#: util/contextmenuitems.py:401 ui/xml/browser.xml.h:1
 msgid "Repository Browser"
 msgstr "Navigateur de dépôt"
 
-#: util/contextmenuitems.py:346
+#: util/contextmenuitems.py:402
 msgid "Browse a repository tree"
 msgstr "Navigateur de référentiel"
 
-#: util/contextmenuitems.py:351
+#: util/contextmenuitems.py:407
 msgid "Check for Modifications..."
 msgstr "Vérifier les modifications ..."
 
-#: util/contextmenuitems.py:352
+#: util/contextmenuitems.py:408
 msgid "Check for modifications made to the repository"
 msgstr "Vérifiez les modifications apportées au référentiel"
 
-#: util/contextmenuitems.py:357
+#: util/contextmenuitems.py:413
 msgid "Diff Menu..."
 msgstr "Menu des différences..."
 
-#: util/contextmenuitems.py:358
+#: util/contextmenuitems.py:414
 msgid "List of comparison options"
 msgstr "Liste des options de comparaisons"
 
-#: util/contextmenuitems.py:363
+#: util/contextmenuitems.py:419
 msgid "View diff against base"
 msgstr "Voir les différences avec la base"
 
-#: util/contextmenuitems.py:364
+#: util/contextmenuitems.py:420
 msgid "View the modifications made to a file"
 msgstr "Voir les modifications faites sur un fichier"
 
-#: util/contextmenuitems.py:369
+#: util/contextmenuitems.py:425
 msgid "View diff between files/folders"
 msgstr "Voir les différences entre les fichiers/dossiers"
 
-#: util/contextmenuitems.py:370
+#: util/contextmenuitems.py:426
 msgid "View the differences between two files"
 msgstr "Voir les différences entre deux fichiers"
 
-#: util/contextmenuitems.py:375 ui/log.py:786
+#: util/contextmenuitems.py:431 ui/log.py:988
 msgid "View diff against previous revision"
 msgstr "Voir les différences par rapport à la révision précédente"
 
-#: util/contextmenuitems.py:376
+#: util/contextmenuitems.py:432
 msgid "View the modifications made to a file since its last change"
 msgstr ""
 "Voir les modifications apportées à un fichier depuis le dernier changement"
 
-#: util/contextmenuitems.py:381
+#: util/contextmenuitems.py:437
 msgid "Compare with base"
 msgstr "Comparer avec la base"
 
-#: util/contextmenuitems.py:382
+#: util/contextmenuitems.py:438
 msgid "Compare with base using side-by-side comparison tool"
-msgstr ""
+msgstr "Comparer côte à côte avec la base"
 
-#: util/contextmenuitems.py:387
+#: util/contextmenuitems.py:443
 msgid "Compare files/folders"
 msgstr "Comparer des fichiers ou dossiers"
 
-#: util/contextmenuitems.py:388
+#: util/contextmenuitems.py:444
 msgid "Compare the differences between two items"
 msgstr "Comparer les différences entre deux fichiers"
 
-#: util/contextmenuitems.py:393 ui/log.py:801
+#: util/contextmenuitems.py:449 ui/log.py:1003
 msgid "Compare with previous revision"
-msgstr "Comparer avec les révisions précédentes"
+msgstr "Comparer avec la révision précédente"
 
-#: util/contextmenuitems.py:394
+#: util/contextmenuitems.py:450
 msgid "Compare with previous revision using side-by-side comparison tool"
-msgstr ""
+msgstr "Comparer côte à côte avec la révision précédente"
 
-#: util/contextmenuitems.py:399
+#: util/contextmenuitems.py:455
 msgid "Show Changes..."
 msgstr "Voir le journal"
 
-#: util/contextmenuitems.py:400
+#: util/contextmenuitems.py:456
 msgid "Show changes between paths and revisions"
 msgstr "Afficher les changements entre les chemins et les révisions"
 
-#: util/contextmenuitems.py:405
+#: util/contextmenuitems.py:461
 msgid "Show Log"
 msgstr "Consulter le journal"
 
-#: util/contextmenuitems.py:406
+#: util/contextmenuitems.py:462
 msgid "Show a file's log information"
 msgstr "Montrer le journal d'information d'un fichier"
 
-#: util/contextmenuitems.py:411 ui/add.py:156 ui/tags.py:273
-#: ui/branches.py:274 ui/widget.py:1199 ui/glade/add.glade.h:1
+#: util/contextmenuitems.py:467 ui/xml/add.xml.h:1 ui/widget.py:1431
+#: ui/add.py:215 ui/add.py:240 ui/tags.py:284
 msgid "Add"
 msgstr "Ajouter"
 
-#: util/contextmenuitems.py:412
+#: util/contextmenuitems.py:468
 msgid "Schedule items to be added to the repository"
 msgstr "Ajouter au dépôt"
 
-#: util/contextmenuitems.py:417
+#: util/contextmenuitems.py:473
 msgid "Add to ignore list"
 msgstr "Ajouter à la liste de fichier ignorés"
 
-#: util/contextmenuitems.py:422
+#: util/contextmenuitems.py:478
 msgid "Update to revision..."
 msgstr "Mettre à jour à la révision..."
 
-#: util/contextmenuitems.py:423
+#: util/contextmenuitems.py:479
 msgid "Update a file to a specific revision"
 msgstr "Mettre à jour un fichier vers une version précise"
 
-#: util/contextmenuitems.py:428
+#: util/contextmenuitems.py:484
 msgid "Rename..."
 msgstr "Renommer..."
 
-#: util/contextmenuitems.py:429
+#: util/contextmenuitems.py:485
 msgid "Schedule an item to be renamed on the repository"
 msgstr "Planifier le renommage d'un objet dans le dépôt"
 
-#: util/contextmenuitems.py:434 ui/glade/properties.glade.h:3
+#: util/contextmenuitems.py:490
 msgid "Delete"
 msgstr "Supprimer"
 
-#: util/contextmenuitems.py:435
+#: util/contextmenuitems.py:491
 msgid "Schedule an item to be deleted from the repository"
 msgstr "Planifier la suppression d'un objet dans le dépôt"
 
-#: util/contextmenuitems.py:440 ui/revert.py:50 ui/revert.py:103
-#: ui/revert.py:115 ui/revert.py:168
+#: util/contextmenuitems.py:496 ui/revert.py:175 ui/revert.py:201
+#: ui/xml/revert.xml.h:1
 msgid "Revert"
 msgstr "Rétablir"
 
-#: util/contextmenuitems.py:441
+#: util/contextmenuitems.py:497
 msgid "Revert an item to its unmodified state"
 msgstr "Rétablir un objet à son état non modifié"
 
-#: util/contextmenuitems.py:446 ui/resolve.py:48 ui/resolve.py:102
-msgid "Resolve"
-msgstr "Résoudre"
+#: util/contextmenuitems.py:502 ui/markresolved.py:45 ui/markresolved.py:76
+#| msgid "Resolved"
+msgid "Mark as Resolved"
+msgstr "Marquer comme Résolu"
 
-#: util/contextmenuitems.py:447
+#: util/contextmenuitems.py:503
 msgid "Mark a conflicted item as resolved"
 msgstr "Marquer un conflit sur un objet comme résolu"
 
-#: util/contextmenuitems.py:452
+#: util/contextmenuitems.py:508
 msgid "Restore"
 msgstr "Restaurer"
 
-#: util/contextmenuitems.py:453
+#: util/contextmenuitems.py:509
 msgid "Restore a missing item"
 msgstr "Restaurer un fichier manquant"
 
-#: util/contextmenuitems.py:457
+#: util/contextmenuitems.py:513
 msgid "Relocate..."
 msgstr "Relocalisation…"
 
-#: util/contextmenuitems.py:458
+#: util/contextmenuitems.py:514
 msgid "Relocate your working copy"
 msgstr "Relocaliser votre copie de travail"
 
-#: util/contextmenuitems.py:463
+#: util/contextmenuitems.py:519
 msgid "Get Lock..."
 msgstr "Obtenir le verrou..."
 
-#: util/contextmenuitems.py:464
+#: util/contextmenuitems.py:520
 msgid "Locally lock items"
 msgstr "Verrouiller localement un objet"
 
-#: util/contextmenuitems.py:469
+#: util/contextmenuitems.py:525
 msgid "Release Lock..."
 msgstr "Relâcher le verrou..."
 
-#: util/contextmenuitems.py:470
+#: util/contextmenuitems.py:526
 msgid "Release lock on an item"
 msgstr "Relâcher le verrou d'un objet"
 
-#: util/contextmenuitems.py:475 ui/cleanup.py:55
+#: util/contextmenuitems.py:531 ui/cleanup.py:56
 msgid "Cleanup"
 msgstr "Nettoyer"
 
-#: util/contextmenuitems.py:476
+#: util/contextmenuitems.py:532
 msgid "Clean up working copy"
 msgstr "Nettoyer votre copie de travail"
 
-#: util/contextmenuitems.py:481
+#: util/contextmenuitems.py:537
 msgid "Export..."
 msgstr "Exporter"
 
-#: util/contextmenuitems.py:482
+#: util/contextmenuitems.py:538
 msgid "Export a working copy or repository with no versioning information"
 msgstr ""
 "Exporter une copie de travail ou un dépôt sans information de versionnage"
 
-#: util/contextmenuitems.py:487
+#: util/contextmenuitems.py:551
 msgid "Create Repository here"
 msgstr "Créer un dépôt ici"
 
-#: util/contextmenuitems.py:488
+#: util/contextmenuitems.py:552
 msgid "Create a repository in a folder"
 msgstr "Créer un dépôt dans un dossier"
 
-#: util/contextmenuitems.py:493 ui/import.py:80 ui/glade/import.glade.h:3
+#: util/contextmenuitems.py:557 ui/xml/import.xml.h:1 ui/import.py:75
 msgid "Import"
 msgstr "Importer"
 
-#: util/contextmenuitems.py:494
+#: util/contextmenuitems.py:558
 msgid "Import an item into a repository"
 msgstr "Importer un objet dans un dépôt"
 
-#: util/contextmenuitems.py:503
+#: util/contextmenuitems.py:567
 msgid "Branch/tag..."
 msgstr "Branch/tag..."
 
-#: util/contextmenuitems.py:504
+#: util/contextmenuitems.py:568
 msgid "Copy an item to another location in the repository"
 msgstr "Copier un objet vers un autre emplacement dans le dépôt"
 
-#: util/contextmenuitems.py:509
+#: util/contextmenuitems.py:573
 msgid "Switch..."
 msgstr "Basculement..."
 
-#: util/contextmenuitems.py:510
+#: util/contextmenuitems.py:574
 msgid "Change the repository location of a working copy"
 msgstr "Changer l'emplacement d'une copie de travail"
 
-#: util/contextmenuitems.py:515
+#: util/contextmenuitems.py:579
 msgid "Merge..."
 msgstr "Fusion..."
 
-#: util/contextmenuitems.py:516
+#: util/contextmenuitems.py:580
 msgid "A wizard with steps for merging"
 msgstr "Un assistant de fusion en étapes"
 
-#: util/contextmenuitems.py:521
+#: util/contextmenuitems.py:585
 msgid "Annotate..."
 msgstr "Annoter..."
 
-#: util/contextmenuitems.py:522
+#: util/contextmenuitems.py:586
 msgid "Annotate a file"
 msgstr "Annoter un fichier"
 
-#: util/contextmenuitems.py:527
+#: util/contextmenuitems.py:591
 msgid "Create Patch..."
 msgstr "Créer un correctif..."
 
-#: util/contextmenuitems.py:528
+#: util/contextmenuitems.py:592
 msgid "Creates a unified diff file with all changes you made"
 msgstr ""
 "Crée un fichier diff unifié avec tous les changements que vous avez fait"
 
-#: util/contextmenuitems.py:533
+#: util/contextmenuitems.py:597
 msgid "Apply Patch..."
 msgstr "Appliquer le correctif..."
 
-#: util/contextmenuitems.py:534
+#: util/contextmenuitems.py:598
 msgid "Applies a unified diff file to the working copy"
 msgstr "Applique un fichier diff unifié de la copie de travail"
 
-#: util/contextmenuitems.py:539 ui/glade/properties.glade.h:7
+#: util/contextmenuitems.py:603 ui/xml/properties.xml.h:1
 msgid "Properties"
 msgstr "Propriétés"
 
-#: util/contextmenuitems.py:540
+#: util/contextmenuitems.py:604
 msgid "View the properties of an item"
 msgstr "Consulter les propriétés d'un objet"
 
-#: util/contextmenuitems.py:545
+#: util/contextmenuitems.py:609
 msgid "Help"
 msgstr "Aide"
 
-#: util/contextmenuitems.py:546
+#: util/contextmenuitems.py:610
 msgid "View help"
 msgstr "Consulter l'aide"
 
-#: util/contextmenuitems.py:551 ui/glade/settings.glade.h:28
+#: util/contextmenuitems.py:615 ui/xml/settings.xml.h:1
 msgid "Settings"
 msgstr "Paramètres"
 
-#: util/contextmenuitems.py:552
+#: util/contextmenuitems.py:616
 msgid "View or change RabbitVCS settings"
 msgstr "Consulter ou modifier les paramètres de RabbitVCS"
 
-#: util/contextmenuitems.py:557 ui/glade/about.glade.h:4
+#: util/contextmenuitems.py:621
 msgid "About"
 msgstr "À propos"
 
-#: util/contextmenuitems.py:558
+#: util/contextmenuitems.py:622
 msgid "About RabbitVCS"
 msgstr "À propos de RabbitVCS"
 
-#: util/contextmenuitems.py:563
+#: util/contextmenuitems.py:627
 msgid "Open"
 msgstr "Ouvrir"
 
-#: util/contextmenuitems.py:564
+#: util/contextmenuitems.py:628
 msgid "Open a file"
 msgstr "Ouvrir un fichier"
 
-#: util/contextmenuitems.py:572
+#: util/contextmenuitems.py:636
 msgid "Browse to"
 msgstr "Parcourir dans"
 
-#: util/contextmenuitems.py:573
+#: util/contextmenuitems.py:637
 msgid "Browse to a file or folder"
 msgstr "Naviguez vers un fichier ou un dossier"
 
-#: util/contextmenuitems.py:578
+#: util/contextmenuitems.py:642
 msgid "Revert property"
 msgstr "Rétablir la propriété"
 
-#: util/contextmenuitems.py:580
+#: util/contextmenuitems.py:644
 msgid "Revert this property to its original state"
 msgstr "Rétablir la propriété à son état d'origine"
 
-#: util/contextmenuitems.py:584
+#: util/contextmenuitems.py:648
 msgid "Revert property (recursive)"
 msgstr "Rétablir la propriété (récursive)"
 
-#: util/contextmenuitems.py:586
+#: util/contextmenuitems.py:650
 msgid "Revert this property to its original state (recursive)"
-msgstr "Rétablir la propriété à son état d'origine (récursive)"
+msgstr "Rétablir récursivement la propriété à son état d'origine"
 
-#: util/contextmenuitems.py:591
+#: util/contextmenuitems.py:655
 msgid "Delete property"
 msgstr "Supprimer la propriété"
 
-#: util/contextmenuitems.py:593
+#: util/contextmenuitems.py:657
 msgid "Delete this property"
 msgstr "Supprimer cette propriété"
 
-#: util/contextmenuitems.py:597
+#: util/contextmenuitems.py:661
 msgid "Delete property (recursive)"
-msgstr ""
+msgstr "Supprimer récursivement la propriété"
 
-#: util/contextmenuitems.py:599
+#: util/contextmenuitems.py:663
 msgid "Delete this property (recursive)"
-msgstr "Supprimer cette propriété (récursive)"
+msgstr "Supprimer récursivement cette propriété"
 
-#: util/contextmenuitems.py:604
+#: util/contextmenuitems.py:668
 msgid "Edit details"
 msgstr "Modifier les détails"
 
-#: util/contextmenuitems.py:606
+#: util/contextmenuitems.py:670
 msgid "Show and edit property details"
-msgstr ""
+msgstr "Afficher et modifier les détails de la propriété"
 
-#: util/contextmenuitems.py:610
+#: util/contextmenuitems.py:674 ui/create.py:68
 msgid "Initialize Repository"
-msgstr ""
+msgstr "Initialiser le dépot"
 
-#: util/contextmenuitems.py:615 ui/clone.py:47 ui/clone.py:65
+#: util/contextmenuitems.py:679 ui/clone.py:47 ui/clone.py:68
 msgid "Clone"
 msgstr "Dupliquer"
 
-#: util/contextmenuitems.py:620
+#: util/contextmenuitems.py:684
 msgid "Fetch/Pull"
-msgstr ""
+msgstr "Fetch/Pull"
 
-#: util/contextmenuitems.py:625 ui/push.py:96
+#: util/contextmenuitems.py:689
 msgid "Push"
-msgstr ""
+msgstr "Push"
 
-#: util/contextmenuitems.py:630
+#: util/contextmenuitems.py:694
 msgid "Branches"
 msgstr "Branches"
 
-#: util/contextmenuitems.py:635
+#: util/contextmenuitems.py:699
 msgid "Tags"
 msgstr "Tags"
 
-#: util/contextmenuitems.py:640
+#: util/contextmenuitems.py:704
 msgid "Remotes"
 msgstr "Distants"
 
-#: util/contextmenuitems.py:666
-msgid "Ignore item by filename"
-msgstr ""
-
-#: util/contextmenuitems.py:685
-msgid "Ignore item by file extension"
-msgstr ""
-
-#: ui/update.py:54 ui/update.py:98 ui/updateto.py:94
-msgid "Updating..."
-msgstr "Mise à jour..."
-
-#: ui/update.py:56 ui/update.py:103 ui/updateto.py:102
-msgid "Completed Update"
-msgstr "Mise à jour terminée"
-
-#: ui/updateto.py:82
-msgid "Rollback To Revision"
-msgstr "Retour à la Révision"
-
-#: ui/updateto.py:83
-msgid "Rolling Back..."
-msgstr "Retour en arrière..."
-
-#: ui/updateto.py:91
-msgid "Completed Rollback"
-msgstr "Annulation terminée"
-
-#: ui/updateto.py:93
-msgid "Update To Revision"
-msgstr "Mettre à jour vers la révision"
+#: util/contextmenuitems.py:709 ui/clean.py:66 ui/xml/clean.xml.h:1
+#| msgid "Cleanup"
+msgid "Clean"
+msgstr "Nettoyer"
 
-#: ui/updateto.py:138 ui/checkout.py:173
-msgid "Checkout"
-msgstr "Checkout"
+#: util/contextmenuitems.py:713 ui/reset.py:96 ui/xml/reset.xml.h:1
+#| msgid "Reserved"
+msgid "Reset"
+msgstr "Reset"
+
+#: util/contextmenuitems.py:718 ui/stage.py:48 ui/stage.py:73
+msgid "Stage"
+msgstr "Stage"
+
+#: util/contextmenuitems.py:723 ui/unstage.py:48 ui/unstage.py:73
+msgid "Unstage"
+msgstr "Unstage"
+
+#: util/contextmenuitems.py:728
+msgid "Edit conflicts"
+msgstr "Modifier les confits"
 
-#: ui/updateto.py:139
-#, python-format
-msgid "Checking out %s..."
-msgstr "Mise à jour %s..."
+#: util/contextmenuitems.py:754
+msgid "Ignore item by filename"
+msgstr "Ignorer un élément par nom de fichier"
 
-#: ui/updateto.py:145 ui/checkout.py:184
-msgid "Completed Checkout"
-msgstr "Checkout terminé"
+#: util/contextmenuitems.py:773
+msgid "Ignore item by file extension"
+msgstr "Ignorer un élément par extension du nom"
 
-#: ui/add.py:72 ui/commit.py:205 ui/commit.py:313 ui/revert.py:62
-#: ui/revert.py:128 ui/checkmods.py:67 ui/resolve.py:61 ui/changes.py:279
-#: ui/changes.py:364 ui/log.py:337 ui/log.py:572 ui/lock.py:72
-#: ui/createpatch.py:119 ui/createpatch.py:215 ui/action.py:118
-#: ui/unlock.py:61 ui/browser.py:89
+#: ui/revert.py:74 ui/markresolved.py:50 ui/lock.py:71 ui/log.py:392
+#: ui/log.py:678 ui/action.py:120 ui/browser.py:91 ui/add.py:77 ui/commit.py:85
 msgid "Path"
 msgstr "Répertoire"
 
-#: ui/add.py:72 ui/commit.py:205 ui/commit.py:313 ui/revert.py:62
-#: ui/revert.py:128 ui/checkmods.py:67 ui/resolve.py:61 ui/lock.py:72
-#: ui/createpatch.py:119 ui/createpatch.py:215 ui/unlock.py:61
+#: ui/revert.py:74 ui/markresolved.py:51 ui/lock.py:71 ui/add.py:78
+#: ui/commit.py:85
 msgid "Extension"
 msgstr "Extension"
 
-#: ui/add.py:95 ui/commit.py:93 ui/lock.py:115 ui/unlock.py:85
-#: ui/glade/dialogs.glade.h:33
+#: ui/revert.py:106 ui/lock.py:111 ui/unlock.py:67 ui/add.py:111
+#: ui/commit.py:131
 msgid "Loading..."
 msgstr "Chargement..."
 
-#: ui/add.py:98 ui/commit.py:100 ui/lock.py:118 ui/unlock.py:107
+#: ui/revert.py:110 ui/lock.py:114 ui/unlock.py:90 ui/add.py:133
 #, python-format
 msgid "Found %d item(s)"
 msgstr "%d objet(s) trouvé(s)"
 
-#: ui/add.py:157
-msgid "Running Add Command..."
-msgstr "Exécution de la commande d'Ajout..."
-
-#: ui/add.py:159
-msgid "Completed Add"
-msgstr "Ajout terminé"
-
-#: ui/ignore.py:100
-msgid "Ignore file:"
-msgstr "Ignorer les fichiers :"
-
-#: ui/tags.py:62
-msgid "Tag Manager"
-msgstr ""
-
-#: ui/tags.py:63
-msgid "<b>Tags</b>"
-msgstr "<b>Tags</b>"
-
-#: ui/tags.py:74
-msgid "Tag"
-msgstr "Tag"
-
-#: ui/tags.py:99 ui/branches.py:100 ui/glade/dialogs.glade.h:38
-#: ui/glade/property_page.glade.h:2
-msgid "Name:"
-msgstr "Nom:"
+#: ui/revert.py:176 ui/revert.py:202
+msgid "Running Revert Command..."
+msgstr "Exécution de la commande de rétablissement..."
 
-#: ui/tags.py:109 ui/tags.py:176 ui/branches.py:155 ui/merge.py:438
-#: ui/merge.py:488 ui/glade/browser.glade.h:3
-msgid "Revision:"
-msgstr "Révision :"
+#: ui/revert.py:178 ui/revert.py:204
+msgid "Completed Revert"
+msgstr "Rétablissement terminé"
 
-#: ui/tags.py:128 ui/tags.py:188 ui/branches.py:167 ui/merge.py:450
-#: ui/merge.py:500
-msgid "Message:"
-msgstr "Message:"
+#: ui/remotes.py:61
+msgid "Remote Repository Manager"
+msgstr "Gestionnaire de Dépôts à distance"
 
-#: ui/tags.py:145 ui/tags.py:284 ui/branches.py:147 ui/branches.py:291
-msgid "Save"
-msgstr "Sauvegarder"
+#: ui/remotes.py:62
+msgid "<b>Remote Repositories</b>"
+msgstr "<b>Dépôts distants</b>"
 
-#: ui/tags.py:153
-msgid "Tagger:"
-msgstr "Etiquetter"
+#: ui/remotes.py:68 ui/properties.py:64 ui/property_editor.py:114
+msgid "Name"
+msgstr "Nom"
 
-#: ui/tags.py:165 ui/merge.py:427 ui/merge.py:477
-msgid "Date:"
-msgstr "Date :"
+#: ui/remotes.py:68
+msgid "Host"
+msgstr "Hôte"
 
-#: ui/tags.py:230 ui/branches.py:209 ui/remotes.py:128
+#: ui/remotes.py:123 ui/tags.py:238
 #, python-format
 msgid "Are you sure you want to delete %s?"
 msgstr "Êtes-vous sûr de vouloir supprimer %s ?"
 
-#: ui/tags.py:275
-msgid "<b>Add Tag</b>"
-msgstr "<b>Ajouter un Tag</b>"
-
-#: ui/tags.py:293
-msgid "<b>Tag Detail</b>"
-msgstr "<b>Détail du Tag</b>"
-
-#: ui/export.py:45 ui/export.py:114
-#, python-format
-msgid "Export - %s"
-msgstr "Exporter - %s"
-
-#: ui/export.py:72 ui/export.py:131 ui/clone.py:57 ui/checkout.py:163
-msgid "The repository URL and destination path are both required fields."
-msgstr "Les champs 'URL du dépôt' et 'chemin de destination' sont requis."
-
-#: ui/export.py:92 ui/export.py:151
-msgid "Export"
-msgstr "Exporter"
-
-#: ui/export.py:93 ui/export.py:152
-msgid "Running Export Command..."
-msgstr "Exécution de la commande d'exportation..."
-
-#: ui/export.py:104 ui/export.py:160
-msgid "Completed Export"
-msgstr "Exportation terminée"
-
-#: ui/applypatch.py:57 ui/applypatch.py:113 ui/applypatch.py:143
-msgid "Apply Patch"
-msgstr "Appliquer le correctif"
-
-#: ui/applypatch.py:74
-msgid "Apply Patch To Directory..."
-msgstr "Appliquer le correctif pour le repertoire..."
-
-#: ui/applypatch.py:114 ui/applypatch.py:144
-msgid "Applying Patch File..."
-msgstr "Application du fichier correctif..."
-
-#: ui/applypatch.py:116 ui/applypatch.py:146
-msgid "Patch File Applied"
-msgstr "Fichier correctif appliqué"
-
-#: ui/branches.py:62
-msgid "Branch Manager"
-msgstr "Gestionnaire de branches"
-
-#: ui/branches.py:63
-msgid "<b>Branches</b>"
-msgstr "<b>Branches</b>"
-
-#: ui/branches.py:73 ui/widget.py:855
-msgid "Branch"
-msgstr "Branche"
-
-#: ui/branches.py:110
-msgid "Start Point:"
-msgstr "Point de départ :"
-
-#: ui/branches.py:129
-msgid "Keep old branch's history"
-msgstr "Conserver l'historique de l'ancienne branche"
-
-#: ui/branches.py:138
-msgid "Set as active branch"
-msgstr ""
-
-#: ui/branches.py:280
-msgid "<b>Add Branch</b>"
-msgstr "<b>Ajouter une branche</b>"
-
-#: ui/branches.py:304
-msgid "<b>Branch Detail</b>"
-msgstr "<b>Détail de la branche</b>"
-
-#: ui/push.py:76 ui/dialog.py:54 ui/annotate.py:128 ui/annotate.py:229
-#: ui/log.py:327 ui/log.py:557 ui/browser.py:89
-msgid "Date"
-msgstr "Date"
-
-#: ui/push.py:76 ui/dialog.py:54 ui/log.py:327 ui/log.py:557
-#: ui/glade/dialogs.glade.h:36
-msgid "Message"
-msgstr "Message"
-
-#: ui/push.py:97
-msgid "Running Push Command..."
-msgstr ""
-
-#: ui/push.py:99
-msgid "Completed Push"
-msgstr ""
-
-#: ui/import.py:40
-#, python-format
-msgid "Import - %s"
-msgstr "Importation - %s"
-
-#: ui/import.py:68
-msgid "The repository URL field is required."
-msgstr "Le champ 'URL du dépôt' est requit."
-
-#: ui/import.py:81
-msgid "Running Import Command..."
-msgstr "Exécution de la commande d'importation..."
-
-#: ui/import.py:89
-msgid "Completed Import"
-msgstr "Importation terminée"
-
-#: ui/rename.py:48
-msgid "The requested file or folder does not exist."
-msgstr "Le fichier ou répertoire demandé n'existe pas."
-
-#: ui/rename.py:52 ui/rename.py:84 ui/rename.py:113 ui/browser.py:470
-msgid "Rename"
-msgstr "Renommer"
-
-#: ui/rename.py:52 ui/browser.py:470 ui/glade/dialogs.glade.h:39
-msgid "New Name:"
-msgstr "Nouveau nom :"
-
-#: ui/rename.py:60
-msgid "The new name field is required"
-msgstr "Le champ 'nouveau nom' est requit."
-
-#: ui/rename.py:85 ui/rename.py:114
-msgid "Running Rename Command..."
-msgstr "Exécution de la commande de renommage..."
+#: ui/unstage.py:74
+#| msgid "Running Rename Command..."
+msgid "Running Unstage Command..."
+msgstr "Exécution de la commande Unstage..."
+
+#: ui/unstage.py:77
+#| msgid "Completed Update"
+msgid "Completed Unstage"
+msgstr "Unstage terminé"
+
+#: ui/reset.py:97
+#| msgid "Running Revert Command..."
+msgid "Running Reset Command..."
+msgstr "Exécution de la commande Reset..."
+
+#: ui/reset.py:104
+#| msgid "Completed Revert"
+msgid "Completed Reset"
+msgstr "Reset terminé"
 
-#: ui/rename.py:91 ui/rename.py:120
-msgid "Completed Rename"
-msgstr "Renommage terminé"
-
-#: ui/commit.py:206 ui/revert.py:63 ui/checkmods.py:68 ui/resolve.py:62
-#: ui/createpatch.py:120
+#: ui/markresolved.py:51 ui/commit.py:86
 msgid "Text Status"
 msgstr "État du texte"
 
-#: ui/commit.py:206 ui/revert.py:63 ui/checkmods.py:68 ui/resolve.py:62
-#: ui/createpatch.py:120
+#: ui/markresolved.py:51 ui/commit.py:86
 msgid "Property Status"
 msgstr "État de la propriété"
 
-#: ui/commit.py:289 ui/commit.py:385
-msgid "Running Commit Command..."
-msgstr "Exécution de la commande d'Envoi..."
-
-#: ui/commit.py:295 ui/commit.py:394
-msgid "Completed Commit"
-msgstr "Envoi terminé"
-
-#: ui/commit.py:314 ui/revert.py:129 ui/createpatch.py:216
-#: ui/property_editor.py:112
-msgid "Status"
-msgstr "État"
-
-#: ui/diff.py:284
-msgid "View diff as side-by-side comparison"
-msgstr "Voir une comparaison côte à côte du diff"
-
-#: ui/merge.py:87
-msgid "Running Merge Test"
-msgstr "Exécution du test de fusion..."
-
-#: ui/merge.py:88
-msgid "Completed Merge Test"
-msgstr "Test de fusion terminé"
-
-#: ui/merge.py:90
-msgid "Running Merge Command"
-msgstr "Exécution de la commande de fusion"
-
-#: ui/merge.py:91
-msgid "Completed Merge"
-msgstr "Fusion terminée"
-
-#: ui/merge.py:102
-msgid "Merge"
-msgstr "Fusionner"
-
-#: ui/merge.py:415 ui/merge.py:465
-msgid "Author:"
-msgstr "Auteur :"
-
-#: ui/dialog.py:38
-#, python-format
-msgid ""
-"An error has occurred in the RabbitVCS Nautilus extension. Please contact "
-"the <a href=\"%s\">RabbitVCS team</a> with the error details listed below:"
-msgstr ""
-"Une erreur s'est produite dans l'extension RabbitVCS de Nautilus. Merci de "
-"contacter <a href=\"%s\">l'équipe RabbitVCS</ a> en précisant les détails de "
-"l'erreur ci-dessous :"
-
-#: ui/dialog.py:108
-msgid "Select a Folder"
-msgstr "Sélectionnez un dossier"
-
-#: ui/dialog.py:138 ui/glade/log.glade.h:11
-msgid "to"
-msgstr "vers"
-
-#: ui/dialog.py:261
-msgid "Select a File"
-msgstr "Sélectionnez un fichier"
-
-#: ui/dialog.py:280
-msgid "Save As..."
-msgstr "Enregistrer sous..."
-
-#: ui/dialog.py:299 ui/glade/dialogs.glade.h:19
-msgid "Are you sure you want to continue?"
-msgstr "Êtes vous sur de vouloir continuer ?"
-
-#: ui/dialog.py:327
-msgid "the selected item(s)"
-msgstr "le(s) objet(s) sélectionné(s)"
-
-#: ui/dialog.py:398
-msgid "Added a folder to the repository"
-msgstr "Ajouter un répertoire au dépot"
-
-#: ui/revert.py:104 ui/revert.py:169
-msgid "Running Revert Command..."
-msgstr "Exécution de la commande de rétablissement..."
+#: ui/markresolved.py:77
+#| msgid "Running Resolve Command..."
+msgid "Running Resolved Command..."
+msgstr "Exécution de la commande Resolved..."
+
+#: ui/markresolved.py:80
+#| msgid "Completed Resolve"
+msgid "Completed Mark as Resolved"
+msgstr "Résolution terminée"
 
-#: ui/revert.py:106 ui/revert.py:171
-msgid "Completed Revert"
-msgstr "Rétablissement terminé"
+#: ui/ignore.py:101
+msgid "Ignore file:"
+msgstr "Ignorer les fichiers :"
 
-#: ui/clone.py:66
-msgid "Running Clone Command..."
-msgstr ""
+#: ui/stage.py:74
+#| msgid "Running Rename Command..."
+msgid "Running Stage Command..."
+msgstr "Exécution de la commande Stage..."
+
+#: ui/stage.py:77
+#| msgid "Completed Merge"
+msgid "Completed Stage"
+msgstr "Stage terminé"
 
-#: ui/clone.py:73
-msgid "Completed Clone"
-msgstr ""
+#: ui/lock.py:72
+msgid "Locked"
+msgstr "Verrouillé"
 
-#: ui/relocate.py:77
-msgid "The from and to url fields are both required."
-msgstr "Les champs 'depuis' et 'URL' sont requis."
+#: ui/lock.py:121
+msgid "Yes"
+msgstr "Oui"
 
-#: ui/relocate.py:87 ui/glade/relocate.glade.h:3
-msgid "Relocate"
-msgstr "Relocaliser"
+#: ui/lock.py:156
+msgid "Get Lock"
+msgstr "Obtenir le verrou"
 
-#: ui/relocate.py:88
-msgid "Running Relocate Command..."
-msgstr "Exécution de la commande de relocalisation..."
+#: ui/lock.py:157
+msgid "Running Lock Command..."
+msgstr "Exécution de la commande de verrouillage..."
 
-#: ui/relocate.py:95
-msgid "Completed Relocate"
-msgstr "Relocalisation terminée"
+#: ui/lock.py:166
+msgid "Completed Lock"
+msgstr "Verrouillage terminé"
 
-#: ui/checkmods.py:69 ui/annotate.py:127 ui/annotate.py:228 ui/log.py:48
-#: ui/log.py:326 ui/log.py:556 ui/widget.py:854 ui/browser.py:89
-#: ui/glade/merge.glade.h:17
+#: ui/log.py:51 ui/log.py:375 ui/log.py:662 ui/xml/merge.xml.h:19
+#: ui/widget.py:1038 ui/browser.py:91 ui/annotate.py:131 ui/annotate.py:235
 msgid "Revision"
 msgstr "Révision"
 
-#: ui/checkmods.py:69 ui/annotate.py:127 ui/annotate.py:228 ui/log.py:326
-#: ui/log.py:556 ui/browser.py:89
+#: ui/log.py:52 ui/log.py:376 ui/log.py:663 ui/browser.py:91 ui/dialog.py:51
+#: ui/annotate.py:132 ui/annotate.py:236
+msgid "Date"
+msgstr "Date"
+
+#: ui/log.py:53 ui/log.py:375 ui/log.py:662 ui/browser.py:91 ui/annotate.py:131
+#: ui/annotate.py:235
 msgid "Author"
 msgstr "Auteur"
 
-#: ui/checkmods.py:160 ui/changes.py:50 ui/changes.py:420
-msgid "View unified diff"
-msgstr "Voir le diff unifié"
-
-#: ui/checkmods.py:165 ui/changes.py:425
-msgid "Compare side by side"
-msgstr "Comparaison côte à côte"
-
-#: ui/resolve.py:103
-msgid "Running Resolve Command..."
-msgstr "Exécution de la commande de résolution..."
-
-#: ui/resolve.py:106
-msgid "Completed Resolve"
-msgstr "Résolution terminée"
-
-#: ui/changes.py:49
-msgid "More Actions..."
-msgstr "Plus d'actions..."
-
-#: ui/changes.py:279 ui/changes.py:364
-msgid "Change"
-msgstr "Changement"
-
-#: ui/changes.py:279
-msgid "Property Change"
-msgstr "Changement de propriété"
-
-#: ui/changes.py:321 ui/lock.py:126
-msgid "Yes"
-msgstr "Oui"
-
-#: ui/changes.py:321
-msgid "No"
-msgstr "Non"
-
-#: ui/changes.py:410
-msgid "Open from first revision"
-msgstr "Ouvrir depuis la première révision"
-
-#: ui/changes.py:415
-msgid "Open from second revision"
-msgstr "Ouvrir depuis la seconde révision"
-
-#: ui/annotate.py:57
-msgid "Cannot annotate a directory"
-msgstr "Impossible d'annoter le dossier"
-
-#: ui/annotate.py:63
-#, python-format
-msgid "Annotate - %s"
-msgstr "Annoter - %s"
-
-#: ui/annotate.py:127 ui/annotate.py:228
-msgid "Line"
-msgstr "Ligne"
-
-#: ui/annotate.py:128 ui/annotate.py:229
-msgid "Text"
-msgstr "Texte"
-
-#: ui/annotate.py:143
-msgid "The from revision field must be an integer"
-msgstr "Le champ 'depuis la révision' est requis."
-
-#: ui/log.py:120
+#: ui/log.py:126
 #, python-format
 msgid "Log - %s"
 msgstr "Journal - %s"
 
-#: ui/log.py:270 ui/log.py:271 ui/glade/log.glade.h:7
+#: ui/log.py:307 ui/log.py:308 ui/xml/log.xml.h:7
 msgid "N/A"
 msgstr "N/A"
 
-#: ui/log.py:337 ui/log.py:572 ui/action.py:118
+#: ui/log.py:376 ui/log.py:663 ui/xml/dialogs/message_box.xml.h:1
+#: ui/dialog.py:51
+msgid "Message"
+msgstr "Message"
+
+#: ui/log.py:377
+msgid "Color"
+msgstr "Couleur"
+
+#: ui/log.py:392 ui/log.py:678 ui/action.py:120
 msgid "Action"
 msgstr "Action"
 
-#: ui/log.py:338
+#: ui/log.py:393
 msgid "Copy From Path"
 msgstr "Copier depuis le chemin"
 
-#: ui/log.py:338
+#: ui/log.py:393
 msgid "Copy From Revision"
 msgstr "Copier depuis la révision"
 
-#: ui/log.py:556
+#: ui/log.py:662
 msgid "Graph"
 msgstr "Graphe"
 
-#: ui/log.py:781
+#: ui/log.py:929 ui/browser.py:322 ui/dialog.py:110
+#| msgid "Select"
+msgid "_Select"
+msgstr "_Sélectionner"
+
+#: ui/log.py:983
 msgid "View diff against working copy"
 msgstr "Comparer avec la copie de travail"
 
-#: ui/log.py:791
+#: ui/log.py:993
 msgid "View diff between revisions"
 msgstr "Voir les différences entre les révisions"
 
-#: ui/log.py:796
+#: ui/log.py:998
 msgid "Compare with working copy"
 msgstr "Comparer avec la copie de travail"
 
-#: ui/log.py:806
+#: ui/log.py:1008
 msgid "Compare revisions"
 msgstr "Comparer les révisions"
 
-#: ui/log.py:812
+#: ui/log.py:1014
 msgid "Show changes against previous revision"
 msgstr "Comparer avec la révision précédente"
 
-#: ui/log.py:818
+#: ui/log.py:1020
 msgid "Show changes between revisions"
 msgstr "Montrer les différences entre les révisions"
 
-#: ui/log.py:823
+#: ui/log.py:1025
 msgid "Update to this revision"
-msgstr ""
+msgstr "Mise à jour vers cette révision"
 
-#: ui/log.py:824
+#: ui/log.py:1026
 msgid "Update the selected path to this revision"
-msgstr ""
+msgstr "Mise à jour du chemin sélectionné vers cette révision"
+
+#: ui/log.py:1031
+#| msgid "Open from first revision"
+msgid "Revert changes from this revision"
+msgstr "Défaire les modifications à partir de cette révision"
+
+#: ui/log.py:1032
+msgid "Update the selected path by reverse merging the changes"
+msgstr "Mise à jour du chemin sélectionné par fusion inverse des changements"
+
+#: ui/log.py:1037
+#| msgid "Copy URL to clipboard"
+msgid "Copy to clipboard"
+msgstr "Copier dans le presse-papier"
+
+#: ui/log.py:1038
+msgid "Copy to clipboard the full data of these revisions"
+msgstr "Copier les données complètes de ces révisions dans le presse-papier"
 
-#: ui/log.py:829 ui/log.py:833
+#: ui/log.py:1042 ui/log.py:1046
 msgid "Edit author..."
 msgstr "Editer l'auteur..."
 
-#: ui/log.py:837
+#: ui/log.py:1050
 msgid "Edit log message..."
 msgstr "Editer le message de journal..."
 
-#: ui/log.py:841
+#: ui/log.py:1054
 msgid "Edit revision properties..."
 msgstr "Editer les propriétés de la révision..."
 
-#: ui/log.py:1047
+#: ui/log.py:1334
 msgid "Edit author"
 msgstr "Editer l'auteur"
 
-#: ui/log.py:1059
+#: ui/log.py:1346
 msgid "Edit log message"
 msgstr "Editer le message de journal"
 
-#: ui/settings.py:43 ui/glade/settings.glade.h:35
-msgid "Unknown"
-msgstr "Inconnu"
+#: ui/unlock.py:46 ui/unlock.py:108
+msgid "Unlock"
+msgstr "Déverrouiller"
 
-#: ui/settings.py:45
-msgid "There was an error communicating with the status checker service."
+#: ui/unlock.py:109
+msgid "Running Unlock Command..."
+msgstr "Exécution de la commande de déverrouillage..."
+
+#: ui/unlock.py:112
+msgid "Completed Unlock"
+msgstr "Déverrouillage terminé"
+
+#: ui/__init__.py:52
+msgid ""
+"You must specify a version control system using the --vcs [svn|git] option"
 msgstr ""
+"Vous devez définir un système de contrôle de versions en utilisant l'option "
+"--vcs [svn|git]"
+
+#: ui/clean.py:67
+#| msgid "Running Rename Command..."
+msgid "Running Clean Command..."
+msgstr "Exécution de la commande de nettoyage..."
+
+#: ui/clean.py:77
+#| msgid "Completed Cleanup"
+msgid "Completed Clean"
+msgstr "Nettoyage terminé"
 
-#: ui/settings.py:59
-msgid "English"
-msgstr "Anglais"
+#: ui/action.py:120
+msgid "Mime Type"
+msgstr "Type MIME"
 
-#: ui/settings.py:119
-msgid "Config file:"
-msgstr "Fichier de configuration :"
+#: ui/action.py:360
+msgid "Finished"
+msgstr "Terminé"
 
-#: ui/settings.py:294
-msgid "Select a program"
-msgstr "Sélectionnez un programme"
+#: ui/action.py:364
+#, python-format
+msgid "%s - Finished"
+msgstr "%s - Terminé"
 
-#: ui/settings.py:303
-msgid "Are you sure you want to clear your repository paths?"
-msgstr "Êtes vous sur de vouloir nettoyer les chemins du dépôt ?"
+#: ui/action.py:386
+msgid "Log Message"
+msgstr "Message du journal"
 
-#: ui/settings.py:310
-msgid "Repository paths cleared"
-msgstr "Chemins du dépôt nettoyés"
+#: ui/xml/revert.xml.h:2 ui/xml/commit.xml.h:2 ui/xml/relocate.xml.h:2
+#: ui/xml/update.xml.h:2 ui/xml/settings.xml.h:2 ui/xml/add.xml.h:2
+#: ui/xml/dialogs/delete_confirmation.xml.h:2
+#: ui/xml/dialogs/name_email_prompt.xml.h:2
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:2
+#: ui/xml/dialogs/previous_messages.xml.h:2 ui/xml/dialogs/property.xml.h:2
+#: ui/xml/dialogs/create_folder.xml.h:2 ui/xml/dialogs/loading.xml.h:2
+#: ui/xml/ignore.xml.h:2 ui/xml/clean.xml.h:2 ui/xml/properties.xml.h:2
+#: ui/xml/notification.xml.h:2 ui/xml/git-update.xml.h:1 ui/xml/lock.xml.h:2
+#: ui/xml/import.xml.h:2 ui/xml/reset.xml.h:2 ui/dialog.py:109 ui/dialog.py:281
+#: ui/dialog.py:301
+#| msgid "Cancel"
+msgid "_Cancel"
+msgstr "_Annuler"
+
+#: ui/xml/revert.xml.h:3 ui/xml/commit.xml.h:3 ui/xml/relocate.xml.h:3
+#: ui/xml/update.xml.h:3 ui/xml/settings.xml.h:3 ui/xml/add.xml.h:3
+#: ui/xml/dialogs/name_email_prompt.xml.h:3
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:3
+#: ui/xml/dialogs/message_box.xml.h:2 ui/xml/dialogs/previous_messages.xml.h:3
+#: ui/xml/dialogs/property.xml.h:3 ui/xml/dialogs/create_folder.xml.h:3
+#: ui/xml/ignore.xml.h:3 ui/xml/clean.xml.h:3 ui/xml/notification.xml.h:3
+#: ui/xml/git-update.xml.h:2 ui/xml/lock.xml.h:3 ui/xml/import.xml.h:3
+#: ui/xml/reset.xml.h:3
+msgid "_OK"
+msgstr "_OK"
 
-#: ui/settings.py:314
-msgid "Are you sure you want to clear your previous messages?"
-msgstr "Êtes vous sur de vouloir nettoyer les messages précédents ?"
+#: ui/xml/revert.xml.h:4 ui/xml/commit.xml.h:8 ui/xml/add.xml.h:5
+#: ui/xml/lock.xml.h:5
+msgid "Select / Deselect all"
+msgstr "Tous sélectionner/déselectionner"
 
-#: ui/settings.py:321
-msgid "Previous messages cleared"
-msgstr "Messages précèdents nettoyés"
+#: ui/xml/commit.xml.h:4 ui/xml/log.xml.h:2
+msgid "Refresh"
+msgstr "Rafraîchir"
 
-#: ui/settings.py:325
-msgid "Are you sure you want to clear your authentication information?"
-msgstr ""
-"Êtes vous sur de vouloir nettoyer vos informations d'authentification ?"
+#: ui/xml/commit.xml.h:5 ui/xml/dialogs/previous_messages.xml.h:1
+#: ui/xml/lock.xml.h:7 ui/xml/import.xml.h:5
+msgid "Previous Messages"
+msgstr "Messages précédents"
 
-#: ui/settings.py:342
-msgid "Authentication information cleared"
-msgstr "Informations d'authentification nettoyées"
+#: ui/xml/commit.xml.h:6 ui/xml/dialogs/create_folder.xml.h:5
+msgid "<b>Add Message</b>"
+msgstr "<b>Ajouter un message</b>"
 
-#: ui/revprops.py:65 ui/properties.py:158 ui/property_editor.py:155
-msgid "Unable to retrieve properties list"
-msgstr "Impossible de récupérer les propriétés de la liste"
+#: ui/xml/commit.xml.h:7
+msgid "Show unversioned files"
+msgstr "Montrer les fichiers non versionnés"
 
-#: ui/branch.py:99
-msgid "You must supply a destination path."
-msgstr "Vous devez spécifier un chemin de destination."
-
-#: ui/branch.py:115
-msgid "Branch/tag"
-msgstr "Branch/tag"
-
-#: ui/branch.py:116
-msgid "Running Branch/tag Command..."
-msgstr "Exécution de la commande Branch/tag..."
-
-#: ui/branch.py:118
-msgid "Completed Branch/tag"
-msgstr "Branch/tag terminé"
+#: ui/xml/commit.xml.h:9
+msgid "<b>Changed Files</b> (double-click to compare with base)"
+msgstr ""
+"<b>Fichiers modifiés</b> (double-clic pour comparer avec la version de base)"
 
-#: ui/lock.py:73
-msgid "Locked"
-msgstr "Verrouillé"
+#: ui/xml/commit.xml.h:10
+msgid "<b>Commit to:</b>"
+msgstr "<b>Envoyer vers :</b>"
 
-#: ui/lock.py:167
-msgid "Get Lock"
-msgstr "Obtenir le verrou"
+#: ui/xml/property_editor.xml.h:1
+msgid "Property Editor"
+msgstr "Éditeur de propriété"
 
-#: ui/lock.py:168
-msgid "Running Lock Command..."
-msgstr "Exécution de la commande de verrouillage..."
+#: ui/xml/property_editor.xml.h:2 ui/xml/browser.xml.h:3 ui/xml/manager.xml.h:1
+#: ui/xml/dialogs/error_notification.xml.h:2 ui/xml/log.xml.h:1
+#: ui/xml/annotate.xml.h:3
+msgid "_Close"
+msgstr "_Fermer"
 
-#: ui/lock.py:177
-msgid "Completed Lock"
-msgstr "Verrouillage terminé"
+#: ui/xml/property_editor.xml.h:3
+msgid "Close this dialog."
+msgstr "Fermer cette boîte de dialogue."
 
-#: ui/switch.py:70
-msgid "The repository location is a required field."
-msgstr "Le champ 'emplacement du dépôt' est requit."
-
-#: ui/switch.py:80
-msgid "Switch"
-msgstr "Basculement"
-
-#: ui/switch.py:81
-msgid "Running Switch Command..."
-msgstr "Exécution de la commande de basculement..."
-
-#: ui/switch.py:89
-msgid "Completed Switch"
-msgstr "Basculement terminé"
+#: ui/xml/property_editor.xml.h:4
+#| msgid "Refresh"
+msgid "_Refresh"
+msgstr "_Rafraîchir"
 
-#: ui/widget.py:853 ui/widget.py:859 ui/glade/merge.glade.h:10
-msgid "HEAD"
-msgstr "HEAD"
+#: ui/xml/property_editor.xml.h:5
+msgid "Refresh the list of properties."
+msgstr "Rafraîchir la liste de propriétés."
 
-#: ui/widget.py:860
-msgid "Number"
-msgstr "Numéro"
+#: ui/xml/property_editor.xml.h:6
+msgid "_New"
+msgstr "_Nouveau"
 
-#: ui/widget.py:861
-msgid "Working Copy"
-msgstr "Copie de travail"
+#: ui/xml/property_editor.xml.h:7
+msgid "Add a new property."
+msgstr "Ajouter une nouvelle propriété"
 
-#: ui/widget.py:1056
-msgid "Repository:"
-msgstr "Dépôt :"
+#: ui/xml/property_editor.xml.h:8
+msgid "<b>Remote URI:</b>"
+msgstr "<b>URI distante :</b>"
 
-#: ui/widget.py:1075
-msgid "Branch:"
-msgstr "Branche :"
+#: ui/xml/property_editor.xml.h:9
+msgid "<b>Working Copy:</b>"
+msgstr "<b>Copie de travail :</b>"
 
-#: ui/widget.py:1093 ui/glade/dialogs.glade.h:30
-msgid "Host:"
-msgstr "Hôte :"
+#: ui/xml/browser.xml.h:2
+msgid "Load/Refresh"
+msgstr "Charger/Rafraîchir"
 
-#: ui/widget.py:1194
-msgid "Add line:"
-msgstr "Ajouter une ligne :"
+#: ui/xml/browser.xml.h:4 ui/tags.py:108 ui/tags.py:176 ui/merge.py:508
+msgid "Revision:"
+msgstr "Révision :"
 
-#: ui/checkout.py:139 ui/checkout.py:213
-#, python-format
-msgid "Checkout - %s"
-msgstr "Checkout - %s"
+#: ui/xml/browser.xml.h:5
+msgid "URL:"
+msgstr "URL :"
 
-#: ui/checkout.py:174
-msgid "Running Checkout Command..."
-msgstr "Exécution de la commande Checkout..."
+#: ui/xml/relocate.xml.h:1 ui/relocate.py:82
+msgid "Relocate"
+msgstr "Relocaliser"
 
-#: ui/remotes.py:59
-msgid "Remote Repository Manager"
-msgstr "Gestionnaire de Dépôts à distance"
+#: ui/xml/relocate.xml.h:4
+msgid "To:"
+msgstr "Vers :"
 
-#: ui/remotes.py:60
-msgid "<b>Remote Repositories</b>"
-msgstr "<b>Dépôts distants</b>"
+#: ui/xml/relocate.xml.h:5
+msgid "From:"
+msgstr "Depuis :"
 
-#: ui/remotes.py:66 ui/properties.py:63 ui/property_editor.py:112
-msgid "Name"
-msgstr "Nom"
+#: ui/xml/relocate.xml.h:6
+msgid "<b>Change the repository of your working copy</b>"
+msgstr "<b>Changer le dépôt de votre copie de travail</b>"
 
-#: ui/remotes.py:66
-msgid "Host"
-msgstr "Hôte"
+#: ui/xml/update.xml.h:4
+msgid "Rollback to specified revision number"
+msgstr "Retour en arrière vers la révision spécifiée"
 
-#: ui/property_page.py:126
-msgid "Repository URL"
-msgstr "URL du dépôt"
+#: ui/xml/update.xml.h:5
+msgid "Omit Externals"
+msgstr "Omettre les externes"
 
-#: ui/createpatch.py:68 ui/createpatch.py:86 ui/createpatch.py:162
-#: ui/createpatch.py:262
-msgid "Create Patch"
-msgstr "Créer un correctif"
-
-#: ui/createpatch.py:112 ui/createpatch.py:208
-msgid "The given path is not a working copy"
-msgstr "Le chemin indiqué n'est pas une copie de travail"
-
-#: ui/createpatch.py:163 ui/createpatch.py:263
-msgid "Creating Patch File..."
-msgstr "Création du fichier correctif"
-
-#: ui/createpatch.py:193 ui/createpatch.py:292
-msgid "Patch File Created"
-msgstr "Fichier correctif créé"
+#: ui/xml/update.xml.h:6 ui/xml/merge.xml.h:29
+msgid "Recursive"
+msgstr "Récursif"
 
-#: ui/properties.py:55
-#, python-format
-msgid "Properties - %s"
-msgstr "Propriétés - %s"
+#: ui/xml/update.xml.h:7 ui/xml/merge.xml.h:30 ui/xml/git-update.xml.h:7
+#: ui/xml/reset.xml.h:13
+msgid "<b>Options</b>"
+msgstr "<b>Options</b>"
 
-#: ui/properties.py:63 ui/property_editor.py:112
-msgid "Value"
-msgstr "Valeur"
+#: ui/xml/update.xml.h:8 ui/xml/reset.xml.h:14
+msgid "<b>Revision</b>"
+msgstr "<b>Révision</b>"
 
-#: ui/properties.py:179
-msgid "There was a problem saving your properties."
-msgstr "Une erreur est survenue durant la sauvegarde de vos propriétés."
+#: ui/xml/merge.xml.h:1
+msgid "Merge Assistant"
+msgstr "Assistant de fusion"
 
-#: ui/property_editor.py:56
+#: ui/xml/merge.xml.h:2
+#| msgid ""
+#| "Choose this method if you wish to merge two different branches into your "
+#| "working copy."
+msgid "Choose this method if you wish to reintegrate a branch into the trunk."
+msgstr ""
+"Choisissez cette méthode si vous souhaitez réintégrer une branche dans le "
+"tronc."
+
+#: ui/xml/merge.xml.h:3
+msgid "Reintegrate a branch"
+msgstr "Réintégrer une branche"
+
+#: ui/xml/merge.xml.h:4
 msgid ""
-"<b>Note:</b> changes to properties are applied instantly. You may review and "
-"undo changes using the context menu for each item.\n"
+"Choose this method if you wish to merge two different branches into your "
+"working copy."
 msgstr ""
-"<b>Remarque :</b> les modifications apportées aux propriétés sont appliquées "
-"immédiatement. Vous pouvez vérifier et annuler les modifications en "
-"utilisant le menu contextuel pour chaque élément.\n"
+"Choisissez cette méthode si vous souhaitez fusionner deux branches "
+"différentes dans votre copie de travail."
 
-#: ui/property_editor.py:61
+#: ui/xml/merge.xml.h:5
+msgid "Merge two different trees"
+msgstr "Fusionner deux arbres différents"
+
+#: ui/xml/merge.xml.h:6
 msgid ""
-"Do you want to delete the selected properties from all files and "
-"subdirectories\n"
-"beneath this directory?"
+"Choose this method if you have made some changes to a branch and wish to "
+"merge your changes with another branch."
 msgstr ""
-"Voulez-vous supprimer les propriétés sélectionnées de l'ensemble des "
-"fichiers et des sous-répertoires\n"
-"sous ce répertoire ?"
+"Choisissez cette méthode si vous avez effectué des changements sur une "
+"branche et que vous souhaitez fusionner ces changements avec une autre "
+"branche."
 
-#: ui/property_editor.py:102
-msgid "File is not under version control."
-msgstr "Le fichier n'est pas versionné"
+#: ui/xml/merge.xml.h:7
+msgid "Merge a range of revisions"
+msgstr "Fusionner une gamme de révisions"
 
-#: ui/property_editor.py:112
-msgid "Reserved"
-msgstr "Réservé"
+#: ui/xml/merge.xml.h:8
+msgid "Step 1: Merge Type"
+msgstr "Etape 1: Type de fusion"
 
-#: ui/property_editor.py:189
-msgid "Unable to set new value for property."
-msgstr "Impossible de définir une nouvelle valeur pour la propriété."
+#: ui/xml/merge.xml.h:9
+msgid "<b>Working Copy</b>"
+msgstr "<b>Copie de travail</b>"
 
-#: ui/__init__.py:50
+#: ui/xml/merge.xml.h:10
 msgid ""
-"You must specify a version control system using the --vcs [svn|git] option"
+"Use the log dialog to select the revisions that you wish to merge.  Or write "
+"out the revisions manually, each separated by a comma.  You can specify a "
+"revision range by a dash. \n"
+"\n"
+"Example: 4-7,9,11,15-HEAD\n"
+"\n"
+"To merge all revisions, leave the box empty."
 msgstr ""
-"Vous devez définir un système de contrôle de versions en utilisant l'option -"
-"-vcs [svn|git]"
+"Utilisez le journal de dialogue pour sélectionner la/les révision(s) que "
+"vous souhaitez fusionner. Ou écrivez la/les révision(s) manuellement, "
+"séparée(s) par des virgules. Vous pouvez spécifier une gamme de révision par "
+"un tiret.\n"
+"\n"
+"Example: 4-7,9,11,15-HEAD\n"
+"\n"
+"Pour fusionner toute les révisions, laissez le champ vide."
 
-#: ui/action.py:118
-msgid "Mime Type"
-msgstr "Type MIME"
+#: ui/xml/merge.xml.h:15
+msgid "Show log"
+msgstr "Consulter le journal"
 
-#: ui/action.py:338
-msgid "Finished"
-msgstr "Terminé"
+#: ui/xml/merge.xml.h:16
+msgid "<b>Revision Range</b>"
+msgstr "<b>Gamme de révision</b>"
 
-#: ui/action.py:342
-#, python-format
-msgid "%s - Finished"
-msgstr "%s - Terminé"
+#: ui/xml/merge.xml.h:17
+msgid "<b>URL to merge from</b>"
+msgstr "<b>Fusionner depuis l'URL</b>"
 
-#: ui/action.py:365
-msgid "Log Message"
-msgstr "Message du journal"
+#: ui/xml/merge.xml.h:18
+#| msgid "Merge a range of revisions"
+msgid "Step 2: Merge a Range of Revisions"
+msgstr "Etape 2: Fusionner une gamme de révisions"
 
-#: ui/unlock.py:48 ui/unlock.py:125
-msgid "Unlock"
-msgstr "Déverrouiller"
+#: ui/xml/merge.xml.h:20 ui/widget.py:1037 ui/widget.py:1043
+msgid "HEAD"
+msgstr "HEAD"
 
-#: ui/unlock.py:126
-msgid "Running Unlock Command..."
-msgstr "Exécution de la commande de déverrouillage..."
+#: ui/xml/merge.xml.h:21
+msgid "<b>To: (URL and revision to merge)</b>"
+msgstr "<b>Vers: (URL et révision à fusionner)</b>"
 
-#: ui/unlock.py:129
-msgid "Completed Unlock"
-msgstr "Déverrouillage terminé"
+#: ui/xml/merge.xml.h:22
+msgid "<b>From: (URL and revision to merge)</b>"
+msgstr "<b>Depuis: (URL et révision à fusionner)</b>"
 
-#: ui/browser.py:89
-msgid "Size"
-msgstr "Taille"
+#: ui/xml/merge.xml.h:23
+#| msgid "Merge two different trees"
+msgid "Step 2: Merge two different trees"
+msgstr "Etape 2: Fusionner deux arbres différents"
 
-#: ui/browser.py:326
-msgid "Select"
-msgstr "Sélectionner"
+#: ui/xml/merge.xml.h:24
+msgid "<b>From URL</b>"
+msgstr "<b>Depuis l'URL</b>"
 
-#: ui/browser.py:348
-msgid "Create folder..."
-msgstr "Créer un dossier..."
+#: ui/xml/merge.xml.h:25
+msgid "Step 2: Reintegrate a Branch"
+msgstr "Etape 2: Réintégrer une branche"
 
-#: ui/browser.py:353
-msgid "Copy to..."
-msgstr "Copier vers..."
+#: ui/xml/merge.xml.h:26
+msgid "Test Merge"
+msgstr "Tester la fusion"
 
-#: ui/browser.py:358
-msgid "Copy URL to clipboard"
-msgstr "Copier l'URL dans le presse-papier"
+#: ui/xml/merge.xml.h:27
+msgid "Only record the merge"
+msgstr "Enregistrer seulement la fusion"
 
-#: ui/browser.py:363
-msgid "Move to..."
-msgstr "Déplacer vers..."
+#: ui/xml/merge.xml.h:28
+msgid "Ignore ancestry"
+msgstr "Ignorer l'ascendance"
 
-#: ui/browser.py:531
-msgid "Where do you want to copy the selection?"
-msgstr "Où voulez-vous copier la sélection ?"
+#: ui/xml/merge.xml.h:31
+msgid "Step 3: Final Options"
+msgstr "Etape 3: Options finales"
+
+#: ui/xml/settings.xml.h:4
+#| msgid "<b>Version Information</b>"
+msgid "<b>Version Control Systems</b>"
+msgstr "<b>Systèmes de contrôle de version</b>"
+
+#: ui/xml/settings.xml.h:5
+#| msgid "Enable emblems"
+msgid "Enable Subversion"
+msgstr "Activer Subversion"
+
+#: ui/xml/settings.xml.h:6
+msgid "Enable Git"
+msgstr "Activer Git"
 
-#: ui/browser.py:532 ui/browser.py:561
-msgid "New Location:"
-msgstr "Nouvel emplacement :"
+#: ui/xml/settings.xml.h:7
+msgid "Show RabbitVCS debugging tools"
+msgstr "Afficher les outils de débogage de RabbitVCS"
 
-#: ui/browser.py:560
-msgid "Where do you want to move the selection?"
-msgstr "Où voulez-vous déplacer la sélection ?"
+#: ui/xml/settings.xml.h:8
+msgid "The debug menu is used to diagnose problems with RabbitVCS itself"
+msgstr ""
+"Le menu Déboger est utilisé pour diagnostiquer des problèmes avec RabbitVCS "
+"elle-même"
 
-#: ui/cleanup.py:56 ui/glade/cleanup.glade.h:1
-msgid "Cleaning Up..."
-msgstr "Nettoyage..."
+#: ui/xml/settings.xml.h:9
+msgid "Enable emblems"
+msgstr "Activer les emblèmes"
 
-#: ui/cleanup.py:58
-msgid "Completed Cleanup"
-msgstr "Nettoyage terminé"
+#: ui/xml/settings.xml.h:10
+msgid "Enable recursive status checks"
+msgstr "Activer les vérifications récursives des statuts"
 
-#: ui/create.py:46
-msgid "Repository successfully created"
-msgstr "Dépôt créé avec succès"
+#: ui/xml/settings.xml.h:11
+msgid "Enable file attributes"
+msgstr "Activer les attributs de fichier"
 
-#: ui/create.py:48
+#: ui/xml/settings.xml.h:12
+msgid "<b>RabbitVCS</b>"
+msgstr "<b>RabbitVCS</b>"
+
+#: ui/xml/settings.xml.h:13
+msgid "General"
+msgstr "Général"
+
+#: ui/xml/settings.xml.h:14
+msgid "<b>Configure the program to resolve conflicted files.</b>"
+msgstr "Configurer le programme pour résoudre les conflits."
+
+#: ui/xml/settings.xml.h:16
 msgid ""
-"There was an error creating the repository.  Make sure the given folder is "
-"empty."
-msgstr ""
-"Une erreur c'est produite durant la création du dépôt. Veuillez vérifier que "
-"le répertoire est vide."
+"Use the following macros to configure the merge tool:\n"
+"%base       - The common ancestor of the two files to be merged.\n"
+"%mine      - The file you modified in your working copy.\n"
+"%theirs    - The file being merged into your working copy.\n"
+"%merged - The file to store the merged result."
+msgstr ""
+"Utiliser lea macros suivants pour configurer l'outil de fusion:\n"
+"%base       - L'ancêtre commun aux deux fichiers à fusionner.\n"
+"%mine       - Le ficher modifié dans votre copie de travail.\n"
+"%theirs     - Le fichier à fusionner avec votre copie de travail.\n"
+"%merged     - Le fichier dans lequel stocker le résultat de la fusion."
 
-#: ui/glade/properties.glade.h:1
-msgid "<b>Properties for:</b>"
-msgstr "<b>Propriétés pour:</b>"
+#: ui/xml/settings.xml.h:21
+msgid "Browse..."
+msgstr "Parcourir..."
 
-#: ui/glade/properties.glade.h:2
-msgid "<i>Selected properties will be applied recursively.</i>"
-msgstr ""
-"<i>Les propriétés sélectionnées seront appliquées de manière récursive.</ i>"
+#: ui/xml/settings.xml.h:22
+msgid "Show new version on the left side"
+msgstr "Afficher la nouvelle version à gauche"
 
-#: ui/glade/properties.glade.h:4
-msgid "Delete properties recursively"
-msgstr "Supprimer les propriétés récursivement"
+#: ui/xml/settings.xml.h:23
+msgid "<b>Program used to compare files</b>"
+msgstr "<b>Programme utilisé pour comparer des fichiers</b>"
 
-#: ui/glade/properties.glade.h:5
-msgid "Edit..."
-msgstr "Éditer..."
-
-#: ui/glade/properties.glade.h:6
-msgid "New..."
-msgstr "Nouveau..."
-
-#: ui/glade/properties.glade.h:8
-msgid "URL/Path:"
-msgstr "URL/Chemin :"
+#: ui/xml/settings.xml.h:24
+msgid "External Programs"
+msgstr "Programmes externes"
 
-#: ui/glade/browser.glade.h:1
-msgid "Load/Refresh"
-msgstr "Charger/Rafraîchir"
+#: ui/xml/settings.xml.h:25
+#| msgid "Cleanup"
+msgid "Clear"
+msgstr "Effacer"
 
-#: ui/glade/browser.glade.h:4
-msgid "URL:"
-msgstr "URL :"
+#: ui/xml/settings.xml.h:26
+msgid "Clear your authentication information"
+msgstr "Nettoyer vos informations d'authentification"
 
-#: ui/glade/dialogs.glade.h:1
-msgid "<b>A conflict was found in the following file:</b>"
-msgstr "<b>Un conflit a été trouvé dans le fichier suivant :</b>"
+#: ui/xml/settings.xml.h:27
+msgid "<b>Authentication</b>"
+msgstr "<b>Authentification</b>"
 
-#: ui/glade/dialogs.glade.h:2 ui/glade/commit.glade.h:1
-msgid "<b>Add Message</b>"
-msgstr "<b>Ajouter un message</b>"
+#: ui/xml/settings.xml.h:28
+msgid "Number of messages to remember"
+msgstr "Nombre de messages à retenir"
 
-#: ui/glade/dialogs.glade.h:3
-msgid "<b>Certificate Details</b>"
-msgstr "<b>Détails du certificat</b>"
+#: ui/xml/settings.xml.h:29
+msgid "<b>Log Messages</b>"
+msgstr "<b>Messages du journal</b>"
 
-#: ui/glade/dialogs.glade.h:4
-msgid "<b>Edit Property Details</b>"
-msgstr "<b>Éditer les détails de la propriété</b>"
+#: ui/xml/settings.xml.h:30
+msgid "Number of URLs to remember"
+msgstr "Nombre d'URL à retenir"
 
-#: ui/glade/dialogs.glade.h:5
-msgid "<b>Enter Name and Email Details</b>"
-msgstr "<b>Veuillez saisir votre nom et email</b>"
+#: ui/xml/settings.xml.h:31
+msgid "<b>URL History</b>"
+msgstr "<b>Historique des URL</b>"
 
-#: ui/glade/dialogs.glade.h:6
-msgid "<b>Folder Name</b>"
-msgstr "<b>Nom du dossier</b>"
+#: ui/xml/settings.xml.h:32
+msgid "Saved Data"
+msgstr "Données sauvegardées"
 
-#: ui/glade/dialogs.glade.h:7 ui/glade/log.glade.h:3
-msgid "<b>Message</b>"
-msgstr "<b>Message</b>"
+#: ui/xml/settings.xml.h:33
+msgid "<b>Logging Options</b>"
+msgstr "<b>Options de journalisation</b>"
 
-#: ui/glade/dialogs.glade.h:8
-msgid "<b>Please add your authentication details</b>"
-msgstr "<b>Merci d'ajouter vos détails d'authentification</b>"
+#: ui/xml/settings.xml.h:34
+#| msgid "Minimum level to log"
+msgid "Minimum level to log:"
+msgstr "Niveau minimum à journaliser:"
 
-#: ui/glade/dialogs.glade.h:9
-msgid "<b>Please provide your ssl certification file</b>"
-msgstr "<b>Merci de fournir vos fichier de certification ssl</b>"
+#: ui/xml/settings.xml.h:35
+msgid "Type:"
+msgstr "Type:"
 
-#: ui/glade/dialogs.glade.h:10
-msgid "<b>Previous Messages</b>"
-msgstr "<b>Messages précédents</b>"
+#: ui/xml/settings.xml.h:36
+msgid "Logging"
+msgstr "Journalisation"
 
-#: ui/glade/dialogs.glade.h:12
-msgid ""
-"<span size=\"large\"><b>Are you sure you want to delete %item%?</b></span>"
-msgstr ""
-"<span size=\"large\"><b>Êtes vous sur de vouloir supprimer %item%?</b></span>"
+#: ui/xml/settings.xml.h:37
+msgid "Refresh Information"
+msgstr "Actualiser les informations"
 
-#: ui/glade/dialogs.glade.h:13
-msgid "<span weight=\"bold\" size=\"xx-large\">RabbitVCS Error</span>"
-msgstr "<span weight=\"bold\" size=\"xx-large\">Erreur RabbitVCS</span>"
+#: ui/xml/settings.xml.h:38
+msgid "Restart Checker"
+msgstr "Redémarrer le vérificateur"
 
-#: ui/glade/dialogs.glade.h:14
-msgid "Accept Forever"
-msgstr "Accepter définitivement"
+#: ui/xml/settings.xml.h:39
+msgid "Stop Checker"
+msgstr "Arrêter le vérificateur"
 
-#: ui/glade/dialogs.glade.h:15
-msgid "Accept Mine"
-msgstr "Accepter le mien"
+#: ui/xml/settings.xml.h:40
+msgid "<b>Other Information</b>"
+msgstr "<b>Information complémentaire</b>"
 
-#: ui/glade/dialogs.glade.h:16
-msgid "Accept Once"
-msgstr "Accepter temporairement"
+#: ui/xml/settings.xml.h:41
+msgid "<b>Checker type:</b>"
+msgstr "Type de vérificateur:"
 
-#: ui/glade/dialogs.glade.h:17
-msgid "Accept Theirs"
-msgstr "Accepter le leur"
+#: ui/xml/settings.xml.h:42 ui/settings.py:43
+msgid "Unknown"
+msgstr "Inconnu"
 
-#: ui/glade/dialogs.glade.h:18
-msgid "Apply property recursively"
-msgstr "Appliquer la propriété récursivement"
+#: ui/xml/settings.xml.h:43
+msgid "<b>Process ID:</b>"
+msgstr "<b>Identifiant de processus;</b>"
 
-#: ui/glade/dialogs.glade.h:20
-msgid "Authentication"
-msgstr "Authentification"
+#: ui/xml/settings.xml.h:44
+msgid "<b>Memory usage:</b> "
+msgstr "<b>Mémoire occupée :</b> "
 
-#: ui/glade/dialogs.glade.h:21
-msgid "Cancel"
-msgstr "Annuler"
+#: ui/xml/settings.xml.h:45
+#| msgid "<b>Memory usage:</b> "
+msgid "<b>Locale:</b> "
+msgstr "<b>Localisation:</b> "
 
-#: ui/glade/dialogs.glade.h:22
-msgid "Check Certificate"
-msgstr "Vérifier le certificat"
+#: ui/xml/settings.xml.h:46
+msgid "Status Checker"
+msgstr "Vérificateur d'état"
 
-#: ui/glade/dialogs.glade.h:23
-msgid "Confirmation"
-msgstr "Confirmation"
+#: ui/xml/settings.xml.h:47
+msgid "<b>Configuration Editor</b>"
+msgstr "<b>Editeur de configuration</b>"
 
-#: ui/glade/dialogs.glade.h:24
-msgid "Conflict Resolution Decision"
-msgstr ""
+#: ui/xml/settings.xml.h:48
+msgid "Git"
+msgstr "Git"
 
-#: ui/glade/dialogs.glade.h:25
-msgid "Create Folder..."
-msgstr "Créer un dossier…"
+#: ui/xml/add.xml.h:4
+#| msgid "Show unversioned files"
+msgid "Show ignored files"
+msgstr "Montrer les fichiers ignorés"
 
-#: ui/glade/dialogs.glade.h:26
+#: ui/xml/dialogs/delete_confirmation.xml.h:1
 msgid "Delete Confirmation"
 msgstr "Confirmation de la suppression"
 
-#: ui/glade/dialogs.glade.h:27
+#: ui/xml/dialogs/delete_confirmation.xml.h:3 ui/xml/properties.xml.h:6
+#| msgid "Delete"
+msgid "_Delete"
+msgstr "_Supprimer"
+
+#: ui/xml/dialogs/delete_confirmation.xml.h:4
+msgid "The item(s) will be sent to the trash can."
+msgstr "Les objets seront envoyés à la corbeille."
+
+#: ui/xml/dialogs/delete_confirmation.xml.h:6
+msgid ""
+"<span size=\"large\"><b>Are you sure you want to delete %item%?</b></span>"
+msgstr ""
+"<span size=\"large\"><b>Êtes vous sur de vouloir supprimer %item%?</b></span>"
+
+#: ui/xml/dialogs/certificate.xml.h:1
+msgid "Check Certificate"
+msgstr "Vérifier le certificat"
+
+#: ui/xml/dialogs/certificate.xml.h:2
+msgid "Accept Once"
+msgstr "Accepter temporairement"
+
+#: ui/xml/dialogs/certificate.xml.h:3
+msgid "Accept Forever"
+msgstr "Accepter définitivement"
+
+#: ui/xml/dialogs/certificate.xml.h:4
 msgid "Deny"
 msgstr "Refuser"
 
-#: ui/glade/dialogs.glade.h:28
-msgid "Email:"
-msgstr "E-mail :"
-
-#: ui/glade/dialogs.glade.h:29
+#: ui/xml/dialogs/certificate.xml.h:5
 msgid "Fingerprint:"
 msgstr "Empreinte :"
 
-#: ui/glade/dialogs.glade.h:31
-msgid "How do you want to handle this?"
-msgstr "Comment voulez-vous procéder ?"
+#: ui/xml/dialogs/certificate.xml.h:6
+msgid "Valid:"
+msgstr "Valide:"
 
-#: ui/glade/dialogs.glade.h:32
+#: ui/xml/dialogs/certificate.xml.h:7
 msgid "Issuer:"
 msgstr "Émetteur :"
 
-#: ui/glade/dialogs.glade.h:34
-msgid "Login:"
-msgstr "Identifiant :"
-
-#: ui/glade/dialogs.glade.h:35
-msgid "Merge Manually"
-msgstr "Merger manuellement"
+#: ui/xml/dialogs/certificate.xml.h:8 ui/widget.py:1310
+msgid "Host:"
+msgstr "Hôte :"
+
+#: ui/xml/dialogs/certificate.xml.h:9
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:6
+msgid "Realm:"
+msgstr "Domaine:"
+
+#: ui/xml/dialogs/certificate.xml.h:10
+msgid "<b>Certificate Details</b>"
+msgstr "<b>Détails du certificat</b>"
 
-#: ui/glade/dialogs.glade.h:37
+#: ui/xml/dialogs/name_email_prompt.xml.h:1
 msgid "Name and Email"
 msgstr "Nom et E-mail"
 
-#: ui/glade/dialogs.glade.h:40
-msgid "Password:"
-msgstr "Mot de passe :"
-
-#: ui/glade/dialogs.glade.h:41
-msgid "Path:"
-msgstr "Chemin :"
+#: ui/xml/dialogs/name_email_prompt.xml.h:4
+msgid "<b>Enter Name and Email Details</b>"
+msgstr "<b>Veuillez saisir votre nom et email</b>"
 
-#: ui/glade/dialogs.glade.h:42 ui/glade/lock.glade.h:4
-#: ui/glade/commit.glade.h:5 ui/glade/import.glade.h:5
-msgid "Previous Messages"
-msgstr "Messages précédents"
+#: ui/xml/dialogs/name_email_prompt.xml.h:5
+msgid "Email:"
+msgstr "E-mail :"
 
-#: ui/glade/dialogs.glade.h:43
-msgid "Property"
-msgstr "Propriété"
+#: ui/xml/dialogs/name_email_prompt.xml.h:6 ui/xml/property_page.xml.h:4
+#: ui/tags.py:98
+msgid "Name:"
+msgstr "Nom:"
 
-#: ui/glade/dialogs.glade.h:44
-msgid "Property:"
-msgstr "Propriété :"
+#: ui/xml/dialogs/confirmation.xml.h:1
+msgid "Confirmation"
+msgstr "Confirmation"
 
-#: ui/glade/dialogs.glade.h:45
-msgid "RabbitVCS Error"
-msgstr "Erreur RabbitVCS"
+#: ui/xml/dialogs/confirmation.xml.h:2
+#| msgid "No"
+msgid "_No"
+msgstr "_Non"
+
+#: ui/xml/dialogs/confirmation.xml.h:3
+msgid "_Yes"
+msgstr "_Oui"
 
-#: ui/glade/dialogs.glade.h:46
-msgid "Realm:"
-msgstr "Domaine:"
+#: ui/xml/dialogs/confirmation.xml.h:4 ui/dialog.py:316
+msgid "Are you sure you want to continue?"
+msgstr "Êtes vous sur de vouloir continuer ?"
 
-#: ui/glade/dialogs.glade.h:47
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:1
 msgid "SSL Client Certification"
 msgstr "SSL Client Certification"
 
-#: ui/glade/dialogs.glade.h:48
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:4
 msgid "Save Authentication"
 msgstr "Sauvegarder l'authentification"
 
-#: ui/glade/dialogs.glade.h:49
-msgid "Text Change"
-msgstr "Changement du texte"
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:5
+msgid "Path:"
+msgstr "Chemin :"
 
-#: ui/glade/dialogs.glade.h:50
-msgid "The item(s) will be sent to the trash can."
-msgstr "Les objets seront envoyés à la corbeille."
+#: ui/xml/dialogs/ssl_client_cert_prompt.xml.h:7
+msgid "<b>Please provide your ssl certification file</b>"
+msgstr "<b>Merci de fournir vos fichier de certification ssl</b>"
 
-#: ui/glade/dialogs.glade.h:51
-msgid "Valid:"
-msgstr "Valide:"
+#: ui/xml/dialogs/previous_messages.xml.h:4
+msgid "<b>Previous Messages</b>"
+msgstr "<b>Messages précédents</b>"
+
+#: ui/xml/dialogs/previous_messages.xml.h:5 ui/xml/log.xml.h:13
+msgid "<b>Message</b>"
+msgstr "<b>Message</b>"
+
+#: ui/xml/dialogs/mark_resolved_prompt.xml.h:1
+#| msgid "Resolved"
+msgid "Mark Resolved"
+msgstr "Marquer comme Résolu"
+
+#: ui/xml/dialogs/mark_resolved_prompt.xml.h:2
+#| msgid "Resolved"
+msgid "Unresolved"
+msgstr "Non-résolu"
+
+#: ui/xml/dialogs/mark_resolved_prompt.xml.h:3
+msgid "Resolved"
+msgstr "Résolu"
+
+#: ui/xml/dialogs/mark_resolved_prompt.xml.h:4
+#| msgid "<b>Commit to:</b>"
+msgid "<b>Mark Conflict As</b>"
+msgstr "<b>Marquer le conflit comme</b>"
+
+#: ui/xml/dialogs/property.xml.h:1
+msgid "Property"
+msgstr "Propriété"
+
+#: ui/xml/dialogs/property.xml.h:4
+msgid "Apply property recursively"
+msgstr "Appliquer la propriété récursivement"
 
-#: ui/glade/dialogs.glade.h:52
+#: ui/xml/dialogs/property.xml.h:5
 msgid "Value:"
 msgstr "Valeur:"
 
-#: ui/glade/pull.glade.h:1
-msgid "<b>Pull Information</b>"
-msgstr ""
+#: ui/xml/dialogs/property.xml.h:6
+msgid "Property:"
+msgstr "Propriété :"
 
-#: ui/glade/pull.glade.h:2 ui/glade/git-update.glade.h:2
-msgid "Merge changes into local branch"
-msgstr "Merger les modifications avec la branche locale"
+#: ui/xml/dialogs/property.xml.h:7
+msgid "<b>Edit Property Details</b>"
+msgstr "<b>Éditer les détails de la propriété</b>"
 
-#: ui/glade/pull.glade.h:3
-msgid "Pull"
-msgstr "Récupérer"
+#: ui/xml/dialogs/error_notification.xml.h:1
+msgid "RabbitVCS Error"
+msgstr "Erreur RabbitVCS"
 
-#: ui/glade/manager.glade.h:1
-msgid "label"
-msgstr "label"
+#: ui/xml/dialogs/error_notification.xml.h:3
+msgid "<span weight=\"bold\" size=\"xx-large\">RabbitVCS Error</span>"
+msgstr "<span weight=\"bold\" size=\"xx-large\">Erreur RabbitVCS</span>"
+
+#: ui/xml/dialogs/conflict_decision.xml.h:1
+#| msgid "Conflicted"
+msgid "Edit Conflicts"
+msgstr "Editer les conflits"
+
+#: ui/xml/dialogs/conflict_decision.xml.h:2
+msgid "Cancel"
+msgstr "Annuler"
 
-#: ui/glade/about.glade.h:1
-msgid "<b>Links</b>"
-msgstr "<b>Liens</b>"
+#: ui/xml/dialogs/conflict_decision.xml.h:3
+msgid "Accept Mine"
+msgstr "Accepter le mien"
+
+#: ui/xml/dialogs/conflict_decision.xml.h:4
+msgid "Accept Theirs"
+msgstr "Accepter le leur"
 
-#: ui/glade/about.glade.h:2
-msgid "<b>Version Information</b>"
-msgstr "<b>Information sur la version</b>"
+#: ui/xml/dialogs/conflict_decision.xml.h:5
+msgid "<b>A conflict was found in the following file:</b>"
+msgstr "<b>Un conflit a été trouvé dans le fichier suivant :</b>"
 
-#: ui/glade/about.glade.h:3
-msgid "<span size=\"xx-large\"><b>RabbitVCS</b></span>"
-msgstr "<span size=\"xx-large\"><b>RabbitVCS</b></span>"
+#: ui/xml/dialogs/create_folder.xml.h:1
+msgid "Create Folder..."
+msgstr "Créer un dossier…"
 
-#: ui/glade/about.glade.h:5
-msgid "Authors:"
-msgstr "Auteurs :"
+#: ui/xml/dialogs/create_folder.xml.h:4
+msgid "<b>Folder Name</b>"
+msgstr "<b>Nom du dossier</b>"
 
-#: ui/glade/about.glade.h:6
-msgid "Thanks:"
-msgstr "Remerciements :"
+#: ui/xml/dialogs/loading.xml.h:1
+#| msgid "Loading..."
+msgid "Loading"
+msgstr "Chargement"
 
-#: ui/glade/property_page.glade.h:1
-msgid "Content status:"
-msgstr "Statut du contenu :"
+#: ui/xml/ignore.xml.h:1
+msgid "Ignore"
+msgstr "Ignorer"
 
-#: ui/glade/property_page.glade.h:3
-msgid "Property status:"
-msgstr ""
+#: ui/xml/ignore.xml.h:4
+msgid "<b>Ignore and exclude files from being tracked</b>"
+msgstr "<b>Ignorer et exclure les fichiers à ne pas suivre</b>"
 
-#: ui/glade/property_page.glade.h:5
-msgid "VCS:"
-msgstr ""
+#: ui/xml/clean.xml.h:4
+msgid "Force"
+msgstr "Forcer"
+
+#: ui/xml/clean.xml.h:5
+msgid "Dry run"
+msgstr "Simulation"
+
+#: ui/xml/clean.xml.h:6
+#| msgid "Include ignored files"
+msgid "Remove only ignored files"
+msgstr "N'enlever que les fichiers ignorés"
+
+#: ui/xml/clean.xml.h:7
+#| msgid "Include ignored files"
+msgid "Remove ignored files, too"
+msgstr "Enlever aussi les fichiers ignorés"
+
+#: ui/xml/clean.xml.h:8
+msgid "Remove directories"
+msgstr "Enlever les répertoires"
+
+#: ui/xml/clean.xml.h:9
+msgid "Remove untracked files from the working tree"
+msgstr "Enlever les fichiers non-versionnés de la copie de travail"
+
+#: ui/xml/clean.xml.h:10
+#| msgid "<b>Repository</b>"
+msgid "<b>Clean your Repository</b>"
+msgstr "<b>Nettoyer votre dépôt</b>"
+
+#: ui/xml/properties.xml.h:3 ui/dialog.py:302
+#| msgid "Save"
+msgid "_Save"
+msgstr "_Sauvegarder"
+
+#: ui/xml/properties.xml.h:4
+#| msgid "New..."
+msgid "_New..."
+msgstr "_Nouveau..."
+
+#: ui/xml/properties.xml.h:5
+#| msgid "Edit..."
+msgid "_Edit..."
+msgstr "_Éditer..."
 
-#: ui/glade/log.glade.h:1
-msgid "100"
-msgstr "100"
+#: ui/xml/properties.xml.h:7
+msgid "Delete properties recursively"
+msgstr "Supprimer les propriétés récursivement"
 
-#: ui/glade/log.glade.h:2
-msgid "<b>Affected File(s)</b> (double-click to compare with base)"
+#: ui/xml/properties.xml.h:8
+msgid "<i>Selected properties will be applied recursively.</i>"
 msgstr ""
-"<b>Ficher(s) affecté(s)</b> (double-clic pour comparer avec la version de "
-"base)"
+"<i>Les propriétés sélectionnées seront appliquées de manière récursive.</ i>"
 
-#: ui/glade/log.glade.h:4
-msgid "<b>Revisions Table</b>"
-msgstr "<b>Tableau de révisions</b>"
+#: ui/xml/properties.xml.h:9
+msgid "<b>Properties for:</b>"
+msgstr "<b>Propriétés pour:</b>"
+
+#: ui/xml/notification.xml.h:1
+msgid "Notification Messages"
+msgstr "Messages de notification"
 
-#: ui/glade/log.glade.h:5
+#: ui/xml/notification.xml.h:4 ui/xml/annotate.xml.h:2
+#| msgid "Save As..."
+msgid "Save _As"
+msgstr "Enregistrer _Sous..."
+
+#: ui/xml/git-update.xml.h:3
+msgid "Fetch from all remotes"
+msgstr "Aller chercher dans toutes les sources distantes"
+
+#: ui/xml/git-update.xml.h:4
+msgid "Apply remote changes prior to local changes (rebase)"
+msgstr ""
+"Appliquer les modifications distantes avant les changements locaux (rebase)"
+
+#: ui/xml/git-update.xml.h:5
+#| msgid "Merge changes into local branch"
+msgid "Merge into local branch"
+msgstr "Fusionner dans la branche locale"
+
+#: ui/xml/git-update.xml.h:6
+msgid "Apply remote changes"
+msgstr "Appliquer les modifications distantes"
+
+#: ui/xml/log.xml.h:3
+msgid "100"
+msgstr "100"
+
+#: ui/xml/log.xml.h:4
 msgid "Limit:"
 msgstr "Limite:"
 
-#: ui/glade/log.glade.h:6
-msgid "Log"
-msgstr "Journal"
+#: ui/xml/log.xml.h:5
+msgid "_Back"
+msgstr "En A_rriére"
+
+#: ui/xml/log.xml.h:6
+msgid "_Forward"
+msgstr "En A_vant"
 
-#: ui/glade/log.glade.h:8
-msgid "Refresh"
-msgstr "Rafraîchir"
+#: ui/xml/log.xml.h:8 ui/dialog.py:136
+msgid "to"
+msgstr "vers"
 
-#: ui/glade/log.glade.h:9
+#: ui/xml/log.xml.h:9
 msgid "Showing Revisions:"
 msgstr "Consulter une révisions:"
 
-#: ui/glade/log.glade.h:10
+#: ui/xml/log.xml.h:10
 msgid "Stop on copy"
 msgstr "Stopper à la copie"
 
-#: ui/glade/cleanup.glade.h:2
-msgid ""
-"Cleanup Requested....\n"
-"\n"
-"Begin working copy cleanup?"
+#: ui/xml/log.xml.h:11
+msgid "<b>Revisions Table</b>"
+msgstr "<b>Tableau de révisions</b>"
+
+#: ui/xml/log.xml.h:12
+msgid "<b>Affected File(s)</b> (double-click to compare with base)"
 msgstr ""
-"Nettoyage demandé....\n"
-"\n"
-"Commencer le nettoyage de la copie de travail ?"
+"<b>Ficher(s) affecté(s)</b> (double-clic pour comparer avec la version de "
+"base)"
 
-#: ui/glade/settings.glade.h:1
-msgid "<b>Authentication</b>"
-msgstr "<b>Authentification</b>"
+#: ui/xml/lock.xml.h:1
+msgid "Lock Files"
+msgstr "Verrouiller les fichiers"
 
-#: ui/glade/settings.glade.h:2
-msgid "<b>Checker type:</b>"
+#: ui/xml/lock.xml.h:4
+msgid "Steal the locks"
+msgstr "Voler le verrou"
+
+#: ui/xml/lock.xml.h:6
+msgid "<b>Files to lock</b>"
+msgstr "<b>Fichiers à verrouiller</b>"
+
+#: ui/xml/lock.xml.h:8
+msgid "<b>Please describe why you are locking these files</b>"
+msgstr "<b>Merci de décrire pourquoi vous verrouillez ces fichiers</b>"
+
+#: ui/xml/annotate.xml.h:1
+msgid "Annotate"
+msgstr "Annoter"
+
+#: ui/xml/annotate.xml.h:4
+msgid "<b>To Revision</b>"
+msgstr "<b>Vers la révision</b>"
+
+#: ui/xml/annotate.xml.h:5
+msgid "<b>From Revision</b>"
+msgstr "<b>Depuis la révision</b>"
+
+#: ui/xml/import.xml.h:4
+msgid "Include ignored files"
+msgstr "Inclure les fichiers ignorés"
+
+#: ui/xml/import.xml.h:6
+msgid "<b>Import Message</b>"
+msgstr "<b>Message d'importation</b>"
+
+#: ui/xml/import.xml.h:7
+msgid "<b>Repository</b>"
+msgstr "<b>Dépôt</b>"
+
+#: ui/xml/reset.xml.h:4
+msgid "None"
+msgstr "Aucun"
+
+#: ui/xml/reset.xml.h:5
+msgid ""
+"<i>Merge</i> - Resets the index to match the tree recorded by the named "
+"commit,\n"
+"and updates the files that are different between the named commit\n"
+"and the current commit in the working tree"
+msgstr ""
+"<i>Fusion</i> - Réinitialiser l'index pour correspondre à l'arborescence "
+"enregistrée\n"
+"dans le commit sélectionné et mettre à jour les fichiers de la copie de "
+"travail à partir de ce dernier"
+
+#: ui/xml/reset.xml.h:8
+msgid ""
+"<i>Hard</i> - Matches the working tree and index to that of the \n"
+"tree being switched to"
 msgstr ""
+"<i>Fort</i> - Faire correspondre les fichiers et l'index de la copie de "
+"travail à l'arborescence ciblée"
 
-#: ui/glade/settings.glade.h:3
-msgid "<b>Configuration Editor</b>"
+#: ui/xml/reset.xml.h:10
+msgid ""
+"<i>Soft</i> - Does not touch the index file or working tree at all, \n"
+"but requires them to be in good working order"
 msgstr ""
+"<i>Léger</i> - Ne pas altérer l'index et les fichiers de la copie de "
+"travail, mais exiger qu'il soit en état de fonctionnement"
 
-#: ui/glade/settings.glade.h:4
-msgid "<b>Log Messages</b>"
-msgstr "<b>Messages du journal</b>"
+#: ui/xml/reset.xml.h:12
+msgid "<i>Mixed</i> - Reset the index but not the working tree"
+msgstr ""
+"<i>Mixte</i> - Réinitialiser l'index mais pas les fichiers de la copie de "
+"travail"
+
+#: ui/xml/reset.xml.h:15
+#| msgid "<b>Tags</b>"
+msgid "<b>Path</b>"
+msgstr "<b>Chemin</b>"
+
+#: ui/xml/reset.xml.h:16
+#| msgid "Revert an item to its unmodified state"
+msgid "Reset current HEAD to specified state."
+msgstr "Rétablir l'état de la tête (HEAD) à l'état spécifié."
+
+#: ui/xml/reset.xml.h:17
+#| msgid "<b>Repository</b>"
+msgid "<b>Reset your Repository</b>"
+msgstr "<b>Réinitialiser votre dépôt</b>"
 
-#: ui/glade/settings.glade.h:5
-msgid "<b>Logging Options</b>"
-msgstr "<b>Options de journalisation</b>"
+#: ui/xml/property_page.xml.h:1
+msgid "Property status:"
+msgstr "Etat de la propriété:"
 
-#: ui/glade/settings.glade.h:6
-msgid "<b>Memory usage:</b> "
-msgstr "<b>Mémoire occupée :</b> "
+#: ui/xml/property_page.xml.h:2
+msgid "Content status:"
+msgstr "Statut du contenu :"
 
-#: ui/glade/settings.glade.h:7
-msgid "<b>Other Information</b>"
-msgstr "<b>Information complémentaire</b>"
+#: ui/xml/property_page.xml.h:3
+msgid "VCS:"
+msgstr "VCS:"
 
-#: ui/glade/settings.glade.h:8
-msgid "<b>Process ID:</b>"
-msgstr ""
+#: ui/rename.py:50
+msgid "The requested file or folder does not exist."
+msgstr "Le fichier ou répertoire demandé n'existe pas."
 
-#: ui/glade/settings.glade.h:9
-msgid "<b>Program used to compare files</b>"
-msgstr "<b>Programme utilisé pour comparer des fichiers</b>"
+#: ui/rename.py:54 ui/rename.py:86 ui/rename.py:115 ui/browser.py:465
+msgid "Rename"
+msgstr "Renommer"
 
-#: ui/glade/settings.glade.h:10
-msgid "<b>RabbitVCS</b>"
-msgstr "<b>RabbitVCS</b>"
+#: ui/rename.py:54 ui/browser.py:465
+msgid "New Name:"
+msgstr "Nouveau nom :"
 
-#: ui/glade/settings.glade.h:11
-msgid "<b>URL History</b>"
-msgstr "<b>Historique des URL</b>"
+#: ui/rename.py:62
+msgid "The new name field is required"
+msgstr "Le champ 'nouveau nom' est requit."
 
-#: ui/glade/settings.glade.h:12
-msgid "Browse..."
-msgstr "Parcourir..."
+#: ui/rename.py:87 ui/rename.py:116
+msgid "Running Rename Command..."
+msgstr "Exécution de la commande de renommage..."
 
-#: ui/glade/settings.glade.h:13
-msgid "Clear your authentication information"
-msgstr "Nettoyer vos informations d'authentification"
+#: ui/rename.py:93 ui/rename.py:122
+msgid "Completed Rename"
+msgstr "Renommage terminé"
 
-#: ui/glade/settings.glade.h:14
-msgid "Enable emblems"
-msgstr "Activer les emblèmes"
+#: ui/update.py:56 ui/update.py:105 ui/updateto.py:92
+msgid "Updating..."
+msgstr "Mise à jour..."
 
-#: ui/glade/settings.glade.h:15
-msgid "Enable file attributes"
-msgstr "Activer les attributs de fichier"
+#: ui/update.py:58 ui/update.py:123 ui/updateto.py:100
+msgid "Completed Update"
+msgstr "Mise à jour terminée"
 
-#: ui/glade/settings.glade.h:16
-msgid "Enable recursive status checks"
-msgstr "Activer les vérifications récursives des statuts"
+#: ui/revprops.py:66 ui/properties.py:153 ui/property_editor.py:158
+msgid "Unable to retrieve properties list"
+msgstr "Impossible de récupérer les propriétés de la liste"
 
-#: ui/glade/settings.glade.h:17
-msgid "External Programs"
-msgstr "Programmes externes"
+#: ui/widget.py:1039
+msgid "Branch"
+msgstr "Branche"
 
-#: ui/glade/settings.glade.h:18
-msgid "General"
-msgstr "Général"
+#: ui/widget.py:1044
+msgid "Number"
+msgstr "Numéro"
 
-#: ui/glade/settings.glade.h:19
-msgid "Git"
-msgstr "Git"
+#: ui/widget.py:1047
+msgid "Working Copy"
+msgstr "Copie de travail"
 
-#: ui/glade/settings.glade.h:20
-msgid "Language:"
-msgstr "Langage:"
+#: ui/widget.py:1268
+msgid "Repository:"
+msgstr "Dépôt :"
 
-#: ui/glade/settings.glade.h:21
-msgid "Logging"
-msgstr "Journalisation"
+#: ui/widget.py:1285
+msgid "Branch:"
+msgstr "Branche :"
 
-#: ui/glade/settings.glade.h:22
-msgid "Minimum level to log"
-msgstr "Niveau minimum à journaliser"
+#: ui/widget.py:1426
+msgid "Add line:"
+msgstr "Ajouter une ligne :"
 
-#: ui/glade/settings.glade.h:23
-msgid "Number of URLs to remember"
-msgstr "Nombre d'URL à retenir"
+#: ui/browser.py:91
+msgid "Size"
+msgstr "Taille"
 
-#: ui/glade/settings.glade.h:24
-msgid "Number of messages to remember"
-msgstr "Nombre de messages à retenir"
+#: ui/browser.py:341
+msgid "Create folder..."
+msgstr "Créer un dossier..."
 
-#: ui/glade/settings.glade.h:25
-msgid "Refresh Information"
-msgstr "Actualiser les informations"
+#: ui/browser.py:346
+msgid "Copy to..."
+msgstr "Copier vers..."
 
-#: ui/glade/settings.glade.h:26
-msgid "Restart Checker"
-msgstr ""
+#: ui/browser.py:351
+msgid "Copy URL to clipboard"
+msgstr "Copier l'URL dans le presse-papier"
 
-#: ui/glade/settings.glade.h:27
-msgid "Saved Data"
-msgstr "Données sauvegardées"
+#: ui/browser.py:356
+msgid "Move to..."
+msgstr "Déplacer vers..."
 
-#: ui/glade/settings.glade.h:29
-msgid "Show RabbitVCS debugging tools"
-msgstr "Afficher les outils de débogage de RabbitVCS"
+#: ui/browser.py:526
+msgid "Where do you want to copy the selection?"
+msgstr "Où voulez-vous copier la sélection ?"
 
-#: ui/glade/settings.glade.h:30
-msgid "Show new version on the left side"
-msgstr "Afficher la nouvelle version à gauche"
+#: ui/browser.py:527 ui/browser.py:556
+msgid "New Location:"
+msgstr "Nouvel emplacement :"
 
-#: ui/glade/settings.glade.h:31
-msgid "Status Checker"
-msgstr ""
+#: ui/browser.py:555
+msgid "Where do you want to move the selection?"
+msgstr "Où voulez-vous déplacer la sélection ?"
 
-#: ui/glade/settings.glade.h:32
-msgid "Stop Checker"
-msgstr ""
+#: ui/relocate.py:72
+msgid "The from and to url fields are both required."
+msgstr "Les champs 'depuis' et 'URL' sont requis."
 
-#: ui/glade/settings.glade.h:33
-msgid "The debug menu is used to diagnose problems with RabbitVCS itself"
-msgstr ""
-"Le menu Déboger est utilisé pour diagnostiquer des problèmes avec RabbitVCS "
-"elle-même"
+#: ui/relocate.py:83
+msgid "Running Relocate Command..."
+msgstr "Exécution de la commande de relocalisation..."
 
-#: ui/glade/settings.glade.h:34
-msgid "Type:"
-msgstr "Type:"
+#: ui/relocate.py:90
+msgid "Completed Relocate"
+msgstr "Relocalisation terminée"
 
-#: ui/glade/lock.glade.h:1
-msgid "<b>Files to lock</b>"
-msgstr "<b>Fichiers à verrouiller</b>"
+#: ui/add.py:216 ui/add.py:241
+msgid "Running Add Command..."
+msgstr "Exécution de la commande d'Ajout..."
 
-#: ui/glade/lock.glade.h:2
-msgid "<b>Please describe why you are locking these files</b>"
-msgstr "<b>Merci de décrire pourquoi vous verrouillez ces fichiers</b>"
+#: ui/add.py:218 ui/add.py:243
+msgid "Completed Add"
+msgstr "Ajout terminé"
 
-#: ui/glade/lock.glade.h:3
-msgid "Lock Files"
-msgstr "Verrouiller les fichiers"
+#: ui/updateto.py:80
+msgid "Rollback To Revision"
+msgstr "Retour à la Révision"
 
-#: ui/glade/lock.glade.h:5 ui/glade/add.glade.h:2 ui/glade/commit.glade.h:6
-msgid "Select / Deselect all"
-msgstr "Tous sélectionner/déselectionner"
+#: ui/updateto.py:81
+msgid "Rolling Back..."
+msgstr "Retour en arrière..."
 
-#: ui/glade/lock.glade.h:6
-msgid "Steal the locks"
-msgstr "Voler le verrou"
+#: ui/updateto.py:89
+msgid "Completed Rollback"
+msgstr "Annulation terminée"
 
-#: ui/glade/annotate.glade.h:1
-msgid "<b>From Revision</b>"
-msgstr "<b>Depuis la révision</b>"
+#: ui/updateto.py:91
+msgid "Update To Revision"
+msgstr "Mettre à jour vers la révision"
 
-#: ui/glade/annotate.glade.h:2
-msgid "<b>To Revision</b>"
-msgstr "<b>Vers la révision</b>"
+#: ui/updateto.py:117
+#| msgid "Where do you want to copy the selection?"
+msgid "What revision/branch do you want to checkout?"
+msgstr "Quelle branche/révision voulez-vous copier ?"
 
-#: ui/glade/annotate.glade.h:3
-msgid "Annotate"
-msgstr "Annoter"
+#: ui/updateto.py:138
+msgid "Checkout"
+msgstr "Checkout"
 
-#: ui/glade/ignore.glade.h:1
-msgid "<b>Ignore and exclude files from being tracked</b>"
-msgstr ""
+#: ui/updateto.py:139
+#, python-format
+msgid "Checking out %s..."
+msgstr "Mise à jour %s..."
 
-#: ui/glade/ignore.glade.h:2
-msgid "Ignore"
-msgstr "Ignorer"
+#: ui/updateto.py:145
+msgid "Completed Checkout"
+msgstr "Checkout terminé"
 
-#: ui/glade/commit.glade.h:2
-msgid "<b>Changed Files</b> (double-click to compare with base)"
+#: ui/create.py:52
+msgid "Repository successfully created"
+msgstr "Dépôt créé avec succès"
+
+#: ui/create.py:54
+msgid ""
+"There was an error creating the repository.  Make sure the given folder is "
+"empty."
 msgstr ""
-"<b>Fichiers modifiés</b> (double-clic pour comparer avec la version de base)"
+"Une erreur c'est produite durant la création du dépôt. Veuillez vérifier que "
+"le répertoire est vide."
 
-#: ui/glade/commit.glade.h:3
-msgid "<b>Commit to:</b>"
-msgstr "<b>Envoyer vers :</b>"
+#: ui/create.py:69
+msgid "Setting up repository..."
+msgstr "Mise en place du dépot..."
+
+#: ui/create.py:71
+#| msgid "Create Repository here"
+msgid "Completed repository setup"
+msgstr "Mise en place du dépot terminée"
 
-#: ui/glade/commit.glade.h:7
-msgid "Show unversioned files"
-msgstr "Montrer les fichiers non versionnés"
+#: ui/tags.py:62
+msgid "Tag Manager"
+msgstr "Gestionnaire de Tags"
 
-#: ui/glade/notification.glade.h:1
-msgid "Notification Messages"
-msgstr "Messages de notification"
+#: ui/tags.py:63
+msgid "<b>Tags</b>"
+msgstr "<b>Tags</b>"
 
-#: ui/glade/property_editor.glade.h:1
-msgid "<b>Remote URI:</b>"
-msgstr "<b>URI distante :</b>"
+#: ui/tags.py:74
+msgid "Tag"
+msgstr "Tag"
 
-#: ui/glade/property_editor.glade.h:2
-msgid "<b>Working Copy:</b>"
-msgstr "<b>Copie de travail :</b>"
+#: ui/tags.py:127 ui/tags.py:188 ui/merge.py:520
+msgid "Message:"
+msgstr "Message:"
 
-#: ui/glade/property_editor.glade.h:3
-msgid "Add a new property."
-msgstr "Ajouter une nouvelle propriété"
+#: ui/tags.py:145 ui/tags.py:295
+msgid "Save"
+msgstr "Sauvegarder"
 
-#: ui/glade/property_editor.glade.h:4
-msgid "Close this dialog."
-msgstr "Fermer cette boîte de dialogue."
+#: ui/tags.py:153
+msgid "Tagger:"
+msgstr "Etiquetter"
 
-#: ui/glade/property_editor.glade.h:5
-msgid "Property Editor"
-msgstr "Éditeur de propriété"
+#: ui/tags.py:165 ui/merge.py:497
+msgid "Date:"
+msgstr "Date :"
 
-#: ui/glade/property_editor.glade.h:6
-msgid "Refresh the list of properties."
-msgstr "Rafraîchir la liste de propriétés."
+#: ui/tags.py:286
+msgid "<b>Add Tag</b>"
+msgstr "<b>Ajouter un Tag</b>"
 
-#: ui/glade/relocate.glade.h:1
-msgid "<b>Change the repository of your working copy</b>"
-msgstr "<b>Changer le dépôt de votre copie de travail</b>"
+#: ui/tags.py:304
+msgid "<b>Tag Detail</b>"
+msgstr "<b>Détail du Tag</b>"
 
-#: ui/glade/relocate.glade.h:2
-msgid "From:"
-msgstr "Depuis :"
+#: ui/property_page.py:146 ui/property_page.py:152
+msgid "Repository URL"
+msgstr "URL du dépôt"
 
-#: ui/glade/relocate.glade.h:4
-msgid "To:"
-msgstr "Vers :"
+#: ui/properties.py:56
+#, python-format
+msgid "Properties - %s"
+msgstr "Propriétés - %s"
 
-#: ui/glade/git-update.glade.h:1 ui/glade/update.glade.h:1
-#: ui/glade/merge.glade.h:3
-msgid "<b>Options</b>"
-msgstr "<b>Options</b>"
+#: ui/properties.py:64 ui/property_editor.py:114
+msgid "Value"
+msgstr "Valeur"
 
-#: ui/glade/git-update.glade.h:3
-msgid "Update Local Repository"
-msgstr "Mettre à jour le Dépôt local"
+#: ui/properties.py:174
+msgid "There was a problem saving your properties."
+msgstr "Une erreur est survenue durant la sauvegarde de vos propriétés."
 
-#: ui/glade/update.glade.h:2
-msgid "<b>Revision</b>"
-msgstr "<b>Révision</b>"
+#: ui/merge.py:103
+msgid "Running Merge Test"
+msgstr "Exécution du test de fusion..."
 
-#: ui/glade/update.glade.h:3
-msgid "Omit Externals"
-msgstr "Omettre les externes"
+#: ui/merge.py:104
+msgid "Completed Merge Test"
+msgstr "Test de fusion terminé"
 
-#: ui/glade/update.glade.h:4 ui/glade/merge.glade.h:16
-msgid "Recursive"
-msgstr "Récursif"
+#: ui/merge.py:106
+msgid "Running Merge Command"
+msgstr "Exécution de la commande de fusion"
 
-#: ui/glade/update.glade.h:5
-msgid "Rollback to specified revision number"
+#: ui/merge.py:107 ui/merge.py:566
+msgid "Completed Merge"
+msgstr "Fusion terminée"
+
+#: ui/merge.py:118 ui/merge.py:559
+msgid "Merge"
+msgstr "Fusionner"
+
+#: ui/merge.py:474
+msgid "No active branch"
+msgstr "Pas de branche active"
+
+#: ui/merge.py:485
+msgid "Author:"
+msgstr "Auteur :"
+
+#: ui/merge.py:560
+#| msgid "Running Merge Command"
+msgid "Running Merge Command..."
+msgstr "Exécution de la commande de fusion..."
+
+#: ui/dialog.py:35
+#, python-format
+msgid ""
+"An error has occurred in the RabbitVCS Nautilus extension. Please contact "
+"the <a href=\"%s\">RabbitVCS team</a> with the error details listed below:"
 msgstr ""
+"Une erreur s'est produite dans l'extension RabbitVCS de Nautilus. Merci de "
+"contacter <a href=\"%s\">l'équipe RabbitVCS</ a> en précisant les détails de "
+"l'erreur ci-dessous :"
 
-#: ui/glade/import.glade.h:1
-msgid "<b>Import Message</b>"
-msgstr "<b>Message d'importation</b>"
+#: ui/dialog.py:106
+msgid "Select a Folder"
+msgstr "Sélectionnez un dossier"
 
-#: ui/glade/import.glade.h:2
-msgid "<b>Repository</b>"
-msgstr "<b>Dépôt</b>"
+#: ui/dialog.py:276
+msgid "Select a File"
+msgstr "Sélectionnez un fichier"
 
-#: ui/glade/import.glade.h:4
-msgid "Include ignored files"
-msgstr "Inclure les fichiers ignorés"
+#: ui/dialog.py:282
+#| msgid "Open"
+msgid "_Open"
+msgstr "_Ouvrir"
 
-#: ui/glade/merge.glade.h:1
-msgid "<b>From URL</b>"
-msgstr "<b>Depuis l'URL</b>"
+#: ui/dialog.py:296
+msgid "Save As..."
+msgstr "Enregistrer sous..."
 
-#: ui/glade/merge.glade.h:2
-msgid "<b>From: (URL and revision to merge)</b>"
-msgstr "<b>Depuis: (URL et révision à fusionner)</b>"
+#: ui/dialog.py:344
+msgid "the selected item(s)"
+msgstr "le(s) objet(s) sélectionné(s)"
 
-#: ui/glade/merge.glade.h:4
-msgid "<b>Revision Range</b>"
-msgstr "<b>Gamme de révision</b>"
+#: ui/dialog.py:415
+msgid "Added a folder to the repository"
+msgstr "Ajouter un répertoire au dépot"
 
-#: ui/glade/merge.glade.h:5
-msgid "<b>To: (URL and revision to merge)</b>"
-msgstr "<b>Vers: (URL et révision à fusionner)</b>"
+#: ui/annotate.py:58
+msgid "Cannot annotate a directory"
+msgstr "Impossible d'annoter le dossier"
 
-#: ui/glade/merge.glade.h:6
-msgid "<b>URL to merge from</b>"
-msgstr "<b>Fusionner depuis l'URL</b>"
+#: ui/annotate.py:64
+#, python-format
+msgid "Annotate - %s"
+msgstr "Annoter - %s"
 
-#: ui/glade/merge.glade.h:7
-msgid "<b>Working Copy</b>"
-msgstr "<b>Copie de travail</b>"
+#: ui/annotate.py:131 ui/annotate.py:235
+msgid "Line"
+msgstr "Ligne"
+
+#: ui/annotate.py:132 ui/annotate.py:236
+msgid "Text"
+msgstr "Texte"
 
-#: ui/glade/merge.glade.h:8
+#: ui/annotate.py:149
+msgid "The from revision field must be an integer"
+msgstr "Le champ 'depuis la révision' est requis."
+
+#: ui/property_editor.py:57
 msgid ""
-"Choose this method if you have made some changes to a branch and wish to "
-"merge your changes with another branch."
+"<b>Note:</b> changes to properties are applied instantly. You may review and "
+"undo changes using the context menu for each item.\n"
 msgstr ""
-"Choisissez cette méthode si vous avez effectué des changements sur une "
-"branche et que vous souhaitez fusionner ces changements avec une autre "
-"branche."
+"<b>Remarque :</b> les modifications apportées aux propriétés sont appliquées "
+"immédiatement. Vous pouvez vérifier et annuler les modifications en "
+"utilisant le menu contextuel pour chaque élément.\n"
 
-#: ui/glade/merge.glade.h:9
+#: ui/property_editor.py:62
 msgid ""
-"Choose this method if you wish to merge two different branches into your "
-"working copy."
+"Do you want to delete the selected properties from all files and "
+"subdirectories\n"
+"beneath this directory?"
 msgstr ""
-"Choisissez cette méthode si vous souhaitez fusionner deux branches "
-"différentes dans votre copie de travail."
+"Voulez-vous supprimer les propriétés sélectionnées de l'ensemble des "
+"fichiers et des sous-répertoires\n"
+"sous ce répertoire ?"
 
-#: ui/glade/merge.glade.h:11
-msgid "Ignore ancestry"
-msgstr "Ignorer l'ascendance"
+#: ui/property_editor.py:104
+msgid "File is not under version control."
+msgstr "Le fichier n'est pas versionné"
 
-#: ui/glade/merge.glade.h:12
-msgid "Merge Assistant"
-msgstr "Assistant de fusion"
+#: ui/property_editor.py:114
+msgid "Reserved"
+msgstr "Réservé"
 
-#: ui/glade/merge.glade.h:13
-msgid "Merge a range of revisions"
-msgstr "Fusionner une gamme de révisions"
+#: ui/property_editor.py:114
+msgid "Status"
+msgstr "État"
 
-#: ui/glade/merge.glade.h:14
-msgid "Merge two different trees"
-msgstr "Fusionner deux arbres différents"
+#: ui/property_editor.py:182
+msgid "Unable to set new value for property."
+msgstr "Impossible de définir une nouvelle valeur pour la propriété."
 
-#: ui/glade/merge.glade.h:15
-msgid "Only record the merge"
-msgstr "Enregistrer seulement la fusion"
+#: ui/cleanup.py:57
+msgid "Cleaning Up..."
+msgstr "Nettoyage..."
 
-#: ui/glade/merge.glade.h:18
-msgid "Show log"
-msgstr "Consulter le journal"
+#: ui/cleanup.py:59
+msgid "Completed Cleanup"
+msgstr "Nettoyage terminé"
 
-#: ui/glade/merge.glade.h:19
-msgid "Test Merge"
-msgstr "Tester la fusion"
+#: ui/import.py:41
+#, python-format
+msgid "Import - %s"
+msgstr "Importation - %s"
 
-#: ui/glade/merge.glade.h:20
-msgid ""
-"Use the log dialog to select the revisions that you wish to merge.  Or write "
-"out the revisions manually, each separated by a comma.  You can specify a "
-"revision range by a dash. \n"
-"\n"
-"Example: 4-7,9,11,15-HEAD\n"
-"\n"
-"To merge all revisions, leave the box empty."
+#: ui/import.py:63
+msgid "The repository URL field is required."
+msgstr "Le champ 'URL du dépôt' est requit."
+
+#: ui/import.py:76
+msgid "Running Import Command..."
+msgstr "Exécution de la commande d'importation..."
+
+#: ui/import.py:84
+msgid "Completed Import"
+msgstr "Importation terminée"
+
+#: ui/clone.py:60 ui/export.py:73 ui/export.py:142
+msgid "The repository URL and destination path are both required fields."
+msgstr "Les champs 'URL du dépôt' et 'chemin de destination' sont requis."
+
+#: ui/clone.py:69
+msgid "Running Clone Command..."
+msgstr "Execution de la commande de clonage..."
+
+#: ui/clone.py:76
+msgid "Completed Clone"
+msgstr "Clonage terminé"
+
+#: ui/settings.py:45
+msgid "There was an error communicating with the status checker service."
 msgstr ""
-"Utilisez le journal de dialogue pour sélectionner la/les révision(s) que "
-"vous souhaitez fusionner. Ou écrivez la/les révision(s) manuellement, "
-"séparée(s) par des virgules. Vous pouvez spécifier une gamme de révision par "
-"un tiret.\n"
-"\n"
-"Example: 4-7,9,11,15-HEAD\n"
-"\n"
-"Pour fusionner toute les révisions, laissez le champ vide."
+"Il y a eu une erreur de communication avec le service vérificateur d'états."
+
+#: ui/settings.py:124
+msgid "Config file:"
+msgstr "Fichier de configuration :"
+
+#: ui/settings.py:300
+msgid "Select a program"
+msgstr "Sélectionnez un programme"
+
+#: ui/settings.py:309
+msgid "Are you sure you want to clear your repository paths?"
+msgstr "Êtes vous sur de vouloir nettoyer les chemins du dépôt ?"
+
+#: ui/settings.py:316
+msgid "Repository paths cleared"
+msgstr "Chemins du dépôt nettoyés"
+
+#: ui/settings.py:320
+msgid "Are you sure you want to clear your previous messages?"
+msgstr "Êtes vous sur de vouloir nettoyer les messages précédents ?"
+
+#: ui/settings.py:327
+msgid "Previous messages cleared"
+msgstr "Messages précèdents nettoyés"
+
+#: ui/settings.py:331
+msgid "Are you sure you want to clear your authentication information?"
+msgstr ""
+"Êtes vous sur de vouloir nettoyer vos informations d'authentification ?"
+
+#: ui/settings.py:348
+msgid "Authentication information cleared"
+msgstr "Informations d'authentification nettoyées"
+
+#: ui/commit.py:267
+#, python-format
+msgid "Found %(changed)d changed and %(unversioned)d unversioned item(s)"
+msgstr ""
+"%(changed)d éléments modifiés et %(unversioned)d éléments non-inclus ont été "
+"trouvés"
+
+#: ui/commit.py:319 ui/commit.py:387
+msgid "Running Commit Command..."
+msgstr "Exécution de la commande d'Envoi..."
+
+#: ui/commit.py:332 ui/commit.py:396
+msgid "Completed Commit"
+msgstr "Envoi terminé"
+
+#: ui/diff.py:311
+msgid "View diff as side-by-side comparison"
+msgstr "Voir une comparaison côte à côte du diff"
+
+#: ui/export.py:46 ui/export.py:125
+#, python-format
+msgid "Export - %s"
+msgstr "Exporter - %s"
+
+#: ui/export.py:93 ui/export.py:162
+msgid "Export"
+msgstr "Exporter"
+
+#: ui/export.py:94 ui/export.py:163
+msgid "Running Export Command..."
+msgstr "Exécution de la commande d'exportation..."
+
+#: ui/export.py:105 ui/export.py:171
+msgid "Completed Export"
+msgstr "Exportation terminée"
+
+#~ msgid "Resolve"
+#~ msgstr "Résoudre"
+
+#~ msgid "Apply Patch"
+#~ msgstr "Appliquer le correctif"
+
+#~ msgid "Apply Patch To Directory..."
+#~ msgstr "Appliquer le correctif pour le repertoire..."
+
+#~ msgid "Applying Patch File..."
+#~ msgstr "Application du fichier correctif..."
+
+#~ msgid "Patch File Applied"
+#~ msgstr "Fichier correctif appliqué"
+
+#~ msgid "Branch Manager"
+#~ msgstr "Gestionnaire de branches"
+
+#~ msgid "<b>Branches</b>"
+#~ msgstr "<b>Branches</b>"
+
+#~ msgid "Start Point:"
+#~ msgstr "Point de départ :"
+
+#~ msgid "Keep old branch's history"
+#~ msgstr "Conserver l'historique de l'ancienne branche"
+
+#~ msgid "<b>Add Branch</b>"
+#~ msgstr "<b>Ajouter une branche</b>"
+
+#~ msgid "<b>Branch Detail</b>"
+#~ msgstr "<b>Détail de la branche</b>"
+
+#~ msgid "View unified diff"
+#~ msgstr "Voir le diff unifié"
+
+#~ msgid "Compare side by side"
+#~ msgstr "Comparaison côte à côte"
+
+#~ msgid "More Actions..."
+#~ msgstr "Plus d'actions..."
+
+#~ msgid "Change"
+#~ msgstr "Changement"
+
+#~ msgid "Property Change"
+#~ msgstr "Changement de propriété"
+
+#~ msgid "Open from second revision"
+#~ msgstr "Ouvrir depuis la seconde révision"
+
+#~ msgid "English"
+#~ msgstr "Anglais"
+
+#~ msgid "You must supply a destination path."
+#~ msgstr "Vous devez spécifier un chemin de destination."
+
+#~ msgid "Branch/tag"
+#~ msgstr "Branch/tag"
+
+#~ msgid "Running Branch/tag Command..."
+#~ msgstr "Exécution de la commande Branch/tag..."
+
+#~ msgid "Completed Branch/tag"
+#~ msgstr "Branch/tag terminé"
+
+#~ msgid "The repository location is a required field."
+#~ msgstr "Le champ 'emplacement du dépôt' est requit."
+
+#~ msgid "Switch"
+#~ msgstr "Basculement"
+
+#~ msgid "Running Switch Command..."
+#~ msgstr "Exécution de la commande de basculement..."
+
+#~ msgid "Completed Switch"
+#~ msgstr "Basculement terminé"
+
+#~ msgid "Checkout - %s"
+#~ msgstr "Checkout - %s"
+
+#~ msgid "Running Checkout Command..."
+#~ msgstr "Exécution de la commande Checkout..."
+
+#~ msgid "Create Patch"
+#~ msgstr "Créer un correctif"
+
+#~ msgid "The given path is not a working copy"
+#~ msgstr "Le chemin indiqué n'est pas une copie de travail"
+
+#~ msgid "Creating Patch File..."
+#~ msgstr "Création du fichier correctif"
+
+#~ msgid "Patch File Created"
+#~ msgstr "Fichier correctif créé"
+
+#~ msgid "URL/Path:"
+#~ msgstr "URL/Chemin :"
+
+#~ msgid "<b>Please add your authentication details</b>"
+#~ msgstr "<b>Merci d'ajouter vos détails d'authentification</b>"
+
+#~ msgid "Authentication"
+#~ msgstr "Authentification"
+
+#~ msgid "How do you want to handle this?"
+#~ msgstr "Comment voulez-vous procéder ?"
+
+#~ msgid "Login:"
+#~ msgstr "Identifiant :"
+
+#~ msgid "Merge Manually"
+#~ msgstr "Merger manuellement"
+
+#~ msgid "Password:"
+#~ msgstr "Mot de passe :"
+
+#~ msgid "Text Change"
+#~ msgstr "Changement du texte"
+
+#~ msgid "Pull"
+#~ msgstr "Récupérer"
+
+#~ msgid "label"
+#~ msgstr "label"
+
+#~ msgid "<b>Links</b>"
+#~ msgstr "<b>Liens</b>"
+
+#~ msgid "<span size=\"xx-large\"><b>RabbitVCS</b></span>"
+#~ msgstr "<span size=\"xx-large\"><b>RabbitVCS</b></span>"
+
+#~ msgid "Authors:"
+#~ msgstr "Auteurs :"
+
+#~ msgid "Thanks:"
+#~ msgstr "Remerciements :"
+
+#~ msgid "Log"
+#~ msgstr "Journal"
+
+#~ msgid ""
+#~ "Cleanup Requested....\n"
+#~ "\n"
+#~ "Begin working copy cleanup?"
+#~ msgstr ""
+#~ "Nettoyage demandé....\n"
+#~ "\n"
+#~ "Commencer le nettoyage de la copie de travail ?"
+
+#~ msgid "Language:"
+#~ msgstr "Langage:"
+
+#~ msgid "Update Local Repository"
+#~ msgstr "Mettre à jour le Dépôt local"
 
 #~ msgid "Completed"
 #~ msgstr "Terminé"
 
-#~ msgid "(no author)"
-#~ msgstr "(pas d'auteur)"
-
 #~ msgid "<b>Switch Details</b>"
 #~ msgstr "<b>Détails du basculement</b>"
 
@@ -2068,9 +2415,6 @@
 #~ msgid "Failed Revert"
 #~ msgstr "Revert échoué"
 
-#~ msgid "Resolved"
-#~ msgstr "Résolu"
-
 #~ msgid "Skipped"
 #~ msgstr "Passé"
 
@@ -2115,6 +2459,3 @@
 
 #~ msgid "Merged"
 #~ msgstr "Réuni"
-
-#~ msgid "Conflicted"
-#~ msgstr "En conflit"
diff -uNr rabbitvcs-0.17.1/po/hu.po rabbitvcs/po/hu.po
--- rabbitvcs-0.17.1/po/hu.po	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/po/hu.po	2019-09-13 08:36:17.253343091 +0800
@@ -2,2019 +2,2091 @@
 # Copyright (C) 2010 Free Software Foundation, Inc.
 # This file is distributed under the same license as the rabbit-vcs-package.
 # Laszlo Csordas <csola48 at gmail dot com>, 2010.
-#
+# Sándor Petrovics, 2018
 msgid ""
 msgstr ""
-"Project-Id-Version: rabbit-vcs 0.13.3 v01\n"
+"Project-Id-Version: rabbit-vcs 0.17.1\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2010-11-26 09:51-0500\n"
-"PO-Revision-Date: 2010-06-22 09:46+0000\n"
+"POT-Creation-Date: 2018-02-08 20:40+0100\n"
+"PO-Revision-Date: 2018-02-10 21:00+0100\n"
 "Last-Translator: csola48 <Unknown>\n"
 "Language-Team: hungarian <csola48@gmail.hu>\n"
+"Language: hu_HU\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 "Plural-Forms: nplurals=2; plural=n != 1;\n"
 "X-Launchpad-Export-Date: 2010-12-09 23:36+0000\n"
-"X-Generator: Launchpad (build Unknown)\n"
-"X-Poedit-Country: HUNGARY\n"
-"X-Poedit-Language: Hungarian\n"
-"X-Poedit-SourceCharset: utf-8\n"
+"X-Generator: Poedit 1.8.7.1\n"
+"X-Poedit-SourceCharset: UTF-8\n"
+"X-Poedit-Basepath: ..\n"
+"X-Poedit-SearchPath-0: .\n"
+
+#: clients/caja/RabbitVCS.py:218 clients/nautilus-3.0/RabbitVCS.py:214
+#: clients/nautilus/RabbitVCS.py:145 clients/nemo/RabbitVCS.py:214
+#: extension/RabbitVCS.py:214
+msgid "RVCS Status"
+msgstr "RVCS Állapot"
+
+#: clients/caja/RabbitVCS.py:224 clients/nautilus-3.0/RabbitVCS.py:220
+#: clients/nautilus/RabbitVCS.py:151 clients/nemo/RabbitVCS.py:220
+#: extension/RabbitVCS.py:220
+msgid "RVCS Revision"
+msgstr "RVCS Revizió"
+
+#: clients/caja/RabbitVCS.py:230 clients/nautilus-3.0/RabbitVCS.py:226
+#: clients/nautilus/RabbitVCS.py:157 clients/nemo/RabbitVCS.py:226
+#: extension/RabbitVCS.py:226
+msgid "RVCS Author"
+msgstr "RVCS Szerző"
+
+#: clients/caja/RabbitVCS.py:236 clients/nautilus-3.0/RabbitVCS.py:232
+#: clients/nautilus/RabbitVCS.py:163 clients/nemo/RabbitVCS.py:232
+#: extension/RabbitVCS.py:232
+msgid "RVCS Age"
+msgstr "RVCS Életkor"
+
+#: clients/gedit/rabbitvcs-plugin.py:456
+msgid "Ignore by File Name"
+msgstr "Mellőzés fájlnév szerint"
 
-#: util/helper.py:109
-msgid "just now"
+#: clients/gedit/rabbitvcs-plugin.py:457 rabbitvcs/util/contextmenuitems.py:737
+msgid "Ignore item by filename"
+msgstr "Tétel mellőzése fájl név szerint"
+
+#: clients/gedit/rabbitvcs-plugin.py:461
+msgid "Ignore by File Extension"
+msgstr "Mellőzés fájlkiterjesztés szerint"
+
+#: clients/gedit/rabbitvcs-plugin.py:462
+msgid "Ignore item by extension"
+msgstr "Tétel mellőzése kiterjesztés szerint"
+
+#: rabbitvcs/services/statuschecker.py:40
+msgid "Simple status checker"
+msgstr "Egyszerű állapot-ellenőrző"
+
+#: rabbitvcs/ui/__init__.py:57
+msgid ""
+"You must specify a version control system using the --vcs [svn|git] option"
 msgstr ""
+"A --vcs [svn|git] opció használatával meg kell adnia egy verziókövető "
+"rendszer"
+
+#: rabbitvcs/ui/action.py:120 rabbitvcs/ui/log.py:390 rabbitvcs/ui/log.py:676
+msgid "Action"
+msgstr "Esemény"
+
+#: rabbitvcs/ui/action.py:120 rabbitvcs/ui/add.py:80 rabbitvcs/ui/browser.py:90
+#: rabbitvcs/ui/changes.py:280 rabbitvcs/ui/changes.py:381
+#: rabbitvcs/ui/checkmods.py:109 rabbitvcs/ui/checkmods.py:172
+#: rabbitvcs/ui/commit.py:84 rabbitvcs/ui/createpatch.py:89
+#: rabbitvcs/ui/lock.py:71 rabbitvcs/ui/log.py:390 rabbitvcs/ui/log.py:676
+#: rabbitvcs/ui/markresolved.py:62 rabbitvcs/ui/revert.py:74
+#: rabbitvcs/ui/stage.py:65 rabbitvcs/ui/unlock.py:62
+#: rabbitvcs/ui/unstage.py:64
+msgid "Path"
+msgstr "Útvonal"
+
+#: rabbitvcs/ui/action.py:120
+msgid "Mime Type"
+msgstr "Mime típus"
+
+#: rabbitvcs/ui/action.py:376
+msgid "Finished"
+msgstr "Befejezve"
 
-#: util/helper.py:111
+#: rabbitvcs/ui/action.py:380
 #, python-format
-msgid "%d minute(s) ago"
-msgstr ""
+msgid "%s - Finished"
+msgstr "%s - Befejezve"
+
+#: rabbitvcs/ui/action.py:403
+msgid "Log Message"
+msgstr "Napló bejegyzés"
+
+#: rabbitvcs/ui/add.py:80 rabbitvcs/ui/checkmods.py:109
+#: rabbitvcs/ui/checkmods.py:172 rabbitvcs/ui/commit.py:84
+#: rabbitvcs/ui/createpatch.py:89 rabbitvcs/ui/lock.py:71
+#: rabbitvcs/ui/markresolved.py:62 rabbitvcs/ui/revert.py:74
+#: rabbitvcs/ui/stage.py:65 rabbitvcs/ui/unlock.py:62
+#: rabbitvcs/ui/unstage.py:64
+msgid "Extension"
+msgstr "Kiterjesztés"
 
-#: util/helper.py:631
+#: rabbitvcs/ui/add.py:103 rabbitvcs/ui/commit.py:130 rabbitvcs/ui/lock.py:112
+#: rabbitvcs/ui/push.py:119 rabbitvcs/ui/revert.py:107
+#: rabbitvcs/ui/unlock.py:86
+msgid "Loading..."
+msgstr "Betöltés..."
+
+#: rabbitvcs/ui/add.py:125 rabbitvcs/ui/commit.py:267 rabbitvcs/ui/lock.py:115
+#: rabbitvcs/ui/revert.py:111 rabbitvcs/ui/unlock.py:110
 #, python-format
-msgid "%i second"
-msgid_plural "%i seconds"
-msgstr[0] "%i mp"
-msgstr[1] "%i mp"
+msgid "Found %d item(s)"
+msgstr "%d elemet talált"
 
-#: util/helper.py:634
+#: rabbitvcs/ui/add.py:208 rabbitvcs/ui/add.py:233 rabbitvcs/ui/branches.py:281
+#: rabbitvcs/ui/tags.py:270 rabbitvcs/ui/widget.py:1368
+#: rabbitvcs/util/contextmenuitems.py:450
+msgid "Add"
+msgstr "Hozzáadás"
+
+#: rabbitvcs/ui/add.py:209 rabbitvcs/ui/add.py:234
+msgid "Running Add Command..."
+msgstr "Hozzáadás parancs fut..."
+
+#: rabbitvcs/ui/add.py:211 rabbitvcs/ui/add.py:236
+msgid "Completed Add"
+msgstr "Hozzáadás befejezve"
+
+#: rabbitvcs/ui/annotate.py:58
+msgid "Cannot annotate a directory"
+msgstr "Nem lehet jegyzetet fűzni a könyvtárhoz"
+
+#: rabbitvcs/ui/annotate.py:64
 #, python-format
-msgid "%i minute"
-msgid_plural "%i minutes"
-msgstr[0] "%i perc"
-msgstr[1] "%i perc"
+msgid "Annotate - %s"
+msgstr "Jegyzet - %s"
+
+#: rabbitvcs/ui/annotate.py:126 rabbitvcs/ui/annotate.py:227
+msgid "Line"
+msgstr "Sor"
+
+#: rabbitvcs/ui/annotate.py:126 rabbitvcs/ui/annotate.py:227
+#: rabbitvcs/ui/browser.py:90 rabbitvcs/ui/checkmods.py:174
+#: rabbitvcs/ui/log.py:51 rabbitvcs/ui/log.py:373 rabbitvcs/ui/log.py:660
+#: rabbitvcs/ui/widget.py:971
+msgid "Revision"
+msgstr "Revízió"
+
+#: rabbitvcs/ui/annotate.py:126 rabbitvcs/ui/annotate.py:227
+#: rabbitvcs/ui/browser.py:90 rabbitvcs/ui/checkmods.py:174
+#: rabbitvcs/ui/log.py:53 rabbitvcs/ui/log.py:373 rabbitvcs/ui/log.py:660
+msgid "Author"
+msgstr "Szerző"
+
+#: rabbitvcs/ui/annotate.py:127 rabbitvcs/ui/annotate.py:228
+#: rabbitvcs/ui/browser.py:90 rabbitvcs/ui/dialog.py:53 rabbitvcs/ui/log.py:52
+#: rabbitvcs/ui/log.py:374 rabbitvcs/ui/log.py:661 rabbitvcs/ui/push.py:77
+msgid "Date"
+msgstr "Dátum"
+
+#: rabbitvcs/ui/annotate.py:127 rabbitvcs/ui/annotate.py:228
+msgid "Text"
+msgstr "Szöveg"
+
+#: rabbitvcs/ui/annotate.py:142
+msgid "The from revision field must be an integer"
+msgstr "A revízió mező egész szám kell legyen"
+
+#: rabbitvcs/ui/applypatch.py:58 rabbitvcs/ui/applypatch.py:117
+#: rabbitvcs/ui/applypatch.py:147
+msgid "Apply Patch"
+msgstr "Hibajavítás alkalmazása"
 
-#: util/helper.py:637
+#: rabbitvcs/ui/applypatch.py:78
+msgid "Apply Patch To Directory..."
+msgstr "Hibajavítás alkalmazása a könyvtárra"
+
+#: rabbitvcs/ui/applypatch.py:118 rabbitvcs/ui/applypatch.py:148
+msgid "Applying Patch File..."
+msgstr "Hibajavító fájl alkalmazása..."
+
+#: rabbitvcs/ui/applypatch.py:120 rabbitvcs/ui/applypatch.py:150
+msgid "Patch File Applied"
+msgstr "Hibajavító fájl alkalmazva"
+
+#: rabbitvcs/ui/branch.py:93
+msgid "You must supply a destination path."
+msgstr "Meg kell adni a végcél útvonalat."
+
+#: rabbitvcs/ui/branch.py:109
+msgid "Branch/tag"
+msgstr "Ágak/címkék..."
+
+#: rabbitvcs/ui/branch.py:110
+msgid "Running Branch/tag Command..."
+msgstr "Branch/tag parancs fut..."
+
+#: rabbitvcs/ui/branch.py:112
+msgid "Completed Branch/tag"
+msgstr "Branch/tag parancs befejezve"
+
+#: rabbitvcs/ui/branches.py:66
+msgid "Branch Manager"
+msgstr "Ágkezelő"
+
+#: rabbitvcs/ui/branches.py:67
+msgid "<b>Branches</b>"
+msgstr "<b>Ágak</b>"
+
+#: rabbitvcs/ui/branches.py:77 rabbitvcs/ui/widget.py:972
+msgid "Branch"
+msgstr "Ág"
+
+#: rabbitvcs/ui/branches.py:101 rabbitvcs/ui/tags.py:96
+msgid "Name:"
+msgstr "Név:"
+
+#: rabbitvcs/ui/branches.py:111
+msgid "Start Point:"
+msgstr "Kezdőpont:"
+
+#: rabbitvcs/ui/branches.py:130
+msgid "Keep old branch's history"
+msgstr "Régi ágelőzmények megtartása"
+
+#: rabbitvcs/ui/branches.py:139
+msgid "Set as active branch"
+msgstr "Beállítás aktív ágként"
+
+#: rabbitvcs/ui/branches.py:148 rabbitvcs/ui/branches.py:298
+#: rabbitvcs/ui/tags.py:142 rabbitvcs/ui/tags.py:281
+msgid "Save"
+msgstr "Mentés"
+
+#: rabbitvcs/ui/branches.py:156 rabbitvcs/ui/merge.py:510
+#: rabbitvcs/ui/tags.py:106 rabbitvcs/ui/tags.py:173
+msgid "Revision:"
+msgstr "Revízió:"
+
+#: rabbitvcs/ui/branches.py:168 rabbitvcs/ui/merge.py:522
+#: rabbitvcs/ui/tags.py:125 rabbitvcs/ui/tags.py:185
+msgid "Message:"
+msgstr "Üzenet:"
+
+#: rabbitvcs/ui/branches.py:214 rabbitvcs/ui/remotes.py:123
+#: rabbitvcs/ui/tags.py:227
 #, python-format
-msgid "%i hour"
-msgid_plural "%i hours"
-msgstr[0] "%i óra"
-msgstr[1] "%i óra"
+msgid "Are you sure you want to delete %s?"
+msgstr "Biztos, hogy törölni akarja ezt: %s?"
+
+#: rabbitvcs/ui/branches.py:287
+msgid "<b>Add Branch</b>"
+msgstr "<b>Ág hozzáadása</b>"
+
+#: rabbitvcs/ui/branches.py:312
+msgid "<b>Branch Detail</b>"
+msgstr "<b>Ág részletei</b>"
+
+#: rabbitvcs/ui/browser.py:90
+msgid "Size"
+msgstr "Méret"
+
+#: rabbitvcs/ui/browser.py:326
+msgid "Select"
+msgstr "Kijelölés"
+
+#: rabbitvcs/ui/browser.py:347
+msgid "Create folder..."
+msgstr "Mappa létrehozása..."
 
-#: util/helper.py:640
+#: rabbitvcs/ui/browser.py:352
+msgid "Copy to..."
+msgstr "Másolás..."
+
+#: rabbitvcs/ui/browser.py:357
+msgid "Copy URL to clipboard"
+msgstr "URL másolása a vágólapra"
+
+#: rabbitvcs/ui/browser.py:362
+msgid "Move to..."
+msgstr "Áthelyezés..."
+
+#: rabbitvcs/ui/browser.py:471 rabbitvcs/ui/rename.py:54
+#: rabbitvcs/ui/rename.py:86 rabbitvcs/ui/rename.py:115
+msgid "Rename"
+msgstr "Átnevezés"
+
+#: rabbitvcs/ui/browser.py:471 rabbitvcs/ui/rename.py:54
+msgid "New Name:"
+msgstr "Új név:"
+
+#: rabbitvcs/ui/browser.py:532
+msgid "Where do you want to copy the selection?"
+msgstr "Hová akarja másolni a kijelölést?"
+
+#: rabbitvcs/ui/browser.py:533 rabbitvcs/ui/browser.py:562
+msgid "New Location:"
+msgstr "Új hely:"
+
+#: rabbitvcs/ui/browser.py:561
+msgid "Where do you want to move the selection?"
+msgstr "Hová akarja áthelyezni a kijelölést?"
+
+#: rabbitvcs/ui/changes.py:51
+msgid "More Actions..."
+msgstr "További műveletek..."
+
+#: rabbitvcs/ui/changes.py:52 rabbitvcs/ui/checkmods.py:252
+msgid "View unified diff"
+msgstr "Egységes összehasonlító nézet"
+
+#: rabbitvcs/ui/changes.py:280 rabbitvcs/ui/changes.py:381
+msgid "Change"
+msgstr "Változás"
+
+#: rabbitvcs/ui/changes.py:280
+msgid "Property Change"
+msgstr "Tulajdonság változása"
+
+#: rabbitvcs/ui/changes.py:325 rabbitvcs/ui/lock.py:123
+msgid "Yes"
+msgstr "Igen"
+
+#: rabbitvcs/ui/changes.py:325
+msgid "No"
+msgstr "Nem"
+
+#: rabbitvcs/ui/changes.py:427
+msgid "Open from first revision"
+msgstr "Az első revízió megnyitása"
+
+#: rabbitvcs/ui/changes.py:432
+msgid "Open from second revision"
+msgstr "A második revízió megnyitása"
+
+#: rabbitvcs/ui/changes.py:437
+msgid "View unified diff(s)"
+msgstr "Egységes összehasonlító nézet"
+
+#: rabbitvcs/ui/changes.py:442 rabbitvcs/ui/checkmods.py:257
+msgid "Compare side by side"
+msgstr "Párhuzamos összehasonlítás"
+
+#: rabbitvcs/ui/checkmods.py:109 rabbitvcs/ui/property_editor.py:113
+msgid "Status"
+msgstr "Állapot"
+
+#: rabbitvcs/ui/checkmods.py:173 rabbitvcs/ui/commit.py:85
+#: rabbitvcs/ui/createpatch.py:90 rabbitvcs/ui/markresolved.py:63
+msgid "Text Status"
+msgstr "Szöveg állapot"
+
+#: rabbitvcs/ui/checkmods.py:173 rabbitvcs/ui/commit.py:85
+#: rabbitvcs/ui/createpatch.py:90 rabbitvcs/ui/markresolved.py:63
+msgid "Property Status"
+msgstr "Tulajdonság állapot"
+
+#: rabbitvcs/ui/checkout.py:132 rabbitvcs/ui/checkout.py:206
 #, python-format
-msgid "%i day"
-msgid_plural "%i days"
-msgstr[0] "%i nap"
-msgstr[1] "%i nap"
+msgid "Checkout - %s"
+msgstr "Lecsekkolás - %s"
+
+#: rabbitvcs/ui/checkout.py:156 rabbitvcs/ui/clone.py:59
+#: rabbitvcs/ui/export.py:73 rabbitvcs/ui/export.py:142
+msgid "The repository URL and destination path are both required fields."
+msgstr "A tároló URL és a végcél útvonal mezőket ki kell tölteni."
+
+#: rabbitvcs/ui/checkout.py:166 rabbitvcs/ui/updateto.py:138
+msgid "Checkout"
+msgstr "Ellenőrzés"
+
+#: rabbitvcs/ui/checkout.py:167
+msgid "Running Checkout Command..."
+msgstr "Ellenőrzés parancs fut..."
+
+#: rabbitvcs/ui/checkout.py:177 rabbitvcs/ui/updateto.py:145
+msgid "Completed Checkout"
+msgstr "Ellenőrzés befejezve"
+
+#: rabbitvcs/ui/clean.py:67 rabbitvcs/util/contextmenuitems.py:692
+msgid "Clean"
+msgstr "Tisztítás"
+
+#: rabbitvcs/ui/clean.py:68
+msgid "Running Clean Command..."
+msgstr "Tisztítás parancs fut..."
+
+#: rabbitvcs/ui/clean.py:78
+msgid "Completed Clean"
+msgstr "Tisztítás befejezve"
+
+#: rabbitvcs/ui/cleanup.py:56 rabbitvcs/util/contextmenuitems.py:514
+msgid "Cleanup"
+msgstr "Tisztítás"
+
+#: rabbitvcs/ui/cleanup.py:57
+msgid "Cleaning Up..."
+msgstr "Tisztítás..."
+
+#: rabbitvcs/ui/cleanup.py:59
+msgid "Completed Cleanup"
+msgstr "Tisztítás befejezve"
+
+#: rabbitvcs/ui/clone.py:48 rabbitvcs/ui/clone.py:67
+#: rabbitvcs/util/contextmenuitems.py:662
+msgid "Clone"
+msgstr "Klónozás"
+
+#: rabbitvcs/ui/clone.py:68
+msgid "Running Clone Command..."
+msgstr "Klónozásás parancs fut..."
 
-#: util/helper.py:643
+#: rabbitvcs/ui/clone.py:75
+msgid "Completed Clone"
+msgstr "Klónozás befejezve"
+
+#: rabbitvcs/ui/commit.py:314 rabbitvcs/ui/commit.py:382
+#: rabbitvcs/ui/commit.py:445 rabbitvcs/util/contextmenuitems.py:358
+msgid "Commit"
+msgstr "Beküldés"
+
+#: rabbitvcs/ui/commit.py:315 rabbitvcs/ui/commit.py:383
+#: rabbitvcs/ui/commit.py:446
+msgid "Running Commit Command..."
+msgstr "Beküldés parancs fut..."
+
+#: rabbitvcs/ui/commit.py:328 rabbitvcs/ui/commit.py:392
+#: rabbitvcs/ui/commit.py:455
+msgid "Completed Commit"
+msgstr "Beküldés befejezve"
+
+#: rabbitvcs/ui/commit.py:409
+msgid "Close Branch"
+msgstr "Ág lezárasa"
+
+#: rabbitvcs/ui/create.py:52
+msgid "Repository successfully created"
+msgstr "Tároló sikeresen létrehozva"
+
+#: rabbitvcs/ui/create.py:54
+msgid ""
+"There was an error creating the repository.  Make sure the given folder is "
+"empty."
+msgstr "Hiba a tároló készítésekor. Győződjön meg róla, hogy a mappa üres."
+
+#: rabbitvcs/ui/create.py:68 rabbitvcs/util/contextmenuitems.py:657
+msgid "Initialize Repository"
+msgstr "A tároló inicializálása"
+
+#: rabbitvcs/ui/create.py:69
+msgid "Setting up repository..."
+msgstr "Tároló beállítása..."
+
+#: rabbitvcs/ui/create.py:71
+msgid "Completed repository setup"
+msgstr "Tároló beállítása befejeződött"
+
+#: rabbitvcs/ui/createpatch.py:69 rabbitvcs/ui/createpatch.py:121
+#: rabbitvcs/ui/createpatch.py:168 rabbitvcs/ui/createpatch.py:235
+msgid "Create Patch"
+msgstr "Hibajavítás készítése"
+
+#: rabbitvcs/ui/createpatch.py:82
+msgid "The given path is not a working copy"
+msgstr "A megadott útvonal nem a munkapéldányé."
+
+#: rabbitvcs/ui/createpatch.py:169 rabbitvcs/ui/createpatch.py:236
+msgid "Creating Patch File..."
+msgstr "Hibajavító fájl készítése..."
+
+#: rabbitvcs/ui/createpatch.py:199 rabbitvcs/ui/createpatch.py:265
+msgid "Patch File Created"
+msgstr "Hibajavító fájl elkészítve"
+
+#: rabbitvcs/ui/dialog.py:37
 #, python-format
-msgid "%i week"
-msgid_plural "%i weeks"
-msgstr[0] "%i hét"
-msgstr[1] "%i hét"
+msgid ""
+"An error has occurred in the RabbitVCS Nautilus extension. Please contact "
+"the <a href=\"%s\">RabbitVCS team</a> with the error details listed below:"
+msgstr ""
+"Egy hiba történt a RabbitVCS Nautilus kiterjesztésben. Vegye fel a "
+"kapcsolatot <a href=\"%s\">RabbitVCS team</a> a hiba alábbi részletes "
+"leírásával:"
+
+#: rabbitvcs/ui/dialog.py:53 rabbitvcs/ui/log.py:374 rabbitvcs/ui/log.py:661
+#: rabbitvcs/ui/push.py:77
+msgid "Message"
+msgstr "Üzenet"
+
+#: rabbitvcs/ui/dialog.py:107
+msgid "Select a Folder"
+msgstr "Dosszié kiválasztása"
+
+#: rabbitvcs/ui/dialog.py:137
+msgid "to"
+msgstr "eddig"
+
+#: rabbitvcs/ui/dialog.py:277
+msgid "Select a File"
+msgstr "Fájl kiválasztása"
+
+#: rabbitvcs/ui/dialog.py:296
+msgid "Save As..."
+msgstr "Mentés másként…"
 
-#: util/helper.py:646
+#: rabbitvcs/ui/dialog.py:315
+msgid "Are you sure you want to continue?"
+msgstr "Biztos, hogy folytatni akarja?"
+
+#: rabbitvcs/ui/dialog.py:343
+msgid "the selected item(s)"
+msgstr "a kiválasztott tétel/ek/"
+
+#: rabbitvcs/ui/dialog.py:414
+msgid "Added a folder to the repository"
+msgstr "Dosszié hozzáadása a tárolóhoz"
+
+#: rabbitvcs/ui/diff.py:323
+msgid "View diff as side-by-side comparison"
+msgstr "Összehasonlító nézet, mint párhuzamos összehasonlítás"
+
+#: rabbitvcs/ui/export.py:46 rabbitvcs/ui/export.py:125
 #, python-format
-msgid "%i month"
-msgid_plural "%i months"
-msgstr[0] "%i hónap"
-msgstr[1] "%i hónap"
+msgid "Export - %s"
+msgstr "Export - %s"
 
-#: util/helper.py:649
+#: rabbitvcs/ui/export.py:93 rabbitvcs/ui/export.py:162
+msgid "Export"
+msgstr "Export"
+
+#: rabbitvcs/ui/export.py:94 rabbitvcs/ui/export.py:163
+msgid "Running Export Command..."
+msgstr "Exportálás parancs fut..."
+
+#: rabbitvcs/ui/export.py:105 rabbitvcs/ui/export.py:171
+msgid "Completed Export"
+msgstr "Exportálás befejezve"
+
+#: rabbitvcs/ui/ignore.py:101
+msgid "Ignore file:"
+msgstr "Mellőzött fájl:"
+
+#: rabbitvcs/ui/import.py:41
 #, python-format
-msgid "%i year"
-msgid_plural "%i years"
-msgstr[0] "%i év"
-msgstr[1] "%i év"
+msgid "Import - %s"
+msgstr "Import - %s"
+
+#: rabbitvcs/ui/import.py:63
+msgid "The repository URL field is required."
+msgstr "Tároló URL mező igényelt"
+
+#: rabbitvcs/ui/import.py:75 rabbitvcs/util/contextmenuitems.py:540
+msgid "Import"
+msgstr "Import"
+
+#: rabbitvcs/ui/import.py:76
+msgid "Running Import Command..."
+msgstr "Importálás parancs fut..."
+
+#: rabbitvcs/ui/import.py:84
+msgid "Completed Import"
+msgstr "Importálás befejezve"
+
+#: rabbitvcs/ui/lock.py:72 rabbitvcs/vcs/svn/__init__.py:208
+msgid "Locked"
+msgstr "Lezárva"
+
+#: rabbitvcs/ui/lock.py:158
+msgid "Get Lock"
+msgstr "Zárolás"
+
+#: rabbitvcs/ui/lock.py:159
+msgid "Running Lock Command..."
+msgstr "Zárolás parancs fut..."
+
+#: rabbitvcs/ui/lock.py:168
+msgid "Completed Lock"
+msgstr "Zárolás befejezve"
+
+#: rabbitvcs/ui/log.py:126
+#, python-format
+msgid "Log - %s"
+msgstr "Napló - %s"
+
+#: rabbitvcs/ui/log.py:305 rabbitvcs/ui/log.py:306
+msgid "N/A"
+msgstr "N/A"
+
+#: rabbitvcs/ui/log.py:375
+msgid "Color"
+msgstr "Szín"
+
+#: rabbitvcs/ui/log.py:391
+msgid "Copy From Path"
+msgstr "Másolás az útvonalról"
+
+#: rabbitvcs/ui/log.py:391
+msgid "Copy From Revision"
+msgstr "Másolás a revízióból"
+
+#: rabbitvcs/ui/log.py:660
+msgid "Graph"
+msgstr "Grafikon"
+
+#: rabbitvcs/ui/log.py:972
+msgid "View diff against working copy"
+msgstr "Összehasonlító nézet a munkapéldánnyal"
+
+#: rabbitvcs/ui/log.py:977 rabbitvcs/util/contextmenuitems.py:414
+msgid "View diff against previous revision"
+msgstr "Összehasonlító nézet az előző revízióval"
+
+#: rabbitvcs/ui/log.py:982
+msgid "View diff between revisions"
+msgstr "Összehasonlító nézet revíziók között"
+
+#: rabbitvcs/ui/log.py:987
+msgid "Compare with working copy"
+msgstr "Összehasonlítás a munkapéldánnyal"
+
+#: rabbitvcs/ui/log.py:992 rabbitvcs/util/contextmenuitems.py:432
+msgid "Compare with previous revision"
+msgstr "Összehasonlítás az előző revízióval"
+
+#: rabbitvcs/ui/log.py:997
+msgid "Compare revisions"
+msgstr "Revíziók összehasonlítása"
+
+#: rabbitvcs/ui/log.py:1003
+msgid "Show changes against previous revision"
+msgstr "Összehasonlító nézet az előző revízióval"
+
+#: rabbitvcs/ui/log.py:1009
+msgid "Show changes between revisions"
+msgstr "Változások mutatása két revízió között"
+
+#: rabbitvcs/ui/log.py:1014
+msgid "Update to this revision"
+msgstr "Frissítés erre a revizióra"
+
+#: rabbitvcs/ui/log.py:1015
+msgid "Update the selected path to this revision"
+msgstr "A kijelölt útvonal frissítése erre a revizióra"
+
+#: rabbitvcs/ui/log.py:1020
+msgid "Revert changes from this revision"
+msgstr "Módosítások visszavonása ebbő a revizióból"
+
+#: rabbitvcs/ui/log.py:1021
+msgid "Update the selected path by reverse merging the changes"
+msgstr "A kijelölt útvonal frissítése a módosítások visszavonásával"
+
+#: rabbitvcs/ui/log.py:1026
+msgid "Copy to clipboard"
+msgstr "Másolás a vágólapra"
+
+#: rabbitvcs/ui/log.py:1027
+msgid "Copy to clipboard the full data of these revisions"
+msgstr "Ezen reviziók telejes adatállományának vágólapra másolása"
+
+#: rabbitvcs/ui/log.py:1031 rabbitvcs/ui/log.py:1035
+msgid "Edit author..."
+msgstr "Szerző szerkesztése..."
+
+#: rabbitvcs/ui/log.py:1039
+msgid "Edit log message..."
+msgstr "Napló üzenet szerkesztése..."
+
+#: rabbitvcs/ui/log.py:1043
+msgid "Edit revision properties..."
+msgstr "Revízió tulajdonságok szerkesztése..."
+
+#: rabbitvcs/ui/log.py:1323
+msgid "Edit author"
+msgstr "Szerző szerkesztése"
+
+#: rabbitvcs/ui/log.py:1335
+msgid "Edit log message"
+msgstr "Napló üzenet szerkesztése"
+
+#: rabbitvcs/ui/markresolved.py:49 rabbitvcs/ui/markresolved.py:103
+#: rabbitvcs/util/contextmenuitems.py:485
+msgid "Mark as Resolved"
+msgstr "Megjelölés megoldottként"
+
+#: rabbitvcs/ui/markresolved.py:104
+msgid "Running Resolved Command..."
+msgstr "Megoldva parancs fut..."
+
+#: rabbitvcs/ui/markresolved.py:107
+msgid "Completed Mark as Resolved"
+msgstr "Megjelölés megoldottként befejezve"
+
+#: rabbitvcs/ui/merge.py:106
+msgid "Running Merge Test"
+msgstr "Egyesítés teszt fut"
+
+#: rabbitvcs/ui/merge.py:107
+msgid "Completed Merge Test"
+msgstr "Egyesítés teszt befejezve"
+
+#: rabbitvcs/ui/merge.py:109
+msgid "Running Merge Command"
+msgstr "Egyesítés parancs fut"
+
+#: rabbitvcs/ui/merge.py:110 rabbitvcs/ui/merge.py:568
+msgid "Completed Merge"
+msgstr "Egyesítés befejezve"
+
+#: rabbitvcs/ui/merge.py:121 rabbitvcs/ui/merge.py:561
+msgid "Merge"
+msgstr "Egyesítés"
+
+#: rabbitvcs/ui/merge.py:476
+msgid "No active branch"
+msgstr "Nincs aktív ág"
+
+#: rabbitvcs/ui/merge.py:487
+msgid "Author:"
+msgstr "Szerző"
+
+#: rabbitvcs/ui/merge.py:499 rabbitvcs/ui/tags.py:162
+msgid "Date:"
+msgstr "Dátum"
+
+#: rabbitvcs/ui/merge.py:562
+msgid "Running Merge Command..."
+msgstr "Egyesítés parancs fut..."
+
+#: rabbitvcs/ui/properties.py:56
+#, python-format
+msgid "Properties - %s"
+msgstr "Tulajdonságok - %s"
+
+#: rabbitvcs/ui/properties.py:64 rabbitvcs/ui/property_editor.py:113
+#: rabbitvcs/ui/remotes.py:68
+msgid "Name"
+msgstr "Név"
+
+#: rabbitvcs/ui/properties.py:64 rabbitvcs/ui/property_editor.py:113
+msgid "Value"
+msgstr "Érték"
+
+#: rabbitvcs/ui/properties.py:153 rabbitvcs/ui/property_editor.py:157
+#: rabbitvcs/ui/revprops.py:66
+msgid "Unable to retrieve properties list"
+msgstr "Tulajdonság lista nem állítható helyre"
+
+#: rabbitvcs/ui/properties.py:174
+msgid "There was a problem saving your properties."
+msgstr "Tulajdonságok mentésénél probléma adódott."
+
+#: rabbitvcs/ui/property_editor.py:57
+msgid ""
+"<b>Note:</b> changes to properties are applied instantly. You may review and "
+"undo changes using the context menu for each item.\n"
+msgstr ""
+"<b>Figyelem:</b> a tulajdonságok változása azonnal megtörténik. A helyi menü "
+"segítségével tételenként megtekintheti és visszavonhatja a változásokat.\n"
+
+#: rabbitvcs/ui/property_editor.py:62
+msgid ""
+"Do you want to delete the selected properties from all files and "
+"subdirectories\n"
+"beneath this directory?"
+msgstr ""
+"Törölni akarja a kiválasztott tulajdonságot minden fájlban ebben "
+"könyvtárban\n"
+"és alkönyvtáraiban?"
+
+#: rabbitvcs/ui/property_editor.py:103
+msgid "File is not under version control."
+msgstr "Ez a fájl nincs verzió kontroll alatt."
+
+#: rabbitvcs/ui/property_editor.py:113
+msgid "Reserved"
+msgstr "Fenntartva"
+
+#: rabbitvcs/ui/property_editor.py:181
+msgid "Unable to set new value for property."
+msgstr "A tulajdonság új értékét nem lehet beállítani."
+
+#: rabbitvcs/ui/property_page.py:148
+msgid "Repository URL"
+msgstr "Tároló URL"
+
+#: rabbitvcs/ui/push.py:100 rabbitvcs/util/contextmenuitems.py:672
+msgid "Push"
+msgstr "Push"
+
+#: rabbitvcs/ui/push.py:101
+msgid "Running Push Command..."
+msgstr "Push parancs fut..."
+
+#: rabbitvcs/ui/push.py:103
+msgid "Completed Push"
+msgstr "Push befejezve"
+
+#: rabbitvcs/ui/push.py:161
+msgid "No commits found"
+msgstr "Nincsenek commit-ok"
+
+#: rabbitvcs/ui/relocate.py:72
+msgid "The from and to url fields are both required."
+msgstr "Az URL tartomány határainak megadása szükséges."
+
+#: rabbitvcs/ui/relocate.py:82
+msgid "Relocate"
+msgstr "Áthelyez"
+
+#: rabbitvcs/ui/relocate.py:83
+msgid "Running Relocate Command..."
+msgstr "Áthelyezés parancs fut..."
+
+#: rabbitvcs/ui/relocate.py:90
+msgid "Completed Relocate"
+msgstr "Áthelyezés befejezve"
+
+#: rabbitvcs/ui/remotes.py:61
+msgid "Remote Repository Manager"
+msgstr "Távoli tárolókezelő"
+
+#: rabbitvcs/ui/remotes.py:62
+msgid "<b>Remote Repositories</b>"
+msgstr "<b>Távoli tároló:</b>"
+
+#: rabbitvcs/ui/remotes.py:68
+msgid "Host"
+msgstr "Host"
+
+#: rabbitvcs/ui/rename.py:50
+msgid "The requested file or folder does not exist."
+msgstr "A kért fájl vagy mappa nem létezik."
+
+#: rabbitvcs/ui/rename.py:62
+msgid "The new name field is required"
+msgstr "Új név mező szükséges"
+
+#: rabbitvcs/ui/rename.py:87 rabbitvcs/ui/rename.py:116
+msgid "Running Rename Command..."
+msgstr "Átnevezés parancs fut..."
+
+#: rabbitvcs/ui/rename.py:93 rabbitvcs/ui/rename.py:122
+msgid "Completed Rename"
+msgstr "Átnevezés befejezve"
+
+#: rabbitvcs/ui/reset.py:97 rabbitvcs/util/contextmenuitems.py:696
+msgid "Reset"
+msgstr "Alaphelyzet"
+
+#: rabbitvcs/ui/reset.py:98
+msgid "Running Reset Command..."
+msgstr "Alaphelyzet parancs fut..."
+
+#: rabbitvcs/ui/reset.py:105
+msgid "Completed Reset"
+msgstr "Alaphelyzetbe állítás kész"
+
+#: rabbitvcs/ui/revert.py:177 rabbitvcs/ui/revert.py:203
+#: rabbitvcs/util/contextmenuitems.py:479
+msgid "Revert"
+msgstr "Visszaállítás"
+
+#: rabbitvcs/ui/revert.py:178 rabbitvcs/ui/revert.py:204
+msgid "Running Revert Command..."
+msgstr "Visszavonás parancs fut"
+
+#: rabbitvcs/ui/revert.py:180 rabbitvcs/ui/revert.py:206
+msgid "Completed Revert"
+msgstr "Visszavonás befejezve"
+
+#: rabbitvcs/ui/settings.py:44 rabbitvcs/vcs/svn/__init__.py:222
+msgid "Unknown"
+msgstr "Ismeretlen"
+
+#: rabbitvcs/ui/settings.py:46
+msgid "There was an error communicating with the status checker service."
+msgstr "Hiba történt a státuszellenőrző szolgáltatással való kommunikációban"
+
+#: rabbitvcs/ui/settings.py:136
+msgid "Config file:"
+msgstr "Beállítási fájl:"
+
+#: rabbitvcs/ui/settings.py:326
+msgid "Select a program"
+msgstr "Program kiválasztása"
+
+#: rabbitvcs/ui/settings.py:335
+msgid "Are you sure you want to clear your repository paths?"
+msgstr "Biztos, hogy akarja törölni a tároló útvonalakat?"
+
+#: rabbitvcs/ui/settings.py:342
+msgid "Repository paths cleared"
+msgstr "Tároló útvonal törölve"
+
+#: rabbitvcs/ui/settings.py:346
+msgid "Are you sure you want to clear your previous messages?"
+msgstr "Biztos, hogy akarja törölni a korábbi üzeneteket?"
+
+#: rabbitvcs/ui/settings.py:353
+msgid "Previous messages cleared"
+msgstr "Előző üzenet törölve"
+
+#: rabbitvcs/ui/settings.py:357
+msgid "Are you sure you want to clear your authentication information?"
+msgstr "Biztos, hogy akarja törölni a hitelesítési információt?"
+
+#: rabbitvcs/ui/settings.py:374
+msgid "Authentication information cleared"
+msgstr "Hitelesítési információ törölve"
+
+#: rabbitvcs/ui/stage.py:51 rabbitvcs/ui/stage.py:103
+#: rabbitvcs/util/contextmenuitems.py:701
+msgid "Stage"
+msgstr "Stage"
+
+#: rabbitvcs/ui/stage.py:104
+msgid "Running Stage Command..."
+msgstr "Stage parancs fut..."
+
+#: rabbitvcs/ui/stage.py:107
+msgid "Completed Stage"
+msgstr "Stage kész"
+
+#: rabbitvcs/ui/switch.py:65
+msgid "The repository location is a required field."
+msgstr "Tároló helye mező kitöltése kötelező."
+
+#: rabbitvcs/ui/switch.py:75
+msgid "Switch"
+msgstr "Átváltás"
+
+#: rabbitvcs/ui/switch.py:76
+msgid "Running Switch Command..."
+msgstr "Átváltás parancs fut..."
+
+#: rabbitvcs/ui/switch.py:84
+msgid "Completed Switch"
+msgstr "Átváltás kész"
+
+#: rabbitvcs/ui/tags.py:64
+msgid "Tag Manager"
+msgstr "Címkekezelő"
+
+#: rabbitvcs/ui/tags.py:65
+msgid "<b>Tags</b>"
+msgstr "<b>Címkék</b>"
+
+#: rabbitvcs/ui/tags.py:76
+msgid "Tag"
+msgstr "Címke"
+
+#: rabbitvcs/ui/tags.py:150
+msgid "Tagger:"
+msgstr "Címkéző:"
+
+#: rabbitvcs/ui/tags.py:272
+msgid "<b>Add Tag</b>"
+msgstr "<b>Üzenet hozzáadása</b>"
+
+#: rabbitvcs/ui/tags.py:290
+msgid "<b>Tag Detail</b>"
+msgstr "<b>Címke részletei</b>"
+
+#: rabbitvcs/ui/unlock.py:49 rabbitvcs/ui/unlock.py:128
+msgid "Unlock"
+msgstr "Nyitás"
+
+#: rabbitvcs/ui/unlock.py:129
+msgid "Running Unlock Command..."
+msgstr "Nyitás parancs fut..."
+
+#: rabbitvcs/ui/unlock.py:132
+msgid "Completed Unlock"
+msgstr "Nyitás befejezve"
+
+#: rabbitvcs/ui/unstage.py:51 rabbitvcs/ui/unstage.py:102
+#: rabbitvcs/util/contextmenuitems.py:706
+msgid "Unstage"
+msgstr "Unstage"
+
+#: rabbitvcs/ui/unstage.py:103
+msgid "Running Unstage Command..."
+msgstr "Unstage parancs fut..."
+
+#: rabbitvcs/ui/unstage.py:106
+msgid "Completed Unstage"
+msgstr "Unstage befejezve"
+
+#: rabbitvcs/ui/update.py:54 rabbitvcs/ui/update.py:102
+#: rabbitvcs/util/contextmenuitems.py:352
+msgid "Update"
+msgstr "Frissítés"
+
+#: rabbitvcs/ui/update.py:55 rabbitvcs/ui/update.py:103
+#: rabbitvcs/ui/updateto.py:92
+msgid "Updating..."
+msgstr "Frissítés..."
+
+#: rabbitvcs/ui/update.py:57 rabbitvcs/ui/update.py:121
+#: rabbitvcs/ui/updateto.py:100
+msgid "Completed Update"
+msgstr "Frissítés befejezve"
+
+#: rabbitvcs/ui/updateto.py:80
+msgid "Rollback To Revision"
+msgstr "Visszagörgetés revizióra"
+
+#: rabbitvcs/ui/updateto.py:81
+msgid "Rolling Back..."
+msgstr "Visszagörgetés..."
+
+#: rabbitvcs/ui/updateto.py:89
+msgid "Completed Rollback"
+msgstr "Visszagörgetés kész"
+
+#: rabbitvcs/ui/updateto.py:91
+msgid "Update To Revision"
+msgstr "Revízió frissítése"
+
+#: rabbitvcs/ui/updateto.py:117
+msgid "What revision/branch do you want to checkout?"
+msgstr "Melyik reviziót/ágat szeretné lecsekkolni?"
+
+#: rabbitvcs/ui/updateto.py:139
+#, python-format
+msgid "Checking out %s..."
+msgstr "%s lecsekkol..."
+
+#: rabbitvcs/ui/widget.py:970 rabbitvcs/ui/widget.py:976
+msgid "HEAD"
+msgstr "HEAD"
+
+#: rabbitvcs/ui/widget.py:977
+msgid "Number"
+msgstr "Szám"
+
+#: rabbitvcs/ui/widget.py:980
+msgid "Working Copy"
+msgstr "Munkapéldány"
+
+#: rabbitvcs/ui/widget.py:1205
+msgid "Repository:"
+msgstr "Tároló"
+
+#: rabbitvcs/ui/widget.py:1224
+msgid "Branch:"
+msgstr "Ág:"
+
+#: rabbitvcs/ui/widget.py:1250
+msgid "Host:"
+msgstr "Host:"
+
+#: rabbitvcs/ui/widget.py:1363
+msgid "Add line:"
+msgstr "Sor hozzáadása"
 
-#: util/contextmenuitems.py:270
+#: rabbitvcs/util/contextmenuitems.py:304
 msgid "Debug"
-msgstr "Nyomkövetés"
+msgstr "Hibakeresés"
 
-#: util/contextmenuitems.py:275
+#: rabbitvcs/util/contextmenuitems.py:309
 msgid "Bugs"
 msgstr "Program hiba"
 
-#: util/contextmenuitems.py:280
+#: rabbitvcs/util/contextmenuitems.py:314
 msgid "Open Shell"
-msgstr "revert"
+msgstr "Héjprogram megnyitása"
 
-#: util/contextmenuitems.py:286
+#: rabbitvcs/util/contextmenuitems.py:320
 msgid "Refresh Status"
 msgstr "Frissített állapot"
 
-#: util/contextmenuitems.py:291
+#: rabbitvcs/util/contextmenuitems.py:325
 msgid "Debug Revert"
 msgstr "Nyomkövetés visszafelé"
 
-#: util/contextmenuitems.py:292
+#: rabbitvcs/util/contextmenuitems.py:326
 msgid "Reverts everything it sees"
 msgstr "Minden látható visszavonása"
 
-#: util/contextmenuitems.py:298
+#: rabbitvcs/util/contextmenuitems.py:332
 msgid "Invalidate"
 msgstr "Érvénytelenítés"
 
-#: util/contextmenuitems.py:299
+#: rabbitvcs/util/contextmenuitems.py:333
 msgid "Force an invalidate_extension_info() call"
 msgstr "Egy érvénytelen kiterjesztés információ lehívásának kényszerítése"
 
-#: util/contextmenuitems.py:305
+#: rabbitvcs/util/contextmenuitems.py:339
 msgid "Add Emblem"
 msgstr "Jelkép hozzáadása"
 
-#: util/contextmenuitems.py:306
+#: rabbitvcs/util/contextmenuitems.py:340
 msgid "Add an emblem"
 msgstr "Egy jelkép hozzáadása"
 
-#: util/contextmenuitems.py:312
+#: rabbitvcs/util/contextmenuitems.py:346
 msgid "Checkout..."
-msgstr "Ellenőrzés..."
+msgstr "Lecsekkolás..."
 
-#: util/contextmenuitems.py:313
+#: rabbitvcs/util/contextmenuitems.py:347
 msgid "Check out a working copy"
 msgstr "Munkapéldány ellenőrzése"
 
-#: util/contextmenuitems.py:318 ui/update.py:53 ui/update.py:97
-#: ui/glade/update.glade.h:6
-msgid "Update"
-msgstr "Frissítés"
-
-#: util/contextmenuitems.py:319
+#: rabbitvcs/util/contextmenuitems.py:353
 msgid "Update a working copy"
 msgstr "Munkapéldány frissítése"
 
-#: util/contextmenuitems.py:324 ui/commit.py:288 ui/commit.py:384
-#: ui/glade/commit.glade.h:4
-msgid "Commit"
-msgstr "Beküldés"
-
-#: util/contextmenuitems.py:325
+#: rabbitvcs/util/contextmenuitems.py:359
 msgid "Commit modifications to the repository"
 msgstr "Módosítás beküldése a tárolóba"
 
-#: util/contextmenuitems.py:330 ui/glade/property_page.glade.h:4
+#: rabbitvcs/util/contextmenuitems.py:364
 msgid "RabbitVCS"
 msgstr "RabbitVCS"
 
-#: util/contextmenuitems.py:335
+#: rabbitvcs/util/contextmenuitems.py:369
 msgid "RabbitVCS SVN"
-msgstr ""
+msgstr "RabbitVCS SVN"
 
-#: util/contextmenuitems.py:340
+#: rabbitvcs/util/contextmenuitems.py:374
 msgid "RabbitVCS Git"
-msgstr ""
+msgstr "RabbitVCS Git"
 
-#: util/contextmenuitems.py:345 ui/glade/browser.glade.h:2
+#: rabbitvcs/util/contextmenuitems.py:379
+msgid "RabbitVCS Hg"
+msgstr "RabbitVCS Hg"
+
+#: rabbitvcs/util/contextmenuitems.py:384
 msgid "Repository Browser"
 msgstr "Tároló böngészés"
 
-#: util/contextmenuitems.py:346
+#: rabbitvcs/util/contextmenuitems.py:385
 msgid "Browse a repository tree"
 msgstr "Tároló fa böngészése"
 
-#: util/contextmenuitems.py:351
+#: rabbitvcs/util/contextmenuitems.py:390
 msgid "Check for Modifications..."
 msgstr "Módosítások ellenőrzése..."
 
-#: util/contextmenuitems.py:352
+#: rabbitvcs/util/contextmenuitems.py:391
 msgid "Check for modifications made to the repository"
 msgstr "Tárolóhoz készített módosítások ellenőrzése"
 
-#: util/contextmenuitems.py:357
+#: rabbitvcs/util/contextmenuitems.py:396
 msgid "Diff Menu..."
 msgstr "Összehasonlító menü..."
 
-#: util/contextmenuitems.py:358
+#: rabbitvcs/util/contextmenuitems.py:397
 msgid "List of comparison options"
 msgstr "Összehasonlító lista beállítások"
 
-#: util/contextmenuitems.py:363
+#: rabbitvcs/util/contextmenuitems.py:402
 msgid "View diff against base"
-msgstr "Összehasonlító nézet a munkapéldánnyal"
+msgstr "Összehasonlító nézet a bázissal"
 
-#: util/contextmenuitems.py:364
+#: rabbitvcs/util/contextmenuitems.py:403
 msgid "View the modifications made to a file"
 msgstr "Fájlhoz készített módosítás nézete"
 
-#: util/contextmenuitems.py:369
+#: rabbitvcs/util/contextmenuitems.py:408
 msgid "View diff between files/folders"
 msgstr "Összehasonlító nézet fájlok/dossziék között"
 
-#: util/contextmenuitems.py:370
+#: rabbitvcs/util/contextmenuitems.py:409
 msgid "View the differences between two files"
 msgstr "Összehasonlító nézet két fájl között"
 
-#: util/contextmenuitems.py:375 ui/log.py:786
-msgid "View diff against previous revision"
-msgstr "Összehasonlító nézet az előző revízióval"
-
-#: util/contextmenuitems.py:376
+#: rabbitvcs/util/contextmenuitems.py:415
 msgid "View the modifications made to a file since its last change"
-msgstr "Egy fájl módosítások megnézése az utolsó változás óta"
+msgstr "Egy fájl módosítások megtkintése az utolsó változás óta"
 
-#: util/contextmenuitems.py:381
+#: rabbitvcs/util/contextmenuitems.py:420
 msgid "Compare with base"
 msgstr "Összehasonlítás a bázissal"
 
-#: util/contextmenuitems.py:382
+#: rabbitvcs/util/contextmenuitems.py:421
 msgid "Compare with base using side-by-side comparison tool"
 msgstr "Összehasonlítás a bázissal a párhuzamos összehasonlító eszközzel"
 
-#: util/contextmenuitems.py:387
+#: rabbitvcs/util/contextmenuitems.py:426
 msgid "Compare files/folders"
 msgstr "Fájl/dosszié összehasonlítása"
 
-#: util/contextmenuitems.py:388
+#: rabbitvcs/util/contextmenuitems.py:427
 msgid "Compare the differences between two items"
 msgstr "Különbségek összehasonlítása két tétel között"
 
-#: util/contextmenuitems.py:393 ui/log.py:801
-msgid "Compare with previous revision"
-msgstr "Összehasonlítás az előző revízióval"
-
-#: util/contextmenuitems.py:394
+#: rabbitvcs/util/contextmenuitems.py:433
 msgid "Compare with previous revision using side-by-side comparison tool"
 msgstr ""
 "Összehasonlítás az előző revízió használatával a párhuzamos összehasonlító "
 "eszközzel"
 
-#: util/contextmenuitems.py:399
+#: rabbitvcs/util/contextmenuitems.py:438
 msgid "Show Changes..."
 msgstr "Változások mutatása..."
 
-#: util/contextmenuitems.py:400
+#: rabbitvcs/util/contextmenuitems.py:439
 msgid "Show changes between paths and revisions"
 msgstr "Változások mutatása az útvonal és a revízió között"
 
-#: util/contextmenuitems.py:405
+#: rabbitvcs/util/contextmenuitems.py:444
 msgid "Show Log"
 msgstr "Napló mutatása"
 
-#: util/contextmenuitems.py:406
+#: rabbitvcs/util/contextmenuitems.py:445
 msgid "Show a file's log information"
 msgstr "Fájl napló információ mutatása"
 
-#: util/contextmenuitems.py:411 ui/add.py:156 ui/tags.py:273
-#: ui/branches.py:274 ui/widget.py:1199 ui/glade/add.glade.h:1
-msgid "Add"
-msgstr "Hozzáadás"
-
-#: util/contextmenuitems.py:412
+#: rabbitvcs/util/contextmenuitems.py:451
 msgid "Schedule items to be added to the repository"
-msgstr "Jegyzett tételek hozzáadása a tárolóhoz"
+msgstr "A tárolóhoz hozzáadandó elemek ütemezése"
 
-#: util/contextmenuitems.py:417
+#: rabbitvcs/util/contextmenuitems.py:456
 msgid "Add to ignore list"
 msgstr "Hozzáadás a mellőzött fájl listához"
 
-#: util/contextmenuitems.py:422
+#: rabbitvcs/util/contextmenuitems.py:461
 msgid "Update to revision..."
-msgstr "Revízió frissítése..."
+msgstr "Revíziófrissítés..."
 
-#: util/contextmenuitems.py:423
+#: rabbitvcs/util/contextmenuitems.py:462
 msgid "Update a file to a specific revision"
-msgstr "Egy fájl frissítése speciális revízióhoz"
+msgstr "Egy fájl frissítése speciális revízióra"
 
-#: util/contextmenuitems.py:428
+#: rabbitvcs/util/contextmenuitems.py:467
 msgid "Rename..."
 msgstr "Átnevezés..."
 
-#: util/contextmenuitems.py:429
+#: rabbitvcs/util/contextmenuitems.py:468
 msgid "Schedule an item to be renamed on the repository"
-msgstr "Jegyzett tételek lesznek átnevezve a tárolóban"
+msgstr "A tárolóban átnevezendő elemek ütemezése"
 
-#: util/contextmenuitems.py:434 ui/glade/properties.glade.h:3
+#: rabbitvcs/util/contextmenuitems.py:473
 msgid "Delete"
 msgstr "Törlés"
 
-#: util/contextmenuitems.py:435
+#: rabbitvcs/util/contextmenuitems.py:474
 msgid "Schedule an item to be deleted from the repository"
-msgstr "Jegyzett tételek törölve lesznek a tárolóból"
+msgstr "A tárolóból törlendő elemek ütmezése"
 
-#: util/contextmenuitems.py:440 ui/revert.py:50 ui/revert.py:103
-#: ui/revert.py:115 ui/revert.py:168
-msgid "Revert"
-msgstr "Visszavonás"
-
-#: util/contextmenuitems.py:441
+#: rabbitvcs/util/contextmenuitems.py:480
 msgid "Revert an item to its unmodified state"
-msgstr "Egy tétel nem módosított állapotának visszavonása"
-
-#: util/contextmenuitems.py:446 ui/resolve.py:48 ui/resolve.py:102
-msgid "Resolve"
-msgstr "Feloldás"
+msgstr "Egy tétel visszaállítás a módosítás elötti állapotára"
 
-#: util/contextmenuitems.py:447
+#: rabbitvcs/util/contextmenuitems.py:486
 msgid "Mark a conflicted item as resolved"
 msgstr "Egy konfliktusos tétel megoldottként való megjelölése"
 
-#: util/contextmenuitems.py:452
+#: rabbitvcs/util/contextmenuitems.py:491
 msgid "Restore"
 msgstr "Visszaállítva"
 
-#: util/contextmenuitems.py:453
+#: rabbitvcs/util/contextmenuitems.py:492
 msgid "Restore a missing item"
-msgstr "Elveszett tétel visszatöltése"
+msgstr "Hiányzó tétel visszaállítása"
 
-#: util/contextmenuitems.py:457
+#: rabbitvcs/util/contextmenuitems.py:496
 msgid "Relocate..."
-msgstr "Áthelyez..."
+msgstr "Áthelyezés..."
 
-#: util/contextmenuitems.py:458
+#: rabbitvcs/util/contextmenuitems.py:497
 msgid "Relocate your working copy"
 msgstr "Munkapéldány áthelyezése"
 
-#: util/contextmenuitems.py:463
+#: rabbitvcs/util/contextmenuitems.py:502
 msgid "Get Lock..."
-msgstr "Zárás..."
+msgstr "Zárolás..."
 
-#: util/contextmenuitems.py:464
+#: rabbitvcs/util/contextmenuitems.py:503
 msgid "Locally lock items"
 msgstr "Helyi zárolt tételek"
 
-#: util/contextmenuitems.py:469
+#: rabbitvcs/util/contextmenuitems.py:508
 msgid "Release Lock..."
-msgstr "Nyitás..."
+msgstr "Zárolás felodása..."
 
-#: util/contextmenuitems.py:470
+#: rabbitvcs/util/contextmenuitems.py:509
 msgid "Release lock on an item"
-msgstr "Egy tétel kinyitása"
-
-#: util/contextmenuitems.py:475 ui/cleanup.py:55
-msgid "Cleanup"
-msgstr "Tisztítás"
+msgstr "Egy tétel zárolásának feloldása"
 
-#: util/contextmenuitems.py:476
+#: rabbitvcs/util/contextmenuitems.py:515
 msgid "Clean up working copy"
 msgstr "Munkapéldány tisztítása"
 
-#: util/contextmenuitems.py:481
+#: rabbitvcs/util/contextmenuitems.py:520
 msgid "Export..."
 msgstr "Export..."
 
-#: util/contextmenuitems.py:482
+#: rabbitvcs/util/contextmenuitems.py:521
 msgid "Export a working copy or repository with no versioning information"
-msgstr "Egy munkapéldány vagy tároló verziókezelésen kívűli információval"
+msgstr "Egy munkapéldány vagy tároló exportálása verzióinformáció nélkül"
 
-#: util/contextmenuitems.py:487
+#: rabbitvcs/util/contextmenuitems.py:534
 msgid "Create Repository here"
 msgstr "Tároló készítése ide"
 
-#: util/contextmenuitems.py:488
+#: rabbitvcs/util/contextmenuitems.py:535
 msgid "Create a repository in a folder"
-msgstr "Tároló készítése ebben a dossziéban"
-
-#: util/contextmenuitems.py:493 ui/import.py:80 ui/glade/import.glade.h:3
-msgid "Import"
-msgstr "Import"
+msgstr "Tároló készítése ebben a mappában"
 
-#: util/contextmenuitems.py:494
+#: rabbitvcs/util/contextmenuitems.py:541
 msgid "Import an item into a repository"
 msgstr "Egy tétel importálása a tárolóba"
 
-#: util/contextmenuitems.py:503
+#: rabbitvcs/util/contextmenuitems.py:550
 msgid "Branch/tag..."
-msgstr "Branch/tag..."
+msgstr "Ágak/címkék..."
 
-#: util/contextmenuitems.py:504
+#: rabbitvcs/util/contextmenuitems.py:551
 msgid "Copy an item to another location in the repository"
 msgstr "Egy tétel másolása másik helyre a tárolóban"
 
-#: util/contextmenuitems.py:509
+#: rabbitvcs/util/contextmenuitems.py:556
 msgid "Switch..."
-msgstr "Kapcsoló..."
+msgstr "Átváltás..."
 
-#: util/contextmenuitems.py:510
+#: rabbitvcs/util/contextmenuitems.py:557
 msgid "Change the repository location of a working copy"
 msgstr "Munkapéldány helyének megváltoztatása a tárolóban"
 
-#: util/contextmenuitems.py:515
+#: rabbitvcs/util/contextmenuitems.py:562
 msgid "Merge..."
 msgstr "Egyesítés..."
 
-#: util/contextmenuitems.py:516
+#: rabbitvcs/util/contextmenuitems.py:563
 msgid "A wizard with steps for merging"
-msgstr "Egyesítő varázsló"
+msgstr "Egyesítővarázsló"
 
-#: util/contextmenuitems.py:521
+#: rabbitvcs/util/contextmenuitems.py:568
 msgid "Annotate..."
 msgstr "Jegyzet..."
 
-#: util/contextmenuitems.py:522
+#: rabbitvcs/util/contextmenuitems.py:569
 msgid "Annotate a file"
 msgstr "Jegyzet egy fájlhoz"
 
-#: util/contextmenuitems.py:527
+#: rabbitvcs/util/contextmenuitems.py:574
 msgid "Create Patch..."
 msgstr "Hibajavítás készítése..."
 
-#: util/contextmenuitems.py:528
+#: rabbitvcs/util/contextmenuitems.py:575
 msgid "Creates a unified diff file with all changes you made"
 msgstr ""
 "Egységes összehasonlító fájl készítése, amely minden változást tartalmaz"
 
-#: util/contextmenuitems.py:533
+#: rabbitvcs/util/contextmenuitems.py:580
 msgid "Apply Patch..."
 msgstr "Hibajavítás alkalmazása..."
 
-#: util/contextmenuitems.py:534
+#: rabbitvcs/util/contextmenuitems.py:581
 msgid "Applies a unified diff file to the working copy"
 msgstr "Egységes összehasonlító fájl alkalmazása a munkapéldányban"
 
-#: util/contextmenuitems.py:539 ui/glade/properties.glade.h:7
+#: rabbitvcs/util/contextmenuitems.py:586
 msgid "Properties"
 msgstr "Tulajdonságok"
 
-#: util/contextmenuitems.py:540
+#: rabbitvcs/util/contextmenuitems.py:587
 msgid "View the properties of an item"
-msgstr "Egy tétel tulajdonságainak nézete"
+msgstr "Egy tétel tulajdonságainak megtekintése"
 
-#: util/contextmenuitems.py:545
+#: rabbitvcs/util/contextmenuitems.py:592
 msgid "Help"
 msgstr "Súgó"
 
-#: util/contextmenuitems.py:546
+#: rabbitvcs/util/contextmenuitems.py:593
 msgid "View help"
-msgstr "Súgó nézet"
+msgstr "Súgó megjelenítése"
 
-#: util/contextmenuitems.py:551 ui/glade/settings.glade.h:28
+#: rabbitvcs/util/contextmenuitems.py:598
 msgid "Settings"
 msgstr "Beállítások"
 
-#: util/contextmenuitems.py:552
+#: rabbitvcs/util/contextmenuitems.py:599
 msgid "View or change RabbitVCS settings"
-msgstr "RabbitVCS beállítások nézete vagy cseréje"
+msgstr "RabbitVCS beállítások megtekintése vagy módosítása"
 
-#: util/contextmenuitems.py:557 ui/glade/about.glade.h:4
+#: rabbitvcs/util/contextmenuitems.py:604
 msgid "About"
 msgstr "Névjegy"
 
-#: util/contextmenuitems.py:558
+#: rabbitvcs/util/contextmenuitems.py:605
 msgid "About RabbitVCS"
 msgstr "RabbitVCS névjegye"
 
-#: util/contextmenuitems.py:563
+#: rabbitvcs/util/contextmenuitems.py:610
 msgid "Open"
 msgstr "Megnyit"
 
-#: util/contextmenuitems.py:564
+#: rabbitvcs/util/contextmenuitems.py:611
 msgid "Open a file"
 msgstr "Fájl megnyitása"
 
-#: util/contextmenuitems.py:572
+#: rabbitvcs/util/contextmenuitems.py:619
 msgid "Browse to"
 msgstr "Böngészés"
 
-#: util/contextmenuitems.py:573
+#: rabbitvcs/util/contextmenuitems.py:620
 msgid "Browse to a file or folder"
 msgstr "Fájl vagy dosszié böngészése"
 
-#: util/contextmenuitems.py:578
+#: rabbitvcs/util/contextmenuitems.py:625
 msgid "Revert property"
-msgstr "Visszavont tulajdonság"
+msgstr "Tulajdonság visszaállítása"
 
-#: util/contextmenuitems.py:580
+#: rabbitvcs/util/contextmenuitems.py:627
 msgid "Revert this property to its original state"
 msgstr "Eredeti tulajdonságok visszaállítása"
 
-#: util/contextmenuitems.py:584
+#: rabbitvcs/util/contextmenuitems.py:631
 msgid "Revert property (recursive)"
 msgstr "Tulajdonságok visszaállítása (rekurzívan)"
 
-#: util/contextmenuitems.py:586
+#: rabbitvcs/util/contextmenuitems.py:633
 msgid "Revert this property to its original state (recursive)"
 msgstr "Ezen tulajdonság eredeti állapotba való visszaállítása (rekurzívan)"
 
-#: util/contextmenuitems.py:591
+#: rabbitvcs/util/contextmenuitems.py:638
 msgid "Delete property"
 msgstr "Tulajdonság törlése"
 
-#: util/contextmenuitems.py:593
+#: rabbitvcs/util/contextmenuitems.py:640
 msgid "Delete this property"
 msgstr "Ezen tulajdonság törlése"
 
-#: util/contextmenuitems.py:597
+#: rabbitvcs/util/contextmenuitems.py:644
 msgid "Delete property (recursive)"
-msgstr ""
+msgstr "Tulajdonság törlése (rekurzívan)"
 
-#: util/contextmenuitems.py:599
+#: rabbitvcs/util/contextmenuitems.py:646
 msgid "Delete this property (recursive)"
 msgstr "Ezen tulajdonság törlése (rekurzívan)"
 
-#: util/contextmenuitems.py:604
+#: rabbitvcs/util/contextmenuitems.py:651
 msgid "Edit details"
-msgstr ""
+msgstr "Részletek szerkesztése"
 
-#: util/contextmenuitems.py:606
+#: rabbitvcs/util/contextmenuitems.py:653
 msgid "Show and edit property details"
-msgstr ""
-
-#: util/contextmenuitems.py:610
-msgid "Initialize Repository"
-msgstr ""
-
-#: util/contextmenuitems.py:615 ui/clone.py:47 ui/clone.py:65
-msgid "Clone"
-msgstr ""
+msgstr "Részletek megjelenítése és szerkesztése"
 
-#: util/contextmenuitems.py:620
+#: rabbitvcs/util/contextmenuitems.py:667
 msgid "Fetch/Pull"
-msgstr ""
+msgstr "Fetch/Pull"
 
-#: util/contextmenuitems.py:625 ui/push.py:96
-msgid "Push"
-msgstr ""
-
-#: util/contextmenuitems.py:630
+#: rabbitvcs/util/contextmenuitems.py:677
 msgid "Branches"
-msgstr ""
+msgstr "Ágak"
 
-#: util/contextmenuitems.py:635
+#: rabbitvcs/util/contextmenuitems.py:682
 msgid "Tags"
-msgstr ""
+msgstr "Címkék"
 
-#: util/contextmenuitems.py:640
+#: rabbitvcs/util/contextmenuitems.py:687
 msgid "Remotes"
-msgstr ""
+msgstr "Távoli tárolók"
 
-#: util/contextmenuitems.py:666
-msgid "Ignore item by filename"
-msgstr "Mellőzött tétel fájl név szerint"
+#: rabbitvcs/util/contextmenuitems.py:711
+msgid "Edit conflicts"
+msgstr "Konfliktusok szerkesztése"
 
-#: util/contextmenuitems.py:685
+#: rabbitvcs/util/contextmenuitems.py:756
 msgid "Ignore item by file extension"
 msgstr "Mellőzött tétel fájl kiterjesztés szerint"
 
-#: ui/update.py:54 ui/update.py:98 ui/updateto.py:94
-msgid "Updating..."
-msgstr "Frissítés..."
-
-#: ui/update.py:56 ui/update.py:103 ui/updateto.py:102
-msgid "Completed Update"
-msgstr "Frissítés befejezve"
-
-#: ui/updateto.py:82
-msgid "Rollback To Revision"
-msgstr ""
-
-#: ui/updateto.py:83
-msgid "Rolling Back..."
-msgstr ""
-
-#: ui/updateto.py:91
-msgid "Completed Rollback"
-msgstr ""
-
-#: ui/updateto.py:93
-msgid "Update To Revision"
-msgstr "Revízió frissítése"
+#: rabbitvcs/util/helper.py:135
+msgid "(no date)"
+msgstr "(nincs adat)"
 
-#: ui/updateto.py:138 ui/checkout.py:173
-msgid "Checkout"
-msgstr "Ellenőrzés"
+#: rabbitvcs/util/helper.py:139
+msgid "just now"
+msgstr "épp most"
 
-#: ui/updateto.py:139
+#: rabbitvcs/util/helper.py:141
 #, python-format
-msgid "Checking out %s..."
-msgstr ""
-
-#: ui/updateto.py:145 ui/checkout.py:184
-msgid "Completed Checkout"
-msgstr "Ellenőrzés befejezve"
-
-#: ui/add.py:72 ui/commit.py:205 ui/commit.py:313 ui/revert.py:62
-#: ui/revert.py:128 ui/checkmods.py:67 ui/resolve.py:61 ui/changes.py:279
-#: ui/changes.py:364 ui/log.py:337 ui/log.py:572 ui/lock.py:72
-#: ui/createpatch.py:119 ui/createpatch.py:215 ui/action.py:118
-#: ui/unlock.py:61 ui/browser.py:89
-msgid "Path"
-msgstr "Útvonal"
-
-#: ui/add.py:72 ui/commit.py:205 ui/commit.py:313 ui/revert.py:62
-#: ui/revert.py:128 ui/checkmods.py:67 ui/resolve.py:61 ui/lock.py:72
-#: ui/createpatch.py:119 ui/createpatch.py:215 ui/unlock.py:61
-msgid "Extension"
-msgstr "Kiterjesztés"
-
-#: ui/add.py:95 ui/commit.py:93 ui/lock.py:115 ui/unlock.py:85
-#: ui/glade/dialogs.glade.h:33
-msgid "Loading..."
-msgstr "Betöltés..."
+msgid "%d minute(s) ago"
+msgstr "%d perce"
 
-#: ui/add.py:98 ui/commit.py:100 ui/lock.py:118 ui/unlock.py:107
+#: rabbitvcs/util/helper.py:751
 #, python-format
-msgid "Found %d item(s)"
-msgstr "Talált %d elemet"
-
-#: ui/add.py:157
-msgid "Running Add Command..."
-msgstr "Hozzáadás parancs fut..."
-
-#: ui/add.py:159
-msgid "Completed Add"
-msgstr "Hozzáadás befejezve"
-
-#: ui/ignore.py:100
-msgid "Ignore file:"
-msgstr ""
-
-#: ui/tags.py:62
-msgid "Tag Manager"
-msgstr ""
-
-#: ui/tags.py:63
-msgid "<b>Tags</b>"
-msgstr ""
-
-#: ui/tags.py:74
-msgid "Tag"
-msgstr ""
-
-#: ui/tags.py:99 ui/branches.py:100 ui/glade/dialogs.glade.h:38
-#: ui/glade/property_page.glade.h:2
-msgid "Name:"
-msgstr ""
-
-#: ui/tags.py:109 ui/tags.py:176 ui/branches.py:155 ui/merge.py:438
-#: ui/merge.py:488 ui/glade/browser.glade.h:3
-msgid "Revision:"
-msgstr "Revízió:"
-
-#: ui/tags.py:128 ui/tags.py:188 ui/branches.py:167 ui/merge.py:450
-#: ui/merge.py:500
-msgid "Message:"
-msgstr ""
-
-#: ui/tags.py:145 ui/tags.py:284 ui/branches.py:147 ui/branches.py:291
-msgid "Save"
-msgstr ""
-
-#: ui/tags.py:153
-msgid "Tagger:"
-msgstr ""
-
-#: ui/tags.py:165 ui/merge.py:427 ui/merge.py:477
-msgid "Date:"
-msgstr ""
+msgid "%i second"
+msgid_plural "%i seconds"
+msgstr[0] "%i mp"
+msgstr[1] "%i mp"
 
-#: ui/tags.py:230 ui/branches.py:209 ui/remotes.py:128
+#: rabbitvcs/util/helper.py:754
 #, python-format
-msgid "Are you sure you want to delete %s?"
-msgstr ""
-
-#: ui/tags.py:275
-msgid "<b>Add Tag</b>"
-msgstr ""
-
-#: ui/tags.py:293
-msgid "<b>Tag Detail</b>"
-msgstr ""
+msgid "%i minute"
+msgid_plural "%i minutes"
+msgstr[0] "%i perc"
+msgstr[1] "%i perc"
 
-#: ui/export.py:45 ui/export.py:114
+#: rabbitvcs/util/helper.py:757
 #, python-format
-msgid "Export - %s"
-msgstr "Export - %s"
-
-#: ui/export.py:72 ui/export.py:131 ui/clone.py:57 ui/checkout.py:163
-msgid "The repository URL and destination path are both required fields."
-msgstr "A tároló URL és a végcél útvonal mezőket igényelnek."
-
-#: ui/export.py:92 ui/export.py:151
-msgid "Export"
-msgstr "Export"
-
-#: ui/export.py:93 ui/export.py:152
-msgid "Running Export Command..."
-msgstr "Exportálás parancs fut..."
-
-#: ui/export.py:104 ui/export.py:160
-msgid "Completed Export"
-msgstr "Exportálás befejezve"
-
-#: ui/applypatch.py:57 ui/applypatch.py:113 ui/applypatch.py:143
-msgid "Apply Patch"
-msgstr "Hibajavítás alkalmazása"
-
-#: ui/applypatch.py:74
-msgid "Apply Patch To Directory..."
-msgstr "Hibajavítás alkalmazása a könyvtárra"
-
-#: ui/applypatch.py:114 ui/applypatch.py:144
-msgid "Applying Patch File..."
-msgstr "Hibajavító fájl alkalmazása..."
-
-#: ui/applypatch.py:116 ui/applypatch.py:146
-msgid "Patch File Applied"
-msgstr "Hibajavító fájl alkalmazva"
-
-#: ui/branches.py:62
-msgid "Branch Manager"
-msgstr ""
-
-#: ui/branches.py:63
-msgid "<b>Branches</b>"
-msgstr ""
-
-#: ui/branches.py:73 ui/widget.py:855
-msgid "Branch"
-msgstr ""
-
-#: ui/branches.py:110
-msgid "Start Point:"
-msgstr ""
-
-#: ui/branches.py:129
-msgid "Keep old branch's history"
-msgstr ""
-
-#: ui/branches.py:138
-msgid "Set as active branch"
-msgstr ""
-
-#: ui/branches.py:280
-msgid "<b>Add Branch</b>"
-msgstr ""
-
-#: ui/branches.py:304
-msgid "<b>Branch Detail</b>"
-msgstr ""
-
-#: ui/push.py:76 ui/dialog.py:54 ui/annotate.py:128 ui/annotate.py:229
-#: ui/log.py:327 ui/log.py:557 ui/browser.py:89
-msgid "Date"
-msgstr "Dátum"
-
-#: ui/push.py:76 ui/dialog.py:54 ui/log.py:327 ui/log.py:557
-#: ui/glade/dialogs.glade.h:36
-msgid "Message"
-msgstr "Üzenet"
-
-#: ui/push.py:97
-msgid "Running Push Command..."
-msgstr ""
-
-#: ui/push.py:99
-msgid "Completed Push"
-msgstr ""
+msgid "%i hour"
+msgid_plural "%i hours"
+msgstr[0] "%i óra"
+msgstr[1] "%i óra"
 
-#: ui/import.py:40
+#: rabbitvcs/util/helper.py:760
 #, python-format
-msgid "Import - %s"
-msgstr "Import - %s"
-
-#: ui/import.py:68
-msgid "The repository URL field is required."
-msgstr "Tároló URL mező igényelt"
-
-#: ui/import.py:81
-msgid "Running Import Command..."
-msgstr "Importálás parancs fut..."
-
-#: ui/import.py:89
-msgid "Completed Import"
-msgstr "Importálás befejezve"
-
-#: ui/rename.py:48
-msgid "The requested file or folder does not exist."
-msgstr ""
-
-#: ui/rename.py:52 ui/rename.py:84 ui/rename.py:113 ui/browser.py:470
-msgid "Rename"
-msgstr "Átnevezés"
-
-#: ui/rename.py:52 ui/browser.py:470 ui/glade/dialogs.glade.h:39
-msgid "New Name:"
-msgstr "Új név:"
-
-#: ui/rename.py:60
-msgid "The new name field is required"
-msgstr "Új név mező szükséges"
-
-#: ui/rename.py:85 ui/rename.py:114
-msgid "Running Rename Command..."
-msgstr "Átnevezés parancs fut..."
-
-#: ui/rename.py:91 ui/rename.py:120
-msgid "Completed Rename"
-msgstr "Átnevezés befejezve"
-
-#: ui/commit.py:206 ui/revert.py:63 ui/checkmods.py:68 ui/resolve.py:62
-#: ui/createpatch.py:120
-msgid "Text Status"
-msgstr "Szöveg állapot"
-
-#: ui/commit.py:206 ui/revert.py:63 ui/checkmods.py:68 ui/resolve.py:62
-#: ui/createpatch.py:120
-msgid "Property Status"
-msgstr "Tulajdonság állapot"
-
-#: ui/commit.py:289 ui/commit.py:385
-msgid "Running Commit Command..."
-msgstr "Beküldés parancs fut..."
-
-#: ui/commit.py:295 ui/commit.py:394
-msgid "Completed Commit"
-msgstr "Beküldés befejezve"
-
-#: ui/commit.py:314 ui/revert.py:129 ui/createpatch.py:216
-#: ui/property_editor.py:112
-msgid "Status"
-msgstr "Állapot"
-
-#: ui/diff.py:284
-msgid "View diff as side-by-side comparison"
-msgstr "Összehasonlító nézet, mint párhuzamos összehasonlítás"
-
-#: ui/merge.py:87
-msgid "Running Merge Test"
-msgstr "Egyesítés teszt fut"
-
-#: ui/merge.py:88
-msgid "Completed Merge Test"
-msgstr "Egyesítés teszt befejezve"
-
-#: ui/merge.py:90
-msgid "Running Merge Command"
-msgstr "Egyesítés parancs fut"
-
-#: ui/merge.py:91
-msgid "Completed Merge"
-msgstr "Egyesítés befejezve"
-
-#: ui/merge.py:102
-msgid "Merge"
-msgstr "Egyesítés"
-
-#: ui/merge.py:415 ui/merge.py:465
-msgid "Author:"
-msgstr ""
+msgid "%i day"
+msgid_plural "%i days"
+msgstr[0] "%i nap"
+msgstr[1] "%i nap"
 
-#: ui/dialog.py:38
+#: rabbitvcs/util/helper.py:763
 #, python-format
-msgid ""
-"An error has occurred in the RabbitVCS Nautilus extension. Please contact "
-"the <a href=\"%s\">RabbitVCS team</a> with the error details listed below:"
-msgstr ""
-"Egy hiba történt a RabbitVCS Nautilus kiterjesztésben. Vegye fel a "
-"kapcsolatot <a href=\"%s\">RabbitVCS team</a> a hiba alábbi részletes "
-"leírásával:"
-
-#: ui/dialog.py:108
-msgid "Select a Folder"
-msgstr "Dosszié választása"
-
-#: ui/dialog.py:138 ui/glade/log.glade.h:11
-msgid "to"
-msgstr "eddig"
-
-#: ui/dialog.py:261
-msgid "Select a File"
-msgstr "Fájl választása"
-
-#: ui/dialog.py:280
-msgid "Save As..."
-msgstr "Mentés másként…"
-
-#: ui/dialog.py:299 ui/glade/dialogs.glade.h:19
-msgid "Are you sure you want to continue?"
-msgstr "Biztos, hogy folytatni akarja?"
-
-#: ui/dialog.py:327
-msgid "the selected item(s)"
-msgstr "a kiválasztott tétel/ek/"
-
-#: ui/dialog.py:398
-msgid "Added a folder to the repository"
-msgstr "Dosszié hozzáadása a tárolóhoz"
-
-#: ui/revert.py:104 ui/revert.py:169
-msgid "Running Revert Command..."
-msgstr "Visszavonás parancs fut"
-
-#: ui/revert.py:106 ui/revert.py:171
-msgid "Completed Revert"
-msgstr "Visszavonás befejezve"
-
-#: ui/clone.py:66
-msgid "Running Clone Command..."
-msgstr ""
-
-#: ui/clone.py:73
-msgid "Completed Clone"
-msgstr ""
-
-#: ui/relocate.py:77
-msgid "The from and to url fields are both required."
-msgstr "Az URL tartomány határainak megadása szükséges."
-
-#: ui/relocate.py:87 ui/glade/relocate.glade.h:3
-msgid "Relocate"
-msgstr "Áthelyez"
-
-#: ui/relocate.py:88
-msgid "Running Relocate Command..."
-msgstr "Áthelyezés parancs fut..."
-
-#: ui/relocate.py:95
-msgid "Completed Relocate"
-msgstr "Áthelyezés befejezve"
-
-#: ui/checkmods.py:69 ui/annotate.py:127 ui/annotate.py:228 ui/log.py:48
-#: ui/log.py:326 ui/log.py:556 ui/widget.py:854 ui/browser.py:89
-#: ui/glade/merge.glade.h:17
-msgid "Revision"
-msgstr "Revízió"
-
-#: ui/checkmods.py:69 ui/annotate.py:127 ui/annotate.py:228 ui/log.py:326
-#: ui/log.py:556 ui/browser.py:89
-msgid "Author"
-msgstr "Szerző"
-
-#: ui/checkmods.py:160 ui/changes.py:50 ui/changes.py:420
-msgid "View unified diff"
-msgstr "Egységes összehasonlító nézet"
-
-#: ui/checkmods.py:165 ui/changes.py:425
-msgid "Compare side by side"
-msgstr "Párhuzamos összehasonlítás"
-
-#: ui/resolve.py:103
-msgid "Running Resolve Command..."
-msgstr "Feloldás parancs fut..."
-
-#: ui/resolve.py:106
-msgid "Completed Resolve"
-msgstr "Feloldás befejezve"
-
-#: ui/changes.py:49
-msgid "More Actions..."
-msgstr "Több lépés..."
-
-#: ui/changes.py:279 ui/changes.py:364
-msgid "Change"
-msgstr "Változás"
-
-#: ui/changes.py:279
-msgid "Property Change"
-msgstr "Tulajdonság változása"
-
-#: ui/changes.py:321 ui/lock.py:126
-msgid "Yes"
-msgstr "Igen"
-
-#: ui/changes.py:321
-msgid "No"
-msgstr "Nem"
-
-#: ui/changes.py:410
-msgid "Open from first revision"
-msgstr "Az első revízió megnyitása"
-
-#: ui/changes.py:415
-msgid "Open from second revision"
-msgstr "A második revízió megnyitása"
-
-#: ui/annotate.py:57
-msgid "Cannot annotate a directory"
-msgstr "Nem lehet jegyzetet fűzni a könyvtárhoz"
+msgid "%i week"
+msgid_plural "%i weeks"
+msgstr[0] "%i hét"
+msgstr[1] "%i hét"
 
-#: ui/annotate.py:63
+#: rabbitvcs/util/helper.py:766
 #, python-format
-msgid "Annotate - %s"
-msgstr "Jegyzet - %s"
-
-#: ui/annotate.py:127 ui/annotate.py:228
-msgid "Line"
-msgstr "Sor"
-
-#: ui/annotate.py:128 ui/annotate.py:229
-msgid "Text"
-msgstr "Szöveg"
-
-#: ui/annotate.py:143
-msgid "The from revision field must be an integer"
-msgstr "A revízió mező egész szám kell legyen"
+msgid "%i month"
+msgid_plural "%i months"
+msgstr[0] "%i hónap"
+msgstr[1] "%i hónap"
 
-#: ui/log.py:120
+#: rabbitvcs/util/helper.py:769
 #, python-format
-msgid "Log - %s"
-msgstr "Napló - %s"
-
-#: ui/log.py:270 ui/log.py:271 ui/glade/log.glade.h:7
-msgid "N/A"
-msgstr "N/A"
-
-#: ui/log.py:337 ui/log.py:572 ui/action.py:118
-msgid "Action"
-msgstr "Esemény"
-
-#: ui/log.py:338
-msgid "Copy From Path"
-msgstr "Másolás az útvonalról"
-
-#: ui/log.py:338
-msgid "Copy From Revision"
-msgstr "Másolás a revízióból"
+msgid "%i year"
+msgid_plural "%i years"
+msgstr[0] "%i év"
+msgstr[1] "%i év"
 
-#: ui/log.py:556
-msgid "Graph"
+#: rabbitvcs/vcs/__init__.py:36
+#, python-format
+msgid ""
+"The output from '%s' was not able to be processed.\n"
+"%s"
 msgstr ""
+"A(z) '%s' kimenetét nem sikerült feldolgozni.\n"
+"%s"
 
-#: ui/log.py:781
-msgid "View diff against working copy"
-msgstr "Összehasonlító nézet a munkapéldánnyal"
-
-#: ui/log.py:791
-msgid "View diff between revisions"
-msgstr "Összehasonlító nézet revíziók között"
-
-#: ui/log.py:796
-msgid "Compare with working copy"
-msgstr "Összehasonlítás a munkapéldánnyal"
+#: rabbitvcs/vcs/git/__init__.py:777 rabbitvcs/vcs/svn/__init__.py:1189
+msgid "(no author)"
+msgstr "(nincs szerző)"
+
+#: rabbitvcs/vcs/git/__init__.py:922 rabbitvcs/vcs/svn/__init__.py:1703
+msgid "Patched"
+msgstr "Hibajavítása kész"
+
+#: rabbitvcs/vcs/git/__init__.py:926 rabbitvcs/vcs/svn/__init__.py:1707
+msgid "Patch Failed"
+msgstr "Hibajavítás nem sikerült"
+
+#: rabbitvcs/vcs/git/__init__.py:931 rabbitvcs/vcs/svn/__init__.py:1715
+msgid "Rejected Patch"
+msgstr "Elutasított hibajavítás"
+
+#: rabbitvcs/vcs/status.py:273
+msgid "RabbitVCS status for"
+msgstr "RabbitVCS státusz"
+
+#: rabbitvcs/vcs/svn/__init__.py:187 rabbitvcs/vcs/svn/__init__.py:196
+#: rabbitvcs/vcs/svn/__init__.py:203
+msgid "Added"
+msgstr "Hozzáadva"
+
+#: rabbitvcs/vcs/svn/__init__.py:188
+msgid "Copied"
+msgstr "Átmásolva"
+
+#: rabbitvcs/vcs/svn/__init__.py:189 rabbitvcs/vcs/svn/__init__.py:195
+#: rabbitvcs/vcs/svn/__init__.py:204
+msgid "Deleted"
+msgstr "Törölve"
+
+#: rabbitvcs/vcs/svn/__init__.py:190
+msgid "Restored"
+msgstr "Helyreállítva"
 
-#: ui/log.py:806
-msgid "Compare revisions"
-msgstr "Revíziók összehasonlítása"
+#: rabbitvcs/vcs/svn/__init__.py:191
+msgid "Reverted"
+msgstr "Visszaállítva"
 
-#: ui/log.py:812
-msgid "Show changes against previous revision"
-msgstr ""
+#: rabbitvcs/vcs/svn/__init__.py:192
+msgid "Failed Revert"
+msgstr "Visszaállítás sikertelen"
+
+#: rabbitvcs/vcs/svn/__init__.py:193
+msgid "Resolved"
+msgstr "Megoldva"
+
+#: rabbitvcs/vcs/svn/__init__.py:194
+msgid "Skipped"
+msgstr "Kihagyva"
+
+#: rabbitvcs/vcs/svn/__init__.py:197
+msgid "Updated"
+msgstr "Frissítve"
 
-#: ui/log.py:818
-msgid "Show changes between revisions"
-msgstr "Változások mutatása két revízió között"
+#: rabbitvcs/vcs/svn/__init__.py:198 rabbitvcs/vcs/svn/__init__.py:200
+msgid "Completed"
+msgstr "Befejezve"
 
-#: ui/log.py:823
-msgid "Update to this revision"
-msgstr ""
+#: rabbitvcs/vcs/svn/__init__.py:199 rabbitvcs/vcs/svn/__init__.py:201
+msgid "External"
+msgstr "Külső"
 
-#: ui/log.py:824
-msgid "Update the selected path to this revision"
-msgstr ""
+#: rabbitvcs/vcs/svn/__init__.py:202
+msgid "Modified"
+msgstr "Módosítva"
 
-#: ui/log.py:829 ui/log.py:833
-msgid "Edit author..."
-msgstr "Szerző szerkesztése..."
-
-#: ui/log.py:837
-msgid "Edit log message..."
-msgstr "Napló üzenet szerkesztése..."
+#: rabbitvcs/vcs/svn/__init__.py:205
+msgid "Replaced"
+msgstr "Lecserélve"
 
-#: ui/log.py:841
-msgid "Edit revision properties..."
-msgstr "Revízió tulajdonságok szerkesztése..."
+#: rabbitvcs/vcs/svn/__init__.py:206 rabbitvcs/vcs/svn/__init__.py:226
+msgid "Changed"
+msgstr "Módosítva"
 
-#: ui/log.py:1047
-msgid "Edit author"
-msgstr "Szerző szerkesztése"
+#: rabbitvcs/vcs/svn/__init__.py:207
+msgid "Annotated"
+msgstr "Megjegyzés hozzáfűzve"
 
-#: ui/log.py:1059
-msgid "Edit log message"
-msgstr "Napló üzenet szerkesztése"
+#: rabbitvcs/vcs/svn/__init__.py:209
+msgid "Unlocked"
+msgstr "Zárolás feloldva"
 
-#: ui/settings.py:43 ui/glade/settings.glade.h:35
-msgid "Unknown"
-msgstr "Ismeretlen"
+#: rabbitvcs/vcs/svn/__init__.py:210
+msgid "Failed Lock"
+msgstr "Zárolás sikertelen"
 
-#: ui/settings.py:45
-msgid "There was an error communicating with the status checker service."
-msgstr ""
+#: rabbitvcs/vcs/svn/__init__.py:211
+msgid "Failed Unlock"
+msgstr "Sikertelen zárolás"
 
-#: ui/settings.py:59
-msgid "English"
-msgstr "angol"
+#: rabbitvcs/vcs/svn/__init__.py:221
+msgid "Inapplicable"
+msgstr "Nem alkalmazható"
 
-#: ui/settings.py:119
-msgid "Config file:"
-msgstr ""
+#: rabbitvcs/vcs/svn/__init__.py:223
+msgid "Unchanged"
+msgstr "Változatlan"
 
-#: ui/settings.py:294
-msgid "Select a program"
-msgstr "Egy program választása"
+#: rabbitvcs/vcs/svn/__init__.py:224
+msgid "Missing"
+msgstr "Hiányzó"
 
-#: ui/settings.py:303
-msgid "Are you sure you want to clear your repository paths?"
-msgstr "Biztos, hogy akarja törölni a tároló útvonalakat?"
+#: rabbitvcs/vcs/svn/__init__.py:225
+msgid "Obstructed"
+msgstr "Akadályba ütközik"
 
-#: ui/settings.py:310
-msgid "Repository paths cleared"
-msgstr "Tároló útvonal törölve"
+#: rabbitvcs/vcs/svn/__init__.py:227
+msgid "Merged"
+msgstr "Egyesítve"
 
-#: ui/settings.py:314
-msgid "Are you sure you want to clear your previous messages?"
-msgstr "Biztos, hogy akarja törölni a korábbi üzeneteket?"
+#: rabbitvcs/vcs/svn/__init__.py:228
+msgid "Conflicted"
+msgstr "Konfliktusos"
 
-#: ui/settings.py:321
-msgid "Previous messages cleared"
-msgstr "Előző üzenet törölve"
+#~ msgid "Resolve"
+#~ msgstr "Feloldás"
 
-#: ui/settings.py:325
-msgid "Are you sure you want to clear your authentication information?"
-msgstr "Biztos, hogy akarja törölni a hitelesítési információt?"
+#~ msgid "Running Resolve Command..."
+#~ msgstr "Feloldás parancs fut..."
 
-#: ui/settings.py:342
-msgid "Authentication information cleared"
-msgstr "Hitelesítési információ törölve"
+#~ msgid "Completed Resolve"
+#~ msgstr "Feloldás befejezve"
 
-#: ui/revprops.py:65 ui/properties.py:158 ui/property_editor.py:155
-msgid "Unable to retrieve properties list"
-msgstr "Tulajdonság lista nem állítható helyre"
+#~ msgid "English"
+#~ msgstr "angol"
 
-#: ui/branch.py:99
-msgid "You must supply a destination path."
-msgstr "Meg kell adni a végcél útvonalat."
+#~ msgid "<b>Properties for:</b>"
+#~ msgstr "<b>Tulajdonságok ehhez:</b>"
 
-#: ui/branch.py:115
-msgid "Branch/tag"
-msgstr "Branch/tag"
+#~ msgid "<i>Selected properties will be applied recursively.</i>"
+#~ msgstr "<i>Kiválasztott tulajdonságok rekurzívan lesznek használva.</i>"
 
-#: ui/branch.py:116
-msgid "Running Branch/tag Command..."
-msgstr "Branch/tag parancs fut..."
+#~ msgid "Delete properties recursively"
+#~ msgstr "Rekurzív tulajdonságok törlése"
 
-#: ui/branch.py:118
-msgid "Completed Branch/tag"
-msgstr "Branch/tag parancs befejezve"
+#~ msgid "Edit..."
+#~ msgstr "Szerkesztés..."
 
-#: ui/lock.py:73
-msgid "Locked"
-msgstr "Zárva"
+#~ msgid "New..."
+#~ msgstr "Új..."
 
-#: ui/lock.py:167
-msgid "Get Lock"
-msgstr "Zárolás"
+#~ msgid "URL/Path:"
+#~ msgstr "URL/Útvonal"
 
-#: ui/lock.py:168
-msgid "Running Lock Command..."
-msgstr "Zárás parancs fut..."
+#~ msgid "Load/Refresh"
+#~ msgstr "Betöltés/Frissítés"
 
-#: ui/lock.py:177
-msgid "Completed Lock"
-msgstr "Zárás befejezve"
+#~ msgid "URL:"
+#~ msgstr "URL:"
 
-#: ui/switch.py:70
-msgid "The repository location is a required field."
-msgstr "Tároló helye mező igényelt"
+#~ msgid "<b>Add Message</b>"
+#~ msgstr "<b>Üzenet hozzáadása</b>"
 
-#: ui/switch.py:80
-msgid "Switch"
-msgstr "Kapcsoló"
+#~ msgid "<b>Certificate Details</b>"
+#~ msgstr "<b>Tanúsítvány részletei</b>"
 
-#: ui/switch.py:81
-msgid "Running Switch Command..."
-msgstr "Kapcsoló parancs fut..."
+#~ msgid "<b>Edit Property Details</b>"
+#~ msgstr "<b>Tulajdonság részleteinek szerkesztése</b>"
 
-#: ui/switch.py:89
-msgid "Completed Switch"
-msgstr "Kapcsoló parancs befejezve"
+#~ msgid "<b>Folder Name</b>"
+#~ msgstr "<b>Dosszié neve</b>"
 
-#: ui/widget.py:853 ui/widget.py:859 ui/glade/merge.glade.h:10
-msgid "HEAD"
-msgstr "HEAD"
+#~ msgid "<b>Message</b>"
+#~ msgstr "<b>Üzenet</b>"
 
-#: ui/widget.py:860
-msgid "Number"
-msgstr "Szám"
+#~ msgid "<b>Please add your authentication details</b>"
+#~ msgstr "<b>Adja meg az Ön azonosítóit</b>"
 
-#: ui/widget.py:861
-msgid "Working Copy"
-msgstr "Munkapéldány"
+#~ msgid "<b>Please provide your ssl certification file</b>"
+#~ msgstr "<b>Kérjük adja meg az Ön SSL igazoló fájlját</b>"
 
-#: ui/widget.py:1056
-msgid "Repository:"
-msgstr ""
+#~ msgid "<b>Previous Messages</b>"
+#~ msgstr "<b>Korábbi üzenetek</b>"
 
-#: ui/widget.py:1075
-msgid "Branch:"
-msgstr ""
+#~ msgid ""
+#~ "<span size=\"large\"><b>Are you sure you want to delete %item%?</b></span>"
+#~ msgstr ""
+#~ "<span size=\"large\"><b>Akarja törölni a/z/ %item% tételt?</b></span>"
 
-#: ui/widget.py:1093 ui/glade/dialogs.glade.h:30
-msgid "Host:"
-msgstr "Host:"
+#~ msgid "<span weight=\"bold\" size=\"xx-large\">RabbitVCS Error</span>"
+#~ msgstr "<span weight=\"bold\" size=\"xx-large\">RabbitVCS Error</span>"
 
-#: ui/widget.py:1194
-msgid "Add line:"
-msgstr ""
+#~ msgid "Accept Forever"
+#~ msgstr "Mindig elfogad"
 
-#: ui/checkout.py:139 ui/checkout.py:213
-#, python-format
-msgid "Checkout - %s"
-msgstr "Ellenőrzés - %s"
+#~ msgid "Accept Once"
+#~ msgstr "Egyszer elfogad"
 
-#: ui/checkout.py:174
-msgid "Running Checkout Command..."
-msgstr "Ellenőrzés parancs fut..."
+#~ msgid "Apply property recursively"
+#~ msgstr "Tulajdonság megadása rekurzívan"
 
-#: ui/remotes.py:59
-msgid "Remote Repository Manager"
-msgstr ""
+#~ msgid "Authentication"
+#~ msgstr "Hitelesítés"
 
-#: ui/remotes.py:60
-msgid "<b>Remote Repositories</b>"
-msgstr ""
+#~ msgid "Check Certificate"
+#~ msgstr "Tanúsítvány ellenőrzése"
 
-#: ui/remotes.py:66 ui/properties.py:63 ui/property_editor.py:112
-msgid "Name"
-msgstr "Név"
+#~ msgid "Confirmation"
+#~ msgstr "Megerősítés"
 
-#: ui/remotes.py:66
-msgid "Host"
-msgstr ""
+#~ msgid "Create Folder..."
+#~ msgstr "Dosszié készítése..."
 
-#: ui/property_page.py:126
-msgid "Repository URL"
-msgstr ""
+#~ msgid "Delete Confirmation"
+#~ msgstr "Megerősítés törlése..."
 
-#: ui/createpatch.py:68 ui/createpatch.py:86 ui/createpatch.py:162
-#: ui/createpatch.py:262
-msgid "Create Patch"
-msgstr "Hibajavítás készítése"
+#~ msgid "Deny"
+#~ msgstr "Visszautasít"
 
-#: ui/createpatch.py:112 ui/createpatch.py:208
-msgid "The given path is not a working copy"
-msgstr "A megadott útvonal nem a munkapéldányé."
+#~ msgid "Fingerprint:"
+#~ msgstr "Ujjlenyomat:"
 
-#: ui/createpatch.py:163 ui/createpatch.py:263
-msgid "Creating Patch File..."
-msgstr "Hibajavító fájl készítése..."
+#~ msgid "Issuer:"
+#~ msgstr "Kibocsájtó:"
 
-#: ui/createpatch.py:193 ui/createpatch.py:292
-msgid "Patch File Created"
-msgstr "Hibajavító fájl elkészítve"
+#~ msgid "Login:"
+#~ msgstr "Felhasználó név:"
 
-#: ui/properties.py:55
-#, python-format
-msgid "Properties - %s"
-msgstr "Tulajdonságok - %s"
+#~ msgid "Password:"
+#~ msgstr "Jelszó:"
 
-#: ui/properties.py:63 ui/property_editor.py:112
-msgid "Value"
-msgstr "Érték"
+#~ msgid "Path:"
+#~ msgstr "Útvonal:"
 
-#: ui/properties.py:179
-msgid "There was a problem saving your properties."
-msgstr "Tulajdonságok mentésénél probléma adódott."
+#~ msgid "Previous Messages"
+#~ msgstr "Előző üzenet"
 
-#: ui/property_editor.py:56
-msgid ""
-"<b>Note:</b> changes to properties are applied instantly. You may review and "
-"undo changes using the context menu for each item.\n"
-msgstr ""
-"<b>Figyelem:</b> a tulajdonságok változása azonnal megtörténik. Megnézheti "
-"és visszavonhatja a változás használatát minden tételre va menüben.\n"
+#~ msgid "Property"
+#~ msgstr "Tulajdonság"
 
-#: ui/property_editor.py:61
-msgid ""
-"Do you want to delete the selected properties from all files and "
-"subdirectories\n"
-"beneath this directory?"
-msgstr ""
-"Törölni akarja a kiválasztott tulajdonságot minden fájlnál és alkönyvtárban\n"
-"ezen könyvtárban?"
+#~ msgid "Property:"
+#~ msgstr "Tulajdonság:"
 
-#: ui/property_editor.py:102
-msgid "File is not under version control."
-msgstr "Ez a fájl nincs verzió kontroll alatt."
+#~ msgid "RabbitVCS Error"
+#~ msgstr "RabbitVCS hiba"
 
-#: ui/property_editor.py:112
-msgid "Reserved"
-msgstr "Fenntartott"
+#~ msgid "Realm:"
+#~ msgstr "Övezet:"
 
-#: ui/property_editor.py:189
-msgid "Unable to set new value for property."
-msgstr "Nem engedélyezett a tulajdonság új értéke."
+#~ msgid "SSL Client Certification"
+#~ msgstr "SSL kliens igazolás"
 
-#: ui/__init__.py:50
-msgid ""
-"You must specify a version control system using the --vcs [svn|git] option"
-msgstr ""
+#~ msgid "Save Authentication"
+#~ msgstr "Hitelesítés mentése"
 
-#: ui/action.py:118
-msgid "Mime Type"
-msgstr "Mime típus"
+#~ msgid "Text Change"
+#~ msgstr "Szöveg változás"
 
-#: ui/action.py:338
-msgid "Finished"
-msgstr "Befejezve"
+#~ msgid "The item(s) will be sent to the trash can."
+#~ msgstr "A tétel a kukába kerül."
 
-#: ui/action.py:342
-#, python-format
-msgid "%s - Finished"
-msgstr "%s - Befejezve"
+#~ msgid "Valid:"
+#~ msgstr "Érvényeség:"
 
-#: ui/action.py:365
-msgid "Log Message"
-msgstr "Napló bejegyzés"
+#~ msgid "Value:"
+#~ msgstr "Érték:"
 
-#: ui/unlock.py:48 ui/unlock.py:125
-msgid "Unlock"
-msgstr "Nyitás"
+#~ msgid "<b>Links</b>"
+#~ msgstr "<b>Link</b>"
 
-#: ui/unlock.py:126
-msgid "Running Unlock Command..."
-msgstr "Nyitás parancs fut..."
+#~ msgid "<b>Version Information</b>"
+#~ msgstr "<b>Verzió információ</b>"
 
-#: ui/unlock.py:129
-msgid "Completed Unlock"
-msgstr "Nyitás befejezve"
+#~ msgid "<span size=\"xx-large\"><b>RabbitVCS</b></span>"
+#~ msgstr "<span size=\"xx-large\"><b>RabbitVCS</b></span>"
 
-#: ui/browser.py:89
-msgid "Size"
-msgstr "Méret"
+#~ msgid "Authors:"
+#~ msgstr "Szerzők:"
 
-#: ui/browser.py:326
-msgid "Select"
-msgstr ""
+#~ msgid "Thanks:"
+#~ msgstr "Köszönet:"
 
-#: ui/browser.py:348
-msgid "Create folder..."
-msgstr "Dosszié létrehozása..."
+#~ msgid "VCS:"
+#~ msgstr "VCS:"
 
-#: ui/browser.py:353
-msgid "Copy to..."
-msgstr "Másolás..."
+#~ msgid "100"
+#~ msgstr "100"
 
-#: ui/browser.py:358
-msgid "Copy URL to clipboard"
-msgstr "URL másolása a vágólapra"
+#~ msgid "<b>Affected File(s)</b> (double-click to compare with base)"
+#~ msgstr ""
+#~ "<b>Érintett fájl/ok/</b> (kettős klikkantással összehasonlítás a bázissal)"
 
-#: ui/browser.py:363
-msgid "Move to..."
-msgstr "Áthelyezés..."
+#~ msgid "<b>Revisions Table</b>"
+#~ msgstr "<b>Revíziós tábla</b>"
 
-#: ui/browser.py:531
-msgid "Where do you want to copy the selection?"
-msgstr "Hová akarja másolni a kijelölést?"
+#~ msgid "Limit:"
+#~ msgstr "Határ:"
 
-#: ui/browser.py:532 ui/browser.py:561
-msgid "New Location:"
-msgstr "Új hely:"
+#~ msgid "Log"
+#~ msgstr "Napló"
 
-#: ui/browser.py:560
-msgid "Where do you want to move the selection?"
-msgstr "Hová akarja áthelyezni a kijelölést?"
+#~ msgid "Refresh"
+#~ msgstr "Frissítés"
 
-#: ui/cleanup.py:56 ui/glade/cleanup.glade.h:1
-msgid "Cleaning Up..."
-msgstr "Tisztítás..."
+#~ msgid "Showing Revisions:"
+#~ msgstr "Revíziók mutatása:"
 
-#: ui/cleanup.py:58
-msgid "Completed Cleanup"
-msgstr "Tisztítás befejezve"
+#~ msgid "Stop on copy"
+#~ msgstr "Másolás megállítása"
 
-#: ui/create.py:46
-msgid "Repository successfully created"
-msgstr "Tároló sikeresen elkészítve"
+#~ msgid ""
+#~ "Cleanup Requested....\n"
+#~ "\n"
+#~ "Begin working copy cleanup?"
+#~ msgstr ""
+#~ "Tisztítást igényelt....\n"
+#~ "\n"
+#~ "Kezdődhet a munkapéldány tisztítása?"
 
-#: ui/create.py:48
-msgid ""
-"There was an error creating the repository.  Make sure the given folder is "
-"empty."
-msgstr "Hiba a tároló készítésekor. Ellenőrizze, hogy a dosszié üres."
+#~ msgid "<b>Authentication</b>"
+#~ msgstr "<b>Azonosítás</b>"
 
-#: ui/glade/properties.glade.h:1
-msgid "<b>Properties for:</b>"
-msgstr "<b>Tulajdonságok ehhez:</b>"
-
-#: ui/glade/properties.glade.h:2
-msgid "<i>Selected properties will be applied recursively.</i>"
-msgstr "<i>Kiválasztott tulajdonságok rekurzívan lesznek használva.</i>"
-
-#: ui/glade/properties.glade.h:4
-msgid "Delete properties recursively"
-msgstr "Rekurzív tulajdonságok törlése"
-
-#: ui/glade/properties.glade.h:5
-msgid "Edit..."
-msgstr "Szerkesztés..."
-
-#: ui/glade/properties.glade.h:6
-msgid "New..."
-msgstr "Új..."
-
-#: ui/glade/properties.glade.h:8
-msgid "URL/Path:"
-msgstr "URL/Útvonal"
-
-#: ui/glade/browser.glade.h:1
-msgid "Load/Refresh"
-msgstr "Betöltés/Frissítés"
-
-#: ui/glade/browser.glade.h:4
-msgid "URL:"
-msgstr "URL:"
+#~ msgid "<b>Log Messages</b>"
+#~ msgstr "<b>Napló üzenetek</b>"
 
-#: ui/glade/dialogs.glade.h:1
-msgid "<b>A conflict was found in the following file:</b>"
-msgstr ""
+#~ msgid "<b>Logging Options</b>"
+#~ msgstr "<b>Naplózási beállítások</b>"
 
-#: ui/glade/dialogs.glade.h:2 ui/glade/commit.glade.h:1
-msgid "<b>Add Message</b>"
-msgstr "<b>Üzenet hozzáadása</b>"
+#~ msgid "<b>Memory usage:</b> "
+#~ msgstr "<b>Memória használat:</b>"
 
-#: ui/glade/dialogs.glade.h:3
-msgid "<b>Certificate Details</b>"
-msgstr "<b>Tanúsítvány részletei</b>"
-
-#: ui/glade/dialogs.glade.h:4
-msgid "<b>Edit Property Details</b>"
-msgstr "<b>Tulajdonság részleteinek szerkesztése</b>"
+#~ msgid "<b>Program used to compare files</b>"
+#~ msgstr "<b>Program a fájlok összehasonlításához</b>"
 
-#: ui/glade/dialogs.glade.h:5
-msgid "<b>Enter Name and Email Details</b>"
-msgstr ""
+#~ msgid "<b>RabbitVCS</b>"
+#~ msgstr "<b>RabbitVCS</b>"
 
-#: ui/glade/dialogs.glade.h:6
-msgid "<b>Folder Name</b>"
-msgstr "<b>Dosszié neve</b>"
-
-#: ui/glade/dialogs.glade.h:7 ui/glade/log.glade.h:3
-msgid "<b>Message</b>"
-msgstr "<b>Üzenet</b>"
-
-#: ui/glade/dialogs.glade.h:8
-msgid "<b>Please add your authentication details</b>"
-msgstr "<b>Adja meg az Ön azonosítóit</b>"
-
-#: ui/glade/dialogs.glade.h:9
-msgid "<b>Please provide your ssl certification file</b>"
-msgstr "<b>Kérjük adja meg az Ön SSL igazoló fájlját</b>"
-
-#: ui/glade/dialogs.glade.h:10
-msgid "<b>Previous Messages</b>"
-msgstr "<b>Korábbi üzenetek</b>"
+#~ msgid "<b>URL History</b>"
+#~ msgstr "<b>URL előzmények</b>"
 
-#: ui/glade/dialogs.glade.h:12
-msgid ""
-"<span size=\"large\"><b>Are you sure you want to delete %item%?</b></span>"
-msgstr ""
-"<span size=\"large\"><b>Akarja törölni a/z/ %item% tételt?</b></span>"
+#~ msgid "Browse..."
+#~ msgstr "Böngészés..."
 
-#: ui/glade/dialogs.glade.h:13
-msgid "<span weight=\"bold\" size=\"xx-large\">RabbitVCS Error</span>"
-msgstr "<span weight=\"bold\" size=\"xx-large\">RabbitVCS Error</span>"
-
-#: ui/glade/dialogs.glade.h:14
-msgid "Accept Forever"
-msgstr "Mindig elfogad"
+#~ msgid "Clear your authentication information"
+#~ msgstr "Az Ön azonosítási információinak törlése"
 
-#: ui/glade/dialogs.glade.h:15
-msgid "Accept Mine"
-msgstr ""
+#~ msgid "Enable emblems"
+#~ msgstr "Jelképek engedélyezve"
 
-#: ui/glade/dialogs.glade.h:16
-msgid "Accept Once"
-msgstr "Egyszer elfogad"
+#~ msgid "Enable file attributes"
+#~ msgstr "Fájl attributomok engedélyezve"
 
-#: ui/glade/dialogs.glade.h:17
-msgid "Accept Theirs"
-msgstr ""
+#~ msgid "Enable recursive status checks"
+#~ msgstr "Rekurzív állapotellenőrzés engedélyezve"
 
-#: ui/glade/dialogs.glade.h:18
-msgid "Apply property recursively"
-msgstr "Tulajdonság megadása rekurzívan"
-
-#: ui/glade/dialogs.glade.h:20
-msgid "Authentication"
-msgstr "Hitelesítés"
+#~ msgid "External Programs"
+#~ msgstr "Külső programok"
 
-#: ui/glade/dialogs.glade.h:21
-msgid "Cancel"
-msgstr ""
+#~ msgid "General"
+#~ msgstr "Általános"
 
-#: ui/glade/dialogs.glade.h:22
-msgid "Check Certificate"
-msgstr "Tanúsítvány ellenőrzése"
-
-#: ui/glade/dialogs.glade.h:23
-msgid "Confirmation"
-msgstr "Megerősítés"
+#~ msgid "Git"
+#~ msgstr "Git"
 
-#: ui/glade/dialogs.glade.h:24
-msgid "Conflict Resolution Decision"
-msgstr ""
+#~ msgid "Language:"
+#~ msgstr "Nyelv:"
 
-#: ui/glade/dialogs.glade.h:25
-msgid "Create Folder..."
-msgstr "Dosszié készítése..."
-
-#: ui/glade/dialogs.glade.h:26
-msgid "Delete Confirmation"
-msgstr "Megerősítés törlése..."
-
-#: ui/glade/dialogs.glade.h:27
-msgid "Deny"
-msgstr "Visszautasít"
+#~ msgid "Logging"
+#~ msgstr "Naplózás"
 
-#: ui/glade/dialogs.glade.h:28
-msgid "Email:"
-msgstr ""
+#~ msgid "Minimum level to log"
+#~ msgstr "Minimális naplóbejegyzés"
 
-#: ui/glade/dialogs.glade.h:29
-msgid "Fingerprint:"
-msgstr "Ujjlenyomat:"
+#~ msgid "Number of URLs to remember"
+#~ msgstr "Megjegyzett URL-ek száma"
 
-#: ui/glade/dialogs.glade.h:31
-msgid "How do you want to handle this?"
-msgstr ""
+#~ msgid "Number of messages to remember"
+#~ msgstr "Megjegyzett üzenetek száma"
 
-#: ui/glade/dialogs.glade.h:32
-msgid "Issuer:"
-msgstr "Kibocsájtó:"
-
-#: ui/glade/dialogs.glade.h:34
-msgid "Login:"
-msgstr "Felhasználó név:"
+#~ msgid "Saved Data"
+#~ msgstr "Mentett adat"
 
-#: ui/glade/dialogs.glade.h:35
-msgid "Merge Manually"
-msgstr ""
+#~ msgid "Show RabbitVCS debugging tools"
+#~ msgstr "RabbitVCS nyomkövető eszköz mutatása"
 
-#: ui/glade/dialogs.glade.h:37
-msgid "Name and Email"
-msgstr ""
+#~ msgid "The debug menu is used to diagnose problems with RabbitVCS itself"
+#~ msgstr "A nyomkövetés menü a problémák diagnózisára a RabbitVCS-t használja"
 
-#: ui/glade/dialogs.glade.h:40
-msgid "Password:"
-msgstr "Jelszó:"
-
-#: ui/glade/dialogs.glade.h:41
-msgid "Path:"
-msgstr "Útvonal:"
-
-#: ui/glade/dialogs.glade.h:42 ui/glade/lock.glade.h:4
-#: ui/glade/commit.glade.h:5 ui/glade/import.glade.h:5
-msgid "Previous Messages"
-msgstr "Előző üzenet"
-
-#: ui/glade/dialogs.glade.h:43
-msgid "Property"
-msgstr "Tulajdonság"
-
-#: ui/glade/dialogs.glade.h:44
-msgid "Property:"
-msgstr "Tulajdonság:"
-
-#: ui/glade/dialogs.glade.h:45
-msgid "RabbitVCS Error"
-msgstr "RabbitVCS hiba"
-
-#: ui/glade/dialogs.glade.h:46
-msgid "Realm:"
-msgstr "Övezet:"
-
-#: ui/glade/dialogs.glade.h:47
-msgid "SSL Client Certification"
-msgstr "SSL kliens igazolás"
-
-#: ui/glade/dialogs.glade.h:48
-msgid "Save Authentication"
-msgstr "Hitelesítés mentése"
-
-#: ui/glade/dialogs.glade.h:49
-msgid "Text Change"
-msgstr "Szöveg változás"
-
-#: ui/glade/dialogs.glade.h:50
-msgid "The item(s) will be sent to the trash can."
-msgstr "A tétel a kukába kerül."
-
-#: ui/glade/dialogs.glade.h:51
-msgid "Valid:"
-msgstr "Érvényeség:"
-
-#: ui/glade/dialogs.glade.h:52
-msgid "Value:"
-msgstr "Érték:"
+#~ msgid "Type:"
+#~ msgstr "Típus:"
 
-#: ui/glade/pull.glade.h:1
-msgid "<b>Pull Information</b>"
-msgstr ""
+#~ msgid "<b>Files to lock</b>"
+#~ msgstr "<b>Zárolt fájlok</b>"
 
-#: ui/glade/pull.glade.h:2 ui/glade/git-update.glade.h:2
-msgid "Merge changes into local branch"
-msgstr ""
+#~ msgid "<b>Please describe why you are locking these files</b>"
+#~ msgstr "<b>Írja le, miért akarja zárolni ezeket a fájlokat?</b>"
 
-#: ui/glade/pull.glade.h:3
-msgid "Pull"
-msgstr ""
+#~ msgid "Lock Files"
+#~ msgstr "Zárolt fájlok"
 
-#: ui/glade/manager.glade.h:1
-msgid "label"
-msgstr ""
+#~ msgid "Select / Deselect all"
+#~ msgstr "Kiválasztás / Összes kiválasztás"
 
-#: ui/glade/about.glade.h:1
-msgid "<b>Links</b>"
-msgstr "<b>Link</b>"
-
-#: ui/glade/about.glade.h:2
-msgid "<b>Version Information</b>"
-msgstr "<b>Verzió információ</b>"
-
-#: ui/glade/about.glade.h:3
-msgid "<span size=\"xx-large\"><b>RabbitVCS</b></span>"
-msgstr "<span size=\"xx-large\"><b>RabbitVCS</b></span>"
-
-#: ui/glade/about.glade.h:5
-msgid "Authors:"
-msgstr "Szerzők:"
-
-#: ui/glade/about.glade.h:6
-msgid "Thanks:"
-msgstr "Köszönet:"
+#~ msgid "Steal the locks"
+#~ msgstr "Zárolások ellopása"
 
-#: ui/glade/property_page.glade.h:1
-msgid "Content status:"
-msgstr ""
+#~ msgid "<b>From Revision</b>"
+#~ msgstr "<b>Revíziótól</b>"
 
-#: ui/glade/property_page.glade.h:3
-msgid "Property status:"
-msgstr ""
+#~ msgid "<b>To Revision</b>"
+#~ msgstr "<b>Revízióig</b>"
 
-#: ui/glade/property_page.glade.h:5
-msgid "VCS:"
-msgstr ""
+#~ msgid "Annotate"
+#~ msgstr "Jegyzet"
 
-#: ui/glade/log.glade.h:1
-msgid "100"
-msgstr "100"
+#~ msgid "<b>Changed Files</b> (double-click to compare with base)"
+#~ msgstr ""
+#~ "<b>Változott fájlok</b> (kettős klikkantással összehasonlítás a bázissal)"
 
-#: ui/glade/log.glade.h:2
-msgid "<b>Affected File(s)</b> (double-click to compare with base)"
-msgstr ""
-"<b>Érintett fájl/ok/</b> (kettős klikkantással összehasonlítás a bázissal)"
+#~ msgid "<b>Commit to:</b>"
+#~ msgstr "<b>Beküldés</b>"
 
-#: ui/glade/log.glade.h:4
-msgid "<b>Revisions Table</b>"
-msgstr "<b>Revíziós tábla</b>"
-
-#: ui/glade/log.glade.h:5
-msgid "Limit:"
-msgstr "Határ:"
-
-#: ui/glade/log.glade.h:6
-msgid "Log"
-msgstr "Napló"
+#~ msgid "Show unversioned files"
+#~ msgstr "Verziókezelésen kívüli fájlok mutatása"
 
-#: ui/glade/log.glade.h:8
-msgid "Refresh"
-msgstr "Frissítés"
+#~ msgid "Notification Messages"
+#~ msgstr "Értesítés"
 
-#: ui/glade/log.glade.h:9
-msgid "Showing Revisions:"
-msgstr "Revíziók mutatása:"
-
-#: ui/glade/log.glade.h:10
-msgid "Stop on copy"
-msgstr "Másolás megállítása"
+#~ msgid "<b>Remote URI:</b>"
+#~ msgstr "<b>Távoli URI:</b>"
 
-#: ui/glade/cleanup.glade.h:2
-msgid ""
-"Cleanup Requested....\n"
-"\n"
-"Begin working copy cleanup?"
-msgstr ""
-"Tisztítást igényelt....\n"
-"\n"
-"Kezdődhet a munkapéldány tisztítása?"
-
-#: ui/glade/settings.glade.h:1
-msgid "<b>Authentication</b>"
-msgstr "<b>Azonosítás</b>"
+#~ msgid "<b>Working Copy:</b>"
+#~ msgstr "<b>Munkapéldány:</b>"
 
-#: ui/glade/settings.glade.h:2
-msgid "<b>Checker type:</b>"
-msgstr ""
+#~ msgid "Add a new property."
+#~ msgstr "Egy új tulajdonság hozzáadása"
 
-#: ui/glade/settings.glade.h:3
-msgid "<b>Configuration Editor</b>"
-msgstr ""
+#~ msgid "Close this dialog."
+#~ msgstr "Párbeszéd bezárása."
 
-#: ui/glade/settings.glade.h:4
-msgid "<b>Log Messages</b>"
-msgstr "<b>Napló üzenetek</b>"
-
-#: ui/glade/settings.glade.h:5
-msgid "<b>Logging Options</b>"
-msgstr "<b>Naplózási beállítások</b>"
+#~ msgid "Property Editor"
+#~ msgstr "Tulajdonság szerkesztő"
 
-#: ui/glade/settings.glade.h:6
-msgid "<b>Memory usage:</b> "
-msgstr ""
+#~ msgid "Refresh the list of properties."
+#~ msgstr "Tulajdonságok listájának frissítése."
 
-#: ui/glade/settings.glade.h:7
-msgid "<b>Other Information</b>"
-msgstr ""
+#~ msgid "<b>Change the repository of your working copy</b>"
+#~ msgstr "<b>Tároló cseréje az Ön munkapéldányhoz</b>"
 
-#: ui/glade/settings.glade.h:8
-msgid "<b>Process ID:</b>"
-msgstr ""
+#~ msgid "From:"
+#~ msgstr "Innen:"
 
-#: ui/glade/settings.glade.h:9
-msgid "<b>Program used to compare files</b>"
-msgstr "<b>Program a fájlok összehasonlításához</b>"
-
-#: ui/glade/settings.glade.h:10
-msgid "<b>RabbitVCS</b>"
-msgstr "<b>RabbitVCS</b>"
-
-#: ui/glade/settings.glade.h:11
-msgid "<b>URL History</b>"
-msgstr "<b>URL előzmények</b>"
-
-#: ui/glade/settings.glade.h:12
-msgid "Browse..."
-msgstr "Böngészés..."
-
-#: ui/glade/settings.glade.h:13
-msgid "Clear your authentication information"
-msgstr "Az Ön azonosítási információinak törlése"
-
-#: ui/glade/settings.glade.h:14
-msgid "Enable emblems"
-msgstr "Jelképek engedélyezve"
-
-#: ui/glade/settings.glade.h:15
-msgid "Enable file attributes"
-msgstr "Fájl attributomok engedélyezve"
-
-#: ui/glade/settings.glade.h:16
-msgid "Enable recursive status checks"
-msgstr "Rekurzív állapotellenőrzés engedélyezve"
-
-#: ui/glade/settings.glade.h:17
-msgid "External Programs"
-msgstr "Külső programok"
-
-#: ui/glade/settings.glade.h:18
-msgid "General"
-msgstr "Általános"
+#~ msgid "To:"
+#~ msgstr "Eddig:"
 
-#: ui/glade/settings.glade.h:19
-msgid "Git"
-msgstr ""
+#~ msgid "<b>Options</b>"
+#~ msgstr "<b>Opciók</b>"
 
-#: ui/glade/settings.glade.h:20
-msgid "Language:"
-msgstr "Nyelv:"
-
-#: ui/glade/settings.glade.h:21
-msgid "Logging"
-msgstr "Naplózás"
-
-#: ui/glade/settings.glade.h:22
-msgid "Minimum level to log"
-msgstr "Minimális naplóbejegyzés"
-
-#: ui/glade/settings.glade.h:23
-msgid "Number of URLs to remember"
-msgstr "Megjegyzett URL-ek száma"
-
-#: ui/glade/settings.glade.h:24
-msgid "Number of messages to remember"
-msgstr "Megjegyzett üzenetek száma"
+#~ msgid "<b>Revision</b>"
+#~ msgstr "<b>Revízió</b>"
 
-#: ui/glade/settings.glade.h:25
-msgid "Refresh Information"
-msgstr ""
+#~ msgid "Omit Externals"
+#~ msgstr "Külső tárolók kihagyása"
 
-#: ui/glade/settings.glade.h:26
-msgid "Restart Checker"
-msgstr ""
+#~ msgid "Recursive"
+#~ msgstr "Rekurzív"
 
-#: ui/glade/settings.glade.h:27
-msgid "Saved Data"
-msgstr "Mentett adat"
-
-#: ui/glade/settings.glade.h:29
-msgid "Show RabbitVCS debugging tools"
-msgstr "RabbitVCS nyomkövető eszköz mutatása"
+#~ msgid "<b>Import Message</b>"
+#~ msgstr "<b>Import üzenet</b>"
 
-#: ui/glade/settings.glade.h:30
-msgid "Show new version on the left side"
-msgstr ""
+#~ msgid "<b>Repository</b>"
+#~ msgstr "<b>Tároló</b>"
 
-#: ui/glade/settings.glade.h:31
-msgid "Status Checker"
-msgstr ""
+#~ msgid "Include ignored files"
+#~ msgstr "Mellőzött fájlokat tartalmaz"
 
-#: ui/glade/settings.glade.h:32
-msgid "Stop Checker"
-msgstr ""
+#~ msgid "<b>From URL</b>"
+#~ msgstr "<b>Ettől az URL-től</b>"
 
-#: ui/glade/settings.glade.h:33
-msgid "The debug menu is used to diagnose problems with RabbitVCS itself"
-msgstr "A nyomkövetés menü a problémák diagnózisára a RabbitVCS-t használja"
-
-#: ui/glade/settings.glade.h:34
-msgid "Type:"
-msgstr "Típus:"
-
-#: ui/glade/lock.glade.h:1
-msgid "<b>Files to lock</b>"
-msgstr "<b>Zárolt fájlok</b>"
-
-#: ui/glade/lock.glade.h:2
-msgid "<b>Please describe why you are locking these files</b>"
-msgstr "<b>Írja le, miért akarja zárolni ezeket a fájlokat?</b>"
-
-#: ui/glade/lock.glade.h:3
-msgid "Lock Files"
-msgstr "Zárolt fájlok"
-
-#: ui/glade/lock.glade.h:5 ui/glade/add.glade.h:2 ui/glade/commit.glade.h:6
-msgid "Select / Deselect all"
-msgstr "Kiválasztás / Összes kiválasztás"
-
-#: ui/glade/lock.glade.h:6
-msgid "Steal the locks"
-msgstr "Zárolások ellopása"
-
-#: ui/glade/annotate.glade.h:1
-msgid "<b>From Revision</b>"
-msgstr "<b>Revíziótól</b>"
-
-#: ui/glade/annotate.glade.h:2
-msgid "<b>To Revision</b>"
-msgstr "<b>Revízióig</b>"
-
-#: ui/glade/annotate.glade.h:3
-msgid "Annotate"
-msgstr "Jegyzet"
+#~ msgid "<b>From: (URL and revision to merge)</b>"
+#~ msgstr "<b>Innen: (URL és revízió egyesítve)</b>"
 
-#: ui/glade/ignore.glade.h:1
-msgid "<b>Ignore and exclude files from being tracked</b>"
-msgstr ""
+#~ msgid "<b>Revision Range</b>"
+#~ msgstr "<b>Revíziós terület</b>"
 
-#: ui/glade/ignore.glade.h:2
-msgid "Ignore"
-msgstr ""
+#~ msgid "<b>To: (URL and revision to merge)</b>"
+#~ msgstr "<b>Eddig: (URL és revízió egyesítve)</b>"
 
-#: ui/glade/commit.glade.h:2
-msgid "<b>Changed Files</b> (double-click to compare with base)"
-msgstr ""
-"<b>Változott fájlok</b> (kettős klikkantással összehasonlítás a bázissal)"
+#~ msgid "<b>URL to merge from</b>"
+#~ msgstr "<b>URL egyesítve innen</b>"
 
-#: ui/glade/commit.glade.h:3
-msgid "<b>Commit to:</b>"
-msgstr "<b>Beküldés</b>"
-
-#: ui/glade/commit.glade.h:7
-msgid "Show unversioned files"
-msgstr "Verziókezelésen kívüli fájlok mutatása"
-
-#: ui/glade/notification.glade.h:1
-msgid "Notification Messages"
-msgstr "Értesítés"
-
-#: ui/glade/property_editor.glade.h:1
-msgid "<b>Remote URI:</b>"
-msgstr "<b>Távoli URI:</b>"
-
-#: ui/glade/property_editor.glade.h:2
-msgid "<b>Working Copy:</b>"
-msgstr "<b>Munkapéldány:</b>"
-
-#: ui/glade/property_editor.glade.h:3
-msgid "Add a new property."
-msgstr "Egy új tulajdonság hozzáadása"
-
-#: ui/glade/property_editor.glade.h:4
-msgid "Close this dialog."
-msgstr "Párbeszéd bezárása."
-
-#: ui/glade/property_editor.glade.h:5
-msgid "Property Editor"
-msgstr "Tulajdonság szerkesztő"
-
-#: ui/glade/property_editor.glade.h:6
-msgid "Refresh the list of properties."
-msgstr "Tulajdonságok listájának frissítése."
-
-#: ui/glade/relocate.glade.h:1
-msgid "<b>Change the repository of your working copy</b>"
-msgstr "<b>Tároló cseréje az Ön munkapéldányhoz</b>"
-
-#: ui/glade/relocate.glade.h:2
-msgid "From:"
-msgstr "Innen:"
-
-#: ui/glade/relocate.glade.h:4
-msgid "To:"
-msgstr "Eddig:"
-
-#: ui/glade/git-update.glade.h:1 ui/glade/update.glade.h:1
-#: ui/glade/merge.glade.h:3
-msgid "<b>Options</b>"
-msgstr "<b>Opciók</b>"
+#~ msgid "<b>Working Copy</b>"
+#~ msgstr "<b>Munkapéldány</b>"
 
-#: ui/glade/git-update.glade.h:3
-msgid "Update Local Repository"
-msgstr ""
+#~ msgid ""
+#~ "Choose this method if you have made some changes to a branch and wish to "
+#~ "merge your changes with another branch."
+#~ msgstr ""
+#~ "Válassza ezt a módszert, ha Önnek sok változása van a branchban és "
+#~ "egyesíteni kívánja a módosításokat egy másik branchcsal."
 
-#: ui/glade/update.glade.h:2
-msgid "<b>Revision</b>"
-msgstr "<b>Revízió</b>"
-
-#: ui/glade/update.glade.h:3
-msgid "Omit Externals"
-msgstr "Külső tárolók kihagyása"
-
-#: ui/glade/update.glade.h:4 ui/glade/merge.glade.h:16
-msgid "Recursive"
-msgstr "Rekurzív"
+#~ msgid ""
+#~ "Choose this method if you wish to merge two different branches into your "
+#~ "working copy."
+#~ msgstr ""
+#~ "Válassza ezt a módszert, ha két különböző branchot kíván egyesíteni a "
+#~ "munkapéldányában."
 
-#: ui/glade/update.glade.h:5
-msgid "Rollback to specified revision number"
-msgstr ""
+#~ msgid "Ignore ancestry"
+#~ msgstr "Eredet mellőzése"
 
-#: ui/glade/import.glade.h:1
-msgid "<b>Import Message</b>"
-msgstr "<b>Import üzenet</b>"
-
-#: ui/glade/import.glade.h:2
-msgid "<b>Repository</b>"
-msgstr "<b>Tároló</b>"
-
-#: ui/glade/import.glade.h:4
-msgid "Include ignored files"
-msgstr "Mellőzött fájlokat tartalmaz"
-
-#: ui/glade/merge.glade.h:1
-msgid "<b>From URL</b>"
-msgstr "<b>Ettől az URL-től</b>"
-
-#: ui/glade/merge.glade.h:2
-msgid "<b>From: (URL and revision to merge)</b>"
-msgstr "<b>Innen: (URL és revízió egyesítve)</b>"
-
-#: ui/glade/merge.glade.h:4
-msgid "<b>Revision Range</b>"
-msgstr "<b>Revíziós terület</b>"
-
-#: ui/glade/merge.glade.h:5
-msgid "<b>To: (URL and revision to merge)</b>"
-msgstr "<b>Eddig: (URL és revízió egyesítve)</b>"
-
-#: ui/glade/merge.glade.h:6
-msgid "<b>URL to merge from</b>"
-msgstr "<b>URL egyesítve innen</b>"
-
-#: ui/glade/merge.glade.h:7
-msgid "<b>Working Copy</b>"
-msgstr "<b>Munkapéldány</b>"
+#~ msgid "Merge Assistant"
+#~ msgstr "Egyesítés segéd"
 
-#: ui/glade/merge.glade.h:8
-msgid ""
-"Choose this method if you have made some changes to a branch and wish to "
-"merge your changes with another branch."
-msgstr ""
-"Válassza ezt a módszert, ha Önnek sok változása van a branchban és "
-"egyesíteni kívánja a módosításokat egy másik branchcsal."
+#~ msgid "Merge a range of revisions"
+#~ msgstr "Egy revíziós terület egyesítése"
 
-#: ui/glade/merge.glade.h:9
-msgid ""
-"Choose this method if you wish to merge two different branches into your "
-"working copy."
-msgstr ""
-"Válassza ezt a módszert, ha két különböző branchot kíván egyesíteni a "
-"munkapéldányában."
+#~ msgid "Merge two different trees"
+#~ msgstr "Két különböző fa egyesítése"
 
-#: ui/glade/merge.glade.h:11
-msgid "Ignore ancestry"
-msgstr "Eredet mellőzése"
-
-#: ui/glade/merge.glade.h:12
-msgid "Merge Assistant"
-msgstr "Egyesítés segéd"
-
-#: ui/glade/merge.glade.h:13
-msgid "Merge a range of revisions"
-msgstr "Egy revíziós terület egyesítése"
-
-#: ui/glade/merge.glade.h:14
-msgid "Merge two different trees"
-msgstr "Két különböző fa egyesítése"
-
-#: ui/glade/merge.glade.h:15
-msgid "Only record the merge"
-msgstr "Csak rögzítése az egyesítésnek"
+#~ msgid "Only record the merge"
+#~ msgstr "Csak rögzítése az egyesítésnek"
 
-#: ui/glade/merge.glade.h:18
-msgid "Show log"
-msgstr "Napló mutatása"
+#~ msgid "Show log"
+#~ msgstr "Napló mutatása"
 
-#: ui/glade/merge.glade.h:19
-msgid "Test Merge"
-msgstr "Egyesítés teszt"
+#~ msgid "Test Merge"
+#~ msgstr "Egyesítés teszt"
 
-#: ui/glade/merge.glade.h:20
-msgid ""
-"Use the log dialog to select the revisions that you wish to merge.  Or write "
-"out the revisions manually, each separated by a comma.  You can specify a "
-"revision range by a dash. \n"
-"\n"
-"Example: 4-7,9,11,15-HEAD\n"
-"\n"
-"To merge all revisions, leave the box empty."
-msgstr ""
-"A kiválasztott revíziók egyesítéséhez használja a napló bejegyzést vagy írja "
-"ki a revíziókat kézzel azokat vesszővel elválasztva.  Egy tartomány "
-"megadásához kötőjelet használhat.\n"
-"\n"
-"Például: 4-7,9,11,15-HEAD\n"
-"\n"
-"Az összes revízió egyesítéséhez hagyja üresen a szövegdobozt."
+#~ msgid ""
+#~ "Use the log dialog to select the revisions that you wish to merge.  Or "
+#~ "write out the revisions manually, each separated by a comma.  You can "
+#~ "specify a revision range by a dash. \n"
+#~ "\n"
+#~ "Example: 4-7,9,11,15-HEAD\n"
+#~ "\n"
+#~ "To merge all revisions, leave the box empty."
+#~ msgstr ""
+#~ "A kiválasztott revíziók egyesítéséhez használja a napló bejegyzést vagy "
+#~ "írja ki a revíziókat kézzel azokat vesszővel elválasztva.  Egy tartomány "
+#~ "megadásához kötőjelet használhat.\n"
+#~ "\n"
+#~ "Például: 4-7,9,11,15-HEAD\n"
+#~ "\n"
+#~ "Az összes revízió egyesítéséhez hagyja üresen a szövegdobozt."
diff -uNr rabbitvcs-0.17.1/po/ru.po rabbitvcs/po/ru.po
--- rabbitvcs-0.17.1/po/ru.po	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/po/ru.po	2019-09-13 08:36:17.253343091 +0800
@@ -122,11 +122,11 @@
 
 #: util/contextmenuitems.py:312
 msgid "Checkout..."
-msgstr "Проверка..."
+msgstr "Извлечь..."
 
 #: util/contextmenuitems.py:313
 msgid "Check out a working copy"
-msgstr "Проверка рабочей копии"
+msgstr "Извлечение рабочей копии"
 
 #: util/contextmenuitems.py:318 ui/update.py:53 ui/update.py:97
 #: ui/glade/update.glade.h:6
diff -uNr rabbitvcs-0.17.1/rabbitvcs/__init__.py rabbitvcs/rabbitvcs/__init__.py
--- rabbitvcs-0.17.1/rabbitvcs/__init__.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/__init__.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,29 +1,29 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
-    
+
 import os
 import gettext as _gettext
-from locale import getdefaultlocale
+from locale import getdefaultlocale, getlocale, LC_MESSAGES
 
 # Hack to make RabbitVCS win in the battle against TortoiseHg
 try:
@@ -32,7 +32,7 @@
 except Exception as e:
     pass
 
-version = "0.17.0"
+version = "0.17.1"
 APP_NAME = "RabbitVCS"
 TEMP_DIR_PREFIX = "rabbitvcs-"
 LOCALE_DIR = "%s/locale" % os.path.dirname(os.path.dirname(os.path.realpath(__file__)))
@@ -45,13 +45,32 @@
 language = os.environ.get('LANGUAGE', None)
 if language:
     langs += language.split(":")
-if getdefaultlocale()[0] != None: 
+if getdefaultlocale()[0] != None:
     langs += [getdefaultlocale()[0]]
 
 _gettext.bindtextdomain(APP_NAME, LOCALE_DIR)
 _gettext.textdomain(APP_NAME)
+current_translation = None
 
-gettext = _gettext.translation(APP_NAME, LOCALE_DIR, languages=langs, fallback=True)
+class gettext():
+    @staticmethod
+    def set_language(langs):
+        global current_translation
+        current_translation = _gettext.translation(APP_NAME,
+                                                   LOCALE_DIR,
+                                                   languages = langs,
+                                                   fallback = True)
+    @staticmethod
+    def gettext(message):
+        if not current_translation:
+            return message
+        return current_translation.gettext(message)
+
+    @staticmethod
+    def ngettext(msgid1, msgid2, n):
+        return gettext.gettext(msgid1 if n == 1 else msgid2)
+
+gettext.set_language(langs)
 
 def package_name():
     """
@@ -79,11 +98,11 @@
 
     """
     return "%s-%s" % (package_name(), package_version())
-    
+
 def package_prefix():
     """
     Return the prefix of the local RabbitVCS installation
-    
+
     """
 
     try:
@@ -95,9 +114,9 @@
 def get_icon_path():
     """
     Return the path to the icon folder
-    
+
     """
-    
+
     try:
         from rabbitvcs.buildinfo import icon_path
         return icon_path
diff -uNr rabbitvcs-0.17.1/rabbitvcs/debug/__init__.py rabbitvcs/rabbitvcs/debug/__init__.py
--- rabbitvcs-0.17.1/rabbitvcs/debug/__init__.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/debug/__init__.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,21 +1,21 @@
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
diff -uNr rabbitvcs-0.17.1/rabbitvcs/debug/ipython_view.py rabbitvcs/rabbitvcs/debug/ipython_view.py
--- rabbitvcs-0.17.1/rabbitvcs/debug/ipython_view.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/debug/ipython_view.py	2019-09-13 08:36:17.257343196 +0800
@@ -6,8 +6,8 @@
 @copyright: Copyright (c) 2007 IBM Corporation
 @license: BSD
 
-All rights reserved. This program and the accompanying materials are made 
-available under the terms of the BSD which accompanies this distribution, and 
+All rights reserved. This program and the accompanying materials are made
+available under the terms of the BSD which accompanies this distribution, and
 is available at U{http://www.opensource.org/licenses/bsd-license.php}
 '''
 from __future__ import absolute_import
@@ -31,7 +31,7 @@
 class IterableIPShell:
   '''
   Create an IPython instance. Does not start a blocking event loop,
-  instead allow single iterations. This allows embedding in GTK+ 
+  instead allow single iterations. This allows embedding in GTK+
   without blockage.
 
   @ivar IP: IPython instance.
@@ -39,17 +39,17 @@
   @ivar iter_more: Indicates if the line executed was a complete command,
   or we should wait for more.
   @type iter_more: integer
-  @ivar history_level: The place in history where we currently are 
+  @ivar history_level: The place in history where we currently are
   when pressing up/down.
   @type history_level: integer
   @ivar complete_sep: Seperation delimeters for completion function.
   @type complete_sep: _sre.SRE_Pattern
   '''
-  def __init__(self,argv=[],user_ns=None,user_global_ns=None, 
+  def __init__(self,argv=[],user_ns=None,user_global_ns=None,
                cin=None, cout=None,cerr=None, input_func=None):
     '''
-    
-    
+
+
     @param argv: Command line options for IPython
     @type argv: list
     @param user_ns: User namespace.
@@ -59,7 +59,7 @@
     @param cin: Console standard input.
     @type cin: IO stream
     @param cout: Console standard output.
-    @type cout: IO stream 
+    @type cout: IO stream
     @param cerr: Console standard error.
     @type cerr: IO stream
     @param input_func: Replacement for builtin raw_input()
@@ -74,13 +74,13 @@
     if cerr:
       IPython.Shell.Term.cerr = cerr
 
-    # This is to get rid of the blockage that accurs during 
+    # This is to get rid of the blockage that accurs during
     # IPython.Shell.InteractiveShell.user_setup()
     IPython.iplib.raw_input = lambda x: None
 
     self.term = IPython.genutils.IOTerm(cin=cin, cout=cout, cerr=cerr)
     os.environ['TERM'] = 'dumb'
-    excepthook = sys.excepthook 
+    excepthook = sys.excepthook
     self.IP = IPython.Shell.make_IPython(
       argv,user_ns=user_ns,
       user_global_ns=user_global_ns,
@@ -110,7 +110,7 @@
       self.IP.resetbuffer()
       # keep cache in sync with the prompt counter:
       self.IP.outputcache.prompt_count -= 1
-        
+
       if self.IP.autoindent:
         self.IP.indent_current_nsp = 0
       self.iter_more = 0
@@ -132,27 +132,27 @@
   def historyBack(self):
     '''
     Provides one history command back.
-    
+
     @return: The command string.
     @rtype: string
     '''
     self.history_level -= 1
     return self._getHistory()
-  
+
   def historyForward(self):
     '''
     Provides one history command forward.
-    
+
     @return: The command string.
     @rtype: string
     '''
     self.history_level += 1
     return self._getHistory()
-  
+
   def _getHistory(self):
     '''
     Get's the command string of the current history level.
-    
+
     @return: Historic command string.
     @rtype: string
     '''
@@ -166,7 +166,7 @@
   def updateNamespace(self, ns_dict):
     '''
     Add the current dictionary to the shell namespace.
-    
+
     @param ns_dict: A dictionary of symbol-values.
     @type ns_dict: dictionary
     '''
@@ -175,11 +175,11 @@
   def complete(self, line):
     '''
     Returns an auto completed line and/or posibilities for completion.
-    
+
     @param line: Given line so far.
     @type line: string
-    
-    @return: Line completed as for as possible, 
+
+    @return: Line completed as for as possible,
     and possible further completions.
     @rtype: tuple
     '''
@@ -189,12 +189,12 @@
       def _commonPrefix(str1, str2):
         '''
         Reduction function. returns common prefix of two given strings.
-        
+
         @param str1: First string.
         @type str1: string
         @param str2: Second string
         @type str2: string
-        
+
         @return: Common prefix to both strings.
         @rtype: string
         '''
@@ -207,12 +207,12 @@
     else:
       completed = line
     return completed, possibilities
-  
+
 
   def shell(self, cmd,verbose=0,debug=0,header=''):
     '''
     Replacement method to allow shell commands without them blocking.
-    
+
     @param cmd: Shell command to execute.
     @type cmd: string
     @param verbose: Verbosity
@@ -264,28 +264,28 @@
     self.modify_font(pango.FontDescription('Mono'))
     self.set_cursor_visible(True)
     self.text_buffer = self.get_buffer()
-    self.mark = self.text_buffer.create_mark('scroll_mark', 
+    self.mark = self.text_buffer.create_mark('scroll_mark',
                                              self.text_buffer.get_end_iter(),
                                              False)
     for code in self.ANSI_COLORS:
-      self.text_buffer.create_tag(code, 
-                                  foreground=self.ANSI_COLORS[code], 
+      self.text_buffer.create_tag(code,
+                                  foreground=self.ANSI_COLORS[code],
                                   weight=700)
     self.text_buffer.create_tag('0')
     self.text_buffer.create_tag('notouch', editable=False)
     self.color_pat = re.compile('\x01?\x1b\[(.*?)m\x02?')
     self.line_start = \
-        self.text_buffer.create_mark('line_start', 
+        self.text_buffer.create_mark('line_start',
                                      self.text_buffer.get_end_iter(), True)
     self.connect('key-press-event', self.onKeyPress)
-    
+
   def write(self, text, editable=False):
     gobject.idle_add(self._write, text, editable)
 
   def _write(self, text, editable=False):
     '''
     Write given text to buffer.
-    
+
     @param text: Text to append.
     @type text: string
     @param editable: If true, added text is editable.
@@ -293,8 +293,8 @@
     '''
     segments = self.color_pat.split(text)
     segment = segments.pop(0)
-    start_mark = self.text_buffer.create_mark(None, 
-                                              self.text_buffer.get_end_iter(), 
+    start_mark = self.text_buffer.create_mark(None,
+                                              self.text_buffer.get_end_iter(),
                                               True)
     self.text_buffer.insert(self.text_buffer.get_end_iter(), segment)
 
@@ -319,7 +319,7 @@
   def _showPrompt(self, prompt):
     '''
     Prints prompt at start of line.
-    
+
     @param prompt: Prompt to print.
     @type prompt: string
     '''
@@ -333,7 +333,7 @@
   def _changeLine(self, text):
     '''
     Replace currently entered command line with given text.
-    
+
     @param text: Text to use as replacement.
     @type text: string
     '''
@@ -345,7 +345,7 @@
   def getCurrentLine(self):
     '''
     Get text in current command line.
-    
+
     @return: Text of current command line.
     @rtype: string
     '''
@@ -360,14 +360,14 @@
   def _showReturned(self, text):
     '''
     Show returned text from last command and print new prompt.
-    
+
     @param text: Text to show.
     @type text: string
     '''
     iter = self.text_buffer.get_iter_at_mark(self.line_start)
     iter.forward_to_line_end()
     self.text_buffer.apply_tag_by_name(
-      'notouch', 
+      'notouch',
       self.text_buffer.get_iter_at_mark(self.line_start),
       iter)
     self._write('\n'+text)
@@ -379,15 +379,15 @@
 
   def onKeyPress(self, widget, event):
     '''
-    Key press callback used for correcting behavior for console-like 
+    Key press callback used for correcting behavior for console-like
     interfaces. For example 'home' should go to prompt, not to begining of
     line.
-    
+
     @param widget: Widget that key press accored in.
     @type widget: gtk.Widget
     @param event: Event object
     @type event: gtk.gdk.Event
-    
+
     @return: Return True if event should not trickle.
     @rtype: boolean
     '''
@@ -420,7 +420,7 @@
     elif insert_iter.compare(selection_iter) < 0:
       self.text_buffer.move_mark(insert_mark, start_iter)
     elif insert_iter.compare(selection_iter) > 0:
-      self.text_buffer.move_mark(selection_mark, start_iter)             
+      self.text_buffer.move_mark(selection_mark, start_iter)
 
     return self.onKeyPressExtend(event)
 
@@ -441,7 +441,7 @@
     '''
     ConsoleView.__init__(self)
     self.cout = StringIO()
-    IterableIPShell.__init__(self, cout=self.cout,cerr=self.cout, 
+    IterableIPShell.__init__(self, cout=self.cout,cerr=self.cout,
                              input_func=self.raw_input)
 #    self.connect('key_press_event', self.keyPress)
     self.execute()
@@ -452,10 +452,10 @@
   def raw_input(self, prompt=''):
     '''
     Custom raw_input() replacement. Get's current line from console buffer.
-    
+
     @param prompt: Prompt to print. Here for compatability as replacement.
     @type prompt: string
-    
+
     @return: The current command line text.
     @rtype: string
     '''
@@ -466,12 +466,12 @@
 
   def onKeyPressExtend(self, event):
     '''
-    Key press callback with plenty of shell goodness, like history, 
+    Key press callback with plenty of shell goodness, like history,
     autocompletions, etc.
-    
+
     @param event: Event object.
     @type event: gtk.gdk.Event
-    
+
     @return: True if event should not trickle.
     @rtype: boolean
     '''
@@ -511,4 +511,4 @@
     if rv: rv = rv.strip('\n')
     self.showReturned(rv)
     self.cout.truncate(0)
-    
+
diff -uNr rabbitvcs-0.17.1/rabbitvcs/services/checkerservice.py rabbitvcs/rabbitvcs/services/checkerservice.py
--- rabbitvcs-0.17.1/rabbitvcs/services/checkerservice.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/services/checkerservice.py	2019-09-13 08:36:17.257343196 +0800
@@ -46,24 +46,20 @@
 
 import os, os.path
 import sys
-import simplejson
-import six
+import json
+import locale
+
+from gi.repository import GObject
+from gi.repository import GLib
 
-if "NAUTILUS_PYTHON_REQUIRE_GTK3" in os.environ and os.environ["NAUTILUS_PYTHON_REQUIRE_GTK3"]:
-    from gi.repository import GObject as gobject
-    from gi.repository import GLib as glib
-else:
-    import gobject
-    import glib
-    
 import dbus
-import dbus.glib # FIXME: this might actually already set the default loop
 import dbus.mainloop.glib
 import dbus.service
 
 import rabbitvcs.util.decorators
 import rabbitvcs.util._locale
-import rabbitvcs.util.helper
+from rabbitvcs.util import helper
+from rabbitvcs.util.strings import S
 import rabbitvcs.services.service
 from rabbitvcs.services.statuschecker import StatusChecker
 
@@ -98,7 +94,7 @@
     """ Once we get a JSON encoded string out the other side of DBUS, we need to
     reconstitute the original object. This method is based on the pickle module
     in the Python stdlib.
-    """    
+    """
     cl = find_class(json_dict['__module__'], json_dict['__type__'])
     st = None
     if cl in rabbitvcs.vcs.status.STATUS_TYPES:
@@ -111,6 +107,11 @@
         raise TypeError("RabbitVCS status object has no path")
     return st
 
+def output_and_flush(*args):
+    # Idle output function.
+    sys.stdout.write(*args)
+    sys.stdout.flush()
+
 class StatusCheckerService(dbus.service.Object):
     """ StatusCheckerService objects wrap a StatusCheckerPlus instance,
     exporting methods that can be called via DBUS.
@@ -134,10 +135,10 @@
         @type mainloop: any main loop with a quit() method
         """
         dbus.service.Object.__init__(self, connection, OBJECT_PATH)
-        
-        self.encoder = simplejson.JSONEncoder(default=encode_status,
+
+        self.encoder = json.JSONEncoder(default=encode_status,
                                               separators=(',', ':'))
-        
+
         self.mainloop = mainloop
 
         # Start the status checking daemon so we can do requests in the
@@ -150,12 +151,15 @@
 
     @dbus.service.method(INTERFACE)
     def MemoryUsage(self):
-        own_mem = rabbitvcs.util.helper.process_memory(os.getpid())
+        own_mem = helper.process_memory(os.getpid())
         checker_mem = self.status_checker.get_memory_usage()
-
         return own_mem + checker_mem
 
     @dbus.service.method(INTERFACE)
+    def SetLocale(self, language = None, encoding = None):
+        return rabbitvcs.util._locale.set_locale(language, encoding)
+
+    @dbus.service.method(INTERFACE)
     def PID(self):
         return os.getpid()
 
@@ -163,26 +167,28 @@
     def CheckerType(self):
         return self.status_checker.CHECKER_NAME
 
-    @dbus.service.method(INTERFACE, in_signature='sbbb', out_signature='s')
+    @dbus.service.method(INTERFACE, in_signature='aybbb', out_signature='s')
     def CheckStatus(self, path, recurse=False, invalidate=False,
                       summary=False):
         """ Requests a status check from the underlying status checker.
+            Path is given as an array of bytes instead of a string because
+            dbus does not support strings with invalid characters.
         """
-        status = self.status_checker.check_status(six.text_type(path),
+        status = self.status_checker.check_status(S(bytearray(path)),
                                                   recurse=recurse,
                                                   summary=summary,
                                                   invalidate=invalidate)
-        
+
         return self.encoder.encode(status)
 
-    @dbus.service.method(INTERFACE, in_signature='as', out_signature='s')
+    @dbus.service.method(INTERFACE, in_signature='aay', out_signature='s')
     def GenerateMenuConditions(self, paths):
         upaths = []
         for path in paths:
-            upaths.append(six.text_type(path))
-    
+            upaths.append(S(bytearray(path)))
+
         path_dict = self.status_checker.generate_menu_conditions(upaths)
-        return simplejson.dumps(path_dict)
+        return json.dumps(path_dict)
 
     @dbus.service.method(INTERFACE)
     def CheckVersionOrDie(self, version):
@@ -247,7 +253,7 @@
         # We need this to for the client to be able to do asynchronous calls
         dbus.mainloop.glib.DBusGMainLoop(set_as_default=True)
         self.session_bus = dbus.SessionBus()
-        self.decoder = simplejson.JSONDecoder(object_hook=decode_status)
+        self.decoder = json.JSONDecoder(object_hook=decode_status)
         self.status_checker = None
         self._connect_to_checker()
 
@@ -260,6 +266,8 @@
         try:
             self.status_checker = self.session_bus.get_object(SERVICE,
                                                               OBJECT_PATH)
+            # Sets the checker locale.
+            self.status_checker.SetLocale(*locale.getlocale(locale.LC_MESSAGES))
         except dbus.DBusException as ex:
             # There is not much we should do about this...
             log.exception(ex)
@@ -269,9 +277,9 @@
         This will use the CheckVersionOrDie method to ensure that either the
         checker service currently running has the correct version, or that it
         is quit and restarted.
-        
+
         Note that if the version of the newly started checker still doesn't
-        match, nothing is done. 
+        match, nothing is done.
         """
         try:
             pid = self.status_checker.CheckVersionOrDie(version)
@@ -287,22 +295,22 @@
                     pass
                 start()
                 self._connect_to_checker()
-                
+
                 try:
                     if not self.status_checker.CheckVersion(version):
                         log.warning("Version mismatch even after restart!")
                 except dbus.DBusException as ex:
                     log.exception(ex)
                     self._connect_to_checker()
-                    
+
 
     def check_status_now(self, path, recurse=False, invalidate=False,
                        summary=False):
-        
+
         status = None
-                
+
         try:
-            json_status = self.status_checker.CheckStatus(path,
+            json_status = self.status_checker.CheckStatus(bytearray(S(path).bytes()),
                                                           recurse, invalidate,
                                                           summary,
                                                           dbus_interface=INTERFACE,
@@ -319,31 +327,33 @@
             self._connect_to_checker()
 
         return status
-        
+
     def check_status_later(self, path, callback, recurse=False,
                            invalidate=False, summary=False):
-        
+
         def real_reply_handler(json_status):
             # Note that this a closure referring to the outer functions callback
             # parameter
             status = self.decoder.decode(json_status)
-            assert status.path == path, "Status check returned the wrong path "\
+            path1 = S(path)
+            path2 = S(status.path)
+            assert path1 == path2, "Status check returned the wrong path "\
                                         "(asked about %s, got back %s)" % \
-                                        (path, status.path)
+                                        (path1.display(), path2.display())
             callback(status)
-        
+
         def reply_handler(*args, **kwargs):
             # The callback should be performed as a low priority task, so we
             # keep Nautilus as responsive as possible.
-            gobject.idle_add(real_reply_handler, *args, **kwargs)
-        
+            GLib.idle_add(real_reply_handler, *args, **kwargs)
+
         def error_handler(dbus_ex):
             log.exception(dbus_ex)
             self._connect_to_checker()
             callback(rabbitvcs.vcs.status.Status.status_error(path))
-        
+
         try:
-            self.status_checker.CheckStatus(path,
+            self.status_checker.CheckStatus(bytearray(S(path).bytes()),
                                             recurse, invalidate,
                                             summary,
                                             dbus_interface=INTERFACE,
@@ -366,32 +376,33 @@
         service (which is, in turn, a wrapper around the real status checker).
         """
         if callback:
-            gobject.idle_add(self.check_status_later,
+            GLib.idle_add(self.check_status_later,
                      path, callback, recurse, invalidate, summary)
             return rabbitvcs.vcs.status.Status.status_calc(path)
         else:
             return self.check_status_now(path, recurse, invalidate, summary)
 
     def generate_menu_conditions(self, provider, base_dir, paths, callback):
-    
-        def real_reply_handler(json):
+
+        def real_reply_handler(obj):
             # Note that this a closure referring to the outer functions callback
             # parameter
-            path_dict = simplejson.loads(json)
+            path_dict = json.loads(obj)
             callback(provider, base_dir, paths, path_dict)
-        
+
         def reply_handler(*args, **kwargs):
             # The callback should be performed as a low priority task, so we
             # keep Nautilus as responsive as possible.
-            gobject.idle_add(real_reply_handler, *args, **kwargs)
-        
+            GLib.idle_add(real_reply_handler, *args, **kwargs)
+
         def error_handler(dbus_ex):
             log.exception(dbus_ex)
             self._connect_to_checker()
             callback(provider, base_dir, paths, {})
-        
+
+        bpaths = [bytearray(S(p).bytes()) for p in paths]
         try:
-            self.status_checker.GenerateMenuConditions(paths,
+            self.status_checker.GenerateMenuConditions(bpaths,
                                             dbus_interface=INTERFACE,
                                             timeout=TIMEOUT,
                                             reply_handler=reply_handler,
@@ -403,7 +414,7 @@
             self._connect_to_checker()
 
     def generate_menu_conditions_async(self, provider, base_dir, paths, callback):
-        gobject.idle_add(self.generate_menu_conditions, provider, base_dir, paths, callback)
+        GLib.idle_add(self.generate_menu_conditions, provider, base_dir, paths, callback)
         return {}
 
 def start():
@@ -426,19 +437,18 @@
 
     # The following calls are required to make DBus thread-aware and therefore
     # support the ability run threads.
-    gobject.threads_init()
-    dbus.glib.threads_init()
+    helper.gobject_threads_init()
+    dbus.mainloop.glib.threads_init()
 
     # This registers our service name with the bus
     session_bus = dbus.SessionBus()
     service_name = dbus.service.BusName(SERVICE, session_bus)
 
-    mainloop = gobject.MainLoop()
+    mainloop = GLib.MainLoop()
 
     checker_service = StatusCheckerService(session_bus, mainloop)
 
-    gobject.idle_add(sys.stdout.write, "Started status checker service\n")
-    gobject.idle_add(sys.stdout.flush)
+    GLib.idle_add(output_and_flush, "Started status checker service\n")
 
     mainloop.run()
 
diff -uNr rabbitvcs-0.17.1/rabbitvcs/services/service.py rabbitvcs/rabbitvcs/services/service.py
--- rabbitvcs-0.17.1/rabbitvcs/services/service.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/services/service.py	2019-09-13 08:36:17.257343196 +0800
@@ -2,17 +2,17 @@
 # Copyright (C) 2009 Jason Heeris <jason.heeris@gmail.com>
 # Copyright (C) 2009 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2009 by Adam Plumb <adamplumb@gmail.com>#
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -37,35 +37,35 @@
     This function is used to start a service that exports a DBUS object. If the
     DBUS object can be found already, nothing is done and the function returns
     True. Otherwise we try to start the given script file and wait until we
-    receive a newline over stdout. 
-    
+    receive a newline over stdout.
+
     The "wait for newline" mechanism ensures any function calling this one will
     not try to access the object via DBUS until it is ready. It is recommended
     to use something like
-    
+
     glib.idle_add(sys.stdout.write, "Started service\n")
     glib.idle_add(sys.stdout.flush)
     mainloop.run()
- 
+
     That way a newline will be sent when the mainloop is started.
-    
+
     @param script_file: the Python script file to run if the DBUS object does
                         not already exist
     @type script_file: a Python script file that will create the DBUS object and
                        send a newline over stdout when it is ready
-                       
+
     @param dbus_service_name: the name of the DBUS service to request
     @type dbus_service_name: string (confirming to the DBUS service format)
 
     @param dbus_object_path: the DBUS object path to request
     @type dbus_object_path: string (confirming to the DBUS object path format)
-        
+
     @rtype: boolean
     @return: Whether or not the service was successfully started.
     """
-    
+
     object_exists = False
-    
+
     try:
         session_bus = dbus.SessionBus()
         obj = session_bus.get_object(dbus_service_name, dbus_object_path)
@@ -76,10 +76,10 @@
                                stdout=subprocess.PIPE)
         pid = proc.pid
         log.debug("Started process: %i" % pid)
-        
+
         # Wait for subprocess to send a newline, to tell us it's ready
         proc.stdout.readline() # We don't care what the message is
         object_exists = True
-        
+
     return object_exists
 
diff -uNr rabbitvcs-0.17.1/rabbitvcs/services/statuschecker.py rabbitvcs/rabbitvcs/services/statuschecker.py
--- rabbitvcs-0.17.1/rabbitvcs/services/statuschecker.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/services/statuschecker.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,31 +1,29 @@
 #
 # Copyright (C) 2009 Jason Heeris <jason.heeris@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 """
 Very simple status checking class. Useful when you can't get any of the others
-to work, or you need to prototype things. 
+to work, or you need to prototype things.
 """
 from __future__ import absolute_import
 
 import rabbitvcs.vcs
 import rabbitvcs.vcs.status
 
-import simplejson
-
 from rabbitvcs import gettext
 _ = gettext.gettext
 
@@ -34,11 +32,11 @@
 
 class StatusChecker:
     """ A class for performing status checks. """
-    
+
     # All subclasses should override this! This is to be displayed in the
     # settings dialog
     CHECKER_NAME = _("Simple status checker")
-    
+
     def __init__(self):
         """ Initialises status checker. Obviously. """
         self.vcs_client = rabbitvcs.vcs.create_vcs_instance()
@@ -49,22 +47,22 @@
         """
         path_status = self.vcs_client.status(path, summary, invalidate)
         return path_status
-    
+
     def generate_menu_conditions(self, paths, invalidate=False):
         from rabbitvcs.util.contextmenu import MainContextMenuConditions
-        
+
         conditions = MainContextMenuConditions(self.vcs_client, paths)
         return conditions.path_dict
-    
+
     def extra_info(self):
         return None
-    
+
     def get_memory_usage(self):
         """ Returns any additional memory of any subprocesses used by this
-        checker. In other words, DO NOT return the memory usage of THIS process! 
+        checker. In other words, DO NOT return the memory usage of THIS process!
         """
         return 0
-    
+
     def quit(self):
         # We will exit when the main process does
         pass
diff -uNr rabbitvcs-0.17.1/rabbitvcs/test.py rabbitvcs/rabbitvcs/test.py
--- rabbitvcs-0.17.1/rabbitvcs/test.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/test.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -28,7 +28,7 @@
 
 if __name__ == "__main__":
     suite = unittest.TestSuite()
-    
+
     for module in (rabbitvcs.util.helper,):
         suite.addTest(doctest.DocTestSuite(module))
         runner = unittest.TextTestRunner()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/tests/__init__.py rabbitvcs/rabbitvcs/tests/__init__.py
--- rabbitvcs-0.17.1/rabbitvcs/tests/__init__.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/tests/__init__.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,21 +1,21 @@
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/__init__.py rabbitvcs/rabbitvcs/ui/__init__.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/__init__.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/__init__.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,21 +1,21 @@
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -30,15 +30,13 @@
 import os
 from six.moves import range
 
-try:
-    from gi.repository import GObject as gobject
-except ImportError:
-    import gobject
-
-if "NAUTILUS_PYTHON_REQUIRE_GTK3" in os.environ and os.environ["NAUTILUS_PYTHON_REQUIRE_GTK3"]:
-    from gi.repository import Gtk as gtk
-else:
-    import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, Gdk, GLib
+sa.restore()
 
 from rabbitvcs import APP_NAME, LOCALE_DIR, gettext
 _ = gettext.gettext
@@ -48,8 +46,8 @@
 REVISION_OPT = (["-r", "--revision"], {"help":"specify the revision number"})
 BASEDIR_OPT = (["-b", "--base-dir"], {})
 QUIET_OPT = (["-q", "--quiet"], {
-    "help":     "Run the add command quietly, with no UI.", 
-    "action":   "store_true", 
+    "help":     "Run the add command quietly, with no UI.",
+    "action":   "store_true",
     "default":  False
 })
 VCS_OPT = (["--vcs"], {"help":"specify the version control system"})
@@ -75,56 +73,56 @@
 }
 
 class GtkBuilderWidgetWrapper:
-        
+
     def __init__(self, gtkbuilder_filename = None,
                  gtkbuilder_id = None, claim_domain=True):
         if gtkbuilder_filename:
             self.gtkbuilder_filename = gtkbuilder_filename
-        
+
         if gtkbuilder_id:
             self.gtkbuilder_id = gtkbuilder_id
-        
+
         self.claim_domain = claim_domain
-            
+
         self.tree = self.get_tree()
         self.tree.connect_signals(self)
- 
+
     def get_tree(self):
         path = "%s/xml/%s.xml" % (
-            os.path.dirname(os.path.realpath(__file__)), 
+            os.path.dirname(os.path.realpath(__file__)),
             self.gtkbuilder_filename
         )
-        
-        tree = gtk.Builder()
+
+        tree = Gtk.Builder()
         tree.add_from_file(path)
 
         if self.claim_domain:
             tree.set_translation_domain(APP_NAME)
-        
+
         return tree
-    
+
     def get_widget(self, id = None):
         if not id:
             id = self.gtkbuilder_id
-        
+
         return self.tree.get_object(id)
 
 class InterfaceView(GtkBuilderWidgetWrapper):
     """
     Every ui window should inherit this class and send it the "self"
-    variable, the gtkbuilder filename (without the extension), and the id of the
+    variable, the Gtkbuilder filename (without the extension), and the id of the
     main window widget.
-    
+
     When calling from the __main__ area (i.e. a window is opened via CLI,
     call the register_gtk_quit method to make sure the main app quits when
     the app is destroyed or finished.
-    
+
     """
-    
+
     def __init__(self, *args, **kwargs):
         GtkBuilderWidgetWrapper.__init__(self, *args, **kwargs)
         self.do_gtk_quit = False
-        
+
         # On OSX, there is a glitch where GTK applications do not always come to the front
         # when a launched (and methods like 'present()' don't appear to work correctly).
         # So until GTK on OSX is fixed let's work around this issue...
@@ -135,43 +133,40 @@
                 subprocess.Popen('osascript -e "tell application \\"Python\\" to activate"', shell=True)
             except:
                 pass
-        
-        
+
+
     def hide(self):
         window = self.get_widget(self.gtkbuilder_id)
         if window:
             window.set_property('visible', False)
-        
+
     def show(self):
         window = self.get_widget(self.gtkbuilder_id)
         if window:
             window.set_property('visible', True)
-    
+
     def destroy(self):
         self.close()
-    
+
     def close(self, threaded=False):
         window = self.get_widget(self.gtkbuilder_id)
         if window is not None:
             if threaded:
-                gtk.gdk.threads_enter()
-
-            window.destroy()
+                helper.run_in_main_thread(window.destroy)
+            else:
+                window.destroy()
 
-            if threaded:
-                gtk.gdk.threads_leave()
-            
         if self.do_gtk_quit:
-            gtk.main_quit()
-            
+            Gtk.main_quit()
+
     def register_gtk_quit(self):
         window = self.get_widget(self.gtkbuilder_id)
         self.do_gtk_quit = True
-        
+
         # This means we've already been closed
         if window is None:
-            gobject.idle_add(gtk.main_quit)
-    
+            GLib.idle_add(Gtk.main_quit)
+
     def gtk_quit_is_set(self):
         return self.do_gtk_quit
 
@@ -188,44 +183,56 @@
         return True
 
     def on_key_pressed(self, widget, data):
-        if (data.keyval == gtk.keysyms.Escape):
+        if data.keyval == Gdk.keyval_from_name('Escape'):
             self.on_cancel_clicked(widget)
             return True
-            
-        if (data.state & gtk.gdk.CONTROL_MASK and 
-                gtk.gdk.keyval_name(data.keyval).lower() == "w"):
+
+        if (data.state & Gdk.ModifierType.CONTROL_MASK and
+                Gdk.keyval_name(data.keyval).lower() == "w"):
             self.on_cancel_clicked(widget)
             return True
 
-        if (data.state & gtk.gdk.CONTROL_MASK and 
-                gtk.gdk.keyval_name(data.keyval).lower() == "q"):
+        if (data.state & Gdk.ModifierType.CONTROL_MASK and
+                Gdk.keyval_name(data.keyval).lower() == "q"):
             self.on_cancel_clicked(widget)
             return True
 
-        if (data.state & gtk.gdk.CONTROL_MASK and 
-                gtk.gdk.keyval_name(data.keyval).lower() == "r"):
+        if (data.state & Gdk.ModifierType.CONTROL_MASK and
+                Gdk.keyval_name(data.keyval).lower() == "r"):
             self.on_refresh_clicked(widget)
-            return True             
+            return True
+
+    def change_button(self, id, label = None, icon = None):
+        """
+         Replace label and/or icon of the named button.
+        """
+
+        button = self.get_widget(id)
+        if label:
+            button.set_label(label)
+        if icon:
+            image = Gtk.Image.new_from_icon_name(icon, Gtk.IconSize.BUTTON)
+            button.set_image(image)
 
 class InterfaceNonView:
     """
     Provides a way for an interface to handle quitting, etc without having
     to have a visible interface.
-    
+
     """
-    
+
     def __init__(self):
         self.do_gtk_quit = False
 
     def close(self):
         try:
-            gtk.main_quit()
+            Gtk.main_quit()
         except RuntimeError:
             raise SystemExit()
-            
+
     def register_gtk_quit(self):
         self.do_gtk_quit = True
-    
+
     def gtk_quit_is_set(self):
         return self.do_gtk_quit
 
@@ -241,25 +248,25 @@
     from sys import argv
     from optparse import OptionParser
     from rabbitvcs.util.helper import get_common_directory
-    
+
     parser = OptionParser(usage=usage, description=description)
-    
+
     if allowed_options:
         for (option_args, option_kwargs) in allowed_options:
             parser.add_option(*option_args, **option_kwargs)
-        
+
     (options, args) = parser.parse_args(argv)
-    
+
     # Convert "." to current working directory
     paths = args[1:]
     for i in range(0, len(paths)):
         if paths[i] == ".":
             paths[i] = getcwd()
-        
+
     if not paths:
         paths = [getcwd()]
-        
-    if parser.has_option("--base-dir") and not options.base_dir: 
+
+    if parser.has_option("--base-dir") and not options.base_dir:
         options.base_dir = get_common_directory(paths)
-        
+
     return (options, paths)
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/about.py rabbitvcs/rabbitvcs/ui/about.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/about.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/about.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,33 +1,38 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
-# RabbitVCS is free software; you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation; either version 2 of the License, or
-# (at your option) any later version.
-# 
-# RabbitVCS is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-# 
-# You should have received a copy of the GNU General Public License
-# along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
+license = """\
+RabbitVCS is free software; you can redistribute it and/or modify
+it under the terms of the GNU General Public License as published by
+the Free Software Foundation; either version 2 of the License, or
+(at your option) any later version.
+
+RabbitVCS is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.  """
+
 
 import os.path
 import string
 import re
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, GdkPixbuf
+sa.restore()
 
 import rabbitvcs
 from rabbitvcs.ui import InterfaceView
@@ -42,36 +47,30 @@
 class About:
     """
     This class provides an interface to the About window.
-    
+
     """
 
     def __init__(self):
-    
-        def url_hook(dialog, url):
-            rabbitvcs.util.helper.launch_url_in_webbrowser(url)
-    
-        gtk.about_dialog_set_url_hook(url_hook)
-        self.about = gtk.AboutDialog()
+        self.about = Gtk.AboutDialog()
         self.about.set_name(rabbitvcs.APP_NAME)
 
-		# The set_program_name method was not added until PyGTK 2.12
-        if hasattr(self.about, "set_program_name"):
-	        self.about.set_program_name(rabbitvcs.APP_NAME)
-
+        self.about.set_program_name(rabbitvcs.APP_NAME)
         self.about.set_version(rabbitvcs.version)
         self.about.set_website("http://www.rabbitvcs.org")
         self.about.set_website_label("http://www.rabbitvcs.org")
-        
+
         doc_path_root = "/usr/share/doc"
         doc_path_regex = re.compile("rabbitvcs")
         for dir in os.listdir(doc_path_root):
             if doc_path_regex.search(dir):
                 # Find all the doc directories containing "rabbitvcs"
-                authors_path = os.path.join(doc_path_root, dir, "AUTHORS")
-                if os.path.exists(authors_path):
+                tmp_authors_path = os.path.join(doc_path_root, dir, "AUTHORS")
+                if os.path.exists(tmp_authors_path):
+                    authors_path = tmp_authors_path
                     # At this point we have found a likely-looking AUTHORS
                     break
-        else:
+
+        if not authors_path:
             # Assumes the user is running RabbitVCS through an svn checkout
             # and the doc files are two directories up (from rabbitvcs/ui).
             doc_path = os.path.dirname(os.path.realpath(__file__)).split('/')
@@ -81,19 +80,26 @@
         authors = open(authors_path, "r").read()
 
         self.about.set_authors(authors.split("\n"))
-        
+
+        pixbuf = GdkPixbuf.Pixbuf.new_from_file(rabbitvcs.get_icon_path() +
+                                                "/scalable/apps/rabbitvcs.svg")
+        self.about.set_logo(pixbuf)
+
         versions = []
-        versions.append("Subversion - %s" % string.join(list(map(str,pysvn.svn_version)), "."))
-        versions.append("Pysvn - %s" % string.join(list(map(str,pysvn.version)), "."))
+        versions.append("Subversion - %s" % ".".join(list(map(str,pysvn.svn_version))))
+        versions.append("Pysvn - %s" % ".".join(list(map(str,pysvn.version))))
         versions.append("ConfigObj - %s" % str(configobj.__version__))
-        
+
         self.about.set_comments("\n".join(versions))
-    
+
+        self.about.set_license(license)
+
     def run(self):
         self.about.show_all()
         self.about.run()
         self.about.destroy()
-    
+
+
 if __name__ == "__main__":
     window = About()
     window.run()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/action.py rabbitvcs/rabbitvcs/ui/action.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/action.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/action.py	2019-09-13 08:36:17.257343196 +0800
@@ -27,23 +27,24 @@
 from os.path import basename
 
 import shutil
-import pygtk
-import gobject
-import gtk
+import gi
+gi.require_version("Gtk", "3.0")
+from gi.repository import Gtk, GObject, Gdk
 
 from rabbitvcs.ui import InterfaceView
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.util
 import rabbitvcs.vcs
-import rabbitvcs.util.helper
+from rabbitvcs.util import helper
+from rabbitvcs.util.strings import S
 from rabbitvcs.ui.dialog import MessageBox
 from rabbitvcs.util.decorators import gtk_unsafe
 
 from rabbitvcs import gettext
 _ = gettext.gettext
 
-gobject.threads_init()
+helper.gobject_threads_init()
 
 from rabbitvcs.util.log import Log
 log = Log("rabbitvcs.ui.action")
@@ -116,7 +117,7 @@
 
         self.table = rabbitvcs.ui.widget.Table(
             self.get_widget("table"),
-            [gobject.TYPE_STRING, gobject.TYPE_STRING, gobject.TYPE_STRING],
+            [GObject.TYPE_STRING, GObject.TYPE_STRING, GObject.TYPE_STRING],
             [_("Action"), _("Path"), _("Mime Type")]
         )
 
@@ -146,52 +147,33 @@
     def on_ok_clicked(self, widget):
         self.close()
 
+    @gtk_unsafe
     def toggle_ok_button(self, sensitive):
-        if not self.client_in_same_thread:
-            gtk.gdk.threads_enter()
-
         self.finished = True
         self.get_widget("ok").set_sensitive(sensitive)
         self.get_widget("saveas").set_sensitive(sensitive)
 
-        if not self.client_in_same_thread:
-            gtk.gdk.threads_leave()
-
+    @gtk_unsafe
     def append(self, entry):
-        if not self.client_in_same_thread:
-            gtk.gdk.threads_enter()
-
         self.table.append(entry)
         self.table.scroll_to_bottom()
 
-        if not self.client_in_same_thread:
-            gtk.gdk.threads_leave()
-
     def get_title(self):
         return self.get_widget("Notification").get_title()
 
+    @gtk_unsafe
     def set_title(self, title):
-        if not self.client_in_same_thread:
-            gtk.gdk.threads_enter()
-
         self.get_widget("Notification").set_title(title)
 
-        if not self.client_in_same_thread:
-            gtk.gdk.threads_leave()
-
+    @gtk_unsafe
     def set_header(self, header):
         self.set_title(header)
 
-        if not self.client_in_same_thread:
-            gtk.gdk.threads_enter()
-
         self.get_widget("action").set_markup(
             "<span size=\"xx-large\"><b>%s</b></span>" % header
         )
 
-        if not self.client_in_same_thread:
-            gtk.gdk.threads_leave()
-
+    @gtk_unsafe
     def focus_on_ok_button(self):
         self.get_widget("ok").grab_focus()
 
@@ -205,6 +187,7 @@
     def enable_saveas(self):
         self.get_widget("saveas").set_sensitive(True)
 
+    @gtk_unsafe
     def disable_saveas(self):
         self.get_widget("saveas").set_sensitive(False)
 
@@ -269,6 +252,8 @@
     def __init__(self, client, register_gtk_quit=False, notification=True,
             run_in_thread=True):
 
+        self.run_in_thread = run_in_thread
+
         if run_in_thread is True:
             threading.Thread.__init__(self)
 
@@ -299,11 +284,17 @@
         self.pbar_ticks = None
         self.pbar_ticks_current = -1
 
-        # Tells the notification window to do a gtk.main_quit() when closing
+        # Tells the notification window to do a Gtk.main_quit() when closing
         # Is used when the script is run from a command line
         if register_gtk_quit:
             self.notification.register_gtk_quit()
 
+    def schedule(self):
+        if self.run_in_thread:
+            self.start()
+        else:
+            self.run()
+
     def set_pbar_ticks(self, num):
         """
         Set the total number of ticks to represent in the progress bar.
@@ -319,20 +310,14 @@
     def set_progress_fraction(self, fraction):
         """
         An alternative method to access the progress bar directly.
-        
+
         @type   percentage: int
         @param  percentage: The percentage value to set the progress bar.
 
         """
-        
+
         if self.has_notifier:
-            if not self.client_in_same_thread:
-                gtk.gdk.threads_enter()
-    
             self.notification.pbar.update(fraction)
-    
-            if not self.client_in_same_thread:
-                gtk.gdk.threads_leave()
 
     def set_header(self, header):
         self.notification.set_header(header)
@@ -398,16 +383,19 @@
 
         """
 
-        if self.message is None:
-            gtk.gdk.threads_enter()
-            dialog = rabbitvcs.ui.dialog.TextChange(_("Log Message"))
-            result = dialog.run()
-            gtk.gdk.threads_leave()
-
-            should_continue = (result[0] == gtk.RESPONSE_OK)
-            return should_continue, result[1].encode("utf-8")
-        else:
-            return True, self.message.encode("utf-8")
+        should_continue = True
+        message = self.message
+        if message is None:
+            settings = rabbitvcs.util.settings.SettingsManager()
+            message = settings.get_multiline("general", "default_commit_message")
+            result = helper.run_in_main_thread(lambda: rabbitvcs.ui.dialog.TextChange(_("Log Message"), message).run())
+            should_continue = (result[0] == Gtk.ResponseType.OK)
+            message = result[1]
+        if isinstance(message, bytes):
+            message = message.decode()
+        if not should_continue:
+            self.set_cancel()
+        return should_continue, message
 
     def get_login(self, realm, username, may_save):
         """
@@ -432,19 +420,12 @@
 
         @rtype:             (boolean, string, string, boolean)
         @return:            (True=continue/False=cancel, username,password, may_save)
-
         """
 
         if self.login_tries >= 3:
             return (False, "", "", False)
 
-        gtk.gdk.threads_enter()
-        dialog = rabbitvcs.ui.dialog.Authentication(
-            realm,
-            may_save
-        )
-        result = dialog.run()
-        gtk.gdk.threads_leave()
+        result = helper.run_in_main_thread(lambda: rabbitvcs.ui.dialog.Authentication(realm, may_save).run())
 
         if result is not None:
             self.login_tries += 1
@@ -466,24 +447,18 @@
 
         @rtype:         (boolean, int, boolean)
         @return:        (True=Accept/False=Deny, number of accepted failures, remember)
-
         """
 
-        gtk.gdk.threads_enter()
-
-        if not data:
-            return (False, 0, False)
-
-        dialog = rabbitvcs.ui.dialog.Certificate(
-            data["realm"],
-            data["hostname"],
-            data["issuer_dname"],
-            data["valid_from"],
-            data["valid_until"],
-            data["finger_print"]
-        )
-        result = dialog.run()
-        gtk.gdk.threads_leave()
+        result = 0
+        if data:
+            result = helper.run_in_main_thread(lambda: rabbitvcs.ui.dialog.Certificate(
+                data["realm"],
+                data["hostname"],
+                data["issuer_dname"],
+                data["valid_from"],
+                data["valid_until"],
+                data["finger_print"]
+            ).run())
 
         if result == 0:
             #Deny
@@ -510,18 +485,12 @@
 
         @rtype:             (boolean, string, boolean)
         @return:            (True=continue/False=cancel, password, may save)
-
         """
 
-        gtk.gdk.threads_enter()
-        dialog = rabbitvcs.ui.dialog.CertAuthentication(
-            realm,
-            may_save
-        )
-        result = dialog.run()
-        gtk.gdk.threads_leave()
-
-        return result
+        return helper.run_in_main_thread(lambda: rabbitvcs.ui.dialog.CertAuthentication(
+                realm,
+                may_save
+            ).run())
 
     def get_client_cert(self, realm, may_save):
         """
@@ -538,18 +507,12 @@
 
         @rtype:             (boolean, string, boolean)
         @return:            (True=continue/False=cancel, password, may save)
-
         """
 
-        gtk.gdk.threads_enter()
-        dialog = rabbitvcs.ui.dialog.SSLClientCertPrompt(
-            realm,
-            may_save
-        )
-        result = dialog.run()
-        gtk.gdk.threads_leave()
-
-        return result
+        return helper.run_in_main_thread(lambda: rabbitvcs.ui.dialog.SSLClientCertPrompt(
+                realm,
+                may_save
+            ).run())
 
     def set_log_message(self, message):
         """
@@ -558,7 +521,6 @@
 
         @type   message: string
         @param  message: Set a log message.
-
         """
 
         self.message = message
@@ -574,11 +536,10 @@
 
         @type   message: string
         @param  message: A status message.
-
         """
 
         if message is not None:
-            self.notification.get_widget("status").set_text(message)
+            self.notification.get_widget("status").set_text(S(message).display())
 
     def append(self, func, *args, **kwargs):
         """
@@ -705,7 +666,7 @@
 
             if (is_known_action
                     and is_complete_action
-                    and "revision" in data 
+                    and "revision" in data
                     and data["revision"]):
                 self.notification.append(
                     ["", "Revision %s" % data["revision"].number, ""]
@@ -723,7 +684,7 @@
             self.queue.insert(position+1, self.edit_conflict, data)
 
     def edit_conflict(self, data):
-        rabbitvcs.util.helper.launch_ui_window("editconflicts", [data["path"]], block=True)
+        helper.launch_ui_window("editconflicts", [data["path"]], block=True)
 
 class GitAction(VCSAction):
     def __init__(self, client, register_gtk_quit=False, notification=True,
@@ -755,17 +716,12 @@
                     self.notification.append(["", data, ""])
 
     def get_user(self):
-        gtk.gdk.threads_enter()
-        dialog = rabbitvcs.ui.dialog.NameEmailPrompt()
-        result = dialog.run()
-        gtk.gdk.threads_leave()
-
-        return result
+        return helper.run_in_main_thread(lambda: rabbitvcs.ui.dialog.NameEmailPrompt().run())
 
     def conflict_filter(self, data):
         if str(data).startswith("ERROR:"):
             path = data[27:]
-            rabbitvcs.util.helper.launch_ui_window("editconflicts", [path], block=True)
+            helper.launch_ui_window("editconflicts", [path], block=True)
 
 class MercurialAction(VCSAction):
     def __init__(self, client, register_gtk_quit=False, notification=True,
@@ -795,17 +751,12 @@
                     self.notification.append(["", data, ""])
 
     def get_user(self):
-        gtk.gdk.threads_enter()
-        dialog = rabbitvcs.ui.dialog.NameEmailPrompt()
-        result = dialog.run()
-        gtk.gdk.threads_leave()
-
-        return result
+        return helper.run_in_main_thread(lambda: rabbitvcs.ui.dialog.NameEmailPrompt().run())
 
     def conflict_filter(self, data):
         if str(data).startswith("ERROR:"):
             path = data[27:]
-            rabbitvcs.util.helper.launch_ui_window("editconflicts", [path], block=True)
+            helper.launch_ui_window("editconflicts", [path], block=True)
 
 def vcs_action_factory(client, register_gtk_quit=False, notification=True,
         run_in_thread=True):
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/add.py rabbitvcs/rabbitvcs/ui/add.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/add.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/add.py	2019-09-13 08:36:17.257343196 +0800
@@ -24,17 +24,21 @@
 import os
 import six.moves._thread
 from time import sleep
+from rabbitvcs.util import helper
 
-import pygtk
-import gobject
-import gtk
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.util.contextmenu import GtkFilesContextMenu, GtkContextMenuCaller
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
+from rabbitvcs.util import helper
+from rabbitvcs.util.strings import S
 import rabbitvcs.vcs
 from rabbitvcs.util.log import Log
 from rabbitvcs.vcs.status import Status
@@ -44,7 +48,7 @@
 from rabbitvcs import gettext
 _ = gettext.gettext
 
-gobject.threads_init()
+helper.gobject_threads_init()
 
 class Add(InterfaceView, GtkContextMenuCaller):
     """
@@ -72,17 +76,24 @@
             if rabbitvcs.vcs.guess(path)['vcs'] == rabbitvcs.vcs.VCS_SVN:
                 self.get_widget("show_ignored").set_sensitive(False)
 
-        self.statuses = self.vcs.statuses_for_add(paths)
+        columns = [[GObject.TYPE_BOOLEAN,
+                    rabbitvcs.ui.widget.TYPE_HIDDEN_OBJECT,
+                    rabbitvcs.ui.widget.TYPE_PATH,
+                    GObject.TYPE_STRING],
+                   [rabbitvcs.ui.widget.TOGGLE_BUTTON, "", _("Path"),
+                    _("Extension")]]
+
+        self.setup(self.get_widget("Add"), columns)
+
         self.files_table = rabbitvcs.ui.widget.Table(
             self.get_widget("files_table"),
-            [gobject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_PATH,
-                gobject.TYPE_STRING],
-            [rabbitvcs.ui.widget.TOGGLE_BUTTON, _("Path"), _("Extension")],
+            columns[0],
+            columns[1],
             filters=[{
                 "callback": rabbitvcs.ui.widget.path_filter,
                 "user_data": {
                     "base_dir": base_dir,
-                    "column": 1
+                    "column": 2
                 }
             }],
             callbacks={
@@ -94,17 +105,20 @@
 
         self.initialize_items()
 
+    def setup(self, window, columns):
+        self.statuses = self.vcs.statuses_for_add(self.paths)
+
     #
     # Helpers
     #
 
     def load(self):
-        gtk.gdk.threads_enter()
-        self.get_widget("status").set_text(_("Loading..."))
+        status = self.get_widget("status")
+        helper.run_in_main_thread(status.set_text, _("Loading..."))
         self.items = self.vcs.get_items(self.paths, self.statuses)
-        
+
         if self.show_ignored:
-            for path in paths:
+            for path in self.paths:
                 # TODO Refactor
                 # TODO SVN support
                 # TODO Further fix ignore patterns
@@ -118,20 +132,20 @@
 
                         if should_add:
                             self.items.append(Status(os.path.realpath(ignored_path), 'unversioned'))
-                     
+
 
 
         self.populate_files_table()
-        self.get_widget("status").set_text(_("Found %d item(s)") % len(self.items))
-        gtk.gdk.threads_leave()
+        helper.run_in_main_thread(status.set_text, _("Found %d item(s)") % len(self.items))
 
     def populate_files_table(self):
         self.files_table.clear()
         for item in self.items:
             self.files_table.append([
                 True,
+                S(item.path),
                 item.path,
-                rabbitvcs.util.helper.get_file_extension(item.path)
+                helper.get_file_extension(item.path)
             ])
 
     def toggle_ignored(self):
@@ -155,7 +169,7 @@
     def delete_items(self, widget, data=None):
         paths = self.files_table.get_selected_row_items(1)
         if len(paths) > 0:
-            proc = rabbitvcs.util.helper.launch_ui_window("delete", paths)
+            proc = helper.launch_ui_window("delete", paths)
             self.rescan_after_process_exit(proc, paths)
 
     #
@@ -168,14 +182,14 @@
             row[0] = self.TOGGLE_ALL
 
     def on_show_ignored_toggled(self, widget):
-        self.toggle_ignored()                  
+        self.toggle_ignored()
 
     def on_files_table_row_activated(self, treeview, event, col):
         paths = self.files_table.get_selected_row_items(1)
-        rabbitvcs.util.helper.launch_diff_tool(*paths)
+        helper.launch_diff_tool(*paths)
 
     def on_files_table_key_event(self, treeview, data=None):
-        if gtk.gdk.keyval_name(data.keyval) == "Delete":
+        if Gdk.keyval_name(data.keyval) == "Delete":
             self.delete_items(treeview, data)
 
     def on_files_table_mouse_event(self, treeview, data=None):
@@ -190,7 +204,7 @@
 class SVNAdd(Add):
     def __init__(self, paths, base_dir=None):
         Add.__init__(self, paths, base_dir)
-        
+
         self.svn = self.vcs.svn()
 
     def on_ok_clicked(self, widget):
@@ -210,14 +224,14 @@
         self.action.append(self.svn.add, items)
         self.action.append(self.action.set_status, _("Completed Add"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 class GitAdd(Add):
     def __init__(self, paths, base_dir=None):
         Add.__init__(self, paths, base_dir)
-        
+
         self.git = self.vcs.git(paths[0])
-    
+
     def on_ok_clicked(self, widget):
         items = self.files_table.get_activated_rows(1)
         if not items:
@@ -235,7 +249,7 @@
         self.action.append(self.git.add, items)
         self.action.append(self.action.set_status, _("Completed Add"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 classes_map = {
     rabbitvcs.vcs.VCS_SVN: SVNAdd,
@@ -251,12 +265,12 @@
         self.vcs = rabbitvcs.vcs.VCS()
         self.svn = self.vcs.svn()
         self.action = rabbitvcs.ui.action.SVNAction(
-            self.svn,
-            run_in_thread=False
+            self.svn
         )
 
         self.action.append(self.svn.add, paths)
-        self.action.run()
+        self.action.schedule()
+
 
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT, QUIET_OPT
@@ -270,4 +284,4 @@
     else:
         window = add_factory(paths,options.base_dir)#Add(paths, options.base_dir)
         window.register_gtk_quit()
-        gtk.main()
+        Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/annotate.py rabbitvcs/rabbitvcs/ui/annotate.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/annotate.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/annotate.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,70 +1,85 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os
-
-import pygtk
-import gobject
-import gtk
-
 from datetime import datetime
 import time
+from random import random, uniform
+
+from rabbitvcs.util import helper
+
+from gi import require_version
+require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk, GLib
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.log import log_dialog_factory
 from rabbitvcs.ui.action import SVNAction, GitAction
 import rabbitvcs.ui.widget
-from rabbitvcs.ui.dialog import MessageBox
-import rabbitvcs.util.helper
-import rabbitvcs.vcs
+from rabbitvcs.ui.dialog import MessageBox, Loading
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.decorators import gtk_unsafe
+from rabbitvcs.util.highlighter import highlight
+import rabbitvcs.util.settings
+import rabbitvcs.vcs
 
 from rabbitvcs import gettext
 _ = gettext.gettext
 
-DATETIME_FORMAT = rabbitvcs.util.helper.LOCAL_DATETIME_FORMAT
+
+LUMINANCE = 0.90
+
 
 class Annotate(InterfaceView):
     """
     Provides a UI interface to annotate items in the repository or
     working copy.
-    
+
     Pass a single path to the class when initializing
-    
+
     """
-    
+
     def __init__(self, path, revision=None):
         if os.path.isdir(path):
             MessageBox(_("Cannot annotate a directory"))
             raise SystemExit()
             return
-            
+
         InterfaceView.__init__(self, "annotate", "Annotate")
 
         self.get_widget("Annotate").set_title(_("Annotate - %s") % path)
         self.vcs = rabbitvcs.vcs.VCS()
-        
-       
+
+        sm = rabbitvcs.util.settings.SettingsManager()
+        self.datetime_format = sm.get("general", "datetime_format")
+
+        self.log_by_order = []
+        self.log_by_revision = {}
+        self.author_background = {}
+        self.loading_dialog = None
+
     def on_close_clicked(self, widget):
         self.close()
 
@@ -76,19 +91,58 @@
 
     def on_from_show_log_clicked(self, widget, data=None):
         log_dialog_factory(self.path, ok_callback=self.on_from_log_closed)
-    
+
     def on_from_log_closed(self, data):
         if data is not None:
-            self.get_widget("from").set_text(data)
+            self.get_widget("from").set_text(S(data).display())
 
     def on_to_show_log_clicked(self, widget, data=None):
         log_dialog_factory(self.path, ok_callback=self.on_to_log_closed)
-    
+
     def on_to_log_closed(self, data):
         if data is not None:
-            self.get_widget("to").set_text(data)
+            self.get_widget("to").set_text(S(data).display())
+
+    def on_query_tooltip(self, treeview, x, y, kbdmode, tooltip, data=None):
+        if kbdmode:
+            return False
+
+        try:
+            position, enabled_columns = data
+            enabled_columns[0]
+        except (TypeError, ValueError, IndexError):
+            return False
+
+        bx, by = treeview.convert_widget_to_bin_window_coords(x, y)
+        t = treeview.get_path_at_pos(bx, by)
+        if t is None:
+            return False
+
+        path, column, cellx, celly = t
+        columns = treeview.get_columns()
+        try:
+                pos = columns.index(column)
+        except ValueError:
+            return False
+        if not pos in enabled_columns:
+            return False
+
+        revision = treeview.get_model()[path][position]
+        if not revision:
+            return False
+
+        revision = str(revision)
+        if not revision in self.log_by_revision:
+            return False
+
+        log = self.log_by_revision[revision]
+        message = helper.format_long_text(log.message, line1only=True)
+        if not message:
+            return False
+
+        tooltip.set_text(S(message).display())
+        return True
 
-    @gtk_unsafe
     def enable_saveas(self):
         self.get_widget("save").set_sensitive(True)
 
@@ -106,6 +160,34 @@
             fh.write(self.generate_string_from_result())
             fh.close()
 
+    def launch_loading(self):
+        self.loading_dialog = Loading()
+        GLib.idle_add(self.loading_dialog.run)
+
+    def kill_loading(self):
+        GLib.idle_add(self.loading_dialog.destroy)
+
+    def set_log(self, action, resno, revkeyfunc):
+        self.log_by_order = action.get_result(resno)
+        self.log_by_order.reverse()
+        self.log_by_revision = {}
+        self.author_background = {}
+        for n, log in enumerate(self.log_by_order):
+            setattr(log, "n", n)
+            c = self.randomHSL()
+            c = helper.HSLtoRGB(*c)
+            setattr(log, "background", helper.html_color(*c))
+            self.log_by_revision[revkeyfunc(log.revision)] = log
+            author = S(log.author.strip())
+            if author:
+                c = self.randomHSL()
+                c = helper.HSLtoRGB(*c)
+                self.author_background[author] = helper.html_color(*c)
+
+    def randomHSL(self):
+        return (uniform(0.0, 360.0), uniform(0.5, 1.0), LUMINANCE)
+
+
 class SVNAnnotate(Annotate):
     def __init__(self, path, revision=None):
         Annotate.__init__(self, path, revision)
@@ -114,44 +196,56 @@
 
         if revision is None:
             revision = "HEAD"
-        
+
         self.path = path
-        self.get_widget("from").set_text(str(1))
-        self.get_widget("to").set_text(str(revision))
+        self.get_widget("from").set_text("1")
+        self.get_widget("to").set_text(S(revision).display())
 
+        treeview = self.get_widget("table")
         self.table = rabbitvcs.ui.widget.Table(
-            self.get_widget("table"),
-            [gobject.TYPE_STRING, gobject.TYPE_STRING, gobject.TYPE_STRING, 
-                gobject.TYPE_STRING, gobject.TYPE_STRING], 
-            [_("Line"), _("Revision"), _("Author"), 
-                _("Date"), _("Text")]
+            treeview,
+            [GObject.TYPE_STRING, GObject.TYPE_STRING, GObject.TYPE_STRING,
+                GObject.TYPE_STRING, rabbitvcs.ui.widget.TYPE_MARKUP,
+                rabbitvcs.ui.widget.TYPE_HIDDEN,
+                rabbitvcs.ui.widget.TYPE_HIDDEN],
+            [_("Revision"), _("Author"), _("Date"), _("Line"), _("Text"),
+                "revision_color", "author_color"]
         )
         self.table.allow_multiple()
-        
+        treeview.connect("query-tooltip", self.on_query_tooltip, (0, (0, 1, 2)))
+        treeview.set_has_tooltip(True)
+        for i, n in [(1, 6), (4, 5)]:
+            column = self.table.get_column(i)
+            cell = column.get_cells()[0]
+            column.add_attribute(cell, "background", n)
+        self.table.get_column(3).get_cells()[0].set_property("xalign", 1.0)
+
         self.load()
 
     #
     # Helper methods
     #
-    
+
     def load(self):
         from_rev_num = self.get_widget("from").get_text().lower()
         to_rev_num = self.get_widget("to").get_text().lower()
-        
+
         if not from_rev_num.isdigit():
             MessageBox(_("The from revision field must be an integer"))
             return
-             
+
         from_rev = self.svn.revision("number", number=int(from_rev_num))
-        
+
         to_rev = self.svn.revision("head")
         if to_rev_num.isdigit():
             to_rev = self.svn.revision("number", number=int(to_rev_num))
-        
+
+        self.launch_loading()
+
         self.action = SVNAction(
             self.svn,
             notification=False
-        )    
+        )
 
         self.action.append(
             self.svn.annotate,
@@ -159,51 +253,79 @@
             from_rev,
             to_rev
         )
+
+        if not self.log_by_order:
+            self.action.append(self.svn.log, self.path)
+            self.action.append(self.set_log, self.action, 1, lambda x: str(x))
+
         self.action.append(self.populate_table)
         self.action.append(self.enable_saveas)
-        self.action.start()
+        self.action.schedule()
+
+        self.kill_loading()
+
+    def blame_info(self, item):
+        revision = item["revision"].number
+        if revision <= 0:
+            return ("", "", "")
+
+        revision = str(revision)
+
+        # remove fractional seconds and timezone information from
+        # the end of the string provided by pysvn:
+        # * timezone should be always "Z" (for UTC), "%Z" is not yet
+        #   yet supported by strptime
+        # * fractional could be parsed with "%f" since python 2.6
+        #   but this precision is not needed anyway
+        # * the datetime module does not include strptime until python 2.4
+        #   so this workaround is required for now
+        datestr = item["date"][0:-8]
+        try:
+            date = datetime(*time.strptime(datestr,"%Y-%m-%dT%H:%M:%S")[:-2])
+            date = helper.format_datetime(date, self.datetime_format)
+        except:
+            date = ""
+ 
+        return revision, date, S(item["author"].strip())
 
-    @gtk_unsafe
     def populate_table(self):
         blamedict = self.action.get_result(0)
+        lines = highlight(self.path, [item["line"] for item in blamedict])
 
         self.table.clear()
-        for item in blamedict:            
-            # remove fractional seconds and timezone information from 
-            # the end of the string provided by pysvn:
-            # * timezone should be always "Z" (for UTC), "%Z" is not yet
-            #   yet supported by strptime
-            # * fractional could be parsed with "%f" since python 2.6 
-            #   but this precision is not needed anyway 
-            # * the datetime module does not include strptime until python 2.4
-            #   so this workaround is required for now
-            datestr = item["date"][0:-8]
-            date = datetime(*time.strptime(datestr,"%Y-%m-%dT%H:%M:%S")[:-2])
-                
+        for i, item in enumerate(blamedict):
+            revision, date, author = self.blame_info(item)
+            author_color = self.author_background.get(author, "#FFFFFF")
+            try:
+                revision_color = self.log_by_revision[revision].background
+            except KeyError:
+                revision_color = "#FFFFFF"
+
             self.table.append([
-                item["number"],
-                item["revision"].number,
-                item["author"],
-                rabbitvcs.util.helper.format_datetime(date),
-                item["line"]
+                revision,
+                author,
+                date,
+                str(int(item["number"]) + 1),
+                lines[i],
+                revision_color,
+                author_color
             ])
-            
+
     def generate_string_from_result(self):
         blamedict = self.action.get_result(0)
-        
+
         text = ""
         for item in blamedict:
-            datestr = item["date"][0:-8]
-            date = datetime(*time.strptime(datestr,"%Y-%m-%dT%H:%M:%S")[:-2])
-            
+            revision, date, author = self.blame_info(item)
+
             text += "%s\t%s\t%s\t%s\t%s\n" % (
-                item["number"],
-                item["revision"].number,
-                item["author"],
-                rabbitvcs.util.helper.format_datetime(date),
+                str(int(item["number"]) + 1),
+                revision,
+                author,
+                date,
                 item["line"]
             )
-        
+
         return text
 
 class GitAnnotate(Annotate):
@@ -214,71 +336,105 @@
 
         if revision is None:
             revision = "HEAD"
-        
+
         self.path = path
-        self.get_widget("from_revision_container").hide()
-        self.get_widget("to_show_log").hide()
-        self.get_widget("to").set_text(str(revision))
+        self.get_widget("to").set_text(S(revision).display())
 
+        treeview = self.get_widget("table")
         self.table = rabbitvcs.ui.widget.Table(
-            self.get_widget("table"),
-            [gobject.TYPE_STRING, gobject.TYPE_STRING, gobject.TYPE_STRING, 
-                gobject.TYPE_STRING, gobject.TYPE_STRING], 
-            [_("Line"), _("Revision"), _("Author"), 
-                _("Date"), _("Text")]
+            treeview,
+            [GObject.TYPE_STRING, GObject.TYPE_STRING, GObject.TYPE_STRING,
+                GObject.TYPE_STRING, rabbitvcs.ui.widget.TYPE_MARKUP,
+                rabbitvcs.ui.widget.TYPE_HIDDEN,
+                rabbitvcs.ui.widget.TYPE_HIDDEN],
+            [_("Revision"), _("Author"), _("Date"), _("Line"), _("Text"),
+                "revision color", "author color"]
         )
         self.table.allow_multiple()
-        
+        treeview.connect("query-tooltip", self.on_query_tooltip, (0, (0, 1, 2)))
+        treeview.set_has_tooltip(True)
+        for i, n in [(1, 6), (4, 5)]:
+            column = self.table.get_column(i)
+            cell = column.get_cells()[0]
+            column.add_attribute(cell, "background", n)
+        self.table.get_column(3).get_cells()[0].set_property("xalign", 1.0)
+
         self.load()
 
     #
     # Helper methods
     #
-    
+
+    def launch_loading(self):
+        self.loading_dialog = Loading()
+        GLib.idle_add(self.loading_dialog.run)
+
+    def kill_loading(self):
+        GLib.idle_add(self.loading_dialog.destroy)
+
     def load(self):
         to_rev = self.git.revision(self.get_widget("to").get_text())
-        
+
+        self.launch_loading()
+
         self.action = GitAction(
             self.git,
             notification=False
-        )    
+        )
 
         self.action.append(
             self.git.annotate,
             self.path,
             to_rev
         )
+
+        if not self.log_by_order:
+            self.action.append(self.git.log, self.path)
+            self.action.append(self.set_log, self.action, 1,
+                               lambda x: str(x)[:7])
+
         self.action.append(self.populate_table)
         self.action.append(self.enable_saveas)
-        self.action.start()
+        self.action.schedule()
+        self.kill_loading()
 
-    @gtk_unsafe
     def populate_table(self):
         blamedict = self.action.get_result(0)
+        lines = highlight(self.path, [item["line"] for item in blamedict])
 
         self.table.clear()
-        for item in blamedict:
+        for i, item in enumerate(blamedict):
+            revision = item["revision"][:7]
+            author = S(item["author"].strip())
+            author_color = self.author_background.get(author, "#FFFFFF")
+            try:
+                revision_color = self.log_by_revision[revision].background
+            except KeyError:
+                revision_color = "#FFFFFF"
+
             self.table.append([
-                item["number"],
-                item["revision"][:7],
-                item["author"],
-                rabbitvcs.util.helper.format_datetime(item["date"]),
-                item["line"]
+                revision,
+                author,
+                helper.format_datetime(item["date"], self.datetime_format),
+                str(item["number"]),
+                lines[i],
+                revision_color,
+                author_color
             ])
-            
+
     def generate_string_from_result(self):
         blamedict = self.action.get_result(0)
-        
+
         text = ""
         for item in blamedict:
             text += "%s\t%s\t%s\t%s\t%s\n" % (
-                item["number"],
+                str(item["number"]),
                 item["revision"][:7],
                 item["author"],
-                rabbitvcs.util.helper.format_datetime(item["date"]),
+                helper.format_datetime(item["date"], self.datetime_format),
                 item["line"]
             )
-        
+
         return text
 
 classes_map = {
@@ -290,16 +446,17 @@
     if not vcs:
         guess = rabbitvcs.vcs.guess(path)
         vcs = guess["vcs"]
-        
+
     return classes_map[vcs](path, revision)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, REVISION_OPT, VCS_OPT
     (options, paths) = main(
-        [REVISION_OPT, VCS_OPT], 
+        [REVISION_OPT, VCS_OPT],
         usage="Usage: rabbitvcs annotate url [-r REVISION]"
     )
 
     window = annotate_factory(options.vcs, paths[0], options.revision)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/applypatch.py rabbitvcs/rabbitvcs/ui/applypatch.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/applypatch.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/applypatch.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,33 +1,35 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os.path
 
-import pygtk
-import gobject
-import gtk
-import os
-import commands
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceNonView
 from rabbitvcs.ui.action import SVNAction
@@ -42,72 +44,73 @@
 class ApplyPatch(InterfaceNonView):
     """
     This class provides a handler to the apply patch functionality.
-    
+
     """
 
     def __init__(self, paths):
         InterfaceNonView.__init__(self)
         self.paths = paths
         self.vcs = rabbitvcs.vcs.VCS()
-        self.common = rabbitvcs.util.helper.get_common_directory(paths)
+        self.common = helper.get_common_directory(paths)
 
     def choose_patch_path(self):
         path = None
-        
-        dialog = gtk.FileChooserDialog(
-            _("Apply Patch"),
-            None,
-            gtk.FILE_CHOOSER_ACTION_OPEN,(gtk.STOCK_CANCEL, gtk.RESPONSE_CANCEL,
-                                          gtk.STOCK_SAVE, gtk.RESPONSE_OK))
-        dialog.set_default_response(gtk.RESPONSE_OK)
+
+        dialog = Gtk.FileChooserDialog(
+            title = _("Apply Patch"),
+            parent = None,
+            action = Gtk.FileChooserAction.OPEN)
+        dialog.add_button(_("_Cancel"), Gtk.ResponseType.CANCEL)
+        dialog.add_button(_("_Open"), Gtk.ResponseType.OK)
+        dialog.set_default_response(Gtk.ResponseType.OK)
         response = dialog.run()
-        if response == gtk.RESPONSE_OK:
+        if response == Gtk.ResponseType.OK:
             path = dialog.get_filename()
-        
+
         dialog.destroy()
-        
+
         return path
-    
+
     def choose_patch_dir(self):
         if len(self.paths) == 1 and os.path.isdir(self.paths[0]):
             return self.paths[0]
-        
+
         dir = None
-        
-        dialog = gtk.FileChooserDialog(
-                    _("Apply Patch To Directory..."),
-                    None,
-                    gtk.FILE_CHOOSER_ACTION_SELECT_FOLDER,
-                    (gtk.STOCK_CANCEL, gtk.RESPONSE_CANCEL,
-                     gtk.STOCK_SAVE, gtk.RESPONSE_OK))
-        dialog.set_default_response(gtk.RESPONSE_OK)
-        
+
+        dialog = Gtk.FileChooserDialog(
+                title = _("Apply Patch To Directory..."),
+                parent = None,
+                action = Gtk.FileChooserAction.SELECT_FOLDER)
+        dialog.add_button(_("_Cancel"), Gtk.ResponseType.CANCEL)
+        dialog.add_button(_("_Select"), Gtk.ResponseType.OK)
+        dialog.set_default_response(Gtk.ResponseType.OK)
+
         response = dialog.run()
-        
-        if response == gtk.RESPONSE_OK:
+
+        if response == Gtk.ResponseType.OK:
             dir = dialog.get_filename()
-            
+
         dialog.destroy()
-        
+
         return dir
 
 class SVNApplyPatch(ApplyPatch):
     def __init__(self, paths):
         ApplyPatch.__init__(self, paths)
-        
+
         self.svn = self.vcs.svn()
 
     def start(self):
-    
+
         path = self.choose_patch_path()
         # If empty path, means we've cancelled
         if not path:
             return
-        
+
         base_dir = self.choose_patch_dir()
         if not base_dir:
-            return        
-        
+            return
+
         ticks = 2
         self.action = rabbitvcs.ui.action.SVNAction(
             self.svn,
@@ -119,25 +122,25 @@
         self.action.append(self.svn.apply_patch, path, base_dir)
         self.action.append(self.action.set_status, _("Patch File Applied"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 class GitApplyPatch(ApplyPatch):
     def __init__(self, paths):
         ApplyPatch.__init__(self, paths)
-        
+
         self.git = self.vcs.git(paths[0])
 
     def start(self):
-    
+
         path = self.choose_patch_path()
         # If empty path, means we've cancelled
         if not path:
             return
-        
+
         base_dir = self.choose_patch_dir()
         if not base_dir:
-            return        
-        
+            return
+
         ticks = 2
         self.action = rabbitvcs.ui.action.GitAction(
             self.git,
@@ -149,7 +152,7 @@
         self.action.append(self.git.apply_patch, path, base_dir)
         self.action.append(self.action.set_status, _("Patch File Applied"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 classes_map = {
     rabbitvcs.vcs.VCS_SVN: SVNApplyPatch,
@@ -160,6 +163,7 @@
     guess = rabbitvcs.vcs.guess(paths[0])
     return classes_map[guess["vcs"]](paths)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, paths) = main(usage="Usage: rabbitvcs applypatch [path1] [path2] ...")
@@ -167,5 +171,5 @@
     window = applypatch_factory(paths)
     window.register_gtk_quit()
     window.start()
-    gtk.main()
-    
+    Gtk.main()
+
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/branch.py rabbitvcs/rabbitvcs/ui/branch.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/branch.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/branch.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,35 +1,39 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 import rabbitvcs.vcs
 import rabbitvcs.vcs.status
 
@@ -40,36 +44,36 @@
     """
     Provides a UI interface to copy/branch/tag items in the repository or
     working copy.
-    
+
     Pass a single path to the class when initializing
-    
+
     """
-    
+
     def __init__(self, path, revision=None):
         InterfaceView.__init__(self, "branch", "Branch")
-        
+
         self.vcs = rabbitvcs.vcs.VCS()
         self.svn = self.vcs.svn()
-        
+
         self.path = path
         self.revision = revision
-        
+
         status = self.vcs.status(self.path)
-        
-        repo_paths = rabbitvcs.util.helper.get_repository_paths()
+
+        repo_paths = helper.get_repository_paths()
         self.from_urls = rabbitvcs.ui.widget.ComboBox(
-            self.get_widget("from_urls"), 
+            self.get_widget("from_urls"),
             repo_paths
         )
         self.to_urls = rabbitvcs.ui.widget.ComboBox(
-            self.get_widget("to_urls"), 
-            rabbitvcs.util.helper.get_repository_paths()
+            self.get_widget("to_urls"),
+            helper.get_repository_paths()
         )
-        
+
         repository_url = self.svn.get_repo_url(path)
         self.from_urls.set_child_text(repository_url)
         self.to_urls.set_child_text(repository_url)
-                
+
         self.message = rabbitvcs.ui.widget.TextView(
             self.get_widget("message")
         )
@@ -81,18 +85,18 @@
             url_combobox=self.from_urls,
             expand=True
         )
-        
+
         if (self.revision is None and status.has_modified()):
             self.revision_selector.set_kind_working()
 
     def on_ok_clicked(self, widget):
         src = self.from_urls.get_active_text()
         dest = self.to_urls.get_active_text()
-        
+
         if dest == "":
             rabbitvcs.ui.dialog.MessageBox(_("You must supply a destination path."))
             return
-        
+
         revision = self.revision_selector.get_revision_object()
         self.hide()
         self.action = rabbitvcs.ui.action.SVNAction(
@@ -100,28 +104,28 @@
             register_gtk_quit=self.gtk_quit_is_set()
         )
         self.action.set_log_message(self.message.get_text())
-        
+
         self.action.append(
-            rabbitvcs.util.helper.save_log_message, 
+            helper.save_log_message,
             self.message.get_text()
         )
-        
+
         self.action.append(self.action.set_header, _("Branch/tag"))
         self.action.append(self.action.set_status, _("Running Branch/tag Command..."))
         self.action.append(self.svn.copy, src, dest, revision)
         self.action.append(self.action.set_status, _("Completed Branch/tag"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def on_previous_messages_clicked(self, widget, data=None):
         dialog = rabbitvcs.ui.dialog.PreviousMessages()
         message = dialog.run()
         if message is not None:
-            self.message.set_text(message)
+            self.message.set_text(S(message).display())
 
     def on_repo_browser_clicked(self, widget, data=None):
-        from rabbitvcs.ui.browser import BrowserDialog
-        BrowserDialog(self.from_urls.get_active_text(), 
+        from rabbitvcs.ui.browser import SVNBrowserDialog
+        SVNBrowserDialog(self.from_urls.get_active_text(),
             callback=self.on_repo_browser_closed)
 
     def on_repo_browser_closed(self, new_url):
@@ -135,9 +139,10 @@
     if not vcs:
         guess = rabbitvcs.vcs.guess(path)
         vcs = guess["vcs"]
-        
+
     return classes_map[vcs](path, revision)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, REVISION_OPT, VCS_OPT
     (options, args) = main(
@@ -147,4 +152,4 @@
 
     window = branch_factory(options.vcs, args[0], options.revision)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/branches.py rabbitvcs/rabbitvcs/ui/branches.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/branches.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/branches.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,32 +1,35 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os
 
-import pygtk
-import gobject
-import gtk
-import pango
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk, Pango
+sa.restore()
 
 from datetime import datetime
 import time
@@ -36,13 +39,12 @@
 from rabbitvcs.ui.log import log_dialog_factory
 import rabbitvcs.ui.widget
 from rabbitvcs.ui.dialog import DeleteConfirmation
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 import rabbitvcs.vcs
 
 from xml.sax import saxutils
 
 from rabbitvcs import gettext
-import six
 _ = gettext.gettext
 
 STATE_ADD = 0
@@ -51,16 +53,16 @@
 class GitBranchManager(InterfaceView):
     """
     Provides a UI interface to manage items
-    
+
     """
-    
+
     state = STATE_ADD
-    
+
     def __init__(self, path, revision=""):
         InterfaceView.__init__(self, "manager", "Manager")
 
         self.path = path
-        
+
         self.get_widget("right_side").show()
         self.get_widget("Manager").set_size_request(695, -1)
         self.get_widget("Manager").set_title(_("Branch Manager"))
@@ -69,11 +71,11 @@
         self.vcs = rabbitvcs.vcs.VCS()
         self.git = self.vcs.git(path)
         self.revision = self.git.revision(revision)
-        
+
         self.selected_branch = None
         self.items_treeview = rabbitvcs.ui.widget.Table(
             self.get_widget("items_treeview"),
-            [rabbitvcs.ui.widget.TYPE_MARKUP], 
+            [rabbitvcs.ui.widget.TYPE_MARKUP],
             [_("Branch")],
             callbacks={
                 "mouse-event":   self.on_treeview_mouse_event,
@@ -82,7 +84,7 @@
         )
         self.initialize_detail()
         self.load()
-        
+
         if self.revision:
             revision_branches = self.git.branch_list(self.revision)
             if revision_branches:
@@ -91,106 +93,96 @@
                 self.show_add()
         else:
             self.show_add()
-        
+
     def initialize_detail(self):
         self.detail_container = self.get_widget("detail_container")
 
-        vbox = gtk.VBox(False, 6)
+        self.detail_grid = Gtk.Grid()
+        self.detail_grid.set_row_spacing(4)
+        self.detail_grid.set_column_spacing(6)
+        self.detail_grid.set_hexpand(True)
+        row = 0
 
         # Set up the Branch line
-        label = gtk.Label(_("Name:"))
-        label.set_size_request(90, -1)
-        label.set_properties(xalign=0,yalign=.5)
-        self.branch_entry = gtk.Entry()
-        self.branch_name_container = gtk.HBox(False, 0)
-        self.branch_name_container.pack_start(label, False, False, 0)
-        self.branch_name_container.pack_start(self.branch_entry, False, False, 0)
-        vbox.pack_start(self.branch_name_container, False, False, 0)
+        label = Gtk.Label(label = _("Name:"))
+        label.set_properties(xalign=0, yalign=.5)
+        self.branch_entry = Gtk.Entry()
+        self.branch_entry.set_hexpand(True)
+        self.detail_grid.attach(label, 0, row, 1, 1)
+        self.detail_grid.attach(self.branch_entry, 1, row, 2, 1)
+        branch_name_row = row
+        row = row + 1
 
         # Set up the Commit-sha line
-        label = gtk.Label(_("Start Point:"))
-        label.set_size_request(90, -1)
-        label.set_properties(xalign=0,yalign=.5)
-        self.start_point_entry = gtk.Entry()
+        label = Gtk.Label(label = _("Start Point:"))
+        label.set_properties(xalign=0, yalign=.5)
+        self.start_point_entry = Gtk.Entry()
         self.start_point_entry.set_size_request(300, -1)
-        self.start_point_container = gtk.HBox(False, 0)
-        self.log_dialog_button = gtk.Button()
+        self.start_point_entry.set_hexpand(True)
+        self.log_dialog_button = Gtk.Button()
         self.log_dialog_button.connect("clicked", self.on_log_dialog_button_clicked)
-        image = gtk.Image()
-        image.set_from_icon_name("rabbitvcs-show_log", 2)
+        image = Gtk.Image()
+        image.set_from_icon_name("rabbitvcs-show_log", Gtk.IconSize.SMALL_TOOLBAR)
         self.log_dialog_button.set_image(image)
-        self.start_point_container.pack_start(label, False, False, 0)
-        self.start_point_container.pack_start(self.start_point_entry, False, False, 0)
-        self.start_point_container.pack_start(self.log_dialog_button, False, False, 0)
-        vbox.pack_start(self.start_point_container, False, False, 0)
+        self.detail_grid.attach(label, 0, row, 1, 1)
+        self.detail_grid.attach(self.start_point_entry, 1, row, 1, 1)
+        self.detail_grid.attach(self.log_dialog_button, 2, row, 1, 1)
+        start_point_row = row
+        row = row + 1
 
         # Set up the Track line
-        label = gtk.Label("")
-        label.set_size_request(90, -1)
-        self.track_checkbox = gtk.CheckButton(_("Keep old branch's history"))
-        self.track_container = gtk.HBox(False, 0)
-        self.track_container.pack_start(label, False, False, 0)
-        self.track_container.pack_start(self.track_checkbox, False, False, 0)
-        vbox.pack_start(self.track_container, False, False, 0)
+        self.track_checkbox = Gtk.CheckButton(label = _("Keep old branch's history"))
+        self.detail_grid.attach(self.track_checkbox, 1, row, 2, 1)
+        track_row = row
+        row = row + 1
 
         # Set up the checkout line
-        label = gtk.Label("")
-        label.set_size_request(90, -1)
-        self.checkout_checkbox = gtk.CheckButton(_("Set as active branch"))
-        self.checkout_container = gtk.HBox(False, 0)
-        self.checkout_container.pack_start(label, False, False, 0)
-        self.checkout_container.pack_start(self.checkout_checkbox, False, False, 0)
-        vbox.pack_start(self.checkout_container, False, False, 0)
-        
+        self.checkout_checkbox = Gtk.CheckButton(label = _("Set as active branch"))
+        self.detail_grid.attach(self.checkout_checkbox, 1, row, 2, 1)
+        checkout_row = row
+        row = row + 1
+
         # Set up Save button
-        label = gtk.Label("")
-        label.set_size_request(90, -1)
-        self.save_button = gtk.Button(label=_("Save"))
+        self.save_button = Gtk.Button(label=_("Save"))
+        self.save_button.set_halign(Gtk.Align.START)
         self.save_button.connect("clicked", self.on_save_clicked)
-        self.save_container = gtk.HBox(False, 0)
-        self.save_container.pack_start(label, False, False, 0)
-        self.save_container.pack_start(self.save_button, False, False, 0)
-        vbox.pack_start(self.save_container, False, False, 0)
+        self.detail_grid.attach(self.save_button, 1, row, 1, 1)
+        save_row = row
+        row = row + 1
 
         # Set up the Revision line
-        label = gtk.Label(_("Revision:"))
-        label.set_size_request(90, -1)
+        label = Gtk.Label(label = _("Revision:"))
         label.set_properties(xalign=0,yalign=0)
-        self.revision_label = gtk.Label("")
-        self.revision_label.set_properties(xalign=0,selectable=True)
+        self.revision_label = Gtk.Label(label = "")
+        self.revision_label.set_properties(xalign=0, selectable=True)
         self.revision_label.set_line_wrap(True)
-        self.revision_container = gtk.HBox(False, 0)
-        self.revision_container.pack_start(label, False, False, 0)
-        self.revision_container.pack_start(self.revision_label, False, False, 0)
-        vbox.pack_start(self.revision_container, False, False, 0)
+        self.revision_label.set_hexpand(True)
+        self.detail_grid.attach(label, 0, row, 1, 1)
+        self.detail_grid.attach(self.revision_label, 1, row, 2, 1)
+        revision_row = row
+        row = row + 1
 
         # Set up the Log Message line
-        label = gtk.Label(_("Message:"))
-        label.set_size_request(90, -1)
-        label.set_properties(xalign=0,yalign=0)
-        self.message_label = gtk.Label("")
-        self.message_label.set_properties(xalign=0,yalign=0,selectable=True)
+        label = Gtk.Label(label = _("Message:"))
+        label.set_properties(xalign=0, yalign=0)
+        self.message_label = Gtk.Label(label = "")
+        self.message_label.set_properties(xalign=0, yalign=0, selectable=True)
         self.message_label.set_line_wrap(True)
-        self.message_label.set_size_request(250, -1)
-        self.message_container = gtk.HBox(False, 0)
-        self.message_container.pack_start(label, False, False, 0)
-        self.message_container.pack_start(self.message_label, False, False, 0)
-        vbox.pack_start(self.message_container, False, False, 0)
-        
-        self.add_containers = [self.branch_name_container, self.track_container, 
-            self.save_container, self.start_point_container,
-            self.checkout_container]
-            
-        self.view_containers = [self.branch_name_container, self.revision_container, 
-            self.message_container, self.save_container,  self.checkout_container]
-
-        self.all_containers = [self.branch_name_container, self.track_container,
-            self.revision_container, self.message_container, self.save_container, 
-            self.start_point_container, self.checkout_container]
-
-        vbox.show()
-        self.detail_container.add(vbox)
-        
+        self.message_label.set_hexpand(True)
+        self.detail_grid.attach(label, 0, row, 1, 1)
+        self.detail_grid.attach(self.message_label, 1, row, 2, 1)
+        message_row = row
+        row = row + 1
+
+        self.add_rows = [branch_name_row, track_row, save_row, start_point_row,
+            checkout_row]
+
+        self.view_rows = [branch_name_row, revision_row, message_row, save_row,
+             checkout_row]
+
+        self.detail_grid.show()
+        self.detail_container.add(self.detail_grid)
+
     def load(self):
         self.items_treeview.clear()
 
@@ -198,8 +190,8 @@
         for item in self.branch_list:
             name = saxutils.escape(item.name)
             if item.tracking:
-                name = "<b>%s</b>" % name            
-            self.items_treeview.append([name])            
+                name = "<b>%s</b>" % name
+            self.items_treeview.append([name])
 
     def on_add_clicked(self, widget):
         self.show_add()
@@ -210,14 +202,14 @@
         selected = []
         for branch in items:
             selected.append(saxutils.unescape(branch).replace("<b>", "").replace("</b>", ""))
-    
+
         confirm = rabbitvcs.ui.dialog.Confirmation(_("Are you sure you want to delete %s?" % ", ".join(selected)))
         result = confirm.run()
-       
-        if result == gtk.RESPONSE_OK or result == True:
+
+        if result == Gtk.ResponseType.OK or result == True:
             for branch in selected:
                 self.git.branch_delete(branch)
-            
+
             self.load()
             self.show_add()
 
@@ -231,10 +223,10 @@
         elif self.state == STATE_EDIT:
             branch_name = self.branch_entry.get_text()
             branch_track = self.track_checkbox.get_active()
-            
+
             if self.selected_branch.name != branch_name:
                 self.git.branch_rename(self.selected_branch.name, branch_name)
-    
+
         if self.checkout_checkbox.get_active():
             self.git.checkout([], self.git.revision(branch_name))
 
@@ -242,7 +234,7 @@
         self.show_edit(branch_name)
 
     def on_treeview_key_event(self, treeview, data=None):
-        if gtk.gdk.keyval_name(data.keyval) in ("Up", "Down", "Return"):
+        if Gdk.keyval_name(data.keyval) in ("Up", "Down", "Return"):
             self.on_treeview_event(treeview, data)
 
     def on_treeview_mouse_event(self, treeview, data=None):
@@ -255,37 +247,40 @@
                 branch_name = selected[0]
                 if branch_name.startswith("<b>"):
                     branch_name = branch_name[3:-4]
-            
+
                 self.show_edit(branch_name)
             self.get_widget("delete").set_sensitive(True)
         else:
             self.show_add()
 
-    def show_containers(self, containers):
-        for container in self.all_containers:
-            container.hide()
-        for container in containers:
-            container.show_all()
+    def show_rows(self, rows):
+        self.detail_grid.hide()
+        for w in self.detail_grid.get_children():
+            if self.detail_grid.child_get_property(w, "top-attach") in rows:
+                w.show_all()
+            else:
+                w.hide()
+        self.detail_grid.show()
 
     def show_add(self):
         self.state = STATE_ADD
-        
+
         revision = "HEAD"
         if self.revision:
             active_branch = self.git.get_active_branch()
             if active_branch:
-                revision = six.text_type(active_branch.name)
+                revision = S(active_branch.name)
 
         self.items_treeview.unselect_all()
         self.branch_entry.set_text("")
         self.save_button.set_label(_("Add"))
-        self.start_point_entry.set_text(revision)
+        self.start_point_entry.set_text(S(revision).display())
         self.track_checkbox.set_active(True)
         self.checkout_checkbox.set_sensitive(True)
         self.checkout_checkbox.set_active(False)
-        self.show_containers(self.add_containers)
+        self.show_rows(self.add_rows)
         self.get_widget("detail_label").set_markup(_("<b>Add Branch</b>"))
-    
+
     def show_edit(self, branch_name):
         self.state = STATE_EDIT
         branch_name = saxutils.unescape(branch_name)
@@ -298,9 +293,9 @@
         self.save_button.set_label(_("Save"))
 
         if self.selected_branch:
-            self.branch_entry.set_text(self.selected_branch.name)
-            self.revision_label.set_text(six.text_type(self.selected_branch.revision))
-            self.message_label.set_text(self.selected_branch.message.rstrip("\n"))
+            self.branch_entry.set_text(S(self.selected_branch.name).display())
+            self.revision_label.set_text(S(self.selected_branch.revision).display())
+            self.message_label.set_text(S(self.selected_branch.message.rstrip("\n")).display())
             if self.selected_branch.tracking:
                 self.checkout_checkbox.set_active(True)
                 self.checkout_checkbox.set_sensitive(False)
@@ -308,7 +303,7 @@
                 self.checkout_checkbox.set_active(False)
                 self.checkout_checkbox.set_sensitive(True)
 
-        self.show_containers(self.view_containers)
+        self.show_rows(self.view_rows)
         self.get_widget("detail_label").set_markup(_("<b>Branch Detail</b>"))
 
     def on_log_dialog_button_clicked(self, widget):
@@ -316,18 +311,19 @@
             self.path,
             ok_callback=self.on_log_dialog_closed
         )
-    
+
     def on_log_dialog_closed(self, data):
         if data:
-            self.start_point_entry.set_text(data)
+            self.start_point_entry.set_text(S(data).display())
+
 
 if __name__ == "__main__":
     from rabbitvcs.ui import main, REVISION_OPT, VCS_OPT
     (options, paths) = main(
-        [REVISION_OPT, VCS_OPT], 
+        [REVISION_OPT, VCS_OPT],
         usage="Usage: rabbitvcs branch-manager path [-r revision]"
     )
-    
+
     window = GitBranchManager(paths[0], revision=options.revision)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/browser.py rabbitvcs/rabbitvcs/ui/browser.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/browser.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/browser.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,34 +1,39 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os.path
-import six.moves._thread
-
-import pygtk
-import gobject
-import gtk
+import six
+import locale
 from datetime import datetime
 
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
+
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.util.contextmenu import GtkContextMenu, GtkContextMenuCaller, \
     GtkFilesContextMenuConditions
@@ -36,8 +41,9 @@
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
 import rabbitvcs.vcs
+import rabbitvcs.util.settings
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 from rabbitvcs.util.decorators import gtk_unsafe
 
@@ -46,7 +52,7 @@
 from rabbitvcs import gettext
 _ = gettext.gettext
 
-gobject.threads_init()
+helper.gobject_threads_init()
 
 class SVNBrowser(InterfaceView, GtkContextMenuCaller):
     def __init__(self, url):
@@ -55,62 +61,68 @@
         self.vcs = rabbitvcs.vcs.VCS()
         self.svn = self.vcs.svn()
 
+        sm = rabbitvcs.util.settings.SettingsManager()
+        self.datetime_format = sm.get("general", "datetime_format")
+
         self.url = ""
         if self.svn.is_in_a_or_a_working_copy(url):
             action = rabbitvcs.ui.action.SVNAction(self.svn, notification=False, run_in_thread=False)
-            self.url = action.run_single(self.svn.get_repo_url, url)
+            self.url = S(action.run_single(self.svn.get_repo_url, url))
         elif self.svn.is_path_repository_url(url):
-            self.url = url
+            self.url = S(url)
 
         self.urls = rabbitvcs.ui.widget.ComboBox(
-            self.get_widget("urls"), 
-            rabbitvcs.util.helper.get_repository_paths()
+            self.get_widget("urls"),
+            helper.get_repository_paths()
         )
         if self.url:
-            self.urls.set_child_text(rabbitvcs.util.helper.unquote_url(self.url))
+            self.urls.set_child_text(helper.unquote_url(self.url))
 
-        # We must set a signal handler for the gtk.Entry inside the combobox
+        # We must set a signal handler for the Gtk.Entry inside the combobox
         # Because glade will not retain that information
         self.urls.set_child_signal(
-            "key-release-event", 
+            "key-release-event",
             self.on_urls_key_released
         )
 
         self.revision_selector = rabbitvcs.ui.widget.RevisionSelector(
             self.get_widget("revision_container"),
             self.svn,
-            url_combobox=self.urls
+            url_combobox=self.urls,
+            expand=True
         )
 
         self.items = []
         self.list_table = rabbitvcs.ui.widget.Table(
-            self.get_widget("list"), 
-            [rabbitvcs.ui.widget.TYPE_PATH, gobject.TYPE_INT, 
-                gobject.TYPE_INT, gobject.TYPE_STRING, gobject.TYPE_FLOAT], 
-            [_("Path"), _("Revision"), _("Size"), _("Author"), _("Date")],
+            self.get_widget("list"),
+            [rabbitvcs.ui.widget.TYPE_HIDDEN_OBJECT,
+                rabbitvcs.ui.widget.TYPE_PATH, GObject.TYPE_INT,
+                GObject.TYPE_INT, GObject.TYPE_STRING, GObject.TYPE_FLOAT],
+            ["", _("Path"), _("Revision"), _("Size"), _("Author"), _("Date")],
             filters=[{
                 "callback": self.file_filter,
                 "user_data": {
-                    "column": 0
+                    "column": 1
                 }
             },{
                 "callback": self.revision_filter,
                 "user_data": {
-                    "column": 1
+                    "column": 2
                 }
             },{
                 "callback": self.size_filter,
                 "user_data": {
-                    "column": 2
+                    "column": 3
                 }
             },{
                 "callback": self.date_filter,
                 "user_data": {
-                    "column": 4
+                    "column": 5
                 }
             }],
-            filter_types=[gobject.TYPE_STRING, gobject.TYPE_STRING, 
-                gobject.TYPE_STRING, gobject.TYPE_STRING, gobject.TYPE_STRING], 
+            filter_types=[GObject.TYPE_STRING, GObject.TYPE_STRING,
+                GObject.TYPE_STRING, GObject.TYPE_STRING,
+                GObject.TYPE_STRING, GObject.TYPE_STRING],
             callbacks={
                 "file-column-callback": self.file_column_callback,
                 "row-activated": self.on_row_activated,
@@ -120,13 +132,12 @@
                 "sortable": True
             }
         )
-        
-        self.clipboard = None
-        self.url_clipboard = gtk.Clipboard()
+
+        self.url_clipboard = Gtk.Clipboard.get(Gdk.SELECTION_CLIPBOARD)
         self.repo_root_url = None
 
         if self.url:
-            rabbitvcs.util.helper.save_repository_path(url)
+            helper.save_repository_path(url)
             self.load()
 
     def load(self):
@@ -138,37 +149,60 @@
         revision = self.revision_selector.get_revision_object()
         self.action.append(
                         self.svn.list,
-                        rabbitvcs.util.helper.quote_url(self.url), 
+                        helper.quote_url(self.url),
                         revision=revision, recurse=False)
         self.action.append(self.init_repo_root_url)
         self.action.append(self.populate_table, 0)
-        self.action.start()
+        self.action.schedule()
 
     @gtk_unsafe
     def populate_table(self, item_index=0):
         self.list_table.clear()
         self.items = self.action.get_result(item_index)
-        self.items.sort(self.sort_files)
-        
-        self.list_table.append(["..", 0, 0, "", 0])
+        self.items.sort(key = self.sort_files_key)
+
+        self.list_table.append([S(".."), "..", 0, 0, "", 0])
         for item,locked in self.items[1:]:
             self.list_table.append([
+                S(item.path),
                 item.path,
                 item.created_rev.number,
                 item.size,
                 item.last_author,
                 item.time
             ])
-    
+
     def init_repo_root_url(self):
         if self.repo_root_url is None and self.svn.is_in_a_or_a_working_copy(self.url):
             action = rabbitvcs.ui.action.SVNAction(self.svn, notification=False, run_in_thread=False)
             self.repo_root_url = action.run_single(self.svn.get_repo_root_url, self.url)
 
     def on_refresh_clicked(self, widget):
-        rabbitvcs.util.helper.save_repository_path(self.urls.get_active_text())
+        helper.save_repository_path(self.urls.get_active_text())
         self.load()
 
+    def create_folder(self, where):
+        from rabbitvcs.ui.dialog import NewFolder
+        dialog = NewFolder()
+        result = dialog.run()
+        if result is None:
+            return
+
+        (folder_name, log_message) = result
+        new_url = where.rstrip("/") + "/" + folder_name
+
+        self.action = rabbitvcs.ui.action.SVNAction(
+            self.svn,
+            notification=False
+        )
+        self.action.append(self.svn.mkdir, new_url, log_message)
+        self.action.append(self.svn.list, where, recurse=False)
+        self.action.append(self.populate_table, 1)
+        self.action.schedule()
+
+    def on_create_folder_here_clicked(self, widget):
+        self.create_folder(self.urls.get_active_text())
+
     def on_row_activated(self, treeview, data, col):
         path = self.list_table.get_selected_row_items(0)[0]
         if path == "..":
@@ -178,14 +212,14 @@
             self.url = path
 
         if self.file_column_callback(self.url) == "dir" or self.url != path:
-            self.urls.set_child_text(rabbitvcs.util.helper.unquote_url(self.url))
+            self.urls.set_child_text(helper.unquote_url(self.url))
             self.load()
         else:
             self._open([self.url])
 
     def on_urls_key_released(self, widget, data, userdata):
-        if gtk.gdk.keyval_name(data.keyval) == "Return":
-            rabbitvcs.util.helper.save_repository_path(self.urls.get_active_text())
+        if Gdk.keyval_name(data.keyval) == "Return":
+            helper.save_repository_path(self.urls.get_active_text())
             self.load()
 
     def file_column_callback(self, filename):
@@ -193,28 +227,22 @@
         Determine the node kind (dir or file) from our retrieved items list
         """
 
-        if filename == "..":
+        filename = S(filename).unicode()
+        if filename == six.u(".."):
             return "dir"
 
         for item,locked in self.items:
-            if item.path == filename:
+            if S(item.path).unicode() == filename:
                 return self.svn.NODE_KINDS_REVERSE[item.kind]
         return None
 
-    def sort_files(self, x, y):
+    def sort_files_key(self, x):
         """
-        Sort the browser listing so that folders are on top and then sort
-        alphabetically.
-
+        Return a key to sort the browser listing so that folders are
+        on top and then sort alphabetically.
         """
-        xkind = self.svn.NODE_KINDS_REVERSE[x[0].kind]
-        ykind = self.svn.NODE_KINDS_REVERSE[y[0].kind]
-        if xkind == "dir" and ykind == "dir":
-            return cmp(x[0].repos_path, y[0].repos_path)
-        elif xkind == "dir" and ykind == "file":
-            return -1
-        else:
-            return 1
+        kind = self.svn.NODE_KINDS_REVERSE[x[0].kind] != "dir"
+        return (kind, locale.strxfrm(S(x[0].repos_path)))
 
     def file_filter(self, row, column, user_data=None):
         """
@@ -223,7 +251,7 @@
 
         if row[column]:
             return os.path.basename(row[column])
-            
+
         return row[column]
 
     def size_filter(self, row, column, user_data=None):
@@ -232,7 +260,7 @@
         """
 
         if self.file_column_callback(row[0]) == "file":
-            return rabbitvcs.util.helper.pretty_filesize(int(row[column]))
+            return helper.pretty_filesize(int(row[column]))
 
         return ""
 
@@ -240,24 +268,24 @@
         """
         Table filter to convert revision to a desired format
         """
-        
+
         if row[0] == "..":
             return ""
-        
+
         return row[column]
 
     def date_filter(self, row, column, user_data=None):
         """
         Table filter to convert the item date to something readable
         """
-        
+
         if row[0] == "..":
             return ""
-        
+
         if row[column]:
             change_time = datetime.fromtimestamp(float(row[column]))
-            return rabbitvcs.util.helper.format_datetime(change_time)
-        
+            return str(S(helper.format_datetime(change_time, self.datetime_format)))
+
         return str(row[column])
 
     def on_list_table_mouse_event(self, treeview, data=None):
@@ -268,27 +296,12 @@
         paths = self.list_table.get_selected_row_items(0)
         if len(paths) == 0:
             paths.append(self.url)
-        
+
         BrowserContextMenu(self, data, None, self.vcs, paths).show()
 
-    def update_clipboard(self, action, urls):
-        self.clipboard = {
-            "action": action,
-            "urls": urls
-        }
-
-    def clipboard_has_cut(self):
-        return (self.clipboard is not None and self.clipboard["action"] == "cut")
-
-    def clipboard_has_copy(self):
-        return (self.clipboard is not None and self.clipboard["action"] == "cut")
-
-    def empty_clipboard(self):
-        self.clipboard = None
-    
     def set_url_clipboard(self, url):
-        self.url_clipboard.set_text(url)
-    
+        self.url_clipboard.set_text(S(url).display(), -1)
+
     def get_repo_root_url(self):
         return self.repo_root_url
 
@@ -300,18 +313,18 @@
             self.svn,
             notification=False
         )
-        
+
         exported_paths = []
         for path in paths:
-            export_path = rabbitvcs.util.helper.get_tmp_path(os.path.basename(paths[0]))
+            export_path = helper.get_tmp_path(os.path.basename(paths[0]))
             exported_paths.append(export_path)
-            self.action.append(self.svn.export, paths[0], 
+            self.action.append(self.svn.export, paths[0],
                 export_path, revision=self.revision_selector.get_revision_object())
 
         for path in exported_paths:
-            self.action.append(rabbitvcs.util.helper.open_item, path)
+            self.action.append(helper.open_item, path)
 
-        self.action.start()
+        self.action.schedule()
 
 class SVNBrowserDialog(SVNBrowser):
     def __init__(self, path, callback=None):
@@ -320,16 +333,16 @@
         Also, provide a callback for when the close button is clicked so that we
         can get some desired data.
         """
-        
+
         self.callback = callback
 
-        gtk.stock_add([(gtk.STOCK_CLOSE, _("Select"), 0, 0, "")])
-        
         SVNBrowser.__init__(self, path)
-        
+
+        self.change_button("close", _("_Select"), "rabbitvcs-ok")
+
     def on_destroy(self, widget):
         pass
-    
+
     def on_close_clicked(self, widget, data=None):
         self.hide()
         if self.callback is not None:
@@ -345,12 +358,12 @@
 class MenuCreateRepositoryFolder(MenuItem):
     identifier = "RabbitVCS::Create_Repository_Folder"
     label = _("Create folder...")
-    icon = gtk.STOCK_NEW
+    icon = "folder-new"
 
 class MenuBrowserCopyTo(MenuItem):
     identifier = "RabbitVCS::Browser_Copy_To"
     label = _("Copy to...")
-    icon = gtk.STOCK_COPY
+    icon = "edit-copy"
 
 class MenuBrowserCopyUrlToClipboard(MenuItem):
     identifier = "RabbitVCS::Browser_Copy_Url_To_Clipboard"
@@ -360,7 +373,7 @@
 class MenuBrowserMoveTo(MenuItem):
     identifier = "RabbitVCS::Browser_Move_To"
     label = _("Move to...")
-    icon = gtk.STOCK_SAVE_AS
+    icon = "document-save-as"
 
 
 class BrowserContextMenuConditions(GtkFilesContextMenuConditions):
@@ -368,47 +381,55 @@
         GtkFilesContextMenuConditions.__init__(self, vcs, paths)
         self.caller = caller
 
+    def is_parent_selected(self):
+        for path in self.paths:
+            if os.path.split(path.rstrip("/"))[1] == "..":
+                return True
+        return False
+
     def _open(self, data1=None, data2=None):
         return True
-    
+
     def show_log(self, data1=None, data2=None):
         return True
-    
+
     def annotate(self, data1=None, data2=None):
         if self.path_dict["length"] == 1:
             return (self.caller.file_column_callback(self.paths[0]) == "file")
 
         return False
-    
+
     def checkout(self, data1=None, data2=None):
         return True
-    
+
     def export(self, data1=None, data2=None):
         return True
-        
+
     def rename(self, data1=None):
+        if self.path_dict["length"] > 1 or self.is_parent_selected():
+            return False
         revision = self.caller.revision_selector.get_revision_object()
-        return (revision.kind == "head")
-    
+        return revision.kind == "head"
+
     def delete(self, data1=None, data2=None):
         revision = self.caller.revision_selector.get_revision_object()
-        return (revision.kind == "head")
+        return revision.kind == "head" and not self.is_parent_selected()
 
     def create_repository_folder(self, data1=None):
-        if self.path_dict["length"] == 1:
+        if self.path_dict["length"] == 1 and not self.is_parent_selected():
             return (self.caller.file_column_callback(self.paths[0]) == "dir")
 
         return (self.path_dict["length"] == 0)
 
     def browser_copy_to(self, data1=None, data2=None):
-        return True
+        return not self.is_parent_selected()
 
     def browser_copy_url_to_clipboard(self, data1=None, data2=None):
         return (self.path_dict["length"] == 1)
 
     def browser_move_to(self, data1=None, data2=None):
         revision = self.caller.revision_selector.get_revision_object()
-        return (revision.kind == "head")
+        return revision.kind == "head" and not self.is_parent_selected()
 
 class BrowserContextMenuCallbacks:
     def __init__(self, caller, base_dir, vcs, paths=[]):
@@ -439,41 +460,41 @@
 
     def _open(self, data=None, user_data=None):
         self.caller._open(self.paths)
-    
+
     def show_log(self, data=None, user_data=None):
-        rabbitvcs.util.helper.launch_ui_window("log", ["--vcs=%s" % self.guess, self.paths[0]])
-    
+        helper.launch_ui_window("log", ["--vcs=%s" % self.guess, self.paths[0]])
+
     def annotate(self, data=None, user_data=None):
         urlrev = self.paths[0]
         revision = self.__get_browser_revision()
         if revision.kind == "number":
             urlrev += "@" + revision.value
-        rabbitvcs.util.helper.launch_ui_window("annotate", [urlrev])
-    
+        helper.launch_ui_window("annotate", ["--vcs=%s" % self.guess, urlrev])
+
     def checkout(self, data=None, user_data=None):
         args = [self.paths[0]]
         revision = self.__get_browser_revision()
         if revision.kind == "number":
             args = ["-r", revision.value] + args
-        rabbitvcs.util.helper.launch_ui_window("checkout", args)
-    
+        helper.launch_ui_window("checkout", args)
+
     def export(self, data=None, user_data=None):
         args = [self.paths[0]]
         revision = self.__get_browser_revision()
         if revision.kind == "number":
             args = ["-r", revision.value] + args
-        rabbitvcs.util.helper.launch_ui_window("export", args)
-        
+        helper.launch_ui_window("export", args)
+
     def rename(self, data=None, user_data=None):
         (base, filename) = os.path.split(self.paths[0])
-    
+
         from rabbitvcs.ui.dialog import OneLineTextChange
         dialog = OneLineTextChange(_("Rename"), _("New Name:"), filename)
         (result, new_name) = dialog.run()
-        
-        if result == gtk.RESPONSE_CANCEL:
+
+        if result == Gtk.ResponseType.CANCEL:
             return
-        
+
         new_url = base.rstrip("/") + "/" + new_name
         path_to_refresh = self.caller.get_url()
         if self.paths[0] == path_to_refresh:
@@ -487,17 +508,17 @@
         self.caller.action.append(self.svn.move, self.paths[0], new_url)
         self.caller.action.append(self.svn.list, path_to_refresh, recurse=False)
         self.caller.action.append(self.caller.populate_table, 1)
-        self.caller.action.start()
-    
+        self.caller.action.schedule()
+
     def delete(self, data=None, user_data=None):
-        path_to_refresh = self.caller.get_url() 
-        if self.paths[0] == path_to_refresh:            
+        path_to_refresh = self.caller.get_url()
+        if self.paths[0] == path_to_refresh:
             # If the deleted path is the same as the current path, go to the parent
             path_to_refresh = path_to_refresh.split("/")[0:-1]
             path_to_refresh = "/".join(path_to_refresh)
-        
+
             self.__update_browser_url(path_to_refresh)
-        
+
         self.caller.action = rabbitvcs.ui.action.SVNAction(
             self.svn,
             notification=False
@@ -505,31 +526,15 @@
         self.caller.action.append(self.svn.remove, self.paths)
         self.caller.action.append(self.svn.list, path_to_refresh, recurse=False)
         self.caller.action.append(self.caller.populate_table, 1)
-        self.caller.action.start()  
+        self.caller.action.schedule()
 
     def create_repository_folder(self, data=None, user_data=None):
-        from rabbitvcs.ui.dialog import NewFolder
-        dialog = NewFolder()
-        result = dialog.run()
-        if result is None:
-            return
-            
-        (folder_name, log_message) = result
-        new_url = self.paths[0].rstrip("/") + "/" + folder_name
-
-        self.caller.action = rabbitvcs.ui.action.SVNAction(
-            self.svn,
-            notification=False
-        )
-        self.caller.action.append(self.svn.mkdir, new_url, log_message)
-        self.caller.action.append(self.svn.list, self.paths[0], recurse=False)
-        self.caller.action.append(self.caller.populate_table, 1)
-        self.caller.action.start()        
+        self.caller.create_folder(self.paths[0])
 
     def browser_copy_to(self, data=None, user_data=None):
         from rabbitvcs.ui.dialog import OneLineTextChange
         dialog = OneLineTextChange(
-            _("Where do you want to copy the selection?"), 
+            _("Where do you want to copy the selection?"),
             _("New Location:"),
             self.caller.get_url()
         )
@@ -538,7 +543,7 @@
             return
 
         (response, new_url) = result
-        if response == gtk.RESPONSE_CANCEL:
+        if response == Gtk.ResponseType.CANCEL:
             return
 
         sources = self.__generate_sources_list()
@@ -550,7 +555,7 @@
         self.caller.action.append(self.svn.copy_all, sources, new_url, copy_as_child=True)
         self.caller.action.append(self.svn.list, self.caller.get_url(), recurse=False)
         self.caller.action.append(self.caller.populate_table, 1)
-        self.caller.action.start()
+        self.caller.action.schedule()
 
     def browser_copy_url_to_clipboard(self, data=None, user_data=None):
         self.caller.set_url_clipboard(self.paths[0])
@@ -558,7 +563,7 @@
     def browser_move_to(self, data=None, user_data=None):
         from rabbitvcs.ui.dialog import OneLineTextChange
         dialog = OneLineTextChange(
-            _("Where do you want to move the selection?"), 
+            _("Where do you want to move the selection?"),
             _("New Location:"),
             self.caller.get_url()
         )
@@ -567,7 +572,7 @@
             return
 
         (response, new_url) = result
-        if response == gtk.RESPONSE_CANCEL:
+        if response == Gtk.ResponseType.CANCEL:
             return
 
         self.caller.action = rabbitvcs.ui.action.SVNAction(
@@ -577,27 +582,27 @@
         self.caller.action.append(self.svn.move_all, self.paths, new_url, move_as_child=True)
         self.caller.action.append(self.svn.list, self.caller.get_url(), recurse=False)
         self.caller.action.append(self.caller.populate_table, 1)
-        self.caller.action.start()
+        self.caller.action.schedule()
 
 class BrowserContextMenu:
     def __init__(self, caller, event, base_dir, vcs, paths=[]):
-        
+
         self.caller = caller
         self.event = event
         self.paths = paths
         self.base_dir = base_dir
         self.vcs = vcs
         self.svn = self.vcs.svn()
-        
+
         self.conditions = BrowserContextMenuConditions(
-            self.vcs, 
+            self.vcs,
             paths,
             self.caller
         )
         self.callbacks = BrowserContextMenuCallbacks(
-            self.caller, 
+            self.caller,
             self.base_dir,
-            self.vcs, 
+            self.vcs,
             paths
         )
 
@@ -634,6 +639,7 @@
     guess = rabbitvcs.vcs.guess(path)
     return classes_map[guess["vcs"]](path)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, url) = main(
@@ -642,4 +648,4 @@
 
     window = browser_factory(url[0])
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/changes.py rabbitvcs/rabbitvcs/ui/changes.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/changes.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/changes.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,46 +1,51 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os.path
-import pygtk
-import gobject
-import gtk
+
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 import rabbitvcs.ui.widget
-import rabbitvcs.util.helper
 from rabbitvcs.util.contextmenu import GtkContextMenu
 from rabbitvcs.util.contextmenuitems import *
+from rabbitvcs.util.strings import S
 import rabbitvcs.ui.action
 from rabbitvcs.ui.dialog import MessageBox
+
 from rabbitvcs import gettext
-import six
 _ = gettext.gettext
 
 class Changes(InterfaceView):
     """
     Show how files and folders are different between revisions.
-    
+
         TODO:
             - Deal with the revision arguments in a smarter way so we can pass
                 in revisions like HEAD.  Currently, if a revision is passed it
@@ -54,7 +59,7 @@
 
     def __init__(self, path1=None, revision1=None, path2=None, revision2=None):
         InterfaceView.__init__(self, "changes", "Changes")
-        
+
         self.vcs = rabbitvcs.vcs.VCS()
 
         self.MORE_ACTIONS_CALLBACKS = [
@@ -68,19 +73,19 @@
         )
         self.more_actions.set_active(0)
 
-        repo_paths = rabbitvcs.util.helper.get_repository_paths()
+        repo_paths = helper.get_repository_paths()
         self.first_urls = rabbitvcs.ui.widget.ComboBox(
-            self.get_widget("first_urls"), 
+            self.get_widget("first_urls"),
             repo_paths
         )
         self.first_urls_browse = self.get_widget("first_urls_browse")
 
         self.second_urls = rabbitvcs.ui.widget.ComboBox(
-            self.get_widget("second_urls"), 
+            self.get_widget("second_urls"),
             repo_paths
         )
         self.second_urls_browse = self.get_widget("second_urls_browse")
-        
+
     #
     # UI Signal Callback Methods
     #
@@ -90,7 +95,7 @@
 
     def on_refresh_clicked(self, widget):
         self.load()
-    
+
     def on_first_urls_changed(self, widget, data=None):
         self.check_first_urls()
         self.check_refresh_button()
@@ -136,9 +141,9 @@
         index = self.more_actions.get_active()
         if index < 0:
             return
-            
+
         callback = self.MORE_ACTIONS_CALLBACKS[index]
-        
+
         if callback is not None:
             callback()
 
@@ -155,39 +160,39 @@
     #
     # Helper methods
     #
-    
+
     def get_first_revision(self):
         return self.first_revision_selector.get_revision_object()
-    
+
     def get_second_revision(self):
         return self.second_revision_selector.get_revision_object()
 
     def show_changes_table_popup_menu(self, treeview, data):
         ChangesContextMenu(self, data).show()
-    
+
     def check_ui(self):
         self.check_first_urls()
         self.check_second_urls()
         self.check_refresh_button()
-    
+
     def can_first_browse_urls(self):
         return (self.first_urls.get_active_text() != "")
-    
+
     def can_second_browse_urls(self):
         return (self.second_urls.get_active_text() != "")
-    
+
     def check_refresh_button(self):
         can_click_refresh = (
             self.can_first_browse_urls()
             and self.can_second_browse_urls()
         )
-        
+
         self.get_widget("refresh").set_sensitive(can_click_refresh)
-    
+
     def check_first_urls(self):
         can_browse_urls = self.can_first_browse_urls()
         self.first_urls_browse.set_sensitive(can_browse_urls)
-        
+
     def check_second_urls(self):
         can_browse_urls = self.can_second_browse_urls()
         self.second_urls_browse.set_sensitive(can_browse_urls)
@@ -198,7 +203,7 @@
 
     def disable_more_actions(self):
         self.more_actions.set_sensitive(False)
-    
+
     def view_selected_diff(self, sidebyside=False):
         for row in self.selected_rows:
             url1 = self.changes_table.get_row(row)[0]
@@ -207,19 +212,19 @@
                 url1 = ""
                 url2 = ""
 
-            url1 = rabbitvcs.util.helper.url_join(self.first_urls.get_active_text(), url1)
-            url2 = rabbitvcs.util.helper.url_join(self.second_urls.get_active_text(), url2)
+            url1 = helper.url_join(self.first_urls.get_active_text(), url1)
+            url2 = helper.url_join(self.second_urls.get_active_text(), url2)
             rev1 = self.get_first_revision()
             rev2 = self.get_second_revision()
-            
-            rabbitvcs.util.helper.launch_ui_window("diff", [
-                "%s@%s" % (url1, six.text_type(rev1)),
-                "%s@%s" % (url2, six.text_type(rev2)),
+
+            helper.launch_ui_window("diff", [
+                "%s@%s" % (url1, S(rev1)),
+                "%s@%s" % (url2, S(rev2)),
                 "%s" % (sidebyside and "-s" or ""),
                 "--vcs=%s" % self.get_vcs_name()
             ])
-        
-        
+
+
     #
     # More Actions callbacks
     #
@@ -227,12 +232,12 @@
     def on_more_actions_view_unified_diff(self):
         url1 = self.first_urls.get_active_text()
         rev1 = self.get_first_revision()
-        rev2 = self.get_second_revision()        
+        rev2 = self.get_second_revision()
         url2 = self.second_urls.get_active_text()
 
-        rabbitvcs.util.helper.launch_ui_window("diff", [
-            "%s@%s" % (url1, six.text_type(rev1)),
-            "%s@%s" % (url2, six.text_type(rev2)),
+        helper.launch_ui_window("diff", [
+            "%s@%s" % (url1, S(rev1)),
+            "%s@%s" % (url2, S(rev2)),
             "--vcs=%s" % self.get_vcs_name()
         ])
 
@@ -253,7 +258,7 @@
 
         if path1 is not None:
             self.first_urls.set_child_text(self.svn.get_repo_url(path1))
-            
+
         if path2 is not None:
             self.second_urls.set_child_text(self.svn.get_repo_url(path2))
         elif path1 is not None:
@@ -263,20 +268,22 @@
             self.get_widget("first_revision_container"),
             self.svn,
             revision=revision1,
-            url_combobox=self.first_urls
+            url_combobox=self.first_urls,
+            expand=True
         )
 
         self.second_revision_selector = rabbitvcs.ui.widget.RevisionSelector(
             self.get_widget("second_revision_container"),
             self.svn,
             revision=revision2,
-            url_combobox=self.second_urls
+            url_combobox=self.second_urls,
+            expand=True
         )
 
         self.changes_table = rabbitvcs.ui.widget.Table(
             self.get_widget("changes_table"),
-            [gobject.TYPE_STRING, gobject.TYPE_STRING, 
-                gobject.TYPE_STRING], 
+            [GObject.TYPE_STRING, GObject.TYPE_STRING,
+                GObject.TYPE_STRING],
             [_("Path"), _("Change"), _("Property Change")],
             flags={
                 "sortable": True,
@@ -288,14 +295,14 @@
         )
 
         self.check_ui()
-        
+
         if path1 and revision1 and path2 and revision2:
             self.load()
 
     def load(self):
         first_url = self.first_urls.get_active_text()
         first_rev = self.get_first_revision()
-        second_rev = self.get_second_revision()        
+        second_rev = self.get_second_revision()
         second_url = self.second_urls.get_active_text()
 
         self.action = rabbitvcs.ui.action.SVNAction(
@@ -310,11 +317,11 @@
             second_url,
             second_rev
         )
-        self.action.append(rabbitvcs.util.helper.save_repository_path, first_url)
-        self.action.append(rabbitvcs.util.helper.save_repository_path, second_url)
+        self.action.append(helper.save_repository_path, first_url)
+        self.action.append(helper.save_repository_path, second_url)
         self.action.append(self.populate_table)
         self.action.append(self.enable_more_actions)
-        self.action.start()
+        self.action.schedule()
 
     def populate_table(self):
         # returns a list of dicts(path, summarize_kind, node_kind, prop_changed)
@@ -323,25 +330,25 @@
         self.changes_table.clear()
         for item in summary:
             prop_changed = (item["prop_changed"] == 1 and _("Yes") or _("No"))
-            
+
             path = item["path"]
             if path == "":
                 path = "."
-                
+
             self.changes_table.append([
                 path,
-                item["summarize_kind"],
+                str(item["summarize_kind"]),
                 prop_changed
             ])
 
     def on_first_urls_browse_clicked(self, widget, data=None):
         from rabbitvcs.ui.browser import SVNBrowserDialog
-        SVNBrowserDialog(self.first_urls.get_active_text(), 
+        SVNBrowserDialog(self.first_urls.get_active_text(),
             callback=self.on_first_repo_chooser_closed)
 
     def on_second_urls_browse_clicked(self, widget, data=None):
         from rabbitvcs.ui.browser import SVNBrowserDialog
-        SVNBrowserDialog(self.second_urls.get_active_text(), 
+        SVNBrowserDialog(self.second_urls.get_active_text(),
             callback=self.on_second_repo_chooser_closed)
 
 class GitChanges(Changes):
@@ -349,13 +356,13 @@
         Changes.__init__(self, path1, revision1, path2, revision2)
 
         self.git = self.vcs.git(path1)
-        
+
         self.first_urls_browse.hide()
         self.second_urls_browse.hide()
 
         if path1 is not None:
             self.first_urls.set_child_text(path1)
-            
+
         if path2 is not None:
             self.second_urls.set_child_text(path2)
         elif path1 is not None:
@@ -365,31 +372,33 @@
             self.get_widget("first_revision_container"),
             self.git,
             revision=revision1,
-            url_combobox=self.first_urls
+            url_combobox=self.first_urls,
+            expand=True
         )
 
         self.second_revision_selector = rabbitvcs.ui.widget.RevisionSelector(
             self.get_widget("second_revision_container"),
             self.git,
             revision=revision2,
-            url_combobox=self.second_urls
+            url_combobox=self.second_urls,
+            expand=True
         )
 
         self.changes_table = rabbitvcs.ui.widget.Table(
             self.get_widget("changes_table"),
-            [gobject.TYPE_STRING, gobject.TYPE_STRING], 
+            [GObject.TYPE_STRING, GObject.TYPE_STRING],
             [_("Path"), _("Change")]
         )
 
         self.check_ui()
-        
+
         if path1 and revision1 and path2 and revision2:
             self.load()
 
     def load(self):
         first_url = self.first_urls.get_active_text()
         first_rev = self.get_first_revision()
-        second_rev = self.get_second_revision()        
+        second_rev = self.get_second_revision()
         second_url = self.second_urls.get_active_text()
 
         self.action = rabbitvcs.ui.action.GitAction(
@@ -404,11 +413,11 @@
             second_url,
             second_rev
         )
-        self.action.append(rabbitvcs.util.helper.save_repository_path, first_url)
-        self.action.append(rabbitvcs.util.helper.save_repository_path, second_url)
+        self.action.append(helper.save_repository_path, first_url)
+        self.action.append(helper.save_repository_path, second_url)
         self.action.append(self.populate_table)
         self.action.append(self.enable_more_actions)
-        self.action.start()
+        self.action.schedule()
 
     def populate_table(self):
         # returns a list of dicts(path, summarize_kind, node_kind, prop_changed)
@@ -425,16 +434,16 @@
 class MenuOpenFirst(MenuItem):
     identifier = "RabbitVCS::Open_First"
     label = _("Open from first revision")
-    icon = gtk.STOCK_OPEN
+    icon = "document-open"
 
 class MenuOpenSecond(MenuItem):
     identifier = "RabbitVCS::Open_Second"
-    label = _("Open from second revision") 
-    icon = gtk.STOCK_OPEN
-    
+    label = _("Open from second revision")
+    icon = "document-open"
+
 class MenuViewDiff(MenuItem):
     identifier = "RabbitVCS::View_Diff"
-    label = _("View unified diff(s)")   
+    label = _("View unified diff(s)")
     icon = "rabbitvcs-diff"
 
 class MenuCompare(MenuItem):
@@ -451,10 +460,10 @@
         return (
             len(self.caller.selected_rows) == 1
         )
-    
+
     def open_second(self):
         return (
-            len(self.caller.selected_rows) == 1 
+            len(self.caller.selected_rows) == 1
             and (
                 str(self.caller.get_first_revision()) != str(self.caller.get_second_revision())
                 or self.caller.first_urls.get_active_text() != self.caller.second_urls.get_active_text()
@@ -481,13 +490,13 @@
         if path == ".":
             path = ""
 
-        url = rabbitvcs.util.helper.url_join(self.caller.first_urls.get_active_text(), path)
+        url = helper.url_join(self.caller.first_urls.get_active_text(), path)
         rev = self.caller.get_first_revision()
 
-        rabbitvcs.util.helper.launch_ui_window("open", [
+        helper.launch_ui_window("open", [
             "--vcs=%s" % self.caller.get_vcs_name(),
             url,
-            "-r%s" % six.text_type(rev)            
+            "-r%s" % S(rev)
         ])
 
     def open_second(self, widget, data=None):
@@ -495,12 +504,12 @@
         if path == ".":
             path = ""
 
-        url = rabbitvcs.util.helper.url_join(self.caller.second_urls.get_active_text(), path)
+        url = helper.url_join(self.caller.second_urls.get_active_text(), path)
         rev = self.caller.get_second_revision()
-        rabbitvcs.util.helper.launch_ui_window("open", [
+        helper.launch_ui_window("open", [
             "--vcs=%s" % self.caller.get_vcs_name(),
             url,
-            "-r%s" % six.text_type(rev)            
+            "-r%s" % S(rev)
         ])
 
     def view_diff(self, widget, data=None):
@@ -514,14 +523,14 @@
                 url1 = ""
                 url2 = ""
 
-            url1 = rabbitvcs.util.helper.url_join(self.caller.first_urls.get_active_text(), url1)
-            url2 = rabbitvcs.util.helper.url_join(self.caller.second_urls.get_active_text(), url2)
+            url1 = helper.url_join(self.caller.first_urls.get_active_text(), url1)
+            url2 = helper.url_join(self.caller.second_urls.get_active_text(), url2)
             rev1 = self.caller.get_first_revision()
             rev2 = self.caller.get_second_revision()
-            
-            rabbitvcs.util.helper.launch_ui_window("diff", [
-                "%s@%s" % (url1, six.text_type(rev1)), 
-                "%s@%s" % (url2, six.text_type(rev2)), 
+
+            helper.launch_ui_window("diff", [
+                "%s@%s" % (url1, S(rev1)),
+                "%s@%s" % (url2, S(rev2)),
                 "-s",
                 "--vcs=%s" % self.caller.get_vcs_name()
             ])
@@ -529,14 +538,14 @@
 class ChangesContextMenu:
     """
     Defines context menu items for a table with files
-    
+
     """
     def __init__(self, caller, event):
-        """    
+        """
         @param  caller: The calling object
         @type   caller: object
-        
-        """        
+
+        """
         self.caller = caller
         self.event = event
         self.vcs = rabbitvcs.vcs.VCS()
@@ -546,7 +555,7 @@
             self.caller,
             self.vcs
         )
-        
+
         self.callbacks = ChangesContextMenuCallbacks(
             self.caller,
             self.vcs
@@ -561,11 +570,11 @@
             (MenuViewDiff, None),
             (MenuCompare, None)
         ]
-        
+
     def show(self):
         if len(self.caller.selected_rows) == 0:
             return
-            
+
         context_menu = GtkContextMenu(self.structure, self.conditions, self.callbacks)
         context_menu.show(self.event)
 
@@ -578,21 +587,22 @@
     if not vcs:
         guess = rabbitvcs.vcs.guess(path1)
         vcs = guess["vcs"]
-        
+
     return classes_map[vcs](path1, revision1, path2, revision2)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, VCS_OPT
     (options, args) = main(
         [VCS_OPT],
         usage="Usage: rabbitvcs changes [url1@rev1] [url2@rev2]"
     )
-    
-    pathrev1 = rabbitvcs.util.helper.parse_path_revision_string(args.pop(0))
+
+    pathrev1 = helper.parse_path_revision_string(args.pop(0))
     pathrev2 = (None, None)
     if len(args) > 0:
-        pathrev2 = rabbitvcs.util.helper.parse_path_revision_string(args.pop(0))
+        pathrev2 = helper.parse_path_revision_string(args.pop(0))
 
     window = changes_factory(options.vcs, pathrev1[0], pathrev1[1], pathrev2[0], pathrev2[1])
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/checkmods.py rabbitvcs/rabbitvcs/ui/checkmods.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/checkmods.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/checkmods.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -24,9 +24,13 @@
 import six.moves._thread
 import threading
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.util.contextmenu import GtkFilesContextMenu, \
@@ -36,7 +40,6 @@
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
 from rabbitvcs.util.log import Log
 from rabbitvcs.util.decorators import gtk_unsafe
 
@@ -45,15 +48,15 @@
 from rabbitvcs import gettext
 _ = gettext.gettext
 
-gobject.threads_init()
+helper.gobject_threads_init()
 
 class SVNCheckForModifications(InterfaceView):
     """
-    Provides a way for the user to see what files have been changed on the 
+    Provides a way for the user to see what files have been changed on the
     repository.
-    
+
     """
-    
+
     def __init__(self, paths, base_dir=None):
         InterfaceView.__init__(self, "checkmods", "CheckMods")
 
@@ -90,7 +93,7 @@
     #
     # Helper methods
     #
-    
+
     def load(self):
         self.local_mods.refresh()
 
@@ -104,8 +107,8 @@
         self.base_dir = base_dir
 
         self.files_table = rabbitvcs.ui.widget.Table(
-            self.caller.get_widget("local_files_table"), 
-            [gobject.TYPE_STRING, gobject.TYPE_STRING, gobject.TYPE_STRING], 
+            self.caller.get_widget("local_files_table"),
+            [GObject.TYPE_STRING, GObject.TYPE_STRING, GObject.TYPE_STRING],
             [_("Path"), _("Status"), _("Extension")],
             filters=[{
                 "callback": rabbitvcs.ui.widget.path_filter,
@@ -136,7 +139,7 @@
         )
         self.action.append(self.svn.get_items, self.paths, self.svn.STATUSES_FOR_CHECK)
         self.action.append(self.populate_files_table)
-        self.action.start()
+        self.action.schedule()
 
     @gtk_unsafe
     def populate_files_table(self):
@@ -144,13 +147,13 @@
         self.items = self.action.get_result(0)
         for item in self.items:
             self.files_table.append([
-                item.path, 
+                item.path,
                 item.simple_content_status(),
-                rabbitvcs.util.helper.get_file_extension(item.path)
+                helper.get_file_extension(item.path)
             ])
 
     def diff_local(self, path):
-        rabbitvcs.util.helper.launch_diff_tool(path)
+        helper.launch_diff_tool(path)
 
     def on_context_menu_command_finished(self):
         self.refresh()
@@ -165,12 +168,12 @@
         self.base_dir = base_dir
 
         self.files_table = rabbitvcs.ui.widget.Table(
-            self.caller.get_widget("remote_files_table"), 
-            [gobject.TYPE_STRING, gobject.TYPE_STRING, 
-                gobject.TYPE_STRING, gobject.TYPE_STRING, 
-                gobject.TYPE_STRING, gobject.TYPE_STRING], 
-            [_("Path"), _("Extension"), 
-                _("Text Status"), _("Property Status"), 
+            self.caller.get_widget("remote_files_table"),
+            [GObject.TYPE_STRING, GObject.TYPE_STRING,
+                GObject.TYPE_STRING, GObject.TYPE_STRING,
+                GObject.TYPE_STRING, GObject.TYPE_STRING],
+            [_("Path"), _("Extension"),
+                _("Text Status"), _("Property Status"),
                 _("Revision"), _("Author")],
             filters=[{
                 "callback": rabbitvcs.ui.widget.path_filter,
@@ -201,7 +204,7 @@
         )
         self.action.append(self.svn.get_remote_updates, self.paths)
         self.action.append(self.populate_files_table)
-        self.action.start()
+        self.action.schedule()
 
     @gtk_unsafe
     def populate_files_table(self):
@@ -217,8 +220,8 @@
                 author = item.author
 
             self.files_table.append([
-                item.path, 
-                rabbitvcs.util.helper.get_file_extension(item.path),
+                item.path,
+                helper.get_file_extension(item.path),
                 item.remote_content,
                 item.remote_metadata,
                 str(revision),
@@ -227,22 +230,22 @@
 
     def diff_remote(self, path):
         from rabbitvcs.ui.diff import SVNDiff
-        
+
         path_local = path
         path_remote = self.svn.get_repo_url(path_local)
-        
+
         self.action = rabbitvcs.ui.action.SVNAction(
             self.svn,
             notification=False
         )
         self.action.append(
             SVNDiff,
-            path_local, 
-            None, 
+            path_local,
+            None,
             path_remote,
             "HEAD"
         )
-        self.action.start()
+        self.action.schedule()
 
     def on_context_menu_command_finished(self):
         self.refresh()
@@ -281,8 +284,8 @@
         self.paths = paths
 
     def update(self, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window(
-            "update", 
+        proc = helper.launch_ui_window(
+            "update",
             self.paths
         )
         self.caller.rescan_after_process_exit(proc, self.paths)
@@ -292,41 +295,41 @@
 
     def compare(self, data1=None, data2=None):
         from rabbitvcs.ui.diff import SVNDiff
-        
+
         path_local = self.paths[0]
         path_remote = self.svn.get_repo_url(path_local)
-        
+
         self.action = rabbitvcs.ui.action.SVNAction(
             self.svn,
             notification=False
         )
         self.action.append(
             SVNDiff,
-            path_local, 
-            None, 
+            path_local,
+            None,
             path_remote,
             "HEAD",
             sidebyside=True
         )
-        self.action.start()
+        self.action.schedule()
 
 class CheckRemoteModsContextMenu:
     def __init__(self, caller, event, base_dir, vcs, paths=[]):
-        
+
         self.caller = caller
         self.event = event
         self.paths = paths
         self.base_dir = base_dir
         self.vcs = vcs
-        
+
         self.conditions = CheckRemoteModsContextMenuConditions(self.vcs, paths)
         self.callbacks = CheckRemoteModsContextMenuCallbacks(
-            self.caller, 
+            self.caller,
             self.base_dir,
-            self.vcs, 
+            self.vcs,
             paths
         )
-        
+
         self.structure = [
             (MenuViewDiff, None),
             (MenuCompare, None),
@@ -349,6 +352,7 @@
     guess = rabbitvcs.vcs.guess(paths[0])
     return classes_map[guess["vcs"]](paths, base_dir)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT
     (options, paths) = main(
@@ -358,4 +362,4 @@
 
     window = checkmods_factory(paths, options.base_dir)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/checkout.py rabbitvcs/rabbitvcs/ui/checkout.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/checkout.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/checkout.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,38 +1,41 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os.path
-import urllib
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 import rabbitvcs.vcs
 from rabbitvcs.ui.updateto import GitUpdateToRevision
 from rabbitvcs import gettext
@@ -41,49 +44,49 @@
 class Checkout(InterfaceView):
     """
     Provides an interface to check out a working copy.
-    
+
     Pass it the destination path.
-    
+
     """
 
     def __init__(self, path=None, url=None, revision=None):
         InterfaceView.__init__(self, "checkout", "Checkout")
-        
+
         self.path = path
         self.vcs = rabbitvcs.vcs.VCS()
 
         self.repositories = rabbitvcs.ui.widget.ComboBox(
-            self.get_widget("repositories"), 
-            rabbitvcs.util.helper.get_repository_paths()
+            self.get_widget("repositories"),
+            helper.get_repository_paths()
         )
-        
-        # We must set a signal handler for the gtk.Entry inside the combobox
+
+        # We must set a signal handler for the Gtk.Entry inside the combobox
         # Because glade will not retain that information
         self.repositories.set_child_signal(
-            "key-release-event", 
+            "key-release-event",
             self.on_repositories_key_released
         )
 
-        self.destination = rabbitvcs.util.helper.get_user_path()
+        self.destination = helper.get_user_path()
         if path is not None:
             self.destination = path
-            self.get_widget("destination").set_text(path)
+            self.get_widget("destination").set_text(S(path).display())
 
         if url is not None:
             self.repositories.set_child_text(url)
-        
+
         self.complete = False
-        
+
     #
     # UI Signal Callback Methods
     #
 
     def _parse_path(self, path):
         if path.startswith("file://"):
-            path = urllib.unquote(path)
+            path = helper.unquote(path)
             path = path[7:]
         return path
-            
+
     def _get_path(self):
         path = self._parse_path(self.get_widget("destination").get_text())
         return os.path.normpath(path)
@@ -92,10 +95,10 @@
         chooser = rabbitvcs.ui.dialog.FolderChooser()
         path = chooser.run()
         if path is not None:
-            self.get_widget("destination").set_text(path)
+            self.get_widget("destination").set_text(S(path).display())
 
     def on_repositories_key_released(self, widget, data, userdata=None):
-        if gtk.gdk.keyval_name(data.keyval) == "Return":
+        if Gdk.keyval_name(data.keyval) == "Return":
             if self.complete:
                 self.on_ok_clicked(widget)
 
@@ -103,13 +106,13 @@
         self.check_form()
 
     def on_destination_key_released(self, widget, data):
-        if gtk.gdk.keyval_name(data.keyval) == "Return":
+        if Gdk.keyval_name(data.keyval) == "Return":
             if self.complete:
                 self.on_ok_clicked(widget)
 
     def on_repo_chooser_clicked(self, widget, data=None):
         from rabbitvcs.ui.browser import SVNBrowserDialog
-        SVNBrowserDialog(self.repositories.get_active_text(), 
+        SVNBrowserDialog(self.repositories.get_active_text(),
             callback=self.on_repo_chooser_closed)
 
     def on_repo_chooser_closed(self, new_url):
@@ -122,7 +125,7 @@
             self.complete = False
         if self.get_widget("destination").get_text() == "":
             self.complete = False
-        
+
         self.get_widget("ok").set_sensitive(self.complete)
 
 
@@ -151,13 +154,13 @@
         path = self._get_path()
         omit_externals = self.get_widget("omit_externals").get_active()
         recursive = self.get_widget("recursive").get_active()
-        
+
         if not url or not path:
             rabbitvcs.ui.dialog.MessageBox(_("The repository URL and destination path are both required fields."))
             return
-        
+
         revision = self.revision_selector.get_revision_object()
-    
+
         self.hide()
         self.action = rabbitvcs.ui.action.SVNAction(
             self.svn,
@@ -165,10 +168,10 @@
         )
         self.action.append(self.action.set_header, _("Checkout"))
         self.action.append(self.action.set_status, _("Running Checkout Command..."))
-        self.action.append(rabbitvcs.util.helper.save_repository_path, url)
+        self.action.append(helper.save_repository_path, url)
         self.action.append(
             self.svn.checkout,
-            rabbitvcs.util.helper.quote_url(url),
+            helper.quote_url(url),
             path,
             recurse=recursive,
             revision=revision,
@@ -176,7 +179,7 @@
         )
         self.action.append(self.action.set_status, _("Completed Checkout"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def on_repositories_changed(self, widget, data=None):
         # Do not use quoting for this bit
@@ -189,15 +192,15 @@
             append = tmp.pop()
             if append not in ("trunk", "branches", "tags"):
                 break
-                
+
             if append in ("http:", "https:", "file:", "svn:", "svn+ssh:"):
                 append = ""
                 break
-        
+
         self.get_widget("destination").set_text(
-            os.path.join(self.destination, append)
+            S(os.path.join(self.destination, append)).display()
         )
-        
+
         self.check_form()
 
 class GitCheckout(GitUpdateToRevision):
@@ -216,7 +219,7 @@
         )
 
         self.action.append(self.git.checkout, [path])
-        self.action.run()
+        self.action.schedule()
 
 classes_map = {
     rabbitvcs.vcs.VCS_SVN: SVNCheckout,
@@ -235,16 +238,17 @@
             return GitCheckoutQuiet(path)
         else:
             return GitCheckout(path, url, revision)
-    
+
     return classes_map[vcs](path, url, revision)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, REVISION_OPT, VCS_OPT, QUIET_OPT
     (options, args) = main(
         [REVISION_OPT, VCS_OPT, QUIET_OPT],
         usage="Usage: rabbitvcs checkout --vcs=[git|svn] [url] [path]"
     )
-    
+
     # If two arguments are passed:
     #   The first argument is expected to be a url
     #   The second argument is expected to be a path
@@ -266,4 +270,4 @@
     else:
         window = checkout_factory(options.vcs, path=path, url=url, revision=options.revision, quiet=options.quiet)
         window.register_gtk_quit()
-        gtk.main()
+        Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/clean.py rabbitvcs/rabbitvcs/ui/clean.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/clean.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/clean.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,32 +1,35 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os
 
-import pygtk
-import gobject
-import gtk
-import pango
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk, Pango
+sa.restore()
 
 from datetime import datetime
 import time
@@ -34,7 +37,6 @@
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.action import GitAction
 import rabbitvcs.ui.widget
-import rabbitvcs.util.helper
 import rabbitvcs.vcs
 
 from rabbitvcs import gettext
@@ -43,9 +45,9 @@
 class GitClean(InterfaceView):
     """
     Provides a UI to clean your repository of untracked files
-    
+
     """
-    
+
     def __init__(self, path):
         InterfaceView.__init__(self, "clean", "Clean")
         self.vcs = rabbitvcs.vcs.VCS()
@@ -77,26 +79,27 @@
         )
         self.action.append(self.action.set_status, _("Completed Clean"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def on_remove_ignored_too_toggled(self, widget):
         remove_ignored_too = self.get_widget("remove_ignored_too")
         remove_only_ignored = self.get_widget("remove_only_ignored")
-        
+
         if remove_ignored_too.get_active():
             remove_only_ignored.set_active(False)
 
     def on_remove_only_ignored_toggled(self, widget):
         remove_ignored_too = self.get_widget("remove_ignored_too")
         remove_only_ignored = self.get_widget("remove_only_ignored")
-        
+
         if remove_only_ignored.get_active():
             remove_ignored_too.set_active(False)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, paths) = main(usage="Usage: rabbitvcs clean path")
-    
+
     window = GitClean(paths[0])
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/cleanup.py rabbitvcs/rabbitvcs/ui/cleanup.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/cleanup.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/cleanup.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,29 +1,33 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceNonView
 from rabbitvcs.ui.action import SVNAction
@@ -36,9 +40,9 @@
     """
     This class provides a handler to the Cleanup window view.
     The idea is that it displays a large folder icon with a label like
-    "Please Wait...".  Then when it finishes cleaning up, the label will 
+    "Please Wait...".  Then when it finishes cleaning up, the label will
     change to "Finished cleaning up /path/to/folder"
-    
+
     """
 
     def __init__(self, path):
@@ -52,20 +56,20 @@
             self.svn,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Cleanup"))
         self.action.append(self.action.set_status, _("Cleaning Up..."))
         self.action.append(self.svn.cleanup, self.path)
         self.action.append(self.action.set_status, _("Completed Cleanup"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
+
 
-        
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, paths) = main(usage="Usage: rabbitvcs cleanup [path]")
-            
+
     window = SVNCleanup(paths[0])
     window.register_gtk_quit()
     window.start()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/clone.py rabbitvcs/rabbitvcs/ui/clone.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/clone.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/clone.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,39 +1,42 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os.path
-import urllib
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.checkout import Checkout
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 import rabbitvcs.vcs
 
 from rabbitvcs import gettext
@@ -42,22 +45,25 @@
 class GitClone(Checkout):
     def __init__(self, path=None, url=None):
         Checkout.__init__(self, path, url)
-        
+
         self.git = self.vcs.git()
-        
+
         self.get_widget("Checkout").set_title(_("Clone"))
         self.get_widget("repo_chooser").hide()
+        self.get_widget("options_box").hide()
+        self.get_widget("revision_selector_box").hide()
 
+        self.default_text()
         self.check_form()
 
     def on_ok_clicked(self, widget):
         url = self.repositories.get_active_text().strip()
         path = self._get_path().strip()
-        
+
         if not url or not path:
             rabbitvcs.ui.dialog.MessageBox(_("The repository URL and destination path are both required fields."))
             return
-    
+
         self.hide()
         self.action = rabbitvcs.ui.action.GitAction(
             self.git,
@@ -65,7 +71,7 @@
         )
         self.action.append(self.action.set_header, _("Clone"))
         self.action.append(self.action.set_status, _("Running Clone Command..."))
-        self.action.append(rabbitvcs.util.helper.save_repository_path, url)
+        self.action.append(helper.save_repository_path, url)
         self.action.append(
             self.git.clone,
             url,
@@ -73,38 +79,35 @@
         )
         self.action.append(self.action.set_status, _("Completed Clone"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def on_repositories_changed(self, widget, data=None):
         url = self.repositories.get_active_text()
-        tmp = url.replace("//", "/").split("/")[1:]
-        append = ""
-        prev = ""
-        while len(tmp):
-            prev = append
-            append = tmp.pop()
-                
-            if append in ("http:", "https:", "file:", "git:"):
-                append = ""
-                break
-
-            if append.endswith(".git"):
-                append = append[:-4]
-                break
+        tmp = [x.strip() for x in url.split("/") if x.strip()]
+        if tmp and tmp[0].lower() in ("http:", "https:", "file:", "git:"):
+            del tmp[0]
+        append = tmp[-1] if tmp else ""
+        if append.endswith(".git"):
+            append = append[:-4]
 
-        self.get_widget("destination").set_text(
-            os.path.join(self.destination, append)
-        )
-        
+        helper.run_in_main_thread(self.get_widget("destination").set_text,
+                                  S(os.path.join(self.destination, append)).display())
         self.check_form()
 
+    def default_text(self):
+        # Use a repo url from the clipboard by default.
+        clipboard = Gtk.Clipboard.get(Gdk.Atom.intern("CLIPBOARD", False))
+        text = clipboard.wait_for_text()
+        if text and text.endswith(('.git', '.git/')):
+            self.repositories.set_child_text(text)
+
     def check_form(self):
         self.complete = True
         if self.repositories.get_active_text() == "":
             self.complete = False
         if self.get_widget("destination").get_text() == "":
             self.complete = False
-        
+
         self.get_widget("ok").set_sensitive(self.complete)
 
 classes_map = {
@@ -114,18 +117,19 @@
 def clone_factory(classes_map, vcs, path=None, url=None):
     return classes_map[vcs](path, url)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, VCS_OPT
     (options, args) = main(
         [VCS_OPT],
         usage="Usage: rabbitvcs clone --vcs=git [url] [path]"
     )
-    
+
     # Default to using git
     vcs = rabbitvcs.vcs.VCS_GIT
     if options.vcs:
         vcs = options.vcs
-    
+
     # If two arguments are passed:
     #   The first argument is expected to be a url
     #   The second argument is expected to be a path
@@ -144,4 +148,4 @@
 
     window = clone_factory(classes_map, vcs, path=path, url=url)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/commit.py rabbitvcs/rabbitvcs/ui/commit.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/commit.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/commit.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,41 +1,45 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os
 import six.moves._thread
-
-import pygtk
-import gobject
-import gtk
 from time import sleep
 
+from rabbitvcs.util import helper
+
+from gi import require_version
+require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk, GLib
+sa.restore()
+
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.util.contextmenu import GtkFilesContextMenu, GtkContextMenuCaller
 import rabbitvcs.ui.action
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.util
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 from rabbitvcs.util.decorators import gtk_unsafe
 import rabbitvcs.vcs.status
@@ -45,13 +49,13 @@
 from rabbitvcs import gettext
 _ = gettext.gettext
 
-gobject.threads_init()
+helper.gobject_threads_init()
 
 class Commit(InterfaceView, GtkContextMenuCaller):
     """
     Provides a user interface for the user to commit working copy
     changes to a repository.  Pass it a list of local paths to commit.
-    
+
     """
     SETTINGS = rabbitvcs.util.settings.SettingsManager()
 
@@ -64,10 +68,10 @@
 
     def __init__(self, paths, base_dir=None, message=None):
         """
-        
+
         @type  paths:   list of strings
         @param paths:   A list of local paths.
-        
+
         """
         InterfaceView.__init__(self, "commit", "Commit")
 
@@ -78,16 +82,17 @@
 
         self.files_table = rabbitvcs.ui.widget.Table(
             self.get_widget("files_table"),
-            [gobject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_PATH, 
-                gobject.TYPE_STRING, rabbitvcs.ui.widget.TYPE_STATUS,
-                gobject.TYPE_STRING], 
-            [rabbitvcs.ui.widget.TOGGLE_BUTTON, _("Path"), _("Extension"), 
+            [GObject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_HIDDEN_OBJECT,
+                rabbitvcs.ui.widget.TYPE_PATH,
+                GObject.TYPE_STRING, rabbitvcs.ui.widget.TYPE_STATUS,
+                GObject.TYPE_STRING],
+            [rabbitvcs.ui.widget.TOGGLE_BUTTON, "", _("Path"), _("Extension"),
                 _("Text Status"), _("Property Status")],
             filters=[{
                 "callback": rabbitvcs.ui.widget.path_filter,
                 "user_data": {
                     "base_dir": base_dir,
-                    "column": 1
+                    "column": 2
                 }
             }],
             callbacks={
@@ -97,15 +102,17 @@
                 "row-toggled":   self.on_files_table_toggle_event
             },
             flags={
-                "sortable": True, 
-                "sort_on": 1
+                "sortable": True,
+                "sort_on": 2
             }
         )
         self.files_table.allow_multiple()
         self.get_widget("toggle_show_unversioned").set_active(self.SHOW_UNVERSIONED)
+        if not message:
+            message = self.SETTINGS.get_multiline("general", "default_commit_message")
         self.message = rabbitvcs.ui.widget.TextView(
             self.get_widget("message"),
-            (message and message or "")
+            message
         )
 
         self.paths = []
@@ -117,24 +124,21 @@
 
     #
     # Helper functions
-    # 
+    #
 
     def load(self):
         """
           - Gets a listing of file items that are valid for the commit window.
           - Determines which items should be "activated" by default
           - Populates the files table with the retrieved items
-          - Updates the status area        
+          - Updates the status area
         """
-        gtk.gdk.threads_enter()
+
         self.get_widget("status").set_text(_("Loading..."))
-        gtk.gdk.threads_leave()
 
         self.items = self.vcs.get_items(self.paths, self.vcs.statuses_for_commit(self.paths))
 
-        gtk.gdk.threads_enter()
         self.populate_files_table()
-        gtk.gdk.threads_leave()
 
     # Overrides the GtkContextMenuCaller method
     def on_context_menu_command_finished(self):
@@ -154,22 +158,19 @@
 
     def should_item_be_visible(self, item):
         show_unversioned = self.SHOW_UNVERSIONED
-        
+
         if not show_unversioned:
             if not item.is_versioned():
                return False
-       
+
         return True
 
     def initialize_items(self):
         """
         Initializes the activated cache and loads the file items in a new thread
         """
-        
-        try:
-            six.moves._thread.start_new_thread(self.load, ())
-        except Exception as e:
-            log.exception(e)
+
+        GLib.idle_add(self.load)
 
     def show_files_table_popup_menu(self, treeview, data):
         paths = self.files_table.get_selected_row_items(1)
@@ -178,35 +179,35 @@
     def delete_items(self, widget, data=None):
         paths = self.files_table.get_selected_row_items(1)
         if len(paths) > 0:
-            proc = rabbitvcs.util.helper.launch_ui_window("delete", paths)
+            proc = helper.launch_ui_window("delete", paths)
             self.rescan_after_process_exit(proc, paths)
-            
+
     #
     # Event handlers
     #
     def on_refresh_clicked(self, widget):
-        self.initialize_items()        
+        self.initialize_items()
 
     def on_key_pressed(self, widget, data):
         if InterfaceView.on_key_pressed(self, widget, data):
             return True
 
-        if (data.state & (gtk.gdk.CONTROL_MASK) and 
-                gtk.gdk.keyval_name(data.keyval) == "Return"):
+        if (data.state & (Gdk.ModifierType.CONTROL_MASK) and
+                Gdk.keyval_name(data.keyval) == "Return"):
             self.on_ok_clicked(widget)
             return True
-            
+
     def on_toggle_show_all_toggled(self, widget, data=None):
         self.TOGGLE_ALL = not self.TOGGLE_ALL
         self.changes.clear()
         for row in self.files_table.get_items():
             row[0] = self.TOGGLE_ALL
             self.changes[row[1]] = self.TOGGLE_ALL
-            
+
     def on_toggle_show_unversioned_toggled(self, widget, data=None):
         if self.isInitDone:
             self.SHOW_UNVERSIONED = not self.SHOW_UNVERSIONED
-            
+
         self.populate_files_table()
 
         # Save this preference for future commits.
@@ -219,13 +220,13 @@
 
     def on_files_table_row_activated(self, treeview, event, col):
         paths = self.files_table.get_selected_row_items(1)
-        pathrev1 = rabbitvcs.util.helper.create_path_revision_string(paths[0], "base")
-        pathrev2 = rabbitvcs.util.helper.create_path_revision_string(paths[0], "working")
-        proc = rabbitvcs.util.helper.launch_ui_window("diff", ["-s", pathrev1, pathrev2])
+        pathrev1 = helper.create_path_revision_string(paths[0], "base")
+        pathrev2 = helper.create_path_revision_string(paths[0], "working")
+        proc = helper.launch_ui_window("diff", ["-s", pathrev1, pathrev2])
         self.rescan_after_process_exit(proc, paths)
 
     def on_files_table_key_event(self, treeview, data=None):
-        if gtk.gdk.keyval_name(data.keyval) == "Delete":
+        if Gdk.keyval_name(data.keyval) == "Delete":
             self.delete_items(treeview, data)
 
     def on_files_table_mouse_event(self, treeview, data=None):
@@ -236,44 +237,54 @@
         dialog = rabbitvcs.ui.dialog.PreviousMessages()
         message = dialog.run()
         if message is not None:
-            self.message.set_text(message)
+            self.message.set_text(S(message).display())
 
     def populate_files_table(self):
         """
         First clears and then populates the files table based on the items
         retrieved in self.load()
-        
+
         """
-        
+
         self.files_table.clear()
         n = 0
+        m = 0
         for item in self.items:
             if item.path in self.changes:
                 checked = self.changes[item.path]
             else:
                 checked = self.should_item_be_activated(item)
 
+            if item.is_versioned():
+                n += 1
+            else:
+                m += 1
+
             if not self.should_item_be_visible(item):
                 continue
 
-            n += 1
             self.files_table.append([
                 checked,
-                item.path, 
-                rabbitvcs.util.helper.get_file_extension(item.path),
+                S(item.path),
+                item.path,
+                helper.get_file_extension(item.path),
                 item.simple_content_status(),
                 item.simple_metadata_status()
             ])
-        self.get_widget("status").set_text(_("Found %d item(s)") % n)
+        self.get_widget("status").set_text(_("Found %(changed)d changed and %(unversioned)d unversioned item(s)") % {
+                "changed": n,
+                "unversioned": m
+            }
+        )
 
 class SVNCommit(Commit):
     def __init__(self, paths, base_dir=None, message=None):
         Commit.__init__(self, paths, base_dir, message)
 
         self.get_widget("commit_to_box").show()
-        
+
         self.get_widget("to").set_text(
-            self.vcs.svn().get_repo_url(self.base_dir)
+            S(self.vcs.svn().get_repo_url(self.base_dir)).display()
         )
 
         self.items = None
@@ -314,17 +325,17 @@
         self.action.append(self.action.set_header, _("Commit"))
         self.action.append(self.action.set_status, _("Running Commit Command..."))
         self.action.append(
-            rabbitvcs.util.helper.save_log_message, 
+            helper.save_log_message,
             self.message.get_text()
         ),
         self.action.append(self.do_commit, items, recurse)
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def do_commit(self, items, recurse):
         # pysvn.Revision
         revision = self.vcs.svn().commit(items, self.message.get_text(), recurse=recurse)
-        
+
         self.action.set_status(_("Completed Commit") + " at Revision: " + str(revision.number))
 
     def on_files_table_toggle_event(self, row, col):
@@ -338,11 +349,11 @@
         self.git = self.vcs.git(paths[0])
 
         self.get_widget("commit_to_box").show()
-        
+
         active_branch = self.git.get_active_branch()
         if active_branch:
             self.get_widget("to").set_text(
-                active_branch.name
+                S(active_branch.name).display()
             )
         else:
             self.get_widget("to").set_text("No active branch")
@@ -382,94 +393,31 @@
         self.action.append(self.action.set_header, _("Commit"))
         self.action.append(self.action.set_status, _("Running Commit Command..."))
         self.action.append(
-            rabbitvcs.util.helper.save_log_message,
-            self.message.get_text()
-        )
-        self.action.append(
-            self.git.commit, 
-            self.message.get_text()
-        )
-        self.action.append(self.action.set_status, _("Completed Commit"))
-        self.action.append(self.action.finish)
-        self.action.start() 
-
-    def on_files_table_toggle_event(self, row, col):
-        # Adds path: True/False to the dict
-        self.changes[row[1]] = row[col]
-
-
-class MercurialCommit(Commit):
-    def __init__(self, paths, base_dir=None, message=None):
-        Commit.__init__(self, paths, base_dir, message)
-
-        self.mercurial = self.vcs.mercurial(paths[0])
-
-        options_box = self.get_widget("options_box")
-        
-        self.close_branch = gtk.CheckButton(_("Close Branch"))
-        options_box.pack_start(self.close_branch, False, False, 0)
-        self.close_branch.show()
-
-        self.items = None
-        if len(self.paths):
-            self.initialize_items()
-
-    def on_ok_clicked(self, widget, data=None):
-        items = self.files_table.get_activated_rows(1)
-        self.hide()
-
-        if len(items) == 0:
-            self.close()
-            return
-
-        staged = 0
-        for item in items:
-            try:
-                status = self.vcs.status(item, summarize=False).simple_content_status()
-                if status == rabbitvcs.vcs.status.status_missing:
-                    self.mercurial.revert([item])
-                    self.mercurial.remove(item)
-                else:
-                    self.mercurial.add(item)
-                    staged += 1
-            except Exception as e:
-                log.exception(e)
-
-        ticks = staged + len(items)*2
-
-        self.action = rabbitvcs.ui.action.MercurialAction(
-            self.mercurial,
-            register_gtk_quit=self.gtk_quit_is_set()
-        )
-        self.action.set_pbar_ticks(ticks)
-        self.action.append(self.action.set_header, _("Commit"))
-        self.action.append(self.action.set_status, _("Running Commit Command..."))
-        self.action.append(
-            rabbitvcs.util.helper.save_log_message, 
+            helper.save_log_message,
             self.message.get_text()
         )
         self.action.append(
-            self.mercurial.commit, 
+            self.git.commit,
             self.message.get_text()
         )
         self.action.append(self.action.set_status, _("Completed Commit"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def on_files_table_toggle_event(self, row, col):
         # Adds path: True/False to the dict
         self.changes[row[1]] = row[col]
 
 classes_map = {
-    rabbitvcs.vcs.VCS_SVN: SVNCommit, 
-    rabbitvcs.vcs.VCS_GIT: GitCommit, 
-    rabbitvcs.vcs.VCS_MERCURIAL: MercurialCommit
+    rabbitvcs.vcs.VCS_SVN: SVNCommit,
+    rabbitvcs.vcs.VCS_GIT: GitCommit
 }
 
 def commit_factory(paths, base_dir=None, message=None):
     guess = rabbitvcs.vcs.guess(paths[0])
     return classes_map[guess["vcs"]](paths, base_dir, message)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT
     (options, paths) = main(
@@ -479,4 +427,4 @@
 
     window = commit_factory(paths, options.base_dir, message=options.message)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/create.py rabbitvcs/rabbitvcs/ui/create.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/create.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/create.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -24,9 +24,13 @@
 import os
 import subprocess
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 import rabbitvcs.ui.dialog
 from rabbitvcs.ui.action import GitAction
@@ -38,51 +42,52 @@
     """
     Provides an interface to create a svn repository
     """
-    
+
     # Also, might want to just launch a terminal window instead of this
     def __init__(self, path):
-    
-    
+
+
         if not os.path.isdir(path):
             os.makedirs(path)
-        
+
         # Let svnadmin return a bad value if a repo already exists there
         ret = subprocess.call(["/usr/bin/svnadmin", "create", path])
         if ret == 0:
             rabbitvcs.ui.dialog.MessageBox(_("Repository successfully created"))
         else:
             rabbitvcs.ui.dialog.MessageBox(_("There was an error creating the repository.  Make sure the given folder is empty."))
-        
+
 class GitCreate:
     # Also, might want to just launch a terminal window instead of this
     def __init__(self, path):
         self.vcs = rabbitvcs.vcs.VCS()
         self.git = self.vcs.git()
         self.path = path
-        
+
         self.action = GitAction(
             self.git,
             register_gtk_quit=True
         )
-        
+
         self.action.append(self.action.set_header, _("Initialize Repository"))
         self.action.append(self.action.set_status, _("Setting up repository..."))
         self.action.append(self.git.initialize_repository, self.path)
         self.action.append(self.action.set_status, _("Completed repository setup"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 classes_map = {
     rabbitvcs.vcs.VCS_SVN: SVNCreate,
     rabbitvcs.vcs.VCS_GIT: GitCreate
 }
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, VCS_OPT, VCS_OPT_ERROR
     (options, paths) = main([VCS_OPT], usage="Usage: rabbitvcs create --vcs [svn|git] path")
     if options.vcs:
         window = classes_map[options.vcs](paths[0])
         if options.vcs == rabbitvcs.vcs.VCS_GIT:
-            gtk.main()
+            Gtk.main()
     else:
         rabbitvcs.ui.dialog.MessageBox(VCS_OPT_ERROR)
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/createpatch.py rabbitvcs/rabbitvcs/ui/createpatch.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/createpatch.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/createpatch.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,43 +1,45 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os
-import six.moves._thread
-
-import pygtk
-import gobject
-import gtk
-import os
 import tempfile
 import shutil
+import six.moves._thread
+
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.action import SVNAction, GitAction
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.util
-import rabbitvcs.util.helper
-from rabbitvcs.util.helper import get_common_directory
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 from rabbitvcs.ui.commit import SVNCommit, GitCommit
 
@@ -46,20 +48,20 @@
 from rabbitvcs import gettext
 _ = gettext.gettext
 
-gobject.threads_init()
+helper.gobject_threads_init()
 
 class CreatePatch:
     """
     Provides a user interface for the user to create a Patch file
-    
+
     """
 
     def __init__(self, paths, base_dir):
         """
-        
+
         @type  paths:   list of strings
         @param paths:   A list of local paths.
-        
+
         """
 
         InterfaceView.__init__(self, "commit", "Commit")
@@ -75,8 +77,8 @@
         self.base_dir = base_dir
         self.vcs = rabbitvcs.vcs.VCS()
         self.activated_cache = {}
-        
-        self.common = rabbitvcs.util.helper.get_common_directory(paths)
+
+        self.common = helper.get_common_directory(paths)
 
         if not self.vcs.is_versioned(self.common):
             rabbitvcs.ui.dialog.MessageBox(_("The given path is not a working copy"))
@@ -84,15 +86,16 @@
 
         self.files_table = rabbitvcs.ui.widget.Table(
             self.get_widget("files_table"),
-            [gobject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_PATH, 
-                gobject.TYPE_STRING, gobject.TYPE_STRING, gobject.TYPE_STRING], 
-            [rabbitvcs.ui.widget.TOGGLE_BUTTON, _("Path"), _("Extension"), 
+            [GObject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_HIDDEN_OBJECT,
+                rabbitvcs.ui.widget.TYPE_PATH,
+                GObject.TYPE_STRING, GObject.TYPE_STRING, GObject.TYPE_STRING],
+            [rabbitvcs.ui.widget.TOGGLE_BUTTON, "", _("Path"), _("Extension"),
                 _("Text Status"), _("Property Status")],
             filters=[{
                 "callback": rabbitvcs.ui.widget.path_filter,
                 "user_data": {
                     "base_dir": base_dir,
-                    "column": 1
+                    "column": 2
                 }
             }],
             callbacks={
@@ -101,39 +104,40 @@
                 "key-event":     self.on_files_table_key_event
             },
             flags={
-                "sortable": True, 
-                "sort_on": 1
+                "sortable": True,
+                "sort_on": 2
             }
         )
         self.files_table.allow_multiple()
-        
+
         self.items = None
         self.initialize_items()
 
     #
     # Helper functions
-    # 
+    #
 
     def choose_patch_path(self):
         path = ""
-        
-        dialog = gtk.FileChooserDialog(
-            _("Create Patch"),
-            None,
-            gtk.FILE_CHOOSER_ACTION_SAVE,(gtk.STOCK_CANCEL, gtk.RESPONSE_CANCEL,
-                                          gtk.STOCK_SAVE, gtk.RESPONSE_OK))
+
+        dialog = Gtk.FileChooserDialog(
+            title = _("Create Patch"),
+            parent = None,
+            action = Gtk.FileChooserAction.SAVE)
+        dialog.add_button(_("_Cancel"), Gtk.ResponseType.CANCEL)
+        dialog.add_button(_("_Create"), Gtk.ResponseType.OK)
         dialog.set_do_overwrite_confirmation(True)
-        dialog.set_default_response(gtk.RESPONSE_OK)
+        dialog.set_default_response(Gtk.ResponseType.OK)
         dialog.set_current_folder_uri(
-            get_common_directory(self.paths).replace("file://", "")
+            helper.get_common_directory(self.paths).replace("file://", "")
         )
         response = dialog.run()
-        
-        if response == gtk.RESPONSE_OK:
+
+        if response == Gtk.ResponseType.OK:
             path = dialog.get_filename()
-            
+
         dialog.destroy()
-        
+
         return path
 
 class SVNCreatePatch(CreatePatch, SVNCommit):
@@ -145,20 +149,20 @@
     #
     # Event handlers
     #
-        
+
     def on_ok_clicked(self, widget, data=None):
         items = self.files_table.get_activated_rows(1)
         self.hide()
-        
+
         if len(items) == 0:
             self.close()
             return
-        
+
         path = self.choose_patch_path()
         if not path:
             self.close()
             return
-      
+
         ticks = len(items)*2
         self.action = rabbitvcs.ui.action.SVNAction(
             self.svn,
@@ -167,41 +171,41 @@
         self.action.set_pbar_ticks(ticks)
         self.action.append(self.action.set_header, _("Create Patch"))
         self.action.append(self.action.set_status, _("Creating Patch File..."))
-        
+
         def create_patch_action(patch_path, patch_items, base_dir):
             fileObj = open(patch_path,"w")
-            
+
             # PySVN takes a path to create its own temp files...
             temp_dir = tempfile.mkdtemp(prefix=rabbitvcs.TEMP_DIR_PREFIX)
-            
+
             os.chdir(base_dir)
-           
+
             # Add to the Patch file only the selected items
             for item in patch_items:
-                rel_path = rabbitvcs.util.helper.get_relative_path(base_dir, item)
+                rel_path = helper.get_relative_path(base_dir, item)
                 diff_text = self.svn.diff(
-                    temp_dir, 
-                    rel_path, 
-                    self.svn.revision("base"), 
-                    rel_path, 
+                    temp_dir,
+                    rel_path,
+                    self.svn.revision("base"),
+                    rel_path,
                     self.svn.revision("working")
                 )
                 fileObj.write(diff_text)
-    
-            fileObj.close()            
-        
+
+            fileObj.close()
+
             # Note: if we don't want to ignore errors here, we could define a
             # function that logs failures.
             shutil.rmtree(temp_dir, ignore_errors = True)
-        
+
         self.action.append(create_patch_action, path, items, self.common)
-        
+
         self.action.append(self.action.set_status, _("Patch File Created"))
         self.action.append(self.action.finish)
-        self.action.start()
-        
+        self.action.schedule()
+
         # TODO: Open the diff file (meld is going to add support in a future version :()
-        # rabbitvcs.util.helper.launch_diff_tool(path)
+        # helper.launch_diff_tool(path)
 
 class GitCreatePatch(CreatePatch, GitCommit):
     def __init__(self, paths, base_dir=None):
@@ -212,20 +216,20 @@
     #
     # Event handlers
     #
-        
+
     def on_ok_clicked(self, widget, data=None):
         items = self.files_table.get_activated_rows(1)
         self.hide()
-        
+
         if len(items) == 0:
             self.close()
             return
-        
+
         path = self.choose_patch_path()
         if not path:
             self.close()
             return
-      
+
         ticks = len(items)*2
         self.action = rabbitvcs.ui.action.GitAction(
             self.git,
@@ -234,37 +238,37 @@
         self.action.set_pbar_ticks(ticks)
         self.action.append(self.action.set_header, _("Create Patch"))
         self.action.append(self.action.set_status, _("Creating Patch File..."))
-        
+
         def create_patch_action(patch_path, patch_items, base_dir):
             fileObj = open(patch_path,"w")
-            
+
             # PySVN takes a path to create its own temp files...
             temp_dir = tempfile.mkdtemp(prefix=rabbitvcs.TEMP_DIR_PREFIX)
-            
+
             os.chdir(base_dir)
-           
+
             # Add to the Patch file only the selected items
             for item in patch_items:
-                rel_path = rabbitvcs.util.helper.get_relative_path(base_dir, item)
+                rel_path = helper.get_relative_path(base_dir, item)
                 diff_text = self.git.diff(
-                    rel_path, 
-                    self.git.revision("HEAD"), 
-                    rel_path, 
+                    rel_path,
+                    self.git.revision("HEAD"),
+                    rel_path,
                     self.git.revision("WORKING")
                 )
                 fileObj.write(diff_text)
-    
-            fileObj.close()            
-        
+
+            fileObj.close()
+
             # Note: if we don't want to ignore errors here, we could define a
             # function that logs failures.
             shutil.rmtree(temp_dir, ignore_errors = True)
-        
+
         self.action.append(create_patch_action, path, items, self.common)
-        
+
         self.action.append(self.action.set_status, _("Patch File Created"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 classes_map = {
     rabbitvcs.vcs.VCS_SVN: SVNCreatePatch,
@@ -275,13 +279,14 @@
     guess = rabbitvcs.vcs.guess(paths[0])
     return classes_map[guess["vcs"]](paths, base_dir)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT
     (options, paths) = main(
         [BASEDIR_OPT],
         usage="Usage: rabbitvcs createpatch [path1] [path2] ..."
     )
-        
+
     window = createpatch_factory(paths, options.base_dir)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/delete.py rabbitvcs/rabbitvcs/ui/delete.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/delete.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/delete.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,31 +1,35 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os.path
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+from gi import require_version
+require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject
+sa.restore()
 
 from rabbitvcs.ui import InterfaceNonView
 from rabbitvcs.ui.action import SVNAction
@@ -40,7 +44,7 @@
 class Delete(InterfaceNonView):
     """
     This class provides a handler to Delete functionality.
-    
+
     """
 
     def __init__(self, paths):
@@ -49,7 +53,7 @@
         self.vcs = rabbitvcs.vcs.VCS()
 
     def start(self):
-    
+
         # From the given paths, determine which are versioned and which are not
         versioned = []
         unversioned = []
@@ -58,7 +62,7 @@
                 versioned.append(path)
             elif os.path.exists(path):
                 unversioned.append(path)
-        
+
         # If there are unversioned files, confirm that the user wants to
         # delete those.  Default to true.
         result = True
@@ -71,22 +75,22 @@
 
         # If the user wants to continue (or there are no unversioned files)
         # remove or delete the given files
-        if result == gtk.RESPONSE_OK or result == True:
+        if result == Gtk.ResponseType.OK or result == True:
             if versioned:
                 try:
                     self.vcs_remove(versioned, force=True)
                 except Exception as e:
                     log.exception()
                     return
-            
+
             if unversioned:
                 for path in unversioned:
-                    rabbitvcs.util.helper.delete_item(path)
+                    helper.delete_item(path)
 
 class SVNDelete(Delete):
     def __init__(self, paths):
         Delete.__init__(self, paths)
-    
+
     def vcs_remove(self, paths, **kwargs):
         if rabbitvcs.vcs.guess(paths[0])["vcs"] == rabbitvcs.vcs.VCS_SVN:
             self.vcs.svn().remove(paths, **kwargs)
@@ -94,7 +98,7 @@
 class GitDelete(Delete):
     def __init__(self, paths):
         Delete.__init__(self, paths)
-    
+
     def vcs_remove(self, paths, **kwargs):
         if rabbitvcs.vcs.guess(paths[0])["vcs"] == rabbitvcs.vcs.VCS_GIT:
             self.vcs.git(paths[0]).remove(paths)
@@ -108,6 +112,7 @@
     guess = rabbitvcs.vcs.guess(paths[0])
     return classes_map[guess["vcs"]](paths)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, paths) = main(usage="Usage: rabbitvcs delete [path1] [path2] ...")
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/dialog.py rabbitvcs/rabbitvcs/ui/dialog.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/dialog.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/dialog.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,38 +1,37 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 from gettext import gettext as _
 import os.path
-
-import pygtk
-import gobject
-import gtk
-import pango
+import gi
+gi.require_version("Gtk", "3.0")
+from gi.repository import Gtk, GObject, Gdk, Pango
 
 from rabbitvcs.ui import InterfaceView
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.wraplabel
 import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 
 ERROR_NOTICE = _("""\
 An error has occurred in the RabbitVCS Nautilus extension. Please contact the \
@@ -49,7 +48,7 @@
 
         self.message_table = rabbitvcs.ui.widget.Table(
             self.get_widget("prevmes_table"),
-            [gobject.TYPE_STRING, gobject.TYPE_STRING], 
+            [GObject.TYPE_STRING, GObject.TYPE_STRING],
             [_("Date"), _("Message")],
             filters=[{
                 "callback": rabbitvcs.ui.widget.long_text_filter,
@@ -66,71 +65,72 @@
         self.entries = rabbitvcs.util.helper.get_previous_messages()
         if self.entries is None:
             return None
-        
+
         for entry in self.entries:
             self.message_table.append([entry[0],entry[1]])
-        
+
         if len(self.entries) > 0:
-            self.message.set_text(self.entries[0][1])
-        
+            self.message.set_text(S(self.entries[0][1]).display())
+
     def run(self):
-    
+
         if self.entries is None:
             return None
-    
+
         returner = None
         self.dialog = self.get_widget("PreviousMessages")
         result = self.dialog.run()
-        if result == gtk.RESPONSE_OK:
+        if result == Gtk.ResponseType.OK:
             returner = self.message.get_text()
-        
+
         self.dialog.destroy()
 
         return returner
-        
+
     def on_prevmes_table_row_activated(self, treeview, data, col):
         self.update_message_table()
-        self.dialog.response(gtk.RESPONSE_OK)
-    
+        self.dialog.response(Gtk.ResponseType.OK)
+
     def on_prevmes_table_cursor_changed(self, treeview):
         self.update_message_table()
 
     def update_message_table(self):
         selection = self.message_table.get_selected_row_items(1)
-        
+
         if selection:
             selected_message = selection[-1]
-            self.message.set_text(selected_message)
-        
+            self.message.set_text(S(selected_message).display())
+
 class FolderChooser:
     def __init__(self):
-        self.dialog = gtk.FileChooserDialog(_("Select a Folder"), 
-            None, 
-            gtk.FILE_CHOOSER_ACTION_SELECT_FOLDER, 
-            (gtk.STOCK_CANCEL,gtk.RESPONSE_CANCEL,
-                gtk.STOCK_OPEN,gtk.RESPONSE_OK))
-        self.dialog.set_default_response(gtk.RESPONSE_OK)
+        self.dialog = Gtk.FileChooserDialog(
+            title = _("Select a Folder"),
+            parent = None,
+            action = Gtk.FileChooserAction.SELECT_FOLDER)
+        self.dialog.add_button(_("_Cancel"), Gtk.ResponseType.CANCEL)
+        self.dialog.add_button(_("_Select"), Gtk.ResponseType.OK)
+        self.dialog.set_default_response(Gtk.ResponseType.OK)
 
     def run(self):
         returner = None
         result = self.dialog.run()
-        if result == gtk.RESPONSE_OK:
+        if result == Gtk.ResponseType.OK:
             # returner = self.dialog.get_uri()
             returner = self.dialog.get_file().get_path()
         self.dialog.destroy()
         return returner
-        
+
 class Certificate(InterfaceView):
     """
     Provides a dialog to accept/accept_once/deny an ssl certificate
-    
+
     """
-    
-    def __init__(self, realm="", host="", 
+
+    def __init__(self, realm="", host="",
             issuer="", valid_from="", valid_until="", fingerprint=""):
-            
+
         InterfaceView.__init__(self, "dialogs/certificate", "Certificate")
-        
+
         self.get_widget("cert_realm").set_label(realm)
         self.get_widget("cert_host").set_label(host)
         self.get_widget("cert_issuer").set_label(issuer)
@@ -139,40 +139,40 @@
             "%s %s %s" % (valid_from, to_str, valid_until)
         )
         self.get_widget("cert_fingerprint").set_label(fingerprint)
-        
+
     def run(self):
         """
         Returns three possible values:
-        
+
             - 0   Deny
             - 1   Accept Once
             - 2   Accept Forever
-            
+
         """
-        
+
         self.dialog = self.get_widget("Certificate")
         result = self.dialog.run()
         self.dialog.destroy()
         return result
-        
+
 class Authentication(InterfaceView):
     def __init__(self, realm="", may_save=True):
         InterfaceView.__init__(self, "dialogs/authentication", "Authentication")
-        
+
         self.get_widget("auth_realm").set_label(realm)
         self.get_widget("auth_save").set_sensitive(may_save)
-        
+
     def run(self):
         returner = None
         self.dialog = self.get_widget("Authentication")
         result = self.dialog.run()
-        
+
         login = self.get_widget("auth_login").get_text()
         password = self.get_widget("auth_password").get_text()
         save = self.get_widget("auth_save").get_active()
         self.dialog.destroy()
-        
-        if result == gtk.RESPONSE_OK:
+
+        if result == Gtk.ResponseType.OK:
             return (True, login, password, save)
         else:
             return (False, "", "", False)
@@ -180,19 +180,19 @@
 class CertAuthentication(InterfaceView):
     def __init__(self, realm="", may_save=True):
         InterfaceView.__init__(self, "dialogs/cert_authentication", "CertAuthentication")
-        
+
         self.get_widget("certauth_realm").set_label(realm)
         self.get_widget("certauth_save").set_sensitive(may_save)
-        
+
     def run(self):
         self.dialog = self.get_widget("CertAuthentication")
         result = self.dialog.run()
-        
+
         password = self.get_widget("certauth_password").get_text()
         save = self.get_widget("certauth_save").get_active()
         self.dialog.destroy()
-        
-        if result == gtk.RESPONSE_OK:
+
+        if result == Gtk.ResponseType.OK:
             return (True, password, save)
         else:
             return (False, "", False)
@@ -200,25 +200,25 @@
 class SSLClientCertPrompt(InterfaceView):
     def __init__(self, realm="", may_save=True):
         InterfaceView.__init__(self, "dialogs/ssl_client_cert_prompt", "SSLClientCertPrompt")
-        
+
         self.get_widget("sslclientcert_realm").set_label(realm)
         self.get_widget("sslclientcert_save").set_sensitive(may_save)
-    
+
     def on_sslclientcert_browse_clicked(self, widget, data=None):
         filechooser = FileChooser()
         cert = filechooser.run()
         if cert is not None:
-            self.get_widget("sslclientcert_path").set_text(cert)
- 
+            self.get_widget("sslclientcert_path").set_text(S(cert).display())
+
     def run(self):
         self.dialog = self.get_widget("SSLClientCertPrompt")
         result = self.dialog.run()
-        
+
         cert = self.get_widget("sslclientcert_path").get_text()
         save = self.get_widget("sslclientcert_save").get_active()
         self.dialog.destroy()
-        
-        if result == gtk.RESPONSE_OK:
+
+        if result == Gtk.ResponseType.OK:
             return (True, cert, save)
         else:
             return (False, "", False)
@@ -226,10 +226,10 @@
 class Property(InterfaceView):
     def __init__(self, name="", value="", recurse=True):
         InterfaceView.__init__(self, "dialogs/property", "Property")
-        
+
         self.save_name = name
         self.save_value = value
-        
+
         self.name = rabbitvcs.ui.widget.ComboBox(
                 self.get_widget("property_name"),
                 [   # default svn properties
@@ -249,25 +249,25 @@
                     ]
                 )
         self.name.set_child_text(name)
-        
+
         self.value = rabbitvcs.ui.widget.TextView(
-            self.get_widget("property_value"), 
+            self.get_widget("property_value"),
             value
         )
-        
+
         self.recurse = self.get_widget("property_recurse")
         self.recurse.set_active(recurse)
-        
+
     def run(self):
         self.dialog = self.get_widget("Property")
         result = self.dialog.run()
-        
-        if result == gtk.RESPONSE_OK:
+
+        if result == Gtk.ResponseType.OK:
             self.save()
-        
+
         self.dialog.destroy()
         return (self.save_name, self.save_value, self.recurse.get_active())
-    
+
     def save(self):
         self.save_name = self.name.get_active_text()
         self.save_value = self.value.get_text()
@@ -275,59 +275,61 @@
 
 class FileChooser:
     def __init__(self, title=_("Select a File"), folder=None):
-        self.dialog = gtk.FileChooserDialog(title, 
-            None, 
-            gtk.FILE_CHOOSER_ACTION_OPEN, 
-            (gtk.STOCK_CANCEL,gtk.RESPONSE_CANCEL,
-                gtk.STOCK_OPEN,gtk.RESPONSE_OK))
+        self.dialog = Gtk.FileChooserDialog(
+            title = title,
+            parent = None,
+            action = Gtk.FileChooserAction.OPEN)
+        self.dialog.add_button(_("_Cancel"), Gtk.ResponseType.CANCEL)
+        self.dialog.add_button(_("_Open"),   Gtk.ResponseType.OK)
         if folder is not None:
             self.dialog.set_current_folder(folder)
-        self.dialog.set_default_response(gtk.RESPONSE_OK)
+        self.dialog.set_default_response(Gtk.ResponseType.OK)
 
     def run(self):
         returner = None
         result = self.dialog.run()
-        if result == gtk.RESPONSE_OK:
+        if result == Gtk.ResponseType.OK:
             returner = self.dialog.get_file().get_path()
         self.dialog.destroy()
         return returner
 
 class FileSaveAs:
     def __init__(self, title=_("Save As..."), folder=None):
-        self.dialog = gtk.FileChooserDialog(title, 
-            None, 
-            gtk.FILE_CHOOSER_ACTION_SAVE, 
-            (gtk.STOCK_CANCEL,gtk.RESPONSE_CANCEL,
-                gtk.STOCK_SAVE,gtk.RESPONSE_OK))
+        self.dialog = Gtk.FileChooserDialog(
+            title = title,
+            parent = None,
+            action = Gtk.FileChooserAction.SAVE)
+        self.dialog.add_button(_("_Cancel"), Gtk.ResponseType.CANCEL)
+        self.dialog.add_button(_("_Save"),   Gtk.ResponseType.OK)
         if folder is not None:
             self.dialog.set_current_folder(folder)
-        self.dialog.set_default_response(gtk.RESPONSE_OK)
+        self.dialog.set_default_response(Gtk.ResponseType.OK)
 
     def run(self):
         returner = None
         result = self.dialog.run()
-        if result == gtk.RESPONSE_OK:
+        if result == Gtk.ResponseType.OK:
             returner = self.dialog.get_filename()
         self.dialog.destroy()
         return returner
-        
+
 class Confirmation(InterfaceView):
     def __init__(self, message=_("Are you sure you want to continue?")):
         InterfaceView.__init__(self, "dialogs/confirmation", "Confirmation")
-        self.get_widget("confirm_message").set_text(message)
-        
+        self.get_widget("confirm_message").set_text(S(message).display())
+
     def run(self):
         dialog = self.get_widget("Confirmation")
         result = dialog.run()
-        
+
         dialog.destroy()
-        
+
         return result
-        
+
 class MessageBox(InterfaceView):
     def __init__(self, message):
         InterfaceView.__init__(self, "dialogs/message_box", "MessageBox")
-        self.get_widget("messagebox_message").set_text(message)
+        self.get_widget("messagebox_message").set_text(S(message).display())
 
         dialog = self.get_widget("MessageBox")
         dialog.run()
@@ -336,21 +338,21 @@
 class DeleteConfirmation(InterfaceView):
     def __init__(self, path=None):
         InterfaceView.__init__(self, "dialogs/delete_confirmation", "DeleteConfirmation")
-        
+
         if path:
             path = "\"%s\"" % os.path.basename(path)
         else:
             path = _("the selected item(s)")
-            
+
         msg = self.get_widget("message").get_label().replace("%item%", path)
         self.get_widget("message").set_label(msg)
-        
+
     def run(self):
         dialog = self.get_widget("DeleteConfirmation")
         result = dialog.run()
-        
+
         dialog.destroy()
-        
+
         return result
 
 class TextChange(InterfaceView):
@@ -358,18 +360,18 @@
         InterfaceView.__init__(self, "dialogs/text_change", "TextChange")
         if title:
             self.get_widget("TextChange").set_title(title)
-        
+
         self.textview = rabbitvcs.ui.widget.TextView(
-            self.get_widget("textchange_message"), 
+            self.get_widget("textchange_message"),
             message
         )
-        
+
     def run(self):
         dialog = self.get_widget("TextChange")
         result = dialog.run()
-        
+
         dialog.destroy()
-        
+
         return (result, self.textview.get_text())
 
 class OneLineTextChange(InterfaceView):
@@ -377,31 +379,31 @@
         InterfaceView.__init__(self, "dialogs/one_line_text_change", "OneLineTextChange")
         if title:
             self.get_widget("OneLineTextChange").set_title(title)
-        
+
         self.new_text = self.get_widget("new_text")
         self.label = self.get_widget("label")
-        
+
         if label:
-            self.label.set_text(label)
-        
+            self.label.set_text(S(label).display())
+
         if current_text:
-            self.new_text.set_text(current_text)
-    
+            self.new_text.set_text(S(current_text).display())
+
         self.dialog = self.get_widget("OneLineTextChange")
-    
+
     def on_key_release_event(self, widget, data):
-        # The gtk.Dialog.response() method emits the "response" signal,
-        # which tells gtk.Dialog.run() asyncronously to stop.  This allows the
+        # The Gtk.Dialog.response() method emits the "response" signal,
+        # which tells Gtk.Dialog.run() asyncronously to stop.  This allows the
         # user to press the "Return" button when done writing in the new text
-        if gtk.gdk.keyval_name(data.keyval) == "Return":
-            self.dialog.response(gtk.RESPONSE_OK)
-    
+        if Gdk.keyval_name(data.keyval) == "Return":
+            self.dialog.response(Gtk.ResponseType.OK)
+
     def run(self):
         result = self.dialog.run()
         new_text = self.new_text.get_text()
 
         self.dialog.destroy()
-        
+
         return (result, new_text)
 
 class NewFolder(InterfaceView):
@@ -410,9 +412,10 @@
 
         self.folder_name = self.get_widget("folder_name")
         self.textview = rabbitvcs.ui.widget.TextView(
-            self.get_widget("log_message"), 
+            self.get_widget("log_message"),
             _("Added a folder to the repository")
         )
+        self.on_folder_name_changed(self.folder_name)
 
     def on_folder_name_changed(self, widget):
         complete = (widget.get_text() != "")
@@ -420,37 +423,38 @@
 
     def run(self):
         dialog = self.get_widget("CreateFolder")
-        dialog.set_default_response(gtk.RESPONSE_OK)
+        dialog.set_default_response(Gtk.ResponseType.OK)
         result = dialog.run()
 
         fields_text = (self.folder_name.get_text(), self.textview.get_text())
 
         dialog.destroy()
-        
-        if result == gtk.RESPONSE_OK:
+
+        if result == Gtk.ResponseType.OK:
             return fields_text
         else:
             return None
-        
+
 class ErrorNotification(InterfaceView):
-    
+
     def __init__(self, text):
         InterfaceView.__init__(self, "dialogs/error_notification", "ErrorNotification")
-        
+
         notice = rabbitvcs.ui.wraplabel.WrapLabel(ERROR_NOTICE)
         notice.set_use_markup(True)
-        
-        self.get_widget("notice_box").pack_start(notice)        
-        self.get_widget("notice_box").show_all()
+
+        notice_box = rabbitvcs.ui.widget.Box(self.get_widget("notice_box"))
+        notice_box.pack_start(notice, True, True, 0)
+        notice_box.show_all()
 
         self.textview = rabbitvcs.ui.widget.TextView(
-            self.get_widget("error_text"), 
+            self.get_widget("error_text"),
             text,
             spellcheck=False
         )
-        
-        self.textview.view.modify_font(pango.FontDescription("monospace"))
-        
+
+        self.textview.view.modify_font(Pango.FontDescription("monospace"))
+
         dialog = self.get_widget("ErrorNotification")
         dialog.run()
         dialog.destroy()
@@ -460,25 +464,25 @@
         InterfaceView.__init__(self, "dialogs/name_email_prompt", "NameEmailPrompt")
 
         self.dialog = self.get_widget("NameEmailPrompt")
-    
+
     def on_key_release_event(self, widget, data):
-        # The gtk.Dialog.response() method emits the "response" signal,
-        # which tells gtk.Dialog.run() asyncronously to stop.  This allows the
+        # The Gtk.Dialog.response() method emits the "response" signal,
+        # which tells Gtk.Dialog.run() asyncronously to stop.  This allows the
         # user to press the "Return" button when done writing in the new text
-        if gtk.gdk.keyval_name(data.keyval) == "Return":
-            self.dialog.response(gtk.RESPONSE_OK)
-    
+        if Gdk.keyval_name(data.keyval) == "Return":
+            self.dialog.response(Gtk.ResponseType.OK)
+
     def run(self):
         result = self.dialog.run()
         name = self.get_widget("name").get_text()
         email = self.get_widget("email").get_text()
         self.dialog.destroy()
-        
-        if result == gtk.RESPONSE_OK:
+
+        if result == Gtk.ResponseType.OK:
             return (name, email)
         else:
             return (None, None)
-            
+
 class MarkResolvedPrompt(InterfaceView):
     def __init__(self):
         InterfaceView.__init__(self, "dialogs/mark_resolved_prompt", "MarkResolvedPrompt")
@@ -491,29 +495,29 @@
 
 class ConflictDecision(InterfaceView):
     """
-    Provides a dialog to make conflict decisions with.  User can accept mine, 
+    Provides a dialog to make conflict decisions with.  User can accept mine,
     accept theirs, or edit conflicts.
-    
+
     """
-    
+
     def __init__(self, filename=""):
-            
+
         InterfaceView.__init__(self, "dialogs/conflict_decision", "ConflictDecision")
-        self.get_widget("filename").set_text(filename)
-        
+        self.get_widget("filename").set_text(S(filename).display())
+
     def run(self):
         """
-        
+
         The first has three possible values about how to resolve the conflict.
-        
+
             - -1  Cancel
             - 0   Accept Mine
             - 1   Accept Theirs
             - 2   Merge Manually
 
-            
+
         """
-        
+
         self.dialog = self.get_widget("ConflictDecision")
         result = self.dialog.run()
         self.dialog.destroy()
@@ -522,7 +526,7 @@
 class Loading(InterfaceView):
     def __init__(self):
         InterfaceView.__init__(self, "dialogs/loading", "Loading")
-    
+
         self.get_widget("loading_cancel").set_sensitive(False)
 
         self.pbar = rabbitvcs.ui.widget.ProgressBar(
@@ -539,6 +543,6 @@
     def run(self):
         self.dialog = self.get_widget("Loading")
         self.dialog.run()
-    
+
     def destroy(self):
         self.dialog.destroy()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/diff.py rabbitvcs/rabbitvcs/ui/diff.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/diff.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/diff.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,40 +1,43 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import six.moves._thread
-
-import pygtk
-import gobject
-import gtk
 import os
 from shutil import rmtree
 import tempfile
 
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, Gdk, GLib
+sa.restore()
+
 from rabbitvcs import TEMP_DIR_PREFIX
 from rabbitvcs.ui import InterfaceNonView
 import rabbitvcs.vcs
 from rabbitvcs.ui.action import SVNAction, GitAction
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 
 log = Log("rabbitvcs.ui.diff")
@@ -42,13 +45,11 @@
 from rabbitvcs import gettext
 _ = gettext.gettext
 
-gobject.threads_init()
-
 class Diff(InterfaceNonView):
-    def __init__(self, path1, revision1=None, path2=None, revision2=None, 
+    def __init__(self, path1, revision1=None, path2=None, revision2=None,
             sidebyside=False):
         InterfaceNonView.__init__(self)
-        
+
         self.vcs = rabbitvcs.vcs.VCS()
 
         self.path1 = path1
@@ -59,20 +60,20 @@
 
         if path2 is None:
             self.path2 = path1
-        
+
         self.dialog = None
-        
+
     def launch(self):
-        
-        if self.sidebyside:
-            self.launch_sidebyside_diff()
-        else:
-            self.launch_unified_diff()
-        
-        self.stop_loading()
-        
+        try:
+            if self.sidebyside:
+                self.launch_sidebyside_diff()
+            else:
+                self.launch_unified_diff()
+        finally:
+            self.stop_loading()
+
     def _build_export_path(self, index, revision, path):
-        dest = rabbitvcs.util.helper.get_tmp_path("rabbitvcs-%s-%s-%s" % (str(index), str(revision)[:5], os.path.basename(path)))
+        dest = helper.get_tmp_path("rabbitvcs-%s-%s-%s" % (str(index), str(revision)[:5], os.path.basename(path)))
         if os.path.exists(dest):
             if os.path.isdir(dest):
                 rmtree(dest, ignore_errors=True)
@@ -84,15 +85,15 @@
     def start_loading(self):
         self.dialog = rabbitvcs.ui.dialog.Loading()
         self.dialog.run()
-    
+
     def stop_loading(self):
-        
+
         # Sometimes the launching will be too fast, and the dialog we're trusted with
         # cleaning up, may not even have been created!
         while self.dialog == None:
             # Wait for dialog's creation.
             pass
-        
+
         self.dialog.close()
         self.dialog = None
 
@@ -106,21 +107,17 @@
         self.revision1 = self.get_revision_object(revision1, "base")
         self.revision2 = self.get_revision_object(revision2, "working")
 
-        try:
-            six.moves._thread.start_new_thread(self.launch, ())
-        except Exception as e:
-            log.exception(e)
-        
+        GLib.idle_add(self.launch)
         self.start_loading()
 
     def get_revision_object(self, value, default):
         # If value is a rabbitvcs Revision object, return it
         if hasattr(value, "is_revision_object"):
             return value
-        
+
         # If value is None, use the default
         if value is None:
-            return self.svn.revision(default)          
+            return self.svn.revision(default)
 
         # If the value is an integer number, return a numerical revision object
         # otherwise, a string revision value has been passed, use that as "kind"
@@ -134,15 +131,15 @@
     def launch_unified_diff(self):
         """
         Launch diff as a unified diff in a text editor or .diff viewer
-        
+
         """
-        
+
         action = SVNAction(
             self.svn,
             notification=False,
             run_in_thread=False
         )
-        
+
         diff_text = action.run_single(
             self.svn.diff,
             self.temp_dir,
@@ -155,14 +152,14 @@
             diff_text = ""
 
         fh = tempfile.mkstemp("-rabbitvcs-" + str(self.revision1) + "-" + str(self.revision2) + ".diff")
-        os.write(fh[0], diff_text)
+        os.write(fh[0], S(diff_text).bytes())
         os.close(fh[0])
-        rabbitvcs.util.helper.open_item(fh[1])
-        
+        helper.open_item(fh[1])
+
     def launch_sidebyside_diff(self):
         """
         Launch diff as a side-by-side comparison using our comparison tool
-        
+
         """
 
         action = SVNAction(
@@ -176,26 +173,26 @@
         else:
             dest1 = self._build_export_path(1, self.revision1, self.path1)
             action.run_single(
-                self.svn.export, 
-                self.path1, 
-                dest1, 
+                self.svn.export,
+                self.path1,
+                dest1,
                 self.revision1
             )
             action.stop_loader()
-    
+
         if self.revision2.kind == "working":
             dest2 = self.path2
         else:
             dest2 = self._build_export_path(2, self.revision2, self.path2)
             action.run_single(
-                self.svn.export, 
-                self.path2, 
-                dest2, 
+                self.svn.export,
+                self.path2,
+                dest2,
                 self.revision2
             )
             action.stop_loader()
-    
-        rabbitvcs.util.helper.launch_diff_tool(dest1, dest2)
+
+        helper.launch_diff_tool(dest1, dest2)
 
 class GitDiff(Diff):
     def __init__(self, path1, revision1=None, path2=None, revision2=None,
@@ -207,17 +204,13 @@
         self.revision1 = self.get_revision_object(revision1, "HEAD")
         self.revision2 = self.get_revision_object(revision2, "WORKING")
 
-        try:
-            six.moves._thread.start_new_thread(self.launch, ())
-        except Exception as e:
-            log.exception(e)
-        
+        GLib.idle_add(self.launch)
         self.start_loading()
 
     def get_revision_object(self, value, default):
         # If value is a rabbitvcs Revision object, return it
         if hasattr(value, "is_revision_object"):
-            return value        
+            return value
 
         value_to_pass = value
         if not value_to_pass:
@@ -230,14 +223,14 @@
         dirname = os.path.dirname(path)
         if not os.path.isdir(dirname):
             os.makedirs(dirname)
-        
+
         if not data:
             data = ""
-        
+
         file = open(path, "wb")
         try:
             try:
-                file.write(data)
+                file.write(S(data).bytes())
             except Exception as e:
                 log.exception(e)
         finally:
@@ -246,9 +239,9 @@
     def launch_unified_diff(self):
         """
         Launch diff as a unified diff in a text editor or .diff viewer
-        
+
         """
-        
+
         action = GitAction(
             self.git,
             notification=False,
@@ -266,26 +259,26 @@
             diff_text = ""
 
         fh = tempfile.mkstemp("-rabbitvcs-" + str(self.revision1)[:5] + "-" + str(self.revision2)[:5] + ".diff")
-        os.write(fh[0], diff_text)
+        os.write(fh[0], S(diff_text).bytes())
         os.close(fh[0])
-        rabbitvcs.util.helper.open_item(fh[1])
+        helper.open_item(fh[1])
 
     def launch_sidebyside_diff(self):
         """
         Launch diff as a side-by-side comparison using our comparison tool
-        
+
         """
-        
+
         action = GitAction(
             self.git,
             notification=False,
             run_in_thread=False
         )
-        
+
         if self.revision1.kind != "WORKING":
             dest1 = self._build_export_path(1, self.revision1, self.path1)
             self.save_diff_to_file(dest1, action.run_single(
-                self.git.show, 
+                self.git.show,
                 self.path1,
                 self.revision1
             ))
@@ -295,14 +288,14 @@
         if self.revision2.kind != "WORKING":
             dest2 = self._build_export_path(2, self.revision2, self.path2)
             self.save_diff_to_file(dest2, action.run_single(
-                self.git.show, 
+                self.git.show,
                 self.path2,
                 self.revision2
             ))
         else:
             dest2 = self.path2
 
-        rabbitvcs.util.helper.launch_diff_tool(dest1, dest2)
+        helper.launch_diff_tool(dest1, dest2)
 
 classes_map = {
     rabbitvcs.vcs.VCS_SVN: SVNDiff,
@@ -316,20 +309,21 @@
 
     return classes_map[vcs](path1, revision_obj1, path2, revision_obj2, sidebyside)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, VCS_OPT
     (options, args) = main([
         (["-s", "--sidebyside"], {
-            "help":     _("View diff as side-by-side comparison"), 
-            "action":   "store_true", 
+            "help":     _("View diff as side-by-side comparison"),
+            "action":   "store_true",
             "default":  False
         }), VCS_OPT],
         usage="Usage: rabbitvcs diff [url1@rev1] [url2@rev2]"
     )
-    
-    pathrev1 = rabbitvcs.util.helper.parse_path_revision_string(args.pop(0))
+
+    pathrev1 = helper.parse_path_revision_string(args.pop(0))
     pathrev2 = (None, None)
     if len(args) > 0:
-        pathrev2 = rabbitvcs.util.helper.parse_path_revision_string(args.pop(0))
+        pathrev2 = helper.parse_path_revision_string(args.pop(0))
 
     diff_factory(options.vcs, pathrev1[0], pathrev1[1], pathrev2[0], pathrev2[1], sidebyside=options.sidebyside)
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/editconflicts.py rabbitvcs/rabbitvcs/ui/editconflicts.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/editconflicts.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/editconflicts.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -26,16 +26,19 @@
 import six.moves._thread
 import shutil
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceNonView
 from rabbitvcs.ui.action import SVNAction, GitAction
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
 from rabbitvcs.util.log import Log
 
 log = Log("rabbitvcs.ui.editconflicts")
@@ -51,43 +54,43 @@
         self.path = path
         self.vcs = rabbitvcs.vcs.VCS()
         self.svn = self.vcs.svn()
-        
+
         status = self.svn.status(self.path)
         if status.simple_content_status() != rabbitvcs.vcs.status.status_complicated:
             log.debug("The specified file is not conflicted.  There is nothing to do.")
             self.close()
             return
-        
+
         filename = os.path.basename(path)
-        
+
         dialog = rabbitvcs.ui.dialog.ConflictDecision(filename)
         action = dialog.run()
         dialog.destroy()
-        
+
         if action == -1:
             #Cancel
             pass
-            
+
         elif action == 0:
             #Accept Mine
             working = self.get_working_path(path)
             shutil.copyfile(working, path)
             self.svn.resolve(path)
-                
+
         elif action == 1:
             #Accept Theirs
             ancestor, theirs = self.get_revisioned_paths(path)
             shutil.copyfile(theirs, path)
             self.svn.resolve(path)
-                
+
         elif action == 2:
             #Merge Manually
-            
+
             working = self.get_working_path(path)
             ancestor, theirs = self.get_revisioned_paths(path)
-            
+
             log.debug("launching merge tool with base: %s, mine: %s, theirs: %s, merged: %s"%(ancestor, working, theirs, path))
-            rabbitvcs.util.helper.launch_merge_tool(base=ancestor, mine=working, theirs=theirs, merged=path)
+            helper.launch_merge_tool(base=ancestor, mine=working, theirs=theirs, merged=path)
 
             dialog = rabbitvcs.ui.dialog.MarkResolvedPrompt()
             mark_resolved = dialog.run()
@@ -103,7 +106,7 @@
             "%s.mine" % path,
             "%s.working" % path
         ]
-        
+
         for working in paths:
             if os.path.exists(working):
                 return working
@@ -147,8 +150,8 @@
         self.vcs = rabbitvcs.vcs.VCS()
         self.git = self.vcs.git(path)
 
-        rabbitvcs.util.helper.launch_merge_tool(self.path)
-        
+        helper.launch_merge_tool(self.path)
+
         self.close()
 
 classes_map = {
@@ -159,7 +162,8 @@
 def editconflicts_factory(path):
     guess = rabbitvcs.vcs.guess(path)
     return classes_map[guess["vcs"]](path)
-        
+
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT
     (options, paths) = main(
@@ -169,4 +173,4 @@
 
     window = editconflicts_factory(paths[0])
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/export.py rabbitvcs/rabbitvcs/ui/export.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/export.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/export.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,38 +1,43 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os.path
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.checkout import SVNCheckout
 from rabbitvcs.ui.clone import GitClone
 from rabbitvcs.ui.dialog import MessageBox
 from rabbitvcs.ui.action import SVNAction, GitAction
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
+import rabbitvcs.vcs
 
 from rabbitvcs import gettext
 _ = gettext.gettext
@@ -40,11 +45,11 @@
 class SVNExport(SVNCheckout):
     def __init__(self, path=None, revision=None):
         SVNCheckout.__init__(self, path, url=None, revision=revision)
-        
+
         self.svn = self.vcs.svn()
-        
+
         self.get_widget("Checkout").set_title(_("Export - %s") % path)
-        
+
         # Determine behavior based on the given path
         if self.svn.is_in_a_or_a_working_copy(path):
             # If path is from a working copy, export FROM path and set revision
@@ -61,7 +66,7 @@
             # Path is not a working copy so the user probably wants to export
             # TO this path
             self.repositories.set_child_text("")
-            self.get_widget("destination").set_text(path)
+            self.get_widget("destination").set_text(S(path).display())
 
     def on_ok_clicked(self, widget):
         url = self.repositories.get_active_text()
@@ -72,16 +77,16 @@
         if not url or not path:
             MessageBox(_("The repository URL and destination path are both required fields."))
             return
-        
+
         if url.startswith("file://"):
             url = self._parse_path(url)
-        
+
         # Cannot do:
         # url = os.path.normpath(url)
         # ...in general, since it might be eg. an http URL. Doesn't seem to
         # affect pySvn though.
-        
-        path = os.path.normpath(path)        
+
+        path = os.path.normpath(path)
         revision = self.revision_selector.get_revision_object()
 
         self.hide()
@@ -89,10 +94,10 @@
             self.svn,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Export"))
         self.action.append(self.action.set_status, _("Running Export Command..."))
-        self.action.append(rabbitvcs.util.helper.save_repository_path, url)
+        self.action.append(helper.save_repository_path, url)
         self.action.append(
             self.svn.export,
             url,
@@ -104,7 +109,7 @@
         )
         self.action.append(self.action.set_status, _("Completed Export"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 class GitExport(GitClone):
     def __init__(self, path=None, revision=None):
@@ -141,16 +146,16 @@
         if not url or not path:
             MessageBox(_("The repository URL and destination path are both required fields."))
             return
-        
+
         if url.startswith("file://"):
             url = self._parse_path(url)
-        
+
         # Cannot do:
         # url = os.path.normpath(url)
         # ...in general, since it might be eg. an http URL. Doesn't seem to
         # affect pySvn though.
-        
-        path = os.path.normpath(path)        
+
+        path = os.path.normpath(path)
         revision = self.revision_selector.get_revision_object()
 
         self.hide()
@@ -158,10 +163,10 @@
             self.git,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Export"))
         self.action.append(self.action.set_status, _("Running Export Command..."))
-        self.action.append(rabbitvcs.util.helper.save_repository_path, url)
+        self.action.append(helper.save_repository_path, url)
         self.action.append(
             self.git.export,
             url,
@@ -170,7 +175,7 @@
         )
         self.action.append(self.action.set_status, _("Completed Export"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def on_repositories_changed(self, widget, data=None):
         # Do not use quoting for this bit
@@ -183,15 +188,15 @@
             append = tmp.pop()
             if append not in ("trunk", "branches", "tags"):
                 break
-                
+
             if append in ("http:", "https:", "file:", "svn:", "svn+ssh:"):
                 append = ""
                 break
-        
+
         self.get_widget("destination").set_text(
-            os.path.join(self.destination, append)
+            S(os.path.join(self.destination, append)).display()
         )
-        
+
         self.check_form()
 
 classes_map = {
@@ -203,19 +208,20 @@
     if not vcs:
         guess = rabbitvcs.vcs.guess(path)
         vcs = guess["vcs"]
-    
+
     if vcs == rabbitvcs.vcs.VCS_DUMMY:
         vcs = rabbitvcs.vcs.VCS_SVN
-        
+
     return classes_map[vcs](path, revision)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, REVISION_OPT, VCS_OPT
     (options, paths) = main(
         [REVISION_OPT, VCS_OPT],
         usage="Usage: rabbitvcs export --vcs=[git|svn] [url_or_path]"
     )
-            
+
     window = export_factory(options.vcs, paths[0], revision=options.revision)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/ignore.py rabbitvcs/rabbitvcs/ui/ignore.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/ignore.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/ignore.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -24,9 +24,13 @@
 from os import getcwd
 import os.path
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceNonView, InterfaceView
 from rabbitvcs.ui.action import SVNAction, GitAction
@@ -39,22 +43,22 @@
 class SVNIgnore(InterfaceNonView):
     """
     This class provides a handler to Ignore functionality.
-    
+
     """
 
     def __init__(self, path, pattern, glob=False):
         """
         @type   path: string
         @param  path: The path to apply the ignore keyword to
-        
+
         @type   pattern: string
         @param  pattern: Ignore items with the given pattern
-        
+
         @type   glob: boolean
         @param  glob: True if the path to ignore is a wildcard "glob"
-        
+
         """
-        
+
         InterfaceNonView.__init__(self)
         self.path = path
         self.pattern = pattern
@@ -65,13 +69,13 @@
         prop = self.svn.PROPERTIES["ignore"]
 
         self.svn.propset(self.path, prop, self.pattern, recurse=self.glob)
-        
+
         raise SystemExit()
 
 class GitIgnore(InterfaceView):
     def __init__(self, path, pattern=""):
         InterfaceView.__init__(self, "ignore", "Ignore")
-        
+
         self.path = path
         self.pattern = pattern
 
@@ -80,7 +84,7 @@
 
         ignore_files = self.git.get_ignore_files(path)
         ignore_file_labels = []
-        
+
         path_dir = os.path.abspath(self.path)
         if os.path.isfile(path_dir):
             path_dir = os.path.dirname(path_dir)
@@ -89,13 +93,13 @@
             label = path
             if ignore_file.startswith(path_dir):
                label = ignore_file[len(path_dir)+1:]
-            
+
             ignore_file_labels.append(label)
-        
+
         text = ""
         if pattern != path:
             text = pattern
-        
+
         self.file_editor = rabbitvcs.ui.widget.MultiFileTextEditor(
             self.get_widget("fileeditor_container"),
             _("Ignore file:"),
@@ -104,11 +108,11 @@
             show_add_line=True,
             line_content=text
         )
-        
+
     def on_ok_clicked(self, widget, data=None):
         self.file_editor.save()
         self.close()
-        
+
 
 
 classes_map = {
@@ -120,10 +124,11 @@
     guess = rabbitvcs.vcs.guess(path)
     return classes_map[guess["vcs"]](path, pattern)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, args) = main(usage="Usage: rabbitvcs ignore <folder> <pattern>")
-    
+
     path = getcwd()
     pattern = ""
     if args:
@@ -136,4 +141,4 @@
 
     window = ignore_factory(path, pattern)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/import.py rabbitvcs/rabbitvcs/ui/import.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/import.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/import.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,35 +1,39 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.action import SVNAction
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 
 from rabbitvcs import gettext
 _ = gettext.gettext
@@ -37,45 +41,45 @@
 class SVNImport(InterfaceView):
     def __init__(self, path):
         InterfaceView.__init__(self, "import", "Import")
-        
+
         self.get_widget("Import").set_title(_("Import - %s") % path)
-        
+
         self.path = path
         self.vcs = rabbitvcs.vcs.VCS()
         self.svn = self.vcs.svn()
-        
+
         if self.svn.is_in_a_or_a_working_copy(path):
-            self.get_widget("repository").set_text(self.svn.get_repo_url(path))
-        
+            self.get_widget("repository").set_text(S(self.svn.get_repo_url(path)).display())
+
         self.repositories = rabbitvcs.ui.widget.ComboBox(
-            self.get_widget("repositories"), 
-            rabbitvcs.util.helper.get_repository_paths()
+            self.get_widget("repositories"),
+            helper.get_repository_paths()
         )
-        
+
         self.message = rabbitvcs.ui.widget.TextView(
             self.get_widget("message")
         )
 
     def on_ok_clicked(self, widget):
-        
+
         url = self.get_widget("repository").get_text()
         if not url:
             rabbitvcs.ui.dialog.MessageBox(_("The repository URL field is required."))
             return
-            
+
         ignore = not self.get_widget("include_ignored").get_active()
-        
+
         self.hide()
 
         self.action = rabbitvcs.ui.action.SVNAction(
             self.svn,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Import"))
         self.action.append(self.action.set_status, _("Running Import Command..."))
         self.action.append(
-            self.svn.import_, 
+            self.svn.import_,
             self.path,
             url,
             self.message.get_text(),
@@ -83,13 +87,13 @@
         )
         self.action.append(self.action.set_status, _("Completed Import"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def on_previous_messages_clicked(self, widget, data=None):
         dialog = rabbitvcs.ui.dialog.PreviousMessages()
         message = dialog.run()
         if message is not None:
-            self.message.set_text(message)
+            self.message.set_text(S(message).display())
 
 
 
@@ -98,13 +102,14 @@
 }
 
 def import_factory(path):
-    vcs = rabbitvcs.vcs.VCS_SVN    
+    vcs = rabbitvcs.vcs.VCS_SVN
     return classes_map[vcs](path)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, paths) = main(usage="Usage: rabbitvcs import [path]")
-            
+
     window = import_factory(paths[0])
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/lock.py rabbitvcs/rabbitvcs/ui/lock.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/lock.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/lock.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,32 +1,36 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import six.moves._thread
-
 import os
-import pygtk
-import gobject
-import gtk
+
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.action import SVNAction
@@ -34,7 +38,7 @@
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.vcs
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 
 log = Log("rabbitvcs.ui.lock")
@@ -42,21 +46,21 @@
 from rabbitvcs import gettext
 _ = gettext.gettext
 
-gobject.threads_init()
+helper.gobject_threads_init()
 
 class SVNLock(InterfaceView, GtkContextMenuCaller):
     """
     Provides an interface to lock any number of files in a working copy.
-    
+
     """
 
     def __init__(self, paths, base_dir):
         """
         @type:  paths: list
         @param: paths: A list of paths to search for versioned files
-        
+
         """
-        
+
         InterfaceView.__init__(self, "lock", "Lock")
 
         self.paths = paths
@@ -66,15 +70,16 @@
 
         self.files_table = rabbitvcs.ui.widget.Table(
             self.get_widget("files_table"),
-            [gobject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_PATH, gobject.TYPE_STRING, 
-                gobject.TYPE_STRING], 
-            [rabbitvcs.ui.widget.TOGGLE_BUTTON, _("Path"), _("Extension"), 
+            [GObject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_HIDDEN_OBJECT,
+                rabbitvcs.ui.widget.TYPE_PATH, GObject.TYPE_STRING,
+                GObject.TYPE_STRING],
+            [rabbitvcs.ui.widget.TOGGLE_BUTTON, _("Path"), _("Extension"),
                 _("Locked")],
             filters=[{
                 "callback": rabbitvcs.ui.widget.path_filter,
                 "user_data": {
                     "base_dir": base_dir,
-                    "column": 1
+                    "column": 2
                 }
             }],
             callbacks={
@@ -91,8 +96,8 @@
 
     #
     # Helper functions
-    # 
-    
+    #
+
     # Overrides the GtkContextMenuCaller method
     def on_context_menu_command_finished(self):
         self.initialize_items()
@@ -101,44 +106,43 @@
         """
         Initializes the activated cache and loads the file items in a new thread
         """
-        
+
         try:
             six.moves._thread.start_new_thread(self.load, ())
         except Exception as e:
             log.exception(e)
 
     def load(self):
-        gtk.gdk.threads_enter()
         self.get_widget("status").set_text(_("Loading..."))
         self.items = self.vcs.get_items(self.paths)
         self.populate_files_table()
         self.get_widget("status").set_text(_("Found %d item(s)") % len(self.items))
-        gtk.gdk.threads_leave()
 
     def populate_files_table(self):
         for item in self.items:
-        
+
             locked = ""
             if self.svn.is_locked(item.path):
                 locked = _("Yes")
             if not self.svn.is_versioned(item.path):
                 continue
-        
+
             self.files_table.append([
-                True, 
-                item.path, 
-                rabbitvcs.util.helper.get_file_extension(item.path),
+                True,
+                S(item.path),
+                item.path,
+                helper.get_file_extension(item.path),
                 locked
             ])
 
     def show_files_table_popup_menu(self, treeview, data):
         paths = self.files_table.get_selected_row_items(1)
         GtkFilesContextMenu(self, data, self.base_dir, paths).show()
-            
+
     #
     # UI Signal Callbacks
     #
-    
+
     def on_ok_clicked(self, widget, data=None):
         steal_locks = self.get_widget("steal_locks").get_active()
         items = self.files_table.get_activated_rows(1)
@@ -147,32 +151,32 @@
             return
 
         message = self.message.get_text()
-        
+
         self.hide()
 
         self.action = rabbitvcs.ui.action.SVNAction(
             self.svn,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Get Lock"))
         self.action.append(self.action.set_status, _("Running Lock Command..."))
-        self.action.append(rabbitvcs.util.helper.save_log_message, message)
+        self.action.append(helper.save_log_message, message)
         for path in items:
             self.action.append(
-                self.svn.lock, 
+                self.svn.lock,
                 path,
                 message,
                 force=steal_locks
             )
         self.action.append(self.action.set_status, _("Completed Lock"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def on_files_table_mouse_event(self, treeview, data=None):
         if data is not None and data.button == 3:
             self.show_files_table_popup_menu(treeview, data)
-    
+
     def on_select_all_toggled(self, widget, data=None):
         for row in self.files_table.get_items():
             row[0] = self.get_widget("select_all").get_active()
@@ -181,7 +185,7 @@
         dialog = rabbitvcs.ui.dialog.PreviousMessages()
         message = dialog.run()
         if message is not None:
-            self.message.set_text(message)
+            self.message.set_text(S(message).display())
 
 
 
@@ -193,6 +197,7 @@
     guess = rabbitvcs.vcs.guess(paths[0])
     return classes_map[guess["vcs"]](paths, base_dir)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT
     (options, paths) = main(
@@ -202,4 +207,4 @@
 
     window = lock_factory(paths, options.base_dir)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/log.py rabbitvcs/rabbitvcs/ui/log.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/log.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/log.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,57 +1,63 @@
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 from __future__ import division
 from __future__ import absolute_import
+import six
 import threading
-from datetime import datetime
+from locale import strxfrm
 
 import os.path
-import pygtk
-import gobject
-import gtk
-import cgi
+
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.action import SVNAction, GitAction, vcs_action_factory
 from rabbitvcs.ui.dialog import MessageBox
+import rabbitvcs.ui.widget
 from rabbitvcs.util.contextmenu import GtkContextMenu
 from rabbitvcs.util.contextmenuitems import *
-import rabbitvcs.ui.widget
-import rabbitvcs.util.helper
-import rabbitvcs.vcs
 from rabbitvcs.util.decorators import gtk_unsafe
+from rabbitvcs.util.strings import S
+import rabbitvcs.util.settings
+import rabbitvcs.vcs
 
 from rabbitvcs import gettext
-import six
-from six.moves import range
 _ = gettext.gettext
 
-DATETIME_FORMAT = rabbitvcs.util.helper.LOCAL_DATETIME_FORMAT
+from six.moves import range
+
 
 REVISION_LABEL = _("Revision")
 DATE_LABEL = _("Date")
 AUTHOR_LABEL = _("Author")
 
+
 def revision_grapher(history):
     """
     Expects a list of revision items like so:
@@ -59,7 +65,7 @@
         item.commit = "..."
         item.parents = ["...", "..."]
     ]
-    
+
     Output can be put directly into the CellRendererGraph
     """
     items = []
@@ -67,22 +73,22 @@
     last_lines = []
     color = "#d3b9d3"
     for item in history:
-        commit = six.text_type(item.revision)
+        commit = S(item.revision)
         parents = []
         for parent in item.parents:
-            parents.append(six.text_type(parent))
+            parents.append(S(parent))
 
         if commit not in revisions:
             revisions.append(commit)
 
         index = revisions.index(commit)
         next_revisions = revisions[:]
-        
+
         parents_to_add = []
         for parent in parents:
             if parent not in next_revisions:
                 parents_to_add.append(parent)
-        
+
         next_revisions[index:index+1] = parents_to_add
 
         lines = []
@@ -104,7 +110,7 @@
 class Log(InterfaceView):
     """
     Provides an interface to the Log UI
-    
+
     """
 
     selected_rows = []
@@ -118,14 +124,17 @@
         """
         @type   path: string
         @param  path: A path for which to get log items
-        
+
         """
-        
+
         InterfaceView.__init__(self, "log", "Log")
 
         self.get_widget("Log").set_title(_("Log - %s") % path)
         self.vcs = rabbitvcs.vcs.VCS()
 
+        sm = rabbitvcs.util.settings.SettingsManager()
+        self.datetime_format = sm.get("general", "datetime_format")
+
         self.filter_text = None
         self.path = path
         self.cache = LogCache()
@@ -138,14 +147,14 @@
         self.initialize_revision_labels()
         self.revision_number_column = 0
         self.head_row = 0
-        self.get_widget("limit").set_text(str(self.limit))
+        self.get_widget("limit").set_text(S(self.limit).display())
 
         self.message = rabbitvcs.ui.widget.TextView(
             self.get_widget("message")
         )
 
         self.stop_on_copy = False
-        self.revision_clipboard = gtk.Clipboard()
+        self.revision_clipboard = Gtk.Clipboard.get(Gdk.SELECTION_CLIPBOARD)
 
     #
     # UI Signal Callback Methods
@@ -161,11 +170,11 @@
             self.set_loading(False)
 
         self.close()
-    
+
     def on_key_pressed(self, widget, data):
         InterfaceView.on_key_pressed(self, widget, data)
-        if (data.state & gtk.gdk.CONTROL_MASK and
-            gtk.gdk.keyval_name(data.keyval).lower() == "c"):
+        if (data.state & Gdk.ModifierType.CONTROL_MASK and
+            Gdk.keyval_name(data.keyval).lower() == "c"):
             if len(self.revisions_table.get_selected_rows()) > 0:
                 self.copy_revision_text()
 
@@ -173,13 +182,13 @@
         self.stop_on_copy = self.get_widget("stop_on_copy").get_active()
         if not self.is_loading:
             self.refresh()
-    
+
     def on_refresh_clicked(self, widget):
         self.limit = int(self.get_widget("limit").get_text())
         self.cache.empty()
         self.load()
 
-    
+
     def on_search(self, widget):
         tb = self.get_widget("search_buffer")
         self.filter_text = tb.get_text(tb.get_start_iter(), tb.get_end_iter()).lower()
@@ -195,13 +204,13 @@
         items = []
         for row in self.selected_rows:
             items.append(self.display_items[row][col])
-        
+
         return items
 
     def on_revisions_table_row_activated(self, treeview, event, col):
         paths = self.revisions_table.get_displayed_row_items(1)
 
-        rabbitvcs.util.helper.launch_diff_tool(*paths)
+        helper.launch_diff_tool(*paths)
 
     def on_revisions_table_mouse_event(self, treeview, data=None):
         if len(self.revisions_table.get_selected_rows()) == 0:
@@ -215,7 +224,7 @@
         self.paths_table.clear()
         self.message.set_text("")
 
-        self.update_revision_message()             
+        self.update_revision_message()
 
 
     #
@@ -224,18 +233,18 @@
 
     def on_paths_table_row_activated(self, treeview, data=None, col=None):
         try:
-            revision1 = six.text_type(self.display_items[self.revisions_table.get_selected_rows()[0]].revision)
-            revision2 = six.text_type(self.display_items[self.revisions_table.get_selected_rows()[0]+1].revision)
+            revision1 = S(self.display_items[self.revisions_table.get_selected_rows()[0]].revision)
+            revision2 = S(self.display_items[self.revisions_table.get_selected_rows()[0]+1].revision)
             path_item = self.paths_table.get_row(self.paths_table.get_selected_rows()[0])[1]
             url = self.root_url + path_item
-            self.view_diff_for_path(url, six.text_type(revision1), six.text_type(revision2), sidebyside=True)
+            self.view_diff_for_path(url, S(revision1), S(revision2), sidebyside=True)
         except IndexError:
             pass
 
     def on_paths_table_mouse_event(self, treeview, data=None):
         if data is not None and data.button == 3:
             self.show_paths_table_popup_menu(treeview, data)
-    
+
     def show_paths_table_popup_menu(self, treeview, data):
         revisions = []
         for row in self.revisions_table.get_selected_rows():
@@ -256,18 +265,18 @@
             try:
                 line["previous_revision"] = self.display_items[row-1].revision
             except IndexError as e:
-                pass          
-                      
+                pass
+
             revisions.append(line)
-        
+
         revisions.reverse()
-        
+
         paths = []
         for row in self.paths_table.get_selected_rows():
             paths.append(self.paths_table.get_row(row)[1])
-        
+
         LogBottomContextMenu(self, data, paths, revisions).show()
-    
+
     #
     # Helper methods
     #
@@ -277,7 +286,7 @@
             self.refresh()
         else:
             self.load()
-          
+
     def get_selected_revision_numbers(self):
         if len(self.revisions_table.get_selected_rows()) == 0:
             return ""
@@ -287,19 +296,21 @@
             revisions.append(int(self.revisions_table.get_row(row)[self.revision_number_column]))
 
         revisions.sort()
-        return rabbitvcs.util.helper.encode_revisions(revisions)
+        helper.encode_revisions(revisions)
 
     def get_selected_revision_number(self):
         if len(self.revisions_table.get_selected_rows()):
             return self.revisions_table.get_row(self.revisions_table.get_selected_rows()[0])[self.revision_number_column]
         else:
             return ""
-    
+
+    @gtk_unsafe
     def set_start_revision(self, rev):
-        self.get_widget("start").set_text(str(rev))
+        self.get_widget("start").set_text(S(rev).display())
 
+    @gtk_unsafe
     def set_end_revision(self, rev):
-        self.get_widget("end").set_text(str(rev))
+        self.get_widget("end").set_text(S(rev).display())
 
     def initialize_revision_labels(self):
         self.set_start_revision(_("N/A"))
@@ -324,10 +335,10 @@
             try:
                 line["previous_revision"] = self.display_items[row-1].revision
             except IndexError as e:
-                pass          
-                      
+                pass
+
             revisions.append(line)
-            
+
         LogTopContextMenu(self, data, self.path, revisions).show()
 
     #
@@ -343,11 +354,11 @@
             "%s@%s" % (url, revision1),
             "--vcs=%s" % self.get_vcs_name()
         ]
-        
+
         if sidebyside:
-            options += ["-s"] 
+            options += ["-s"]
 
-        rabbitvcs.util.helper.launch_ui_window("diff", options)
+        helper.launch_ui_window("diff", options)
 
     def get_vcs_name(self):
         vcs = rabbitvcs.vcs.VCS_DUMMY
@@ -361,16 +372,16 @@
 class SVNLog(Log):
     def __init__(self, path, merge_candidate_revisions=None):
         Log.__init__(self, path)
-                
+
         self.svn = self.vcs.svn()
         self.merge_candidate_revisions = merge_candidate_revisions
 
         self.revisions_table = rabbitvcs.ui.widget.Table(
             self.get_widget("revisions_table"),
-            [gobject.TYPE_STRING, gobject.TYPE_STRING, 
-                gobject.TYPE_STRING, gobject.TYPE_STRING,
+            [GObject.TYPE_STRING, GObject.TYPE_STRING,
+                GObject.TYPE_STRING, GObject.TYPE_STRING,
                 rabbitvcs.ui.widget.TYPE_HIDDEN],
-            [_("Revision"), _("Author"), 
+            [_("Revision"), _("Author"),
                 _("Date"), _("Message"),
                 _("Color")],
             callbacks={
@@ -380,22 +391,22 @@
 
         for i in range(4):
             column = self.revisions_table.get_column(i)
-            cell = column.get_cell_renderers()[0]
+            cell = column.get_cells()[0]
             column.add_attribute(cell, 'foreground', 4)
 
         self.paths_table = rabbitvcs.ui.widget.Table(
             self.get_widget("paths_table"),
-            [gobject.TYPE_STRING, gobject.TYPE_STRING, 
-                gobject.TYPE_STRING, gobject.TYPE_STRING], 
-            [_("Action"), _("Path"), 
+            [GObject.TYPE_STRING, rabbitvcs.ui.widget.TYPE_HIDDEN_OBJECT,
+                GObject.TYPE_STRING, GObject.TYPE_STRING, GObject.TYPE_STRING],
+            [_("Action"), "", _("Path"),
                 _("Copy From Path"), _("Copy From Revision")],
             callbacks={
                 "mouse-event":      self.on_paths_table_mouse_event,
                 "row-activated":    self.on_paths_table_row_activated
             },
             flags={
-                "sortable": True, 
-                "sort_on": 1
+                "sortable": True,
+                "sort_on": 2
             }
         )
 
@@ -408,7 +419,7 @@
             notification=False,
             run_in_thread=False
         )
-        
+
         self.root_url = action.run_single(
             self.svn.get_repo_root_url,
             self.path
@@ -417,18 +428,18 @@
     #
     # Log-loading callback methods
     #
-    
+
     def refresh(self):
         """
         Refresh the items in the main log table that shows Revision/Author/etc.
-        
+
         """
-        
+
         self.revision_items = []
         self.revisions_table.clear()
         self.message.set_text("")
         self.paths_table.clear()
-        
+
         if self.rev_start and self.cache.has(self.rev_start):
             self.revision_items = self.cache.get(self.rev_start)
         else:
@@ -437,25 +448,25 @@
 
         if not self.revision_items or len(self.revision_items) == 0:
             return
-        
+
         # Get the starting/ending point from the actual returned revisions
-        self.rev_start = six.text_type(self.revision_items[0].revision)
-        self.rev_end = six.text_type(self.revision_items[-1].revision)
+        self.rev_start = int(S(self.revision_items[0].revision))
+        self.rev_end = int(S(self.revision_items[-1].revision))
 
         if not self.rev_first:
             self.rev_first = self.rev_start
-        
+
         self.cache.set(self.rev_start, self.revision_items)
-        
+
         # The first time the log items return, the rev_start will be as large
         # as it will ever be.  So set this to our maximum revision.
         if self.rev_start > self.rev_max:
             self.rev_max = self.rev_start
-        
+
         self.display_items = []
 
         for item in self.revision_items:
-            msg = cgi.escape(item.message).lower()
+            msg = helper.html_escape(item.message).lower()
 
             should_add = not self.filter_text
             should_add = should_add or msg.find(self.filter_text) > -1
@@ -473,7 +484,7 @@
         self.check_next_sensitive()
 
         for item in self.display_items:
-            msg = cgi.escape(rabbitvcs.util.helper.format_long_text(item.message, 80))
+            msg = helper.format_long_text(item.message, cols = 80, line1only = True)
             rev = item.revision
             color = "#000000"
             if (self.merge_candidate_revisions != None and
@@ -494,9 +505,9 @@
 
     def populate_table(self, revision, author, date, msg, color):
         self.revisions_table.append([
-            six.text_type(revision),
+            S(revision),
             author,
-            rabbitvcs.util.helper.format_datetime(date),
+            helper.format_datetime(date, self.datetime_format),
             msg,
             color
         ])
@@ -508,26 +519,26 @@
         self.action = SVNAction(
             self.svn,
             notification=False
-        )        
+        )
 
         start = self.svn.revision("head")
         if self.rev_start:
             start = self.svn.revision("number", number=self.rev_start)
 
         self.action.append(
-            self.svn.log, 
+            self.svn.log,
             self.path,
             revision_start=start,
             limit=self.limit,
             discover_changed_paths=True
         )
         self.action.append(self.refresh)
-        self.action.start()
+        self.action.schedule()
 
     def edit_revprop(self, prop_name, prop_value, callback=None):
 
         failure = False
-        url = self.svn.get_repo_url(self.path)
+        url = S(self.svn.get_repo_url(self.path))
 
         self.action = SVNAction(
             self.svn,
@@ -543,82 +554,86 @@
                 url,
                 item.revision
             )
-            
-            callback(row, prop_value)
-        
-        self.action.start()
 
+            self.action.append(callback, row, prop_value)
+
+        self.action.schedule()
+
+    @gtk_unsafe
     def on_log_message_edited(self, index, val):
         self.display_items[index].message = val
         self.revisions_table.set_row_item(index, 3, val)
-        self.message.set_text(val)
+        self.message.set_text(S(val).display())
 
+    @gtk_unsafe
     def on_author_edited(self, index, val):
         self.display_items[index].author = val
         self.revisions_table.set_row_item(index, 1, val)
 
     def copy_revision_text(self):
-        text = "" 
+        text = ""
         for selected_row in self.revisions_table.get_selected_rows():
             item = self.display_items[selected_row]
-            
-            text += "%s: %s\n" % (REVISION_LABEL, six.text_type(item.revision))
-            text += "%s: %s\n" % (AUTHOR_LABEL, six.text_type(item.author))
-            text += "%s: %s\n" % (DATE_LABEL, six.text_type(item.date))
-            text += "%s\n\n"   % item.message
+
+            text += "%s: %s\n" % (REVISION_LABEL, S(item.revision).display())
+            text += "%s: %s\n" % (AUTHOR_LABEL, S(item.author).display())
+            text += "%s: %s\n" % (DATE_LABEL, S(item.date).display())
+            text += "%s\n\n"   % S(item.message).display()
             if item.changed_paths is not None:
                 for subitem in item.changed_paths:
-                    text += "%s\t%s" % (subitem.action, subitem.path)
+                    text += "%s\t%s" % (S(subitem.action).display(), S(subitem.path).display())
 
                     if subitem.copy_from_path or subitem.copy_from_revision:
-                        text += " (Copied from %s %s)" % (subitem.copy_from_path, subitem.copy_from_revision)
+                        text += " (Copied from %s %s)" % (S(subitem.copy_from_path).display(), S(subitem.copy_from_revision).display())
 
                     text += "\n"
 
             text += "\n\n\n"
 
-        self.revision_clipboard.set_text(text)
+        self.revision_clipboard.set_text(text, -1)
 
     def update_revision_message(self):
         combined_paths = []
         subitems = []
-               
+
         for selected_row in self.revisions_table.get_selected_rows():
             item = self.display_items[selected_row]
-            
+            msg = S(item.message).display()
+
             if len(self.revisions_table.get_selected_rows()) == 1:
-                self.message.set_text(item.message)
+                self.message.set_text(msg)
             else:
-                indented_message = item.message.replace("\n","\n\t")
+                indented_message = msg.replace("\n","\n\t")
                 self.message.append_text(
-					"%s %s:\n\t%s\n" % (REVISION_LABEL,
-                                        six.text_type(item.revision),
-                                        indented_message))
+                                         "%s %s:\n\t%s\n" % (REVISION_LABEL,
+                                         S(item.revision).display(),
+                                         indented_message))
             if item.changed_paths is not None:
                 for subitem in item.changed_paths:
                     if subitem.path not in combined_paths:
                         combined_paths.append(subitem.path)
-                        
+
                         subitems.append([
                             subitem.action,
                             subitem.path,
                             subitem.copy_from_path,
-                            subitem.copy_from_revision
+                            S(subitem.copy_from_revision)
                         ])
 
-        subitems.sort(lambda x, y: cmp(x[1],y[1]))
+        subitems.sort(key = lambda x: strxfrm(x[1]))
         for subitem in subitems:
             self.paths_table.append([
                 subitem[0],
+                S(subitem[1]),
                 subitem[1],
                 subitem[2],
-                subitem[3]
+                S(subitem[3])
             ])
 
     def on_previous_clicked(self, widget):
         self.rev_start = self.previous_starts.pop()
         self.load_or_refresh()
-                    
+
     def on_next_clicked(self, widget):
         self.previous_starts.append(self.rev_start)
         self.rev_start = int(self.rev_end) - 1
@@ -644,20 +659,20 @@
 class GitLog(Log):
     def __init__(self, path):
         Log.__init__(self, path)
-        
+
         self.git = self.vcs.git(path)
         self.limit = 500
-        
+
         self.get_widget("stop_on_copy").hide()
-        
+
         self.revision_number_column = 1
 
         self.revisions_table = rabbitvcs.ui.widget.Table(
             self.get_widget("revisions_table"),
-            [rabbitvcs.ui.widget.TYPE_GRAPH, gobject.TYPE_STRING, 
-                rabbitvcs.ui.widget.TYPE_MARKUP, 
-                rabbitvcs.ui.widget.TYPE_MARKUP, rabbitvcs.ui.widget.TYPE_MARKUP], 
-            [_("Graph"), _("Revision"), _("Author"), 
+            [rabbitvcs.ui.widget.TYPE_GRAPH, GObject.TYPE_STRING,
+                rabbitvcs.ui.widget.TYPE_MARKUP,
+                rabbitvcs.ui.widget.TYPE_MARKUP, rabbitvcs.ui.widget.TYPE_MARKUP],
+            [_("Graph"), _("Revision"), _("Author"),
                 _("Date"), _("Message")],
             filters=[{
                 "callback": rabbitvcs.ui.widget.git_revision_filter,
@@ -672,8 +687,9 @@
 
         self.paths_table = rabbitvcs.ui.widget.Table(
             self.get_widget("paths_table"),
-            [gobject.TYPE_STRING, gobject.TYPE_STRING], 
-            [_("Action"), _("Path")],
+            [GObject.TYPE_STRING, rabbitvcs.ui.widget.TYPE_HIDDEN_OBJECT,
+                GObject.TYPE_STRING],
+            [_("Action"), "", _("Path")],
             callbacks={
                 "mouse-event":      self.on_paths_table_mouse_event,
                 "row-activated":    self.on_paths_table_row_activated
@@ -689,20 +705,20 @@
     #
     # Log-loading callback methods
     #
-    
+
     def refresh(self):
         """
         Refresh the items in the main log table that shows Revision/Author/etc.
-        
+
         """
-        
+
         self.revisions_table.clear()
-        self.message.set_text("")
+        helper.run_in_main_thread(self.message.set_text, "")
         self.paths_table.clear()
-        
+
         # Make sure the int passed is the order the log call was made
         self.revision_items = self.action.get_result(0)
-        
+
         if not self.revision_items or len(self.revision_items) == 0:
             return
 
@@ -735,12 +751,12 @@
         self.display_items = []
 
         for item in self.revision_items:
-            msg = cgi.escape(item.message).lower()
+            msg = item.message.lower()
 
             should_add = not self.filter_text
             should_add = should_add or msg.find(self.filter_text) > -1
             should_add = should_add or item.author.lower().find(self.filter_text) > -1
-            should_add = should_add or six.text_type(item.revision).lower().find(self.filter_text) > -1
+            should_add = should_add or S(item.revision).lower().find(self.filter_text) > -1
             should_add = should_add or str(item.date).lower().find(self.filter_text) > -1
 
             if should_add:
@@ -752,27 +768,35 @@
             if max_columns < len(out_lines):
                 max_columns = len(out_lines)
 
+        # Set the graph column width
         if not self.filter_text:
+            graph_width = 21 * max_columns
+            if graph_width < 55:
+                graph_width = 55
+
             graph_column = self.revisions_table.get_column(0)
-            cell = graph_column.get_cell_renderers()[0]
-            self.revisions_table.set_column_width(0, 16*max_columns)
+            graph_column.set_fixed_width(graph_width)
 
         index = 0
         for (item, node, in_lines, out_lines) in grapher:
-            revision = six.text_type(item.revision)
-            msg = cgi.escape(rabbitvcs.util.helper.format_long_text(item.message, 80))
+            revision = S(item.revision)
+            msg = helper.html_escape(helper.format_long_text(item.message, cols = 80, line1only = True))
             author = item.author
-            date = rabbitvcs.util.helper.format_datetime(item.date)
-            
+            date = helper.format_datetime(item.date, self.datetime_format)
+
             if item.head:
                 self.head_row = index
                 msg = "<b>%s</b>" % msg
                 author = "<b>%s</b>" % author
-                date = "<b>%s</b>" % date            
-            
-            graph_render = ()
+                date = "<b>%s</b>" % date
+
+            graph_render = {}
             if not self.filter_text:
-                graph_render = (node, in_lines, out_lines)
+                graph_render = {
+                    "node": node,
+                    "in_lines": in_lines,
+                    "out_lines": out_lines
+                }
 
             # Check if a branch is available for this revision, and if so, insert it in the message description.
             for branch in self.branchItems:
@@ -797,7 +821,7 @@
         self.check_previous_sensitive()
         self.check_next_sensitive()
         self.set_loading(False)
-    
+
     def load(self):
         self.set_loading(True)
 
@@ -809,7 +833,7 @@
         )
 
         self.branchAction.append(self.git.branch_list)
-        self.branchAction.start();
+        self.branchAction.schedule();
 
         # Load tags.
         self.tagAction = GitAction(
@@ -819,14 +843,14 @@
         )
 
         self.tagAction.append(self.git.tag_list)
-        self.tagAction.start()
+        self.tagAction.schedule()
 
         # Load log.
         self.action = GitAction(
             self.git,
             notification=False,
             run_in_thread=True
-        )        
+        )
 
         self.action.append(
             self.git.log,
@@ -835,50 +859,52 @@
             limit=self.limit+1
         )
         self.action.append(self.refresh)
-        self.action.start()
+        self.action.schedule()
 
     def copy_revision_text(self):
         text = ""
         for selected_row in self.revisions_table.get_selected_rows():
             item = self.display_items[selected_row]
 
-            text += "%s: %s\n" % (REVISION_LABEL, six.text_type(item.revision.short()))
-            text += "%s: %s\n" % (AUTHOR_LABEL, six.text_type(item.author))
-            text += "%s: %s\n" % (DATE_LABEL, six.text_type(item.date))
-            text += "%s\n\n" % item.message
-            
-        self.revision_clipboard.set_text(text)
+            text += "%s: %s\n" % (REVISION_LABEL, S(item.revision.short()).display())
+            text += "%s: %s\n" % (AUTHOR_LABEL, S(item.author).display())
+            text += "%s: %s\n" % (DATE_LABEL, S(item.date).display())
+            text += "%s\n\n" % S(item.message).display()
+
+        self.revision_clipboard.set_text(text, -1)
 
     def update_revision_message(self):
         combined_paths = []
         subitems = []
-        
+
         for selected_row in self.revisions_table.get_selected_rows():
             item = self.display_items[selected_row]
+            msg = S(item.message).display()
 
             if len(self.revisions_table.get_selected_rows()) == 1:
-                self.message.set_text(item.message)
+                self.message.set_text(msg)
             else:
-                indented_message = item.message.replace("\n","\n\t")
+                indented_message = msg.replace("\n","\n\t")
                 self.message.append_text(
-					"%s %s:\n\t%s\n" % (REVISION_LABEL,
-                                        item.revision.short(),
-                                        indented_message))
+                                         "%s %s:\n\t%s\n" % (REVISION_LABEL,
+                                         item.revision.short(),
+                                         msg))
 
             for subitem in item.changed_paths:
-                
+
                 if subitem.path not in combined_paths:
                     combined_paths.append(subitem.path)
-                    
+
                     subitems.append([
                         subitem.action,
                         subitem.path
                     ])
 
-#        subitems.sort(lambda x, y: cmp(x[1],y[1]))
+#        subitems.sort(key = lambda x: strxfrm(x[1]))
         for subitem in subitems:
             self.paths_table.append([
                 subitem[0],
+                S(subitem[1]),
                 subitem[1]
             ])
 
@@ -887,7 +913,7 @@
         if self.start_point < 0:
             self.start_point = 0
         self.load_or_refresh()
-                    
+
     def on_next_clicked(self, widget):
         self.start_point += self.limit
         self.load()
@@ -916,10 +942,11 @@
         SVNLog.__init__(self, path, merge_candidate_revisions)
         self.ok_callback = ok_callback
         self.multiple = multiple
-        
+        self.change_button("close", _("_Select"), "rabbitvcs-ok")
+
     def on_destroy(self, widget):
         pass
-    
+
     def on_close_clicked(self, widget, data=None):
         self.hide()
         if self.ok_callback is not None:
@@ -938,10 +965,10 @@
         GitLog.__init__(self, path)
         self.ok_callback = ok_callback
         self.multiple = multiple
-        
+
     def on_destroy(self, widget):
         pass
-    
+
     def on_close_clicked(self, widget, data=None):
         self.hide()
         if self.ok_callback is not None:
@@ -953,16 +980,16 @@
 class LogCache:
     def __init__(self, cache={}):
         self.cache = cache
-    
+
     def set(self, key, val):
         self.cache[key] = val
-    
+
     def get(self, key):
         return self.cache[key]
-    
+
     def has(self, key):
         return (key in self.cache)
-    
+
     def empty(self):
         self.cache = {}
 
@@ -1002,7 +1029,7 @@
     identifier = "RabbitVCS::Show_Changes_Previous_Revision"
     label = _("Show changes against previous revision")
     icon = "rabbitvcs-changes"
-    
+
 class MenuShowChangesRevisions(MenuItem):
     # This is for the revs list
     identifier = "RabbitVCS::Show_Changes_Revisions"
@@ -1019,29 +1046,28 @@
     identifier = "RabbitVCS::Revert_Changes_From_This_Revision"
     label = _("Revert changes from this revision")
     tooltip = _("Update the selected path by reverse merging the changes")
-    icon = "rabbitvcs-revert"    
+    icon = "rabbitvcs-revert"
 
 class MenuCopyClipboard(MenuItem):
     identifier = "RabbitVCS::Copy_Clipboard"
     label = _("Copy to clipboard")
     tooltip = _("Copy to clipboard the full data of these revisions")
+    icon = "rabbitvcs-asynchronous"
 
 class MenuEditAuthor(MenuItem):
     identifier = "RabbitVCS::Edit_Author"
     label = _("Edit author...")
-
-class MenuEditAuthor(MenuItem):
-    identifier = "RabbitVCS::Edit_Author"
-    label = _("Edit author...")
+    icon = "rabbitvcs-monkey"
 
 class MenuEditLogMessage(MenuItem):
     identifier = "RabbitVCS::Edit_Log_Message"
     label = _("Edit log message...")
+    icon = "rabbitvcs-editconflicts"
 
 class MenuEditRevisionProperties(MenuItem):
     identifier = "RabbitVCS::Edit_Revision_Properties"
     label = _("Edit revision properties...")
-    icon = gtk.STOCK_EDIT
+    icon = "rabbitvcs-editprops"
 
 class MenuSeparatorLast(MenuSeparator):
     identifier = "RabbitVCS::Separator_Last"
@@ -1052,9 +1078,9 @@
         self.vcs = vcs
         self.path = path
         self.revisions = revisions
-        
+
         self.vcs_name = caller.get_vcs_name()
-        
+
     def view_diff_working_copy(self, data=None):
         return (self.vcs.is_in_a_or_a_working_copy(self.path) and len(self.revisions) == 1)
 
@@ -1067,9 +1093,9 @@
 
     def view_diff_revisions(self, data=None):
         return (len(self.revisions) > 1)
-        
+
     def compare_working_copy(self, data=None):
-        return (self.vcs.is_in_a_or_a_working_copy(self.path) and len(self.revisions) == 1) 
+        return (self.vcs.is_in_a_or_a_working_copy(self.path) and len(self.revisions) == 1)
 
     def compare_previous_revision(self, data=None):
         item = self.revisions[0]["revision"]
@@ -1122,7 +1148,7 @@
 
     def separator_last(self, data=None):
         return (self.vcs_name == rabbitvcs.vcs.VCS_SVN)
-        
+
     def merge(self, data=None):
         return (self.vcs_name == rabbitvcs.vcs.VCS_GIT)
 
@@ -1140,17 +1166,17 @@
 
     def find_parent(self, revision):
         if ("parents" in revision) and len(revision["parents"]) > 0:
-            parent = six.text_type(revision["parents"][0])
+            parent = S(revision["parents"][0])
         elif ("next_revision" in revision):
-            parent = six.text_type(revision["next_revision"])
+            parent = S(revision["next_revision"])
         else:
-            parent = six.text_type(int(six.text_type(revision["revision"])) - 1)
+            parent = S(int(S(revision["revision"])) - 1)
 
         return parent
-        
+
     def view_diff_working_copy(self, widget, data=None):
-        rabbitvcs.util.helper.launch_ui_window("diff", [
-            "%s@%s" % (self.path, six.text_type(self.revisions[0]["revision"])),
+        helper.launch_ui_window("diff", [
+            "%s@%s" % (self.path, S(self.revisions[0]["revision"])),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
@@ -1160,9 +1186,9 @@
     def view_diff_previous_revision(self, widget, data=None):
         parent = self.find_parent(self.revisions[0])
 
-        rabbitvcs.util.helper.launch_ui_window("diff", [
+        helper.launch_ui_window("diff", [
             "%s@%s" % (self.path, parent),
-            "%s@%s" % (self.path, six.text_type(self.revisions[0]["revision"])),
+            "%s@%s" % (self.path, S(self.revisions[0]["revision"])),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
@@ -1170,10 +1196,10 @@
         path_older = self.path
         if self.vcs_name == rabbitvcs.vcs.VCS_SVN:
             path_older = self.vcs.svn().get_repo_url(self.path)
-    
-        rabbitvcs.util.helper.launch_ui_window("diff", [
+
+        helper.launch_ui_window("diff", [
             "%s@%s" % (path_older, self.revisions[1]["revision"].value),
-            "%s@%s" % (self.path, six.text_type(self.revisions[0]["revision"])),
+            "%s@%s" % (self.path, S(self.revisions[0]["revision"])),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
@@ -1181,10 +1207,10 @@
         path_older = self.path
         if self.vcs_name == rabbitvcs.vcs.VCS_SVN:
             path_older = self.vcs.svn().get_repo_url(self.path)
-    
-        rabbitvcs.util.helper.launch_ui_window("diff", [
+
+        helper.launch_ui_window("diff", [
             "-s",
-            "%s@%s" % (path_older, six.text_type(self.revisions[0]["revision"])),
+            "%s@%s" % (path_older, S(self.revisions[0]["revision"])),
             "%s" % (self.path),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
@@ -1192,10 +1218,10 @@
     def compare_previous_revision(self, widget, data=None):
         parent = self.find_parent(self.revisions[0])
 
-        rabbitvcs.util.helper.launch_ui_window("diff", [
+        helper.launch_ui_window("diff", [
             "-s",
             "%s@%s" % (self.path, parent),
-            "%s@%s" % (self.path, six.text_type(self.revisions[0]["revision"])),
+            "%s@%s" % (self.path, S(self.revisions[0]["revision"])),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
@@ -1204,126 +1230,128 @@
         if self.vcs_name == rabbitvcs.vcs.VCS_SVN:
             path_older = self.vcs.svn().get_repo_url(self.path)
 
-        rabbitvcs.util.helper.launch_ui_window("diff", [
+        helper.launch_ui_window("diff", [
             "-s",
             "%s@%s" % (path_older, self.revisions[1]["revision"].value),
-            "%s@%s" % (self.path, six.text_type(self.revisions[0]["revision"])),
+            "%s@%s" % (self.path, S(self.revisions[0]["revision"])),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
     def show_changes_previous_revision(self, widget, data=None):
-        rev_first = six.text_type(self.revisions[0]["revision"])
+        rev_first = S(self.revisions[0]["revision"])
         parent = self.find_parent(self.revisions[0])
-        
+
         path = self.path
         if self.vcs_name == rabbitvcs.vcs.VCS_SVN:
             path = self.vcs.svn().get_repo_url(self.path)
 
-        rabbitvcs.util.helper.launch_ui_window("changes", [
+        helper.launch_ui_window("changes", [
             "%s@%s" % (path, parent),
-            "%s@%s" % (path, six.text_type(rev_first)),
+            "%s@%s" % (path, S(rev_first)),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
     def show_changes_revisions(self, widget, data=None):
-        rev_first = six.text_type(self.revisions[0]["revision"])
-        rev_last = six.text_type(self.revisions[0]["next_revision"])
+        rev_first = S(self.revisions[0]["revision"])
+        rev_last = S(self.revisions[-1]["revision"])
 
         path = self.path
         if self.vcs_name == rabbitvcs.vcs.VCS_SVN:
             path = self.vcs.svn().get_repo_url(self.path)
 
-        rabbitvcs.util.helper.launch_ui_window("changes", [
-            "%s@%s" % (path, six.text_type(rev_first)),
-            "%s@%s" % (path, six.text_type(rev_last)),
+        helper.launch_ui_window("changes", [
+            "%s@%s" % (path, S(rev_first)),
+            "%s@%s" % (path, S(rev_last)),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
-    def update_to_this_revision(self, widget, data=None):        
-        rabbitvcs.util.helper.launch_ui_window("updateto", [
+    def update_to_this_revision(self, widget, data=None):
+        helper.launch_ui_window("updateto", [
             self.path,
-            "-r", six.text_type(self.revisions[0]["revision"]),
+            "-r", S(self.revisions[0]["revision"]),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
-    def revert_changes_from_this_revision(self, widget, data=None):        
-        rabbitvcs.util.helper.launch_ui_window("merge", [
+    def revert_changes_from_this_revision(self, widget, data=None):
+        helper.launch_ui_window("merge", [
             self.path,
-            six.text_type(self.revisions[0]["revision"]) + "-" + str(int(six.text_type(self.revisions[0]["revision"])) - 1),
+            S(self.revisions[0]["revision"]) + "-" + str(int(S(self.revisions[0]["revision"])) - 1),
             "--vcs=%s" % self.caller.get_vcs_name()
-        ])        
-        
+        ])
+
     def checkout(self, widget, data=None):
         url = ""
         if self.vcs_name == rabbitvcs.vcs.VCS_SVN:
             url = self.vcs.svn().get_repo_url(self.path)
 
-        rabbitvcs.util.helper.launch_ui_window("checkout", [
-            self.path, 
-            url, 
-            "-r", six.text_type(self.revisions[0]["revision"]),
+        helper.launch_ui_window("checkout", [
+            self.path,
+            url,
+            "-r", S(self.revisions[0]["revision"]),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
     def branch_tag(self, widget, data=None):
-        rabbitvcs.util.helper.launch_ui_window("branch", [
-            self.path, 
-            "-r", six.text_type(self.revisions[0]["revision"]),
+        helper.launch_ui_window("branch", [
+            self.path,
+            "-r", S(self.revisions[0]["revision"]),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
     def branches(self, widget, data=None):
-        rabbitvcs.util.helper.launch_ui_window("branches", [
-            self.path, 
-            "-r", six.text_type(self.revisions[0]["revision"]),
+        helper.launch_ui_window("branches", [
+            self.path,
+            "-r", S(self.revisions[0]["revision"]),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
     def tags(self, widget, data=None):
-        rabbitvcs.util.helper.launch_ui_window("tags", [
-            self.path, 
-            "-r", six.text_type(self.revisions[0]["revision"]),
+        helper.launch_ui_window("tags", [
+            self.path,
+            "-r", S(self.revisions[0]["revision"]),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
-        
+
     def export(self, widget, data=None):
-        rabbitvcs.util.helper.launch_ui_window("export", [
-            self.path, 
-            "-r", six.text_type(self.revisions[0]["revision"]),
+        helper.launch_ui_window("export", [
+            self.path,
+            "-r", S(self.revisions[0]["revision"]),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
     def merge(self, widget, data=None):
         extra = []
         if self.vcs_name == rabbitvcs.vcs.VCS_GIT:
-            extra.append(six.text_type(self.revisions[0]["revision"]))
+            extra.append(S(self.revisions[0]["revision"]))
             try:
-                fromrev = six.text_type(self.revisions[1]["revision"])
+                fromrev = S(self.revisions[1]["revision"])
                 extra.append(fromrev)
             except IndexError as e:
                 pass
-        
+
         extra += ["--vcs=%s" % self.caller.get_vcs_name()]
-        
-        rabbitvcs.util.helper.launch_ui_window("merge", [self.path] + extra)
+
+        helper.launch_ui_window("merge", [self.path] + extra)
 
     def reset(self, widget, data=None):
-        rabbitvcs.util.helper.launch_ui_window("reset", [
-            self.path, 
-            "-r", six.text_type(self.revisions[0]["revision"]),
+        helper.launch_ui_window("reset", [
+            self.path,
+            "-r", S(self.revisions[0]["revision"]),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
     def edit_author(self, widget, data=None):
-        message = ""
+        author = ""
         if len(self.revisions) == 1:
             author = self.revisions[0]["author"]
+            if author == _("(no author)"):
+                author = ""
 
         from rabbitvcs.ui.dialog import TextChange
         dialog = TextChange(_("Edit author"), author)
         (result, new_author) = dialog.run()
 
-        if result == gtk.RESPONSE_OK:
+        if result == Gtk.ResponseType.OK:
             self.caller.edit_revprop("svn:author", new_author, self.caller.on_author_edited)
 
     def edit_log_message(self, widget, data=None):
@@ -1335,37 +1363,37 @@
         dialog = TextChange(_("Edit log message"), message)
         (result, new_message) = dialog.run()
 
-        if result == gtk.RESPONSE_OK:
+        if result == Gtk.ResponseType.OK:
             self.caller.edit_revprop("svn:log", new_message, self.caller.on_log_message_edited)
 
     def edit_revision_properties(self, widget, data=None):
         url = self.vcs.svn().get_repo_url(self.path)
-        
-        rabbitvcs.util.helper.launch_ui_window("revprops", [
-            "%s@%s" % (url, six.text_type(self.revisions[0]["revision"])),
+
+        helper.launch_ui_window("revprops", [
+            "%s@%s" % (url, S(self.revisions[0]["revision"])),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
 
 class LogTopContextMenu:
     """
     Defines context menu items for a table with files
-    
+
     """
     def __init__(self, caller, event, path, revisions=[]):
-        """    
+        """
         @param  caller: The calling object
         @type   caller: object
-        
+
         @param  base_dir: The curent working directory
         @type   base_dir: string
-        
+
         @param  path: The loaded path
         @type   path: string
-        
+
         @param  revisions: The selected revisions
         @type   revisions: list of rabbitvcs.vcs.Revision object
-        
-        """        
+
+        """
         self.caller = caller
         self.event = event
         self.path = path
@@ -1374,14 +1402,14 @@
 
         self.conditions = LogTopContextMenuConditions(
             self.caller,
-            self.vcs, 
-            self.path, 
+            self.vcs,
+            self.path,
             self.revisions
         )
-        
+
         self.callbacks = LogTopContextMenuCallbacks(
             self.caller,
-            self.vcs, 
+            self.vcs,
             self.path,
             self.revisions
         )
@@ -1389,7 +1417,7 @@
         # The first element of each tuple is a key that matches a
         # ContextMenuItems item.  The second element is either None when there
         # is no submenu, or a recursive list of tuples for desired submenus.
-        self.structure = [      
+        self.structure = [
             (MenuViewDiffWorkingCopy, None),
             (MenuViewDiffPreviousRevision, None),
             (MenuViewDiffRevisions, None),
@@ -1415,7 +1443,7 @@
             (MenuEditLogMessage, None),
             (MenuEditRevisionProperties, None)
         ]
-        
+
     def show(self):
         if len(self.revisions) == 0:
             return
@@ -1473,50 +1501,50 @@
         self.vcs = vcs
         self.svn = self.vcs.svn()
         self.vcs_name = self.caller.get_vcs_name()
-            
+
         self.paths = paths
         self.revisions = revisions
 
     def find_parent(self, revision):
         if ("parents" in revision) and len(revision["parents"]) > 0:
-            parent = six.text_type(revision["parents"][0])
+            parent = S(revision["parents"][0])
         elif ("next_revision" in revision):
-            parent = six.text_type(revision["next_revision"])
+            parent = S(revision["next_revision"])
         else:
-            parent = six.text_type(int(six.text_type(revision["revision"])) - 1)
+            parent = S(int(S(revision["revision"])) - 1)
 
         return parent
 
     def view_diff_previous_revision(self, widget, data=None):
-        rev = six.text_type(self.revisions[0]["revision"])
+        rev = S(self.revisions[0]["revision"])
 
         parent = self.find_parent(self.revisions[0])
 
-        path_item = self.paths[0]
+        path_item = S(self.paths[0]).unicode()
         url = self.caller.root_url + path_item
         self.caller.view_diff_for_path(url, rev, parent)
 
     def view_diff_revisions(self, widget, data=None):
-        rev_first = six.text_type(self.revisions[0]["revision"])
-        rev_last = six.text_type(self.revisions[-1]["revision"])
-        path_item = self.paths[0]
+        rev_first = S(self.revisions[0]["revision"])
+        rev_last = S(self.revisions[-1]["revision"])
+        path_item = S(self.paths[0]).unicode()
         url = self.caller.root_url + path_item
         self.caller.view_diff_for_path(url, latest_revision_number=rev_last,
                                        earliest_revision_number=rev_first)
 
     def compare_previous_revision(self, widget, data=None):
-        rev = six.text_type(self.revisions[0]["revision"])
-        
+        rev = S(self.revisions[0]["revision"])
+
         parent = self.find_parent(self.revisions[0])
-            
-        path_item = self.paths[0]
+
+        path_item = S(self.paths[0]).unicode()
         url = self.caller.root_url + path_item
         self.caller.view_diff_for_path(url, rev, parent, sidebyside=True)
-    
+
     def compare_revisions(self, widget, data=None):
-        earliest_rev = six.text_type(self.revisions[0]["revision"])
-        latest_rev = six.text_type(self.revisions[-1]["revision"])
-        path_item = self.paths[0]
+        earliest_rev = S(self.revisions[0]["revision"])
+        latest_rev = S(self.revisions[-1]["revision"])
+        path_item = S(self.paths[0]).unicode()
         url = self.caller.root_url + path_item
         self.caller.view_diff_for_path(url,
                                         latest_rev,
@@ -1524,75 +1552,69 @@
                                         earliest_revision_number=earliest_rev)
 
     def show_changes_previous_revision(self, widget, data=None):
-        rev_first = six.text_type(self.revisions[0]["revision"])
-        
+        rev_first = S(self.revisions[0]["revision"])
+        rev_last = S(self.revisions[-1]["revision"])
+
         parent = self.find_parent(self.revisions[0])
 
-        url = self.paths[0]
-        if self.vcs_name == rabbitvcs.vcs.VCS_SVN:
-            url = self.caller.root_url + self.paths[0]
+        url = self.caller.root_url + S(self.paths[0]).unicode()
 
-        rabbitvcs.util.helper.launch_ui_window("changes", [
-            "%s@%s" % (url, parent),
-            "%s@%s" % (url, rev_last),
+        helper.launch_ui_window("changes", [
+            six.u("%s@%s") % (url, parent),
+            six.u("%s@%s") % (url, rev_last),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
-    
+
     def show_changes_revisions(self, widget, data=None):
-        rev_first = six.text_type(self.revisions[0]["revision"])
-        rev_last = six.text_type(self.revisions[-1]["revision"])
+        rev_first = S(self.revisions[0]["revision"])
+        rev_last = S(self.revisions[-1]["revision"])
 
-        url = self.paths[0]
-        if self.vcs_name == rabbitvcs.vcs.VCS_SVN:
-            url = self.caller.root_url + self.paths[0]
-        
-        rabbitvcs.util.helper.launch_ui_window("changes", [
-            "%s@%s" % (url, rev_first),
-            "%s@%s" % (url, rev_last),
+        url = self.caller.root_url + S(self.paths[0]).unicode()
+
+        helper.launch_ui_window("changes", [
+            six.u("%s@%s") % (url, rev_first),
+            six.u("%s@%s") % (url, rev_last),
             "--vcs=%s" % self.caller.get_vcs_name()
         ])
-        
+
 
     def _open(self, widget, data=None):
         for path in self.paths:
-            path = self.caller.root_url + path
-            rabbitvcs.util.helper.launch_ui_window("open", [
-                path, 
-                "--vcs=%s" % self.vcs_name, 
-                "-r", six.text_type(self.revisions[0]["revision"])
+            path = self.caller.root_url + S(path).unicode()
+            helper.launch_ui_window("open", [
+                path,
+                "--vcs=%s" % self.vcs_name,
+                "-r", S(self.revisions[0]["revision"])
             ])
 
     def annotate(self, widget, data=None):
-        url = self.paths[0]
-        if self.vcs_name == rabbitvcs.vcs.VCS_SVN:
-            url = self.caller.root_url + self.paths[0]
-
-        rabbitvcs.util.helper.launch_ui_window("annotate", [
-            url, 
-            "--vcs=%s" % self.vcs_name, 
-            "-r", six.text_type(self.revisions[0]["revision"])
+        url = self.caller.root_url + S(self.paths[0]).unicode()
+        helper.launch_ui_window("annotate", [
+            url,
+            "--vcs=%s" % self.vcs_name,
+            "-r", S(self.revisions[0]["revision"])
         ])
 
 class LogBottomContextMenu:
     """
     Defines context menu items for a table with files
-    
+
     """
     def __init__(self, caller, event, paths, revisions):
-        """    
+        """
         @param  caller: The calling object
         @type   caller: object
-        
+
         @param  base_dir: The curent working directory
         @type   base_dir: string
-        
+
         @param  paths: The selected paths
         @type   paths: list
 
         @param  revision: The selected revision
         @type   revision: rabbitvcs.vcs.Revision object
-        
-        """        
+
+        """
         self.caller = caller
         self.event = event
         self.paths = paths
@@ -1602,14 +1624,14 @@
 
         self.conditions = LogBottomContextMenuConditions(
             self.caller,
-            self.vcs, 
-            self.paths, 
+            self.vcs,
+            self.paths,
             self.revisions
         )
-        
+
         self.callbacks = LogBottomContextMenuCallbacks(
             self.caller,
-            self.vcs, 
+            self.vcs,
             self.paths,
             self.revisions
         )
@@ -1628,7 +1650,7 @@
             (MenuOpen, None),
             (MenuAnnotate, None)
         ]
-        
+
     def show(self):
         if len(self.paths) == 0:
             return
@@ -1654,7 +1676,7 @@
     if not vcs:
         guess = rabbitvcs.vcs.guess(path)
         vcs = guess["vcs"]
-        if not classes_map.has_key(vcs):
+        if not vcs in classes_map:
             from rabbitvcs.ui import VCS_OPT_ERROR
             raise SystemExit(VCS_OPT_ERROR)
 
@@ -1664,9 +1686,10 @@
     if not vcs:
         guess = rabbitvcs.vcs.guess(path)
         vcs = guess["vcs"]
-    
+
     return dialogs_map[vcs](path, ok_callback, multiple)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, VCS_OPT
     (options, paths) = main(
@@ -1676,4 +1699,4 @@
 
     window = log_factory(paths[0], vcs=options.vcs)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/markresolved.py rabbitvcs/rabbitvcs/ui/markresolved.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/markresolved.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/markresolved.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,39 +1,42 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import six.moves._thread
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
 
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.add import Add
 from rabbitvcs.ui.action import SVNAction
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 
 log = Log("rabbitvcs.ui.markresolved")
@@ -42,52 +45,29 @@
 _ = gettext.gettext
 
 class SVNMarkResolved(Add):
-    def __init__(self, paths, base_dir):
-        InterfaceView.__init__(self, "add", "Add")
-
-        self.window = self.get_widget("Add")
-        self.window.set_title(_("Mark as Resolved"))
-
-        self.paths = paths
-        self.base_dir = base_dir
-        self.last_row_clicked = None
-        self.vcs = rabbitvcs.vcs.VCS()
+    def setup(self, window, columns):
+        window.set_title(_("Mark as Resolved"))
         self.svn = self.vcs.svn()
-        self.items = None
         self.statuses = self.svn.STATUSES_FOR_RESOLVE
-        self.files_table = rabbitvcs.ui.widget.Table(
-            self.get_widget("files_table"), 
-            [gobject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_PATH,
-                gobject.TYPE_STRING, gobject.TYPE_STRING, gobject.TYPE_STRING], 
-            [rabbitvcs.ui.widget.TOGGLE_BUTTON, _("Path"), _("Extension"), 
-                _("Text Status"), _("Property Status")],
-            filters=[{
-                "callback": rabbitvcs.ui.widget.path_filter,
-                "user_data": {
-                    "base_dir": base_dir,
-                    "column": 1
-                }
-            }],
-            callbacks={
-                "row-activated":  self.on_files_table_row_activated,
-                "mouse-event":   self.on_files_table_mouse_event,
-                "key-event":     self.on_files_table_key_event
-            }
-        )
-
-        self.initialize_items()
+        columns[0] = [GObject.TYPE_BOOLEAN,
+                rabbitvcs.ui.widget.TYPE_HIDDEN_OBJECT,
+                rabbitvcs.ui.widget.TYPE_PATH,
+                GObject.TYPE_STRING, GObject.TYPE_STRING, GObject.TYPE_STRING],
+        columns[1] = [rabbitvcs.ui.widget.TOGGLE_BUTTON, "", _("Path"),
+                _("Extension"), _("Text Status"), _("Property Status")]
 
     def populate_files_table(self):
         self.files_table.clear()
         for item in self.items:
             self.files_table.append([
-                True, 
-                item.path, 
-                rabbitvcs.util.helper.get_file_extension(item.path),
+                True,
+                S(item.path),
+                item.path,
+                helper.get_file_extension(item.path),
                 item.simple_content_status(),
                 item.simple_metadata_status()
             ])
-                    
+
     def on_ok_clicked(self, widget):
         items = self.files_table.get_activated_rows(1)
         if not items:
@@ -99,14 +79,14 @@
             self.svn,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Mark as Resolved"))
         self.action.append(self.action.set_status, _("Running Resolved Command..."))
         for item in items:
             self.action.append(self.svn.resolve, item, recurse=True)
         self.action.append(self.action.set_status, _("Completed Mark as Resolved"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 classes_map = {
     rabbitvcs.vcs.VCS_SVN: SVNMarkResolved
@@ -115,7 +95,8 @@
 def markresolved_factory(paths, base_dir=None):
     guess = rabbitvcs.vcs.guess(paths[0])
     return classes_map[guess["vcs"]](paths, base_dir)
-        
+
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT
     (options, paths) = main(
@@ -125,4 +106,4 @@
 
     window = markresolved_factory(paths, options.base_dir)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/merge.py rabbitvcs/rabbitvcs/ui/merge.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/merge.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/merge.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,63 +1,65 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import cgi
+from rabbitvcs.util import helper
 
-import pygtk
-import gobject
-import gtk
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.log import SVNLogDialog
 from rabbitvcs.ui.action import SVNAction
 import rabbitvcs.vcs
 import rabbitvcs.ui.widget
-import rabbitvcs.util.helper
+import rabbitvcs.util.settings
+from rabbitvcs.util.strings import S
 
 from rabbitvcs import gettext
-import six
 _ = gettext.gettext
 
 class SVNMerge(InterfaceView):
     def __init__(self, path, revision_range = None):
         InterfaceView.__init__(self, "merge", "Merge")
-        
+
         self.revision_range = revision_range
-        
+
         self.assistant = self.get_widget("Merge")
-        
+
         self.path = path
-        
+
         self.page = self.assistant.get_nth_page(0)
         self.last_page = None
-        
+
         self.vcs = rabbitvcs.vcs.VCS()
         self.svn = self.vcs.svn()
-        
+
         if not self.svn.has_merge2():
             self.get_widget("mergetype_range_opt").set_sensitive(False)
             self.get_widget("mergetype_tree_opt").set_active(True)
-            self.get_widget("mergetype_reintegrate_opt").set_active(False) 
+            self.get_widget("mergetype_reintegrate_opt").set_active(False)
             self.get_widget("mergeoptions_only_record").set_active(False)
 
         if not self.svn.has_merge_reintegrate():
@@ -65,8 +67,8 @@
 
         self.assistant.set_page_complete(self.page, True)
         self.assistant.set_forward_page_func(self.on_forward_clicked)
-        
-        self.repo_paths = rabbitvcs.util.helper.get_repository_paths()
+
+        self.repo_paths = helper.get_repository_paths()
 
         # Keeps track of which stages should be marked as complete
         self.type = None
@@ -79,7 +81,7 @@
             notification=False,
             run_in_thread=False
         )
-        
+
         self.root_url = action.run_single(
             self.svn.get_repo_url,
             self.path
@@ -89,19 +91,19 @@
     #
     # Assistant UI Signal Callbacks
     #
-    
+
     def on_apply_clicked(self, widget):
         self.merge()
-    
+
     def on_test_clicked(self, widget):
-        self.merge(test=True)    
+        self.merge(test=True)
+
 
-   
 
     def merge(self, test=False):
         if self.type is None:
             return
-        
+
         if test:
             startcmd = _("Running Merge Test")
             endcmd = _("Completed Merge Test")
@@ -112,7 +114,7 @@
 
         recursive = self.get_widget("mergeoptions_recursive").get_active()
         ignore_ancestry = self.get_widget("mergeoptions_ignore_ancestry").get_active()
-        
+
         record_only = False
         if self.svn.has_merge2():
             record_only = self.get_widget("mergeoptions_only_record").get_active()
@@ -120,12 +122,12 @@
         action = SVNAction(self.svn, register_gtk_quit=(not test))
         action.append(action.set_header, _("Merge"))
         action.append(action.set_status, startcmd)
-        
+
         args = ()
         kwargs = {}
-        
+
         if self.type == "range":
-            url = self.get_widget("mergerange_from_urls").get_active_text()
+            url = self.mergerange_repos.get_active_text()
             head_revision = self.svn.get_head(self.path)
             revisions = self.get_widget("mergerange_revisions").get_text()
             if revisions == "":
@@ -146,7 +148,7 @@
                     high = int(r)
                     low = high - 1
 
-                # Before pysvn v1.6.3, there was a bug that required the ranges 
+                # Before pysvn v1.6.3, there was a bug that required the ranges
                 # tuple to have three elements, even though only two were used
                 # Fixed in Pysvn Revision 1114
                 if (self.svn.interface == "pysvn" and self.svn.is_version_less_than((1,6,3,0))):
@@ -161,8 +163,8 @@
                         self.svn.revision("number", number=high).primitive(),
                     ))
 
-            action.append(rabbitvcs.util.helper.save_repository_path, url)
-            
+            action.append(helper.save_repository_path, url)
+
             # Build up args and kwargs because some args are not supported
             # with older versions of pysvn/svn
             args = (
@@ -183,8 +185,8 @@
             url = self.merge_reintegrate_repos.get_active_text()
             revision = self.merge_reintegrate_revision.get_revision_object()
 
-            action.append(rabbitvcs.util.helper.save_repository_path, url)
-            
+            action.append(helper.save_repository_path, url)
+
             # Build up args and kwargs because some args are not supported
             # with older versions of pysvn/svn
             args = (
@@ -198,14 +200,14 @@
             }
 
         elif self.type == "tree":
-            from_url = self.get_widget("mergetree_from_urls").get_active_text()
+            from_url = self.mergetree_from_repos.get_active_text()
             from_revision = self.svn.revision("head")
             if self.get_widget("mergetree_from_revision_number_opt").get_active():
                 from_revision = self.svn.revision(
                     "number",
                     number=int(self.get_widget("mergetree_from_revision_number").get_text())
                 )
-            to_url = self.get_widget("mergetree_to_urls").get_active_text()
+            to_url = self.mergetree_to_repos.get_active_text()
             to_revision = self.svn.revision("head")
             if self.get_widget("mergetree_to_revision_number_opt").get_active():
                 to_revision = self.svn.revision(
@@ -213,8 +215,8 @@
                     number=int(self.get_widget("mergetree_to_revision_number").get_text())
                 )
 
-            action.append(rabbitvcs.util.helper.save_repository_path, from_url)
-            action.append(rabbitvcs.util.helper.save_repository_path, to_url)
+            action.append(helper.save_repository_path, from_url)
+            action.append(helper.save_repository_path, to_url)
 
             # Build up args and kwargs because some args are not supported
             # with older versions of pysvn/svn
@@ -230,24 +232,24 @@
                 "recurse": recursive,
                 "dry_run": test
             }
-        
+
         if len(args) > 0:
-            action.append(*args, **kwargs) 
-                       
+            action.append(*args, **kwargs)
+
         action.append(action.set_status, endcmd)
         action.append(action.finish)
-        action.start()
+        action.schedule()
 
     def on_prepare(self, widget, page):
         self.page = page
-        
+
         current = self.assistant.get_current_page()
         if current == 1:
             self.on_mergerange_prepare()
         elif current == 2:
-            self.on_merge_reintegrate_prepare()
-        elif current == 3:
             self.on_mergetree_prepare()
+        elif current == 3:
+            self.on_merge_reintegrate_prepare()
         elif current == 4:
             self.on_mergeoptions_prepare()
 
@@ -260,47 +262,48 @@
                 next = 1
                 self.type = "range"
                 if self.revision_range:
-                    self.get_widget("mergerange_revisions").set_text(self.revision_range)
-            elif self.get_widget("mergetype_reintegrate_opt").get_active():
-                next = 2
-                self.type = "reintegrate"
+                    self.get_widget("mergerange_revisions").set_text(S(self.revision_range).display())
             elif self.get_widget("mergetype_tree_opt").get_active():
-                next = 3
+                next = 2
                 self.type = "tree"
+            elif self.get_widget("mergetype_reintegrate_opt").get_active():
+                next = 3
+                self.type = "reintegrate"
         else:
             next = 4
-        
+
         return next
 
     #
     # Step 2a: Merge a Range of Revisions
     #
-    
+
     def on_mergerange_prepare(self):
         if not hasattr(self, "mergerange_repos"):
             self.mergerange_repos = rabbitvcs.ui.widget.ComboBox(
-                self.get_widget("mergerange_from_urls"), 
+                self.get_widget("mergerange_from_urls"),
                 self.repo_paths
             )
             self.mergerange_repos.set_child_text(self.root_url)
-            self.get_widget("mergerange_working_copy").set_text(self.path)
-        
+            self.get_widget("mergerange_working_copy").set_text(S(self.path).display())
+
         self.mergerange_check_ready()
-        
+
     def on_mergerange_show_log1_clicked(self, widget):
         merge_candidate_revisions = self.svn.find_merge_candidate_revisions(
-            self.get_widget("mergerange_from_urls").get_active_text(),
+            self.mergerange_repos.get_active_text(),
             self.path
         )
         SVNLogDialog(
-            self.get_widget("mergerange_from_urls").get_active_text(),
-            ok_callback=self.on_mergerange_log1_closed, 
+            self.mergerange_repos.get_active_text(),
+            ok_callback=self.on_mergerange_log1_closed,
             multiple=True,
             merge_candidate_revisions=merge_candidate_revisions
         )
-    
+
     def on_mergerange_log1_closed(self, data):
-        self.get_widget("mergerange_revisions").set_text(data)
+        if not data is None:
+            self.get_widget("mergerange_revisions").set_text(S(data).display())
 
     def on_mergerange_from_urls_changed(self, widget):
         self.mergerange_check_ready()
@@ -310,14 +313,14 @@
 
     def mergerange_check_ready(self):
         ready = True
-        if self.get_widget("mergerange_from_urls").get_active_text() == "":
+        if self.mergerange_repos.get_active_text() == "":
             ready = False
 
         self.assistant.set_page_complete(self.page, ready)
 
         allow_log = False
-        if self.get_widget("mergerange_from_urls").get_active_text():
-            allow_log = True        
+        if self.mergerange_repos.get_active_text():
+            allow_log = True
         self.get_widget("mergerange_show_log1").set_sensitive(allow_log)
 
     #
@@ -327,11 +330,11 @@
     def on_merge_reintegrate_prepare(self):
         if not hasattr(self, "merge_reintegrate_repos"):
             self.merge_reintegrate_repos = rabbitvcs.ui.widget.ComboBox(
-                self.get_widget("merge_reintegrate_repos"), 
+                self.get_widget("merge_reintegrate_repos"),
                 self.repo_paths
             )
             self.merge_reintegrate_repos.cb.connect("changed", self.on_merge_reintegrate_from_urls_changed)
-            self.get_widget("merge_reintegrate_working_copy").set_text(self.path)
+            self.get_widget("merge_reintegrate_working_copy").set_text(S(self.path).display())
 
         if not hasattr(self, "merge_reintegrate_revision"):
             self.merge_reintegrate_revision = rabbitvcs.ui.widget.RevisionSelector(
@@ -348,13 +351,13 @@
     def on_repo_chooser_closed(self, new_url):
         self.merge_reintegrate_repos.set_child_text(new_url)
         self.merge_reintegrate_check_ready()
-        
+
     def on_merge_reintegrate_from_urls_changed(self, widget):
         self.merge_reintegrate_check_ready()
-    
+
     def merge_reintegrate_check_ready(self):
         ready = True
-        if self.get_widget("merge_reintegrate_repos").get_active_text() == "":
+        if self.merge_reintegrate_repos.get_active_text() == "":
             ready = False
 
         self.assistant.set_page_complete(self.page, ready)
@@ -362,44 +365,44 @@
     #
     # Step 2c: Merge two different trees
     #
-    
+
     def on_mergetree_prepare(self):
         if not hasattr(self, "mergetree_from_repos"):
             self.mergetree_from_repos = rabbitvcs.ui.widget.ComboBox(
-                self.get_widget("mergetree_from_urls"), 
+                self.get_widget("mergetree_from_urls"),
                 self.repo_paths
             )
             self.mergetree_to_repos = rabbitvcs.ui.widget.ComboBox(
-                self.get_widget("mergetree_to_urls"), 
+                self.get_widget("mergetree_to_urls"),
                 self.repo_paths
             )
-            self.get_widget("mergetree_working_copy").set_text(self.path)
+            self.get_widget("mergetree_working_copy").set_text(S(self.path).display())
 
     def on_mergetree_from_show_log_clicked(self, widget):
         SVNLogDialog(
             self.path,
-            ok_callback=self.on_mergetree_from_show_log_closed, 
+            ok_callback=self.on_mergetree_from_show_log_closed,
             multiple=False
         )
 
     def on_mergetree_from_show_log_closed(self, data):
-        self.get_widget("mergetree_from_revision_number").set_text(data)
+        self.get_widget("mergetree_from_revision_number").set_text(S(data).display())
         self.get_widget("mergetree_from_revision_number_opt").set_active(True)
 
     def on_mergetree_to_show_log_clicked(self, widget):
         SVNLogDialog(
             self.path,
-            ok_callback=self.on_mergetree_to_show_log_closed, 
+            ok_callback=self.on_mergetree_to_show_log_closed,
             multiple=False
         )
 
     def on_mergetree_to_show_log_closed(self, data):
-        self.get_widget("mergetree_to_revision_number").set_text(data)
+        self.get_widget("mergetree_to_revision_number").set_text(S(data).display())
         self.get_widget("mergetree_to_revision_number_opt").set_active(True)
 
     def on_mergetree_working_copy_show_log_clicked(self, widget):
         SVNLogDialog(self.path)
-        
+
     def on_mergetree_from_revision_number_focused(self, widget, data):
         self.get_widget("mergetree_from_revision_number_opt").set_active(True)
 
@@ -414,19 +417,19 @@
 
     def mergetree_check_ready(self):
         ready = True
-        if self.get_widget("mergetree_from_urls").get_active_text() == "":
+        if self.mergetree_from_repos.get_active_text() == "":
             ready = False
-        if self.get_widget("mergetree_to_urls").get_active_text() == "":
+        if self.mergetree_to_repos.get_active_text() == "":
             ready = False
 
         self.assistant.set_page_complete(self.page, ready)
- 
+
     #
     # Step 3: Merge Options
     #
-    
+
     def on_mergeoptions_prepare(self):
-        if self.last_page == 2:
+        if self.last_page == 3:
             self.get_widget("mergeoptions_recursive").hide()
             self.get_widget("mergeoptions_ignore_ancestry").hide()
             self.get_widget("mergeoptions_only_record").hide()
@@ -434,7 +437,7 @@
             self.get_widget("mergeoptions_recursive").show()
             self.get_widget("mergeoptions_ignore_ancestry").show()
             self.get_widget("mergeoptions_only_record").show()
-            
+
         self.assistant.set_page_complete(self.page, True)
 
 class BranchMerge(InterfaceView):
@@ -445,11 +448,14 @@
         self.branch = branch
         self.vcs = rabbitvcs.vcs.VCS()
 
-        
+        sm = rabbitvcs.util.settings.SettingsManager()
+        self.datetime_format = sm.get("general", "datetime_format")
+
+
     def on_cancel_clicked(self, widget, data=None):
         self.close()
 
-           
+
 
 class GitMerge(BranchMerge):
     def __init__(self, path, branch=None):
@@ -466,12 +472,12 @@
             expand=True,
             revision_changed_callback=self.__revision_changed
         )
-        
+
         self.update_branch_info()
 
         self.active_branch = self.git.get_active_branch()
         if self.active_branch:
-            self.get_widget("to_branch").set_text(self.active_branch.name + " (" + self.active_branch.revision[0:7] + ")")
+            self.get_widget("to_branch").set_text(S(self.active_branch.name + " (" + self.active_branch.revision[0:7] + ")").display())
         else:
             self.get_widget("to_branch").set_text(_("No active branch"))
 
@@ -481,56 +487,56 @@
         self.info = {"from":{}, "to":{}}
 
         # FROM BRANCH INFO #
-        from_container = self.get_widget("from_branch_info")
-        
+        from_container = rabbitvcs.ui.widget.Box(self.get_widget("from_branch_info"), vertical = True)
+
         # Set up the Author line
-        author = gtk.Label(_("Author:"))
+        author = Gtk.Label(label = _("Author:"))
         author.set_size_request(90, -1)
         author.set_properties(xalign=0,yalign=0)
-        self.info['from']['author'] = gtk.Label("")
+        self.info['from']['author'] = Gtk.Label(label = "")
         self.info['from']['author'].set_properties(xalign=0,yalign=0,selectable=True)
         self.info['from']['author'].set_line_wrap(True)
-        author_container = gtk.HBox(False, 0)
+        author_container = rabbitvcs.ui.widget.Box()
         author_container.pack_start(author, False, False, 0)
         author_container.pack_start(self.info['from']['author'], False, False, 0)
         from_container.pack_start(author_container, False, False, 0)
 
         # Set up the Date line
-        date = gtk.Label(_("Date:"))
+        date = Gtk.Label(label = _("Date:"))
         date.set_size_request(90, -1)
         date.set_properties(xalign=0,yalign=0)
-        self.info['from']['date'] = gtk.Label("")
+        self.info['from']['date'] = Gtk.Label(label = "")
         self.info['from']['date'].set_properties(xalign=0,yalign=0,selectable=True)
-        date_container = gtk.HBox(False, 0)
+        date_container = rabbitvcs.ui.widget.Box()
         date_container.pack_start(date, False, False, 0)
         date_container.pack_start(self.info['from']['date'], False, False, 0)
         from_container.pack_start(date_container, False, False, 0)
 
         # Set up the Revision line
-        revision = gtk.Label(_("Revision:"))
+        revision = Gtk.Label(label = _("Revision:"))
         revision.set_size_request(90, -1)
         revision.set_properties(xalign=0,yalign=0)
-        self.info['from']['revision'] = gtk.Label("")
+        self.info['from']['revision'] = Gtk.Label(label = "")
         self.info['from']['revision'].set_properties(xalign=0,selectable=True)
         self.info['from']['revision'].set_line_wrap(True)
-        revision_container = gtk.HBox(False, 0)
+        revision_container = rabbitvcs.ui.widget.Box()
         revision_container.pack_start(revision, False, False, 0)
         revision_container.pack_start(self.info['from']['revision'], False, False, 0)
         from_container.pack_start(revision_container, False, False, 0)
 
         # Set up the Log Message line
-        message = gtk.Label(_("Message:"))
+        message = Gtk.Label(label = _("Message:"))
         message.set_size_request(90, -1)
         message.set_properties(xalign=0,yalign=0)
-        self.info['from']['message'] = gtk.Label("")
+        self.info['from']['message'] = Gtk.Label(label = "")
         self.info['from']['message'].set_properties(xalign=0,yalign=0,selectable=True)
         self.info['from']['message'].set_line_wrap(True)
         self.info['from']['message'].set_size_request(250, -1)
-        message_container = gtk.HBox(False, 0)
+        message_container = rabbitvcs.ui.widget.Box()
         message_container.pack_start(message, False, False, 0)
         message_container.pack_start(self.info['from']['message'], False, False, 0)
         from_container.pack_start(message_container, False, False, 0)
-        
+
         from_container.show_all()
 
     def update_branch_info(self):
@@ -540,24 +546,24 @@
             log = self.git.log(self.path, limit=1, revision=from_branch, showtype="branch")
             if log:
                 from_info = log[0]
-                self.info['from']['author'].set_text(from_info.author)
-                self.info['from']['date'].set_text(rabbitvcs.util.helper.format_datetime(from_info.date))
-                self.info['from']['revision'].set_text(six.text_type(from_info.revision)[0:7])
-                self.info['from']['message'].set_text(cgi.escape(rabbitvcs.util.helper.format_long_text(from_info.message, 500)))
+                self.info['from']['author'].set_text(S(from_info.author).display())
+                self.info['from']['date'].set_text(helper.format_datetime(from_info.date, self.datetime_format))
+                self.info['from']['revision'].set_text(S(from_info.revision).display()[0:7])
+                self.info['from']['message'].set_text(S(helper.html_escape(helper.format_long_text(from_info.message, 500))).display())
 
     def on_from_branches_changed(self, widget):
         self.update_branch_info()
 
     def on_ok_clicked(self, widget, data=None):
         self.hide()
-        
+
         from_branch = self.from_branches.get_revision_object()
-        
+
         self.action = rabbitvcs.ui.action.GitAction(
             self.git,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Merge"))
         self.action.append(self.action.set_status, _("Running Merge Command..."))
         self.action.append(
@@ -567,12 +573,12 @@
 
         self.action.append(self.action.set_status, _("Completed Merge"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def __revision_changed(self, widget):
         self.update_branch_info()
 
-           
+
 
 if __name__ == "__main__":
     from rabbitvcs.ui import main, VCS_OPT
@@ -585,8 +591,8 @@
 
     vcs_name = options.vcs
     if not vcs_name:
-        vcs_name = rabbitvcs.vcs.guess(path)["vcs"]    
-    
+        vcs_name = rabbitvcs.vcs.guess(path)["vcs"]
+
     window = None
     revision_text = None
     if len(args) >= 2:
@@ -595,8 +601,8 @@
     if vcs_name == rabbitvcs.vcs.VCS_SVN:
         window = SVNMerge(path, revision_text)
         window.register_gtk_quit()
-        gtk.main()
+        Gtk.main()
     elif vcs_name == rabbitvcs.vcs.VCS_GIT:
         window = GitMerge(path, revision_text)
         window.register_gtk_quit()
-        gtk.main()
+        Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/open.py rabbitvcs/rabbitvcs/ui/open.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/open.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/open.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -24,41 +24,47 @@
 from os import getcwd
 import os.path
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceNonView
 from rabbitvcs.ui.action import SVNAction, GitAction
 
 import rabbitvcs.vcs
+from rabbitvcs.util.strings import S
 
 from rabbitvcs import gettext
-import six
 _ = gettext.gettext
 
+import six
+
 class SVNOpen(InterfaceNonView):
     """
     This class provides a handler to open tracked files.
-    
+
     """
 
     def __init__(self, path, revision):
         """
         @type   path: string
         @param  path: The path to open
-        
+
         @type   revision: string
         @param  revision: The revision of the file to open
-        
+
         """
-        
+
         InterfaceNonView.__init__(self)
 
         self.vcs = rabbitvcs.vcs.VCS()
         self.svn = self.vcs.svn()
 
-        if revision and type(revision) in (str, six.text_type):
+        if revision and isinstance(revision, (str, six.text_type)):
             revision_obj = self.svn.revision("number", number=revision)
         else:
             revision_obj = self.svn.revision("HEAD")
@@ -66,35 +72,35 @@
         url = path
         if not self.svn.is_path_repository_url(path):
             url = self.svn.get_repo_root_url(path) + '/' + path
-        dest = rabbitvcs.util.helper.get_tmp_path("rabbitvcs-" + revision + "-" + os.path.basename(path))
-        
+        dest = helper.get_tmp_path("rabbitvcs-" + revision + "-" + os.path.basename(path))
+
         self.svn.export(
             url,
             dest,
             revision=revision_obj,
             force=True
         )
-        
-        rabbitvcs.util.helper.open_item(dest)
+
+        helper.open_item(dest)
 
         raise SystemExit()
 
 class GitOpen(InterfaceNonView):
     """
     This class provides a handler to open tracked files.
-    
+
     """
 
     def __init__(self, path, revision):
         """
         @type   path: string
         @param  path: The path to open
-        
+
         @type   revision: string
         @param  revision: The revision of the file to open
-        
+
         """
-        
+
         InterfaceNonView.__init__(self)
 
         self.vcs = rabbitvcs.vcs.VCS()
@@ -105,22 +111,22 @@
         else:
             revision_obj = self.git.revision("HEAD")
 
-        dest_dir = rabbitvcs.util.helper.get_tmp_path("rabbitvcs-" + six.text_type(revision))
-        
+        dest_dir = helper.get_tmp_path("rabbitvcs-" + S(revision))
+
         self.git.export(
             path,
             dest_dir,
             revision=revision_obj
         )
-        
+
         repo_path = self.git.find_repository_path(path)
         relative_path = path
         if path.startswith(repo_path):
             relative_path = path[len(repo_path)+1:]
-        
+
         dest_path = "%s/%s" % (dest_dir, relative_path)
-        
-        rabbitvcs.util.helper.open_item(dest_path)
+
+        helper.open_item(dest_path)
 
         raise SystemExit()
 
@@ -133,16 +139,17 @@
     if not vcs:
         guess = rabbitvcs.vcs.guess(path)
         vcs = guess["vcs"]
-        
+
     return classes_map[vcs](path, revision)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, REVISION_OPT, VCS_OPT
     (options, paths) = main(
         [REVISION_OPT, VCS_OPT],
         usage="Usage: rabbitvcs open path [-r REVISION]"
     )
-    
+
     window = open_factory(options.vcs, paths[0], options.revision)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/properties.py rabbitvcs/rabbitvcs/ui/properties.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/properties.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/properties.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,34 +1,39 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.vcs
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 
 log = Log("rabbitvcs.ui.properties")
@@ -40,7 +45,7 @@
     """
     Provides an interface to add/edit/delete properties on versioned
     items in the working copy.
-    
+
     """
 
     selected_row = None
@@ -51,20 +56,20 @@
 
         self.path = path
         self.delete_stack = []
-        
+
         self.get_widget("Properties").set_title(
             _("Properties - %s") % path
         )
-        
-        self.get_widget("path").set_text(path)
-        
+
+        self.get_widget("path").set_text(S(path).display())
+
         self.table = rabbitvcs.ui.widget.Table(
             self.get_widget("table"),
-            [gobject.TYPE_BOOLEAN, gobject.TYPE_STRING, gobject.TYPE_STRING], 
+            [GObject.TYPE_BOOLEAN, GObject.TYPE_STRING, GObject.TYPE_STRING],
             [rabbitvcs.ui.widget.TOGGLE_BUTTON, _("Name"), _("Value")]
         )
         self.table.allow_multiple()
-        
+
         self.vcs = rabbitvcs.vcs.VCS()
 
     #
@@ -74,13 +79,13 @@
 
     def on_ok_clicked(self, widget):
         self.save()
-        
+
     def on_new_clicked(self, widget):
         dialog = rabbitvcs.ui.dialog.Property()
         name,value,recurse = dialog.run()
         if name:
             self.table.append([recurse,name,value])
-    
+
     def on_edit_clicked(self, widget):
         (recurse,name,value) = self.get_selected_name_value()
         dialog = rabbitvcs.ui.dialog.Property(name, value)
@@ -91,19 +96,19 @@
     def on_delete_clicked(self, widget, data=None):
         if not self.selected_rows:
             return
-            
+
         for i in self.selected_rows:
             row = self.table.get_row(i)
             self.delete_stack.append([row[0],row[1]])
-            
+
         self.table.remove_multiple(self.selected_rows)
 
     def on_table_cursor_changed(self, treeview, data=None):
         self.on_table_event(treeview)
-    
+
     def on_table_button_released(self, treeview, data=None):
         self.on_table_event(treeview)
-    
+
     def on_table_event(self, treeview):
         selection = treeview.get_selection()
         (liststore, indexes) = selection.get_selected_rows()
@@ -128,10 +133,10 @@
     #
     # Helper methods
     #
-    
+
     def set_selected_name_value(self, name, value, recurse):
         self.table.set_row(self.selected_rows[0], [recurse,name,value])
-        
+
     def get_selected_name_value(self):
         returner = None
         if self.selected_rows is not None:
@@ -152,14 +157,14 @@
             log.exception(e)
             rabbitvcs.ui.dialog.MessageBox(_("Unable to retrieve properties list"))
             self.proplist = []
-        
+
         if self.proplist:
             for key,val in list(self.proplist.items()):
                 self.table.append([False, key,val.rstrip()])
 
     def save(self):
         delete_recurse = self.get_widget("delete_recurse").get_active()
-        
+
         for row in self.delete_stack:
             self.svn.propdel(self.path, row[1], recurse=delete_recurse)
 
@@ -169,16 +174,17 @@
                              overwrite=True, recurse=row[0])):
                 failure = True
                 break
-        
+
         if failure:
             rabbitvcs.ui.dialog.MessageBox(_("There was a problem saving your properties."))
 
         self.close()
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, paths) = main(usage="Usage: rabbitvcs properties [url_or_path]")
-    
+
     window = SVNProperties(paths[0])
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/property_editor.py rabbitvcs/rabbitvcs/ui/property_editor.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/property_editor.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/property_editor.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,19 +1,19 @@
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2009 by Jason Heeris <jason.heeris@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -33,9 +33,13 @@
 
 import os.path
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.util.contextmenu import GtkContextMenu, GtkContextMenuCaller
@@ -44,7 +48,7 @@
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.vcs
-from rabbitvcs.util.helper import format_long_text
+from rabbitvcs.util.strings import S
 from rabbitvcs.vcs.svn import Revision
 from rabbitvcs.util.log import Log
 
@@ -61,7 +65,7 @@
 
 RECURSIVE_DELETE_MSG = _("""\
 Do you want to delete the selected properties from all files and subdirectories
-beneath this directory?""") 
+beneath this directory?""")
 
 PROP_MENU_STRUCTURE = [
     (rabbitvcs.util.contextmenuitems.PropMenuEdit, None),
@@ -73,7 +77,7 @@
 class PropEditor(InterfaceView, GtkContextMenuCaller):
     '''
     User interface for the property editor.
-    
+
     The UI is basically an "instant update" editor, that is as soon as you add a
     property in the dialog, it is actually added in the WC. Each row has a
     context menu available to perform other actions.
@@ -85,33 +89,34 @@
         Initialises the UI.
         '''
         InterfaceView.__init__(self, "property_editor", "PropertyEditor")
-        
+
         note = rabbitvcs.ui.wraplabel.WrapLabel(PROP_EDITOR_NOTE)
+        note.set_hexpand(True)
         note.set_use_markup(True)
-        
-        self.get_widget("note_box").pack_start(note)        
+
+        self.get_widget("note_box").add(note)
         self.get_widget("note_box").show_all()
-                
+
         self.path = path
-        
-        self.get_widget("wc_text").set_text(self.get_local_path(os.path.realpath(path)))
-                
+
+        self.get_widget("wc_text").set_text(S(self.get_local_path(os.path.realpath(path))).display())
+
         self.vcs = rabbitvcs.vcs.VCS()
         self.svn = self.vcs.svn()
-                
+
         if not self.svn.is_versioned(self.path):
             rabbitvcs.ui.dialog.MessageBox(_("File is not under version control."))
             self.close()
             return
-        
-        self.get_widget("remote_uri_text").set_text(self.svn.get_repo_url(path))
-               
+
+        self.get_widget("remote_uri_text").set_text(S(self.svn.get_repo_url(path)).display())
+
         self.table = rabbitvcs.ui.widget.Table(
             self.get_widget("table"),
-            [gobject.TYPE_STRING, rabbitvcs.ui.widget.TYPE_ELLIPSIZED,
-             gobject.TYPE_STRING, rabbitvcs.ui.widget.TYPE_STATUS], 
+            [GObject.TYPE_STRING, rabbitvcs.ui.widget.TYPE_ELLIPSIZED,
+             GObject.TYPE_STRING, rabbitvcs.ui.widget.TYPE_STATUS],
             [_("Name"), _("Value"), _("Reserved"), _("Status")],
-            
+
             filters=[
                 {
                     "callback": rabbitvcs.ui.widget.long_text_filter,
@@ -120,14 +125,14 @@
                         "column": 1
                     }
                 },
-                
+
                 {
                     "callback": rabbitvcs.ui.widget.translate_filter,
                     "user_data": {
                         "column": 3
                     }
                 }],
-                
+
             callbacks={
                 "row-activated":  self.on_table_row_activated,
                 "mouse-event":   self.on_table_mouse_event,
@@ -135,7 +140,7 @@
             }
         )
         self.table.allow_multiple()
-        
+
         self.refresh()
 
     def get_local_path(self, path):
@@ -143,21 +148,21 @@
 
     def on_note_box_add(self, *args, **kwargs):
         print("Added!")
-    
+
     def refresh(self):
         self.table.clear()
-        
+
         propdets = {}
-                
+
         try:
             propdets = self.svn.propdetails(self.path)
-                       
+
         except Exception as e:
             log.exception(e)
             rabbitvcs.ui.dialog.MessageBox(_("Unable to retrieve properties list"))
-        
+
         for propname, details in list(propdets.items()):
-            
+
             self.table.append(
                 [propname, details["value"], "N/A", details["status"]]
                               )
@@ -169,27 +174,27 @@
         self.edit_property()
 
     def edit_property(self, name=""):
-        
+
         value = self.svn.propget(self.path, name)
-        
+
         dialog = rabbitvcs.ui.dialog.Property(name, value)
-        
+
         name,value,recurse = dialog.run()
         if name:
             success = self.svn.propset(self.path, name, value, overwrite=True, recurse=False)
             if not success:
                 rabbitvcs.ui.dialog.MessageBox(_("Unable to set new value for property."))
-            
+
         self.refresh()
 
     def delete_properties(self, names):
-        
+
         recursive = False
 
         if(os.path.isdir(self.path)):
             dialog = rabbitvcs.ui.dialog.Confirmation(RECURSIVE_DELETE_MSG)
             recursive = dialog.run()
-        
+
         for name in names:
             self.svn.propdel(self.path, name, recurse=recursive)
 
@@ -200,28 +205,28 @@
             self.edit_property(name)
 
     def on_table_key_event(self, treeview, data=None):
-        if gtk.gdk.keyval_name(data.keyval) == "Delete":
+        if Gdk.keyval_name(data.keyval) == "Delete":
             names = self.table.get_selected_row_items(0)
             self.delete_properties(names)
 
     def on_table_mouse_event(self, treeview, data=None):
         if data and data.button == 3:
             self.show_menu(data)
-    
+
     def show_menu(self, data):
         # self.show_files_table_popup_menu(treeview, data)
         selected_propnames = self.table.get_selected_row_items(0)
         propdetails = self.svn.propdetails(self.path)
-        
+
         filtered_details = {}
         for propname, detail in list(propdetails.items()):
             if propname in selected_propnames:
                 filtered_details[propname] = detail
-        
+
         conditions = PropMenuConditions(self.path, filtered_details)
         callbacks = PropMenuCallbacks(self, self.path, filtered_details,
                                       self.vcs)
-        
+
         GtkContextMenu(PROP_MENU_STRUCTURE, conditions, callbacks).show(data)
 
 class PropMenuCallbacks:
@@ -237,53 +242,54 @@
         if list(self.propdetails.keys()):
             propname  = list(self.propdetails.keys())[0]
             self.caller.edit_property(propname)
-            
+
     def property_delete(self, widget, *args):
         for propname in list(self.propdetails.keys()):
             self.svn.propdel(self.path, propname, recurse=False)
         self.caller.refresh()
-    
+
     def property_delete_recursive(self, widget, *args):
         for propname in list(self.propdetails.keys()):
             self.svn.propdel(self.path, propname, recurse=True)
         self.caller.refresh()
-    
+
     def property_revert(self, widget, *args):
         pass
 
     def property_revert_recursive(self, widget, *args):
         pass
 
-        
+
 class PropMenuConditions:
-    
+
     def __init__(self, path, propdetails):
         self.path = path
         self.propdetails = propdetails
-    
+
     def all_modified(self):
         return all([detail["status"] != "unchanged"
                        for (propname, detail) in list(self.propdetails.items())])
-    
+
     def all_not_deleted(self):
         return all([detail["status"] != "deleted"
                        for (propname, detail) in list(self.propdetails.items())])
-    
+
     def property_revert(self):
         return False
         # return self.all_modified()
-    
+
     def property_delete(self):
         return self.all_not_deleted()
-    
+
     def property_edit(self):
         return len(list(self.propdetails.keys())) == 1
 
+
 if __name__ == "__main__":
     # These are some dumb tests before I add any functionality.
     from rabbitvcs.ui import main
     (options, paths) = main(usage="Usage: rabbitvcs propedit [url_or_path]")
-    
+
     window = PropEditor(paths[0])
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/property_page.py rabbitvcs/rabbitvcs/ui/property_page.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/property_page.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/property_page.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,39 +1,31 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2010 by Jason Heeris <jason.heeris@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
+import os
 import os.path
 
-import os
-import six
-if "NAUTILUS_PYTHON_REQUIRE_GTK3" in os.environ and os.environ["NAUTILUS_PYTHON_REQUIRE_GTK3"]:
-    from gi.repository import Gtk as gtk
-    GTK3 = True
-    ICON_SIZE_BUTTON = gtk.IconSize.BUTTON
-    ICON_SIZE_DIALOG = gtk.IconSize.DIALOG
-else:
-    import gtk
-    GTK3 = False
-    ICON_SIZE_BUTTON = gtk.ICON_SIZE_BUTTON
-    ICON_SIZE_DIALOG = gtk.ICON_SIZE_DIALOG
-    
+import gi
+gi.require_version("Gtk", "3.0")
+from gi.repository import Gtk
+
 from collections import defaultdict
 import rabbitvcs.ui
 import rabbitvcs.ui.widget
@@ -42,6 +34,7 @@
 from rabbitvcs.services.checkerservice import StatusCheckerStub as StatusChecker
 from rabbitvcs.ui import STATUS_EMBLEMS
 
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 log = Log("rabbitvcs.ui.property_page")
 
@@ -49,18 +42,18 @@
 _ = gettext.gettext
 
 class PropertyPage(rabbitvcs.ui.GtkBuilderWidgetWrapper):
-    
+
     gtkbuilder_filename = "property_page"
     gtkbuilder_id = "prop_page_scroller"
-    
+
     def __init__(self, paths, vcs=None, claim_domain=True):
         rabbitvcs.ui.GtkBuilderWidgetWrapper.__init__(self,
                                                  claim_domain=claim_domain)
         self.paths = paths
         self.vcs = vcs or rabbitvcs.vcs.VCS()
-        
-        self.info_pane = self.get_widget("property_page") 
-        
+
+        self.info_pane = rabbitvcs.ui.widget.Box(self.get_widget("property_page"), vertical = True)
+
         if len(paths) == 1:
             file_info = FileInfoPane(paths[0], self.vcs,
                                      claim_domain=self.claim_domain)
@@ -72,7 +65,8 @@
             try:
                 for path in paths:
                     expander = FileInfoExpander(path, self.vcs,
-                                                claim_domain=self.claim_domain)
+                                                claim_domain=self.claim_domain,
+                                                indent=12)
                     self.info_pane.pack_start(expander.get_widget(),
                                         expand=False,
                                         fill=False,
@@ -80,32 +74,32 @@
             except Exception as ex:
                 log.exception(ex)
                 raise
-                   
+
 class FileInfoPane(rabbitvcs.ui.GtkBuilderWidgetWrapper):
 
     gtkbuilder_filename = "property_page"
     gtkbuilder_id = "file_info_table"
-    
+
     def __init__(self, path, vcs=None, claim_domain=True):
         rabbitvcs.ui.GtkBuilderWidgetWrapper.__init__(self,
                                                  claim_domain=claim_domain)
-        
+
         self.path = path
         self.vcs = vcs or rabbitvcs.vcs.VCS()
-        self.checker = StatusChecker() 
-               
-        self.get_widget("file_name").set_text(os.path.basename(path))
-        
+        self.checker = StatusChecker()
+
+        self.get_widget("file_name").set_text(S(os.path.basename(path)).display())
+
         self.status = self.checker.check_status(path,
-                                                recurse = False, 
+                                                recurse = False,
                                                 invalidate = False,
                                                 summary = False)
 
-        self.get_widget("vcs_type").set_text(self.status.vcs_type)
-        
-        self.get_widget("content_status").set_text(six.text_type(self.status.simple_content_status()))
-        self.get_widget("prop_status").set_text(six.text_type(self.status.simple_metadata_status()))
-        
+        self.get_widget("vcs_type").set_text(S(self.status.vcs_type).display())
+
+        self.get_widget("content_status").set_text(S(self.status.simple_content_status()).display())
+        self.get_widget("prop_status").set_text(S(self.status.simple_metadata_status()).display())
+
 
         self.set_icon_from_status(self.get_widget("content_status_icon"),
                                                   self.status.simple_content_status())
@@ -113,62 +107,73 @@
         self.set_icon_from_status(self.get_widget("prop_status_icon"),
                                                   self.status.simple_metadata_status())
 
-        
+
 
         self.set_icon_from_status(self.get_widget("vcs_icon"),
-                                  self.status.single, ICON_SIZE_DIALOG)
-        
-        additional_props_table = rabbitvcs.ui.widget.KeyValueTable(
-                                    self.get_additional_info())
-
-        additional_props_table.show()
-
-        self.get_widget("file_info_table").pack_start(additional_props_table,
-                                                        expand=False,
-                                                        fill=False,
-                                                        padding=0)
-                        
-    def set_icon_from_status(self, icon, status, size=ICON_SIZE_BUTTON):
+                                  self.status.single, Gtk.IconSize.DIALOG)
+
+        additional_info = self.get_additional_info()
+        if additional_info:
+            additional_props_table = rabbitvcs.ui.widget.KeyValueTable(
+                                        additional_info)
+            additional_props_table.show()
+
+            file_info_table = rabbitvcs.ui.widget.Box(self.get_widget("file_info_table"), vertical = True)
+            file_info_table.pack_start(additional_props_table,
+                                       expand=False,
+                                       fill=False,
+                                       padding=0)
+
+    def set_icon_from_status(self, icon, status, size=Gtk.IconSize.BUTTON):
         if status in rabbitvcs.ui.STATUS_EMBLEMS:
             icon.set_from_icon_name("emblem-" + STATUS_EMBLEMS[status], size)
 
     def get_additional_info(self):
         vcs_type = rabbitvcs.vcs.guess_vcs(self.path)['vcs']
-                
+
         if(vcs_type == rabbitvcs.vcs.VCS_SVN):
             return self.get_additional_info_svn()
+        elif(vcs_type == rabbitvcs.vcs.VCS_GIT):
+            return self.get_additional_info_git()
         else:
             return []
-                
+
     def get_additional_info_svn(self):
-        
-        repo_url = self.vcs.svn().get_repo_url(self.path)
-        
+
+        repo_url = S(self.vcs.svn().get_repo_url(self.path))
+
+        return [
+            (_("Repository URL"), repo_url)]
+
+    def get_additional_info_git(self):
+
+        repo_url = S(self.vcs.git().config_get(("remote", "origin"), "url"))
         return [
             (_("Repository URL"), repo_url)]
-        
+
 
 class FileInfoExpander(rabbitvcs.ui.GtkBuilderWidgetWrapper):
 
     gtkbuilder_filename = "property_page"
     gtkbuilder_id = "file_info_expander"
 
-    def __init__(self, path, vcs=None, claim_domain=True):
-        
+    def __init__(self, path, vcs=None, claim_domain=True, indent=0):
+
         # Might be None, but that's okay, only subclasses use it
         self.vcs = vcs
-        
+
         rabbitvcs.ui.GtkBuilderWidgetWrapper.__init__(self,
                                                  claim_domain=claim_domain)
         self.path = path
         self.get_widget("file_expander_path").set_label(path)
-        
+
         # Do a lazy evaluate for this
         self.file_info = None
-        
+
         self.expander = self.get_widget()
-        
-        # There seems to be no easy way to connect to this in gtkbuilder
+        self.indent = indent
+
+        # There seems to be no easy way to connect to this in Gtkbuilder
         self.expander.connect("notify::expanded", self.on_expand)
 
     def on_expand(self, param_spec, user_data):
@@ -176,8 +181,9 @@
             self.file_info = FileInfoPane(self.path, self.vcs,
                                           claim_domain=self.claim_domain
                                           ).get_widget()
+            self.file_info.set_margin_start(self.indent)
             self.expander.add(self.file_info)
 
 class PropertyPageLabel(rabbitvcs.ui.GtkBuilderWidgetWrapper):
     gtkbuilder_filename = "property_page"
-    gtkbuilder_id = "property_page_label"    
+    gtkbuilder_id = "property_page_label"
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/push.py rabbitvcs/rabbitvcs/ui/push.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/push.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/push.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,70 +1,75 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os.path
 import six.moves._thread
-
-import pygtk
-import gobject
-import gtk
 from datetime import datetime
 
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
+
 from rabbitvcs.ui import InterfaceView
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
+import rabbitvcs.util.settings
 import rabbitvcs.vcs
 
 from rabbitvcs import gettext
 import six
 _ = gettext.gettext
 
-DATETIME_FORMAT = rabbitvcs.util.helper.DT_FORMAT_THISWEEK
-
-gobject.threads_init()
+helper.gobject_threads_init()
 
 class Push(InterfaceView):
     def __init__(self, path):
         InterfaceView.__init__(self, "push", "Push")
-        
+
         self.path = path
         self.vcs = rabbitvcs.vcs.VCS()
 
+        sm = rabbitvcs.util.settings.SettingsManager()
+        self.datetime_format = sm.get("general", "datetime_format")
+
     #
     # Event handlers
     #
-        
+
     def on_ok_clicked(self, widget, data=None):
         pass
 
-             
+
 class GitPush(Push):
     def __init__(self, path):
         Push.__init__(self, path)
 
         self.git = self.vcs.git(path)
-        
+
         self.repository_selector = rabbitvcs.ui.widget.GitRepositorySelector(
             self.get_widget("repository_container"),
             self.git,
@@ -73,60 +78,59 @@
 
         self.log_table = rabbitvcs.ui.widget.Table(
             self.get_widget("log"),
-            [gobject.TYPE_STRING, gobject.TYPE_STRING], 
+            [GObject.TYPE_STRING, GObject.TYPE_STRING],
             [_("Date"), _("Message")],
             flags={
-                "sortable": True, 
+                "sortable": True,
                 "sort_on": 0
             }
         )
-        
-        # Set default for Include Tags checkbox.
+
+        # Set default for checkboxes.
         self.get_widget("tags").set_active(True)
+        self.get_widget("force_with_lease").set_active(False)
 
         self.initialize_logs()
 
     def on_ok_clicked(self, widget, data=None):
         self.hide()
-    
+
         repository = self.repository_selector.repository_opt.get_active_text()
         branch = self.repository_selector.branch_opt.get_active_text()
         tags = self.get_widget("tags").get_active()
-        
+        force_with_lease = self.get_widget("force_with_lease").get_active()
+
         self.action = rabbitvcs.ui.action.GitAction(
             self.git,
             register_gtk_quit=self.gtk_quit_is_set()
         )
         self.action.append(self.action.set_header, _("Push"))
         self.action.append(self.action.set_status, _("Running Push Command..."))
-        self.action.append(self.git.push, repository, branch, tags)
+        self.action.append(self.git.push, repository, branch, tags, force_with_lease)
         self.action.append(self.action.set_status, _("Completed Push"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def initialize_logs(self):
         """
         Initializes the git logs
         """
-        
+
         try:
             six.moves._thread.start_new_thread(self.load_logs, ())
         except Exception as e:
             log.exception(e)
 
-    def load_logs(self):
-        gtk.gdk.threads_enter()
-        self.get_widget("status").set_text(_("Loading..."))
+    def load_logs_exit(self):
+        self.get_widget("status").set_text("")
+        self.update_widgets()
 
-        gtk.gdk.threads_leave()
+    def load_logs(self):
+        helper.run_in_main_thread(self.get_widget("status").set_text, _("Loading..."))
 
         self.load_push_log()
+        helper.run_in_main_thread(self.load_logs_exit)
 
-        gtk.gdk.threads_enter()
-        self.get_widget("status").set_text("")
-        self.update_widgets()
-        gtk.gdk.threads_leave()
-        
     def load_push_log(self):
         repository = self.repository_selector.repository_opt.get_active_text()
         branch = self.repository_selector.branch_opt.get_active_text()
@@ -140,7 +144,7 @@
 
     def update_widgets(self):
         self.log_table.clear()
-        
+
         repository = self.repository_selector.repository_opt.get_active_text()
         branch = self.repository_selector.branch_opt.get_active_text()
 
@@ -151,8 +155,8 @@
         has_commits = False
         for item in self.push_log:
             self.log_table.append([
-                rabbitvcs.util.helper.format_datetime(item.date),
-                rabbitvcs.util.helper.format_long_text(item.message.rstrip("\n"))
+                helper.format_datetime(item.date, self.datetime_format),
+                helper.format_long_text(item.message.rstrip("\n"))
             ])
             has_commits = True
 
@@ -167,7 +171,8 @@
 def push_factory(path):
     guess = rabbitvcs.vcs.guess(path)
     return classes_map[guess["vcs"]](path)
-    
+
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, paths) = main(
@@ -176,4 +181,4 @@
 
     window = push_factory(paths[0])
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/relocate.py rabbitvcs/rabbitvcs/ui/relocate.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/relocate.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/relocate.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,35 +1,39 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.action import SVNAction
 from rabbitvcs.ui.dialog import MessageBox
 import rabbitvcs.vcs
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 
 from rabbitvcs import gettext
 _ = gettext.gettext
@@ -37,64 +41,65 @@
 class Relocate(InterfaceView):
     """
     Interface to relocate your working copy's repository location.
-    
+
     """
 
     def __init__(self, path):
         """
         @type   path: string
         @param  path: A path to a local working copy
-        
+
         """
-        
+
         InterfaceView.__init__(self, "relocate", "Relocate")
-        
+
 
         self.path = path
         self.vcs = rabbitvcs.vcs.VCS()
         self.svn = self.vcs.svn()
-        
-        repo = self.svn.get_repo_url(self.path)
+
+        repo = S(self.svn.get_repo_url(self.path)).display()
         self.get_widget("from_url").set_text(repo)
         self.get_widget("to_url").set_text(repo)
-        
+
         self.repositories = rabbitvcs.ui.widget.ComboBox(
-            self.get_widget("to_urls"), 
-            rabbitvcs.util.helper.get_repository_paths()
+            self.get_widget("to_urls"),
+            helper.get_repository_paths()
         )
 
     def on_ok_clicked(self, widget):
-    
+
         from_url = self.get_widget("from_url").get_text()
         to_url = self.get_widget("to_url").get_text()
-    
+
         if not from_url or not to_url:
             MessageBox(_("The from and to url fields are both required."))
             return
-    
+
         self.hide()
 
         self.action = SVNAction(
             self.svn,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Relocate"))
         self.action.append(self.action.set_status, _("Running Relocate Command..."))
         self.action.append(
-            self.svn.relocate, 
+            self.svn.relocate,
             from_url,
             to_url,
             self.path
         )
         self.action.append(self.action.set_status, _("Completed Relocate"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
+
 
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, paths) = main(usage="Usage: rabbitvcs relocate [path]")
-            
+
     window = Relocate(paths[0])
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/remotes.py rabbitvcs/rabbitvcs/ui/remotes.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/remotes.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/remotes.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,33 +1,36 @@
 from __future__ import absolute_import
 from __future__ import print_function
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os
 
-import pygtk
-import gobject
-import gtk
-import pango
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk, Pango
+sa.restore()
 
 from datetime import datetime
 import time
@@ -36,7 +39,6 @@
 from rabbitvcs.ui.action import GitAction
 import rabbitvcs.ui.widget
 from rabbitvcs.ui.dialog import DeleteConfirmation
-import rabbitvcs.util.helper
 import rabbitvcs.vcs
 
 from rabbitvcs import gettext
@@ -48,23 +50,24 @@
 class GitRemotes(InterfaceView):
     """
     Provides a UI interface to manage items
-    
+
     """
-    
+
     state = STATE_ADD
-    
+
     def __init__(self, path):
         InterfaceView.__init__(self, "manager", "Manager")
         self.vcs = rabbitvcs.vcs.VCS()
         self.git = self.vcs.git(path)
-        
+
+        self.get_widget("right_side").hide()
         self.get_widget("Manager").set_title(_("Remote Repository Manager"))
         self.get_widget("items_label").set_markup(_("<b>Remote Repositories</b>"))
-        
+
         self.selected_branch = None
         self.items_treeview = rabbitvcs.ui.widget.Table(
             self.get_widget("items_treeview"),
-            [gobject.TYPE_STRING, gobject.TYPE_STRING], 
+            [GObject.TYPE_STRING, GObject.TYPE_STRING],
             [_("Name"), _("Host")],
             callbacks={
                 "mouse-event":   self.on_treeview_mouse_event,
@@ -79,7 +82,7 @@
         )
 
         self.load()
-        
+
     def load(self):
         self.items_treeview.clear()
 
@@ -92,7 +95,7 @@
 
         if row in self.remote_list:
             remote = self.remote_list[row]
-            
+
             name = remote["name"]
             if column == 0:
                 name = data
@@ -100,10 +103,10 @@
             host = remote["host"]
             if column == 1:
                 host = data
-            
+
             if name != remote["name"]:
                 self.git.remote_rename(remote["name"], name)
-            
+
             if host != remote["host"]:
                 self.git.remote_set_url(remote["name"], host)
 
@@ -119,18 +122,18 @@
 
     def on_delete_clicked(self, widget):
         selected = self.items_treeview.get_selected_row_items(0)
-    
+
         confirm = rabbitvcs.ui.dialog.Confirmation(_("Are you sure you want to delete %s?" % ", ".join(selected)))
         result = confirm.run()
-        
-        if result == gtk.RESPONSE_OK or result == True:
+
+        if result == Gtk.ResponseType.OK or result == True:
             for remote in selected:
                 self.git.remote_delete(remote)
-            
+
             self.load()
 
     def on_treeview_key_event(self, treeview, data=None):
-        if gtk.gdk.keyval_name(data.keyval) in ("Up", "Down", "Return"):
+        if Gdk.keyval_name(data.keyval) in ("Up", "Down", "Return"):
             self.on_treeview_event(treeview, data)
 
     def on_treeview_mouse_event(self, treeview, data=None):
@@ -150,17 +153,18 @@
     def show_add(self):
         self.state = STATE_ADD
         self.items_treeview.unselect_all()
-        
+
         self.items_treeview.append(["", ""])
         self.items_treeview.focus(len(self.remote_list), 0)
-    
+
     def show_edit(self, remote_name):
         self.state = STATE_EDIT
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, paths) = main(usage="Usage: rabbitvcs branch-manager path")
-    
+
     window = GitRemotes(paths[0])
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/rename.py rabbitvcs/rabbitvcs/ui/rename.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/rename.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/rename.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,31 +1,35 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os.path
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceNonView
 from rabbitvcs.ui.action import SVNAction
@@ -37,7 +41,7 @@
 
 class Rename(InterfaceNonView):
     DO_RENAME = False
-    
+
     def __init__(self, path):
         InterfaceNonView.__init__(self)
         self.register_gtk_quit()
@@ -45,34 +49,34 @@
         self.vcs = rabbitvcs.vcs.VCS()
 
         self.path = path
-        
+
         if not os.path.exists(self.path):
             MessageBox(_("The requested file or folder does not exist."))
             self.close()
             return
-        
+
         dialog = OneLineTextChange(_("Rename"), _("New Name:"), self.path)
         (result, new_path) = dialog.run()
 
-        if result != gtk.RESPONSE_OK:
+        if result != Gtk.ResponseType.OK:
             self.close()
             return
-       
+
         if not new_path:
             MessageBox(_("The new name field is required"))
-        
+
         self.new_path = new_path
         self.DO_RENAME = True
 
 class SVNRename(Rename):
     def __init__(self, path):
         Rename.__init__(self, path)
-        
+
         if not self.DO_RENAME:
             return
-        
+
         self.svn = self.vcs.svn()
-        
+
         self.action = rabbitvcs.ui.action.SVNAction(
             self.svn,
             register_gtk_quit=self.gtk_quit_is_set()
@@ -86,14 +90,14 @@
         self.action.append(self.action.set_header, _("Rename"))
         self.action.append(self.action.set_status, _("Running Rename Command..."))
         self.action.append(
-            self.svn.move, 
+            self.svn.move,
             self.path,
             self.new_path
         )
         self.action.append(self.action.set_status, _("Completed Rename"))
         self.action.append(self.action.finish)
         self.action.append(self.close)
-        self.action.start()
+        self.action.schedule()
 
 class GitRename(Rename):
     def __init__(self, path):
@@ -101,7 +105,7 @@
 
         if not self.DO_RENAME:
             return
-        
+
         self.git = self.vcs.git(path)
 
         self.action = rabbitvcs.ui.action.GitAction(
@@ -115,14 +119,14 @@
         self.action.append(self.action.set_header, _("Rename"))
         self.action.append(self.action.set_status, _("Running Rename Command..."))
         self.action.append(
-            self.git.move, 
+            self.git.move,
             self.path,
             self.new_path
         )
         self.action.append(self.action.set_status, _("Completed Rename"))
         self.action.append(self.action.finish)
         self.action.append(self.close)
-        self.action.start()
+        self.action.schedule()
 
 classes_map = {
     rabbitvcs.vcs.VCS_SVN: SVNRename,
@@ -133,9 +137,10 @@
     guess = rabbitvcs.vcs.guess(path)
     return classes_map[guess["vcs"]](path)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, paths) = main(usage="Usage: rabbitvcs rename [path]")
-            
+
     window = rename_factory(os.path.abspath(paths[0]))
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/renderers/graphcell.py rabbitvcs/rabbitvcs/ui/renderers/graphcell.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/renderers/graphcell.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/renderers/graphcell.py	2019-09-13 08:36:17.257343196 +0800
@@ -15,16 +15,17 @@
 
 import math
 
-import gtk
-import gobject
-import pango
+import gi
+gi.require_version("Gtk", "3.0")
+from gi.repository import Gtk, GObject, Pango
+
 import cairo
 
 # Styles used when rendering revision graph edges
 style_SOLID = 0
 style_DASHED = 1
 
-class CellRendererGraph(gtk.GenericCellRenderer):
+class CellRendererGraph(Gtk.CellRenderer):
     """Cell renderer for directed graph.
 
     Properties:
@@ -33,12 +34,16 @@
       out_lines         (start, end, colour, style) tuple list to draw outward lines.
     """
 
-    columns_len = 0
+    columns_len = 1
+    _box_size = None
+    node = None
+    in_lines = []
+    out_lines = []
 
     __gproperties__ = {
-        "graph":         ( gobject.TYPE_PYOBJECT, "graph",
+        "graph":         ( GObject.TYPE_PYOBJECT, "graph",
                           "revision node instruction",
-                          gobject.PARAM_WRITABLE
+                          GObject.PARAM_WRITABLE
                         )
         }
 
@@ -49,7 +54,9 @@
             return
 
         if property.name == "graph":
-            (self.node, self.in_lines, self.out_lines) = value
+            self.node = value["node"]
+            self.in_lines = value["in_lines"]
+            self.out_lines = value["out_lines"]
         else:
             raise AttributeError("no such property: '%s'" % property.name)
 
@@ -59,18 +66,8 @@
         Cache this as it's probably expensive to get.  It ensures that we
         draw the graph at least as large as the text.
         """
-        try:
-            return self._box_size
-        except AttributeError:
-            pango_ctx = widget.get_pango_context()
-            font_desc = widget.get_style().font_desc
-            metrics = pango_ctx.get_metrics(font_desc)
-
-            ascent = pango.PIXELS(metrics.get_ascent())
-            descent = pango.PIXELS(metrics.get_descent())
 
-            self._box_size = ascent + descent + 1
-            return self._box_size
+        return 20
 
     def set_colour(self, ctx, colour, bg, fg):
         """Set the context source colour.
@@ -86,9 +83,9 @@
             colour_rgb = int(r, 16) / 255., int(g, 16) / 255., int(b, 16) / 255.
         else:
             if colour == 0:
-                colour_rgb = gtklib.MAINLINE_COLOR
+                colour_rgb = Gtklib.MAINLINE_COLOR
             else:
-                colour_rgb = gtklib.LINE_COLORS[colour % len(gtklib.LINE_COLORS)]
+                colour_rgb = Gtklib.LINE_COLORS[colour % len(Gtklib.LINE_COLORS)]
 
         red   = (colour_rgb[0] * fg) or bg
         green = (colour_rgb[1] * fg) or bg
@@ -96,13 +93,14 @@
 
         ctx.set_source_rgb(red, green, blue)
 
-    def on_get_size(self, widget, cell_area):
+    def do_get_size(self, widget, cell_area):
         """Return the size we need for this cell.
 
         Each cell is drawn individually and is only as wide as it needs
         to be, we let the TreeViewColumn take care of making them all
         line up.
         """
+
         box_size = self.box_size(widget) + 1
 
         width = box_size * (self.columns_len + 1)
@@ -111,7 +109,7 @@
         # FIXME I have no idea how to use cell_area properly
         return (0, 0, width, height)
 
-    def on_render(self, window, widget, bg_area, cell_area, exp_area, flags):
+    def do_render(self, ctx, widget, bg_area, cell_area, flags):
         """Render an individual cell.
 
         Draws the cell contents using cairo, taking care to clip what we
@@ -124,8 +122,9 @@
         to cross other columns we actually draw it as in the .---' style
         instead of a pure diagonal ... this reduces confusion by an
         incredible amount.
+
         """
-        ctx = window.cairo_create()
+
         ctx.rectangle(bg_area.x, bg_area.y, bg_area.width, bg_area.height)
         ctx.clip()
 
@@ -134,12 +133,12 @@
         # Maybe draw branch head highlight under revision node
         if self.node:
             (column, colour) = self.node
-            arc_start_position_x = cell_area.x + box_size * column + box_size / 2; 
+            arc_start_position_x = cell_area.x + box_size * column + box_size / 2;
             arc_start_position_y = cell_area.y + cell_area.height / 2;
 
         ctx.set_line_width(box_size / 8)
         ctx.set_line_cap(cairo.LINE_CAP_ROUND)
-        
+
         # Draw lines into the cell
         if self.in_lines:
             for start, end, lcolour in self.in_lines:
@@ -166,16 +165,17 @@
         ctx.stroke_preserve()
         self.set_colour(ctx, colour, 0.5, 1.0)
         ctx.fill()
+        ctx.save()
 
     def render_line (self, ctx, cell_area, box_size, mid,
             height, start, end, colour, style):
+
         if start is None:
             x = cell_area.x + box_size * end + box_size / 2
             ctx.move_to(x, mid + height / 3)
             ctx.line_to(x, mid + height / 3)
             ctx.move_to(x, mid + height / 6)
             ctx.line_to(x, mid + height / 6)
-
         elif end is None:
             x = cell_area.x + box_size * start + box_size / 2
             ctx.move_to(x, mid - height / 3)
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/reset.py rabbitvcs/rabbitvcs/ui/reset.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/reset.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/reset.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,32 +1,35 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os
 
-import pygtk
-import gobject
-import gtk
-import pango
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk, Pango
+sa.restore()
 
 from datetime import datetime
 import time
@@ -34,7 +37,7 @@
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.action import GitAction
 import rabbitvcs.ui.widget
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 import rabbitvcs.vcs
 
 from rabbitvcs import gettext
@@ -43,9 +46,9 @@
 class GitReset(InterfaceView):
     """
     Provides a UI to reset your repository to some specified state
-    
+
     """
-    
+
     def __init__(self, path, revision=None):
         InterfaceView.__init__(self, "reset", "Reset")
         self.vcs = rabbitvcs.vcs.VCS()
@@ -55,7 +58,7 @@
         if revision:
             self.revision_obj = self.git.revision(revision)
 
-        self.get_widget("path").set_text(path)
+        self.get_widget("path").set_text(S(path).display())
 
         self.revision_selector = rabbitvcs.ui.widget.RevisionSelector(
             self.get_widget("revision_container"),
@@ -64,19 +67,19 @@
             url=self.path,
             expand=True
         )
-        
+
         self.get_widget("none_opt").set_active(True)
         self.check_path()
 
     def on_ok_clicked(self, widget):
         path = self.get_widget("path").get_text()
-        
+
         mixed = self.get_widget("mixed_opt").get_active()
         soft = self.get_widget("soft_opt").get_active()
         hard = self.get_widget("hard_opt").get_active()
         merge = self.get_widget("merge_opt").get_active()
         none = self.get_widget("none_opt").get_active()
-        
+
         type = None
         if mixed:
             type = "mixed"
@@ -104,13 +107,13 @@
         )
         self.action.append(self.action.set_status, _("Completed Reset"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def on_browse_clicked(self, widget, data=None):
         chooser = rabbitvcs.ui.dialog.FolderChooser()
         path = chooser.run()
         if path is not None:
-            self.get_widget("path").set_text(path)
+            self.get_widget("path").set_text(S(path).display())
 
     def on_path_changed(self, widget, data=None):
         self.check_path()
@@ -119,7 +122,8 @@
         path = self.get_widget("path").get_text()
         root = self.git.find_repository_path(path)
         if root != path:
-            self.get_widget("none_opt").set_active(True)    
+            self.get_widget("none_opt").set_active(True)
+
 
 if __name__ == "__main__":
     from rabbitvcs.ui import main, REVISION_OPT, VCS_OPT
@@ -127,7 +131,7 @@
         [REVISION_OPT, VCS_OPT],
         usage="Usage: rabbitvcs reset [-r REVISION] path"
     )
-    
+
     window = GitReset(paths[0], options.revision)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/revert.py rabbitvcs/rabbitvcs/ui/revert.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/revert.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/revert.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -25,17 +25,21 @@
 import six.moves._thread
 from time import sleep
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.util.contextmenu import GtkFilesContextMenu, GtkContextMenuCaller
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
 import rabbitvcs.vcs
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 from rabbitvcs.vcs.status import Status
 
@@ -44,7 +48,7 @@
 from rabbitvcs import gettext
 _ = gettext.gettext
 
-gobject.threads_init()
+helper.gobject_threads_init()
 
 import rabbitvcs.vcs
 
@@ -69,14 +73,14 @@
         self.statuses = self.vcs.statuses_for_revert(paths)
         self.files_table = rabbitvcs.ui.widget.Table(
             self.get_widget("files_table"),
-            [gobject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_PATH,
-                gobject.TYPE_STRING],
-            [rabbitvcs.ui.widget.TOGGLE_BUTTON, _("Path"), _("Extension")],
+            [GObject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_HIDDEN_OBJECT,
+                rabbitvcs.ui.widget.TYPE_PATH, GObject.TYPE_STRING],
+            [rabbitvcs.ui.widget.TOGGLE_BUTTON, "", _("Path"), _("Extension")],
             filters=[{
                 "callback": rabbitvcs.ui.widget.path_filter,
                 "user_data": {
                     "base_dir": base_dir,
-                    "column": 1
+                    "column": 2
                 }
             }],
             callbacks={
@@ -88,36 +92,24 @@
 
         self.initialize_items()
 
-    def populate_files_table(self):
-        self.files_table.clear()
-        for item in self.items:
-            self.files_table.append([
-                True, 
-                item.path, 
-                rabbitvcs.util.helper.get_file_extension(item.path),
-                item.simple_content_status(),
-                item.simple_metadata_status()
-            ])
-                    
     def on_ok_clicked(self, widget):
         return True
 
     def load(self):
-        gtk.gdk.threads_enter()
         self.get_widget("status").set_text(_("Loading..."))
         self.items = self.vcs.get_items(self.paths, self.statuses)
 
         self.populate_files_table()
         self.get_widget("status").set_text(_("Found %d item(s)") % len(self.items))
-        gtk.gdk.threads_leave()
 
     def populate_files_table(self):
         self.files_table.clear()
         for item in self.items:
             self.files_table.append([
                 True,
+                S(item.path),
                 item.path,
-                rabbitvcs.util.helper.get_file_extension(item.path)
+                helper.get_file_extension(item.path)
             ])
 
     # Overrides the GtkContextMenuCaller method
@@ -141,10 +133,10 @@
 
     def on_files_table_row_activated(self, treeview, event, col):
         paths = self.files_table.get_selected_row_items(1)
-        rabbitvcs.util.helper.launch_diff_tool(*paths)
+        helper.launch_diff_tool(*paths)
 
     def on_files_table_key_event(self, treeview, data=None):
-        if gtk.gdk.keyval_name(data.keyval) == "Delete":
+        if Gdk.keyval_name(data.keyval) == "Delete":
             self.delete_items(treeview, data)
 
     def on_files_table_mouse_event(self, treeview, data=None):
@@ -159,7 +151,7 @@
 class SVNRevert(Revert):
     def __init__(self, paths, base_dir=None):
         Revert.__init__(self, paths, base_dir)
-        
+
         self.svn = self.vcs.svn()
 
     def on_ok_clicked(self, widget):
@@ -173,19 +165,19 @@
             self.vcs.svn(),
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Revert"))
         self.action.append(self.action.set_status, _("Running Revert Command..."))
         self.action.append(self.vcs.svn().revert, items, recurse=True)
         self.action.append(self.action.set_status, _("Completed Revert"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 
 class GitRevert(Revert):
     def __init__(self, paths, base_dir=None):
         Revert.__init__(self, paths, base_dir)
-        
+
         self.git = self.vcs.git(self.paths[0])
 
     def on_ok_clicked(self, widget):
@@ -199,13 +191,13 @@
             self.git,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Revert"))
         self.action.append(self.action.set_status, _("Running Revert Command..."))
         self.action.append(self.git.checkout, items)
         self.action.append(self.action.set_status, _("Completed Revert"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 class SVNRevertQuiet:
     def __init__(self, paths, base_dir=None):
@@ -214,9 +206,9 @@
             self.vcs.svn(),
             run_in_thread=False
         )
-        
+
         self.action.append(self.vcs.svn().revert, paths)
-        self.action.run()
+        self.action.schedule()
 
 class GitRevertQuiet:
     def __init__(self, paths, base_dir=None):
@@ -226,17 +218,17 @@
             self.git,
             run_in_thread=False
         )
-        
+
         self.action.append(self.git.checkout, paths)
-        self.action.run()
+        self.action.schedule()
 
 classes_map = {
-    rabbitvcs.vcs.VCS_SVN: SVNRevert, 
+    rabbitvcs.vcs.VCS_SVN: SVNRevert,
     rabbitvcs.vcs.VCS_GIT: GitRevert
 }
 
 quiet_classes_map = {
-    rabbitvcs.vcs.VCS_SVN: SVNRevertQuiet, 
+    rabbitvcs.vcs.VCS_SVN: SVNRevertQuiet,
     rabbitvcs.vcs.VCS_GIT: GitRevertQuiet
 }
 
@@ -244,6 +236,7 @@
     guess = rabbitvcs.vcs.guess(paths[0])
     return classes_map[guess["vcs"]](paths, base_dir)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT, QUIET_OPT
     (options, paths) = main(
@@ -256,4 +249,4 @@
     else:
         window = revert_factory(classes_map, paths, options.base_dir)
         window.register_gtk_quit()
-        gtk.main()
+        Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/revprops.py rabbitvcs/rabbitvcs/ui/revprops.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/revprops.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/revprops.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,33 +1,38 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui.properties import PropertiesBase
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
+from rabbitvcs.util.strings import S
 import rabbitvcs.vcs
 from rabbitvcs.util.log import Log
 from rabbitvcs.ui.action import SVNAction
@@ -40,13 +45,13 @@
 class SVNRevisionProperties(PropertiesBase):
     def __init__(self, path, revision=None):
         PropertiesBase.__init__(self, path)
-        
+
         self.svn = self.vcs.svn()
-        
+
         if not self.svn.is_path_repository_url(path):
             self.path = self.svn.get_repo_url(path)
-            self.get_widget("path").set_text(self.path)
-        
+            self.get_widget("path").set_text(S(self.path).display())
+
         self.revision = revision
         self.revision_obj = None
         if revision is not None:
@@ -65,51 +70,52 @@
             log.exception(e)
             rabbitvcs.ui.dialog.MessageBox(_("Unable to retrieve properties list"))
             self.proplist = {}
-        
+
         if self.proplist:
             for key,val in list(self.proplist.items()):
                 self.table.append([False, key,val.rstrip()])
 
     def save(self):
         delete_recurse = self.get_widget("delete_recurse").get_active()
-        
+
         self.action = SVNAction(
             self.svn,
             notification=False,
             run_in_thread=False
         )
-        
+
         for row in self.delete_stack:
             self.action.append(
                 self.svn.revpropdel,
-                self.path, 
-                row[1], 
-                self.revision_obj, 
+                self.path,
+                row[1],
+                self.revision_obj,
                 force=True
             )
 
         for row in self.table.get_items():
             self.action.append(
                 self.svn.revpropset,
-                row[1], 
-                row[2], 
+                row[1],
+                row[2],
                 self.path,
-                self.revision_obj, 
+                self.revision_obj,
                 force=True
             )
-        
-        self.action.run()
+
+        self.action.schedule()
 
         self.close()
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, VCS_OPT
     (options, args) = main(
         [VCS_OPT],
         usage="Usage: rabbitvcs revprops [url1@rev1]"
     )
-    
-    pathrev = rabbitvcs.util.helper.parse_path_revision_string(args.pop(0))
+
+    pathrev = helper.parse_path_revision_string(args.pop(0))
     window = SVNRevisionProperties(pathrev[0], pathrev[1])
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/settings.py rabbitvcs/rabbitvcs/ui/settings.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/settings.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/settings.py	2019-09-13 08:36:17.257343196 +0800
@@ -22,18 +22,22 @@
 #
 
 import os
-
-import pygtk
-import gobject
-import gtk
-import pango
 import dbus
+import datetime
+
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk, Pango
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.util.settings
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 
 import rabbitvcs.services.checkerservice
 from rabbitvcs.services.checkerservice import StatusCheckerStub
@@ -45,30 +49,33 @@
 CHECKER_SERVICE_ERROR = _(
 "There was an error communicating with the status checker service.")
 
-from locale import getdefaultlocale
+from locale import getdefaultlocale, getlocale, LC_MESSAGES
 
 class Settings(InterfaceView):
+    dtformats = [
+                    ["", _("default")],
+                    ["%c", _("locale")],
+                    ["%Y-%m-%d %H:%M:%S", _("ISO")],
+                    ["%b %d, %Y %I:%M:%S %p", None],
+                    ["%B %d, %Y %I:%M:%S %p", None],
+                    ["%m/%d/%Y %I:%M:%S %p", None],
+                    ["%b %d, %Y %H:%M:%S", None],
+                    ["%B %d, %Y %H:%M:%S", None],
+                    ["%m/%d/%Y %H:%M:%S", None],
+                    ["%d %b %Y %H:%M:%S", None],
+                    ["%d %B %Y %H:%M:%S", None],
+                    ["%d/%m/%Y %H:%M:%S", None]
+    ]
     def __init__(self, base_dir=None):
         """
         Provides an interface to the settings library.
         """
-    
+
         InterfaceView.__init__(self, "settings", "Settings")
 
+        self.checker_service = None
         self.settings = rabbitvcs.util.settings.SettingsManager()
-        
-        langs = []
-        language = os.environ.get('LANGUAGE', None)
-        if language:
-            langs += language.split(":")
-
-        self.language = rabbitvcs.ui.widget.ComboBox(
-            self.get_widget("language"),
-            langs
-        )
-        self.language.set_active_from_value(
-            self.settings.get("general", "language")
-        )
+
         self.get_widget("enable_attributes").set_active(
             int(self.settings.get("general", "enable_attributes"))
         )
@@ -87,22 +94,40 @@
         self.get_widget("enable_git").set_active(
             int(self.settings.get("HideItem", "git")) == 0
         )
+        dtfs = []
+        dt = datetime.datetime.today()
+        # Disambiguate day.
+        if dt.day <= 12:
+            dt =  datetime.datetime(dt.year, dt.month, dt.day + 12,
+                                    dt.hour, dt.minute, dt.second)
+        for format, label in self.dtformats:
+            if label is None:
+                label = helper.format_datetime(dt, format)
+            dtfs.append([format, label])
+        self.datetime_format = rabbitvcs.ui.widget.ComboBox(self.get_widget("datetime_format"), dtfs, 2, 1)
+        self.datetime_format.set_active_from_value(
+            self.settings.get("general", "datetime_format")
+        )
+        self.default_commit_message = rabbitvcs.ui.widget.TextView(self.get_widget("default_commit_message"))
+        self.default_commit_message.set_text(
+            S(self.settings.get_multiline("general", "default_commit_message")).display()
+        )
         self.get_widget("diff_tool").set_text(
-            self.settings.get("external", "diff_tool")
+            S(self.settings.get("external", "diff_tool")).display()
         )
         self.get_widget("diff_tool_swap").set_active(
             int(self.settings.get("external", "diff_tool_swap"))
         )
         self.get_widget("merge_tool").set_text(
-            self.settings.get("external", "merge_tool")
+            S(self.settings.get("external", "merge_tool")).display()
         )
         self.get_widget("cache_number_repositories").set_text(
-            str(self.settings.get("cache", "number_repositories"))
+            S(self.settings.get("cache", "number_repositories")).display()
         )
         self.get_widget("cache_number_messages").set_text(
-            str(self.settings.get("cache", "number_messages"))
+            S(self.settings.get("cache", "number_messages")).display()
         )
-        
+
         self.logging_type = rabbitvcs.ui.widget.ComboBox(
             self.get_widget("logging_type"),
             ["None", "Console", "File", "Both"]
@@ -120,7 +145,7 @@
         if not val:
             val = "Debug"
         self.logging_level.set_active_from_value(val)
-        
+
         # Git Configuration Editor
         show_git = False
         self.file_editor = None
@@ -130,7 +155,7 @@
             if vcs.is_in_a_or_a_working_copy(base_dir) and vcs.guess(base_dir)["vcs"] == rabbitvcs.vcs.VCS_GIT:
                 git = vcs.git(base_dir)
                 git_config_files = git.get_config_files(base_dir)
-        
+
                 self.file_editor = rabbitvcs.ui.widget.MultiFileTextEditor(
                     self.get_widget("git_config_container"),
                     _("Config file:"),
@@ -148,123 +173,109 @@
         self._populate_checker_tab()
 
     def _get_checker_service(self, report_failure=True):
-        checker_service = None
-        try:
-            session_bus = dbus.SessionBus()
-            checker_service = session_bus.get_object(
+        if not self.checker_service:
+            try:
+                session_bus = dbus.SessionBus()
+                self.checker_service = session_bus.get_object(
                                     rabbitvcs.services.checkerservice.SERVICE,
                                     rabbitvcs.services.checkerservice.OBJECT_PATH)
-        except dbus.DBusException as ex:
-            if report_failure:
-                rabbitvcs.ui.dialog.MessageBox(CHECKER_SERVICE_ERROR)
-        
-        return checker_service
+                # Initialize service locale in case it just started.
+                self.checker_service.SetLocale(*getlocale(LC_MESSAGES))
+            except dbus.DBusException as ex:
+                if report_failure:
+                    rabbitvcs.ui.dialog.MessageBox(CHECKER_SERVICE_ERROR)
+
+        return self.checker_service
 
-    def _populate_checker_tab(self, report_failure=True):
+    def _populate_checker_tab(self, report_failure = True, connect = True):
         # This is a limitation of GLADE, and can be removed when we migrate to
         # GTK2 Builder
 
-        checker_service = self._get_checker_service(report_failure)
-        
-        self.get_widget("restart_checker").set_image(
-                                        gtk.image_new_from_stock(
-                                            gtk.STOCK_EXECUTE,
-                                            gtk.ICON_SIZE_BUTTON))
-
-        self.get_widget("refresh_info").set_image(
-                                        gtk.image_new_from_stock(
-                                            gtk.STOCK_REFRESH,
-                                            gtk.ICON_SIZE_BUTTON))
-
-        self.get_widget("stop_checker").set_image(
-                                        gtk.image_new_from_stock(
-                                            gtk.STOCK_STOP,
-                                            gtk.ICON_SIZE_BUTTON))
+        checker_service = self.checker_service
+        if not checker_service and connect:
+            checker_service = self._get_checker_service(report_failure)
 
         self.get_widget("stop_checker").set_sensitive(bool(checker_service))
 
         if(checker_service):
-            self.get_widget("checker_type").set_text(checker_service.CheckerType())
-            self.get_widget("pid").set_text(str(checker_service.PID()))
-            
+            self.get_widget("checker_type").set_text(S(checker_service.CheckerType()).display())
+            self.get_widget("pid").set_text(S(checker_service.PID()).display())
+
             memory = checker_service.MemoryUsage()
-                        
+
             if memory:
                 self.get_widget("memory_usage").set_text("%s KB" % memory)
             else:
                 self.get_widget("memory_usage").set_text(CHECKER_UNKNOWN_INFO)
-            
+
+            self.get_widget("locale").set_text(S(".".join(checker_service.SetLocale())).display())
+
             self._populate_info_table(checker_service.ExtraInformation())
-            
+
         else:
             self.get_widget("checker_type").set_text(CHECKER_UNKNOWN_INFO)
             self.get_widget("pid").set_text(CHECKER_UNKNOWN_INFO)
             self.get_widget("memory_usage").set_text(CHECKER_UNKNOWN_INFO)
+            self.get_widget("locale").set_text(CHECKER_UNKNOWN_INFO)
             self._clear_info_table()
 
     def _clear_info_table(self):
-        info_table = self.get_widget("info_table_area").get_child()
-        
-        if info_table:
+        for info_table in self.get_widget("info_table_area").get_children():
             info_table.destroy()
 
     def _populate_info_table(self, info):
         self._clear_info_table()
-        
+
         table_place = self.get_widget("info_table_area")
-        
+
         table = rabbitvcs.ui.widget.KeyValueTable(info)
         table_place.add(table)
         table.show()
-        
-    
+
+
     def on_refresh_info_clicked(self, widget):
         self._populate_checker_tab()
-    
+
     def _stop_checker(self):
-        checker_service = self._get_checker_service(False)
         pid = None
-        if(checker_service):
+        if self.checker_service:
             try:
-                pid = checker_service.Quit()
+                pid = self.checker_service.Quit()
             except dbus.exceptions.DBusException:
                 # Ignore it, it will necessarily happen when we kill the service
                 pass
+        self.checker_service = None
         if pid:
             try:
                 os.waitpid(pid, 0)
             except OSError:
                 # This occurs if the process is already gone.
                 pass
-    
+
     def on_restart_checker_clicked(self, widget):
         self._stop_checker()
         rabbitvcs.services.checkerservice.start()
         self._populate_checker_tab()
-    
+
     def on_stop_checker_clicked(self, widget):
         self._stop_checker()
-        self._populate_checker_tab(report_failure=False)
+        self._populate_checker_tab(report_failure = False, connect = False)
 
     def on_destroy(self, widget):
-        gtk.main_quit()
+        Gtk.main_quit()
 
     def on_cancel_clicked(self, widget):
-        gtk.main_quit()
+        Gtk.main_quit()
 
     def on_ok_clicked(self, widget):
         self.save()
-        gtk.main_quit()
-    
+        Gtk.main_quit()
+
     def on_apply_clicked(self, widget):
         self.save()
 
     def save(self):
         self.settings.set(
-            "general", "language",
-            self.get_widget("language").get_active_text()
-        )
-        self.settings.set(
             "general", "enable_attributes",
             self.get_widget("enable_attributes").get_active()
         )
@@ -288,6 +299,14 @@
             "HideItem", "git",
             not self.get_widget("enable_git").get_active()
         )
+        self.settings.set_multiline(
+            "general", "default_commit_message",
+            self.default_commit_message.get_text()
+        )
+        self.settings.set(
+            "general", "datetime_format",
+            self.datetime_format.get_active_text()
+        )
         self.settings.set(
             "external", "diff_tool",
             self.get_widget("diff_tool").get_text()
@@ -317,7 +336,7 @@
             self.logging_level.get_active_text()
         )
         self.settings.write()
-        
+
         if self.file_editor:
             self.file_editor.save()
 
@@ -326,16 +345,16 @@
             _("Select a program"), "/usr/bin"
         )
         path = chooser.run()
-        path = path.replace("file://", "")
-        if path is not None:
-            self.get_widget("diff_tool").set_text(path)
+        if not path is None:
+            path = path.replace("file://", "")
+            self.get_widget("diff_tool").set_text(S(path).display())
 
     def on_cache_clear_repositories_clicked(self, widget):
         confirmation = rabbitvcs.ui.dialog.Confirmation(
             _("Are you sure you want to clear your repository paths?")
         )
-        if confirmation.run() == gtk.RESPONSE_OK:
-            path = rabbitvcs.util.helper.get_repository_paths_path()
+        if confirmation.run() == Gtk.ResponseType.OK:
+            path = helper.get_repository_paths_path()
             fh = open(path, "w")
             fh.write("")
             fh.close()
@@ -345,8 +364,8 @@
         confirmation = rabbitvcs.ui.dialog.Confirmation(
             _("Are you sure you want to clear your previous messages?")
         )
-        if confirmation.run() == gtk.RESPONSE_OK:
-            path = rabbitvcs.util.helper.get_previous_messages_path()
+        if confirmation.run() == Gtk.ResponseType.OK:
+            path = helper.get_previous_messages_path()
             fh = open(path, "w")
             fh.write("")
             fh.close()
@@ -356,8 +375,8 @@
         confirmation = rabbitvcs.ui.dialog.Confirmation(
             _("Are you sure you want to clear your authentication information?")
         )
-        if confirmation.run() == gtk.RESPONSE_OK:
-            home_dir = rabbitvcs.util.helper.get_user_path()
+        if confirmation.run() == Gtk.ResponseType.OK:
+            home_dir = helper.get_user_path()
             subpaths = [
                 '/.subversion/auth/svn.simple',
                 '/.subversion/auth/svn.ssl.server',
@@ -372,7 +391,7 @@
                         os.remove(filepath)
 
             rabbitvcs.ui.dialog.MessageBox(_("Authentication information cleared"))
-            
+
 
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT
@@ -383,4 +402,4 @@
 
     window = Settings(options.base_dir)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/stage.py rabbitvcs/rabbitvcs/ui/stage.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/stage.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/stage.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,31 +1,35 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import six.moves._thread
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.add import Add
@@ -33,7 +37,7 @@
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 
 import rabbitvcs.vcs
@@ -44,50 +48,21 @@
 _ = gettext.gettext
 
 class GitStage(Add):
-    def __init__(self, paths, base_dir=None):
-        InterfaceView.__init__(self, "add", "Add")
-
-        self.window = self.get_widget("Add")
-        self.window.set_title(_("Stage"))
-
-        self.paths = paths
-        self.base_dir = base_dir
-        self.last_row_clicked = None
-        self.vcs = rabbitvcs.vcs.VCS()
+    def setup(self, window, columns):
+        window.set_title(_("Stage"))
         self.git = self.vcs.git(self.paths[0])
-        self.items = None
         self.statuses = self.git.STATUSES_FOR_STAGE
-        self.show_ignored = False
-        self.files_table = rabbitvcs.ui.widget.Table(
-            self.get_widget("files_table"), 
-            [gobject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_PATH, 
-                gobject.TYPE_STRING], 
-            [rabbitvcs.ui.widget.TOGGLE_BUTTON, _("Path"), _("Extension")],
-            filters=[{
-                "callback": rabbitvcs.ui.widget.path_filter,
-                "user_data": {
-                    "base_dir": base_dir,
-                    "column": 1
-                }
-            }],
-            callbacks={
-                "row-activated":  self.on_files_table_row_activated,
-                "mouse-event":   self.on_files_table_mouse_event,
-                "key-event":     self.on_files_table_key_event
-            }
-        )
-
-        self.initialize_items()
 
     def populate_files_table(self):
         self.files_table.clear()
         for item in self.items:
             self.files_table.append([
-                True, 
-                item.path, 
-                rabbitvcs.util.helper.get_file_extension(item.path)
+                True,
+                S(item.path),
+                item.path,
+                helper.get_file_extension(item.path)
             ])
-                    
+
     def on_ok_clicked(self, widget):
         items = self.files_table.get_activated_rows(1)
         if not items:
@@ -99,14 +74,14 @@
             self.git,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Stage"))
         self.action.append(self.action.set_status, _("Running Stage Command..."))
         for item in items:
             self.action.append(self.git.stage, item)
         self.action.append(self.action.set_status, _("Completed Stage"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 class GitStageQuiet:
     def __init__(self, paths, base_dir=None):
@@ -116,10 +91,10 @@
             self.git,
             run_in_thread=False
         )
-        
+
         for path in paths:
             self.action.append(self.git.stage, path)
-        self.action.run()
+        self.action.schedule()
 
 classes_map = {
     rabbitvcs.vcs.VCS_GIT: GitStage
@@ -133,6 +108,7 @@
     guess = rabbitvcs.vcs.guess(paths[0])
     return classes_map[guess["vcs"]](paths, base_dir)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT, QUIET_OPT
     (options, paths) = main(
@@ -145,4 +121,4 @@
     else:
         window = stage_factory(classes_map, paths, options.base_dir)
         window.register_gtk_quit()
-        gtk.main()
+        Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/switch.py rabbitvcs/rabbitvcs/ui/switch.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/switch.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/switch.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,35 +1,39 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.action import SVNAction
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import *
 
 from rabbitvcs import gettext
 _ = gettext.gettext
@@ -41,11 +45,11 @@
         self.path = path
         self.vcs = rabbitvcs.vcs.VCS()
         self.svn = self.vcs.svn()
-        
-        self.get_widget("path").set_text(self.path)
+
+        self.get_widget("path").set_text(S(self.path).display())
         self.repositories = rabbitvcs.ui.widget.ComboBox(
-            self.get_widget("repositories"), 
-            rabbitvcs.util.helper.get_repository_paths()
+            self.get_widget("repositories"),
+            helper.get_repository_paths()
         )
 
         self.revision_selector = rabbitvcs.ui.widget.RevisionSelector(
@@ -55,12 +59,12 @@
             url_combobox=self.repositories,
             expand=True
         )
-        
-        self.repositories.set_child_text(rabbitvcs.util.helper.unquote_url(self.svn.get_repo_url(self.path)))
+
+        self.repositories.set_child_text(helper.unquote_url(self.svn.get_repo_url(self.path)))
 
     def on_ok_clicked(self, widget):
         url = self.repositories.get_active_text()
-        
+
         if not url or not self.path:
             rabbitvcs.ui.dialog.MessageBox(_("The repository location is a required field."))
             return
@@ -71,19 +75,19 @@
             self.svn,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Switch"))
         self.action.append(self.action.set_status, _("Running Switch Command..."))
-        self.action.append(rabbitvcs.util.helper.save_repository_path, url)
+        self.action.append(helper.save_repository_path, url)
         self.action.append(
             self.svn.switch,
             self.path,
-            rabbitvcs.util.helper.quote_url(url),
+            helper.quote_url(url),
             revision=revision
         )
         self.action.append(self.action.set_status, _("Completed Switch"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 classes_map = {
     rabbitvcs.vcs.VCS_SVN: SVNSwitch
@@ -93,13 +97,14 @@
     guess = rabbitvcs.vcs.guess(path)
     return classes_map[guess["vcs"]](path, revision)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, REVISION_OPT
     (options, args) = main(
         [REVISION_OPT],
         usage="Usage: rabbitvcs switch [url]"
     )
-            
+
     window = switch_factory(args[0], revision=options.revision)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/tags.py rabbitvcs/rabbitvcs/ui/tags.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/tags.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/tags.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,46 +1,48 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import os
-
-import pygtk
-import gobject
-import gtk
-import pango
-
 from datetime import datetime
 import time
 
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk, Pango
+sa.restore()
+
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.action import GitAction
 import rabbitvcs.ui.widget
 from rabbitvcs.ui.dialog import DeleteConfirmation
 from rabbitvcs.ui.log import log_dialog_factory
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
+import rabbitvcs.util.settings
 import rabbitvcs.vcs
 
 from rabbitvcs import gettext
-import six
 _ = gettext.gettext
 
 STATE_ADD = 0
@@ -49,30 +51,33 @@
 class GitTagManager(InterfaceView):
     """
     Provides a UI interface to manage items
-    
+
     """
-    
+
     state = STATE_ADD
-    
+
     def __init__(self, path, revision=None):
         InterfaceView.__init__(self, "manager", "Manager")
-        
+
         self.path = path
-        
-        self.get_widget("right_side").show()        
+
+        sm = rabbitvcs.util.settings.SettingsManager()
+        self.datetime_format = sm.get("general", "datetime_format")
+
+        self.get_widget("right_side").show()
         self.get_widget("Manager").set_size_request(695, -1)
         self.get_widget("Manager").set_title(_("Tag Manager"))
         self.get_widget("items_label").set_markup(_("<b>Tags</b>"))
-                
+
         self.vcs = rabbitvcs.vcs.VCS()
         self.git = self.vcs.git(path)
 
         self.revision_obj = self.git.revision(revision)
-        
+
         self.selected_tag = None
         self.items_treeview = rabbitvcs.ui.widget.Table(
             self.get_widget("items_treeview"),
-            [gobject.TYPE_STRING], 
+            [GObject.TYPE_STRING],
             [_("Tag")],
             callbacks={
                 "mouse-event":   self.on_treeview_mouse_event,
@@ -85,128 +90,141 @@
         )
         self.initialize_detail()
         self.load(self.show_add)
-        
+
 
     def initialize_detail(self):
         self.detail_container = self.get_widget("detail_container")
 
-        vbox = gtk.VBox(False, 6)
+        self.detail_grid = Gtk.Grid()
+        self.detail_grid.set_row_spacing(4)
+        self.detail_grid.set_column_spacing(6)
+        self.detail_grid.set_hexpand(True)
+        row = 0
 
         # Set up the Tag line
-        label = gtk.Label(_("Name:"))
-        label.set_size_request(90, -1)
-        label.set_properties(xalign=0,yalign=.5)
-        self.tag_entry = gtk.Entry()
-        self.tag_name_container = gtk.HBox(False, 0)
-        self.tag_name_container.pack_start(label, False, False, 0)
-        self.tag_name_container.pack_start(self.tag_entry, False, False, 0)
-        vbox.pack_start(self.tag_name_container, False, False, 0)
+        label = Gtk.Label(label = _("Name:"))
+        label.set_properties(xalign=0, yalign=.5)
+        self.tag_entry = Gtk.Entry()
+        self.tag_entry.set_hexpand(True)
+        self.detail_grid.attach(label, 0, row, 1, 1)
+        self.detail_grid.attach(self.tag_entry, 1, row, 2, 1)
+        tag_name_row = row
+        row = row + 1
 
         # Set up the Commit-sha line
-        label = gtk.Label(_("Revision:"))
-        label.set_size_request(90, -1)
-        label.set_properties(xalign=0,yalign=.5)
-        self.start_point_entry = gtk.Entry()
+        label = Gtk.Label(label = _("Revision:"))
+        label.set_properties(xalign=0, yalign=.5)
+        self.start_point_entry = Gtk.Entry()
         self.start_point_entry.set_size_request(300, -1)
-        self.start_point_container = gtk.HBox(False, 0)
+        self.start_point_entry.set_hexpand(True)
         if self.revision_obj.value:
-            self.start_point_entry.set_text(six.text_type(self.revision_obj))
-        self.log_dialog_button = gtk.Button()
+            self.start_point_entry.set_text(S(self.revision_obj).display())
+        self.log_dialog_button = Gtk.Button()
         self.log_dialog_button.connect("clicked", self.on_log_dialog_button_clicked)
-        image = gtk.Image()
-        image.set_from_icon_name("rabbitvcs-show_log", 2)
+        image = Gtk.Image()
+        image.set_from_icon_name("rabbitvcs-show_log", Gtk.IconSize.SMALL_TOOLBAR)
         self.log_dialog_button.set_image(image)
-        self.start_point_container.pack_start(label, False, False, 0)
-        self.start_point_container.pack_start(self.start_point_entry, False, False, 0)
-        self.start_point_container.pack_start(self.log_dialog_button, False, False, 0)
-        vbox.pack_start(self.start_point_container, False, False, 0)
+        self.detail_grid.attach(label, 0, row, 1, 1)
+        self.detail_grid.attach(self.start_point_entry, 1, row, 1, 1)
+        self.detail_grid.attach(self.log_dialog_button, 2, row, 1, 1)
+        start_point_row = row
+        row = row + 1
 
         # Set up the Log Message Entry line
-        label = gtk.Label(_("Message:"))
-        label.set_size_request(90, -1)
-        label.set_properties(xalign=0,yalign=0)
+        label = Gtk.Label(label = _("Message:"))
+        label.set_properties(xalign=0, yalign=0)
         self.message_entry = rabbitvcs.ui.widget.TextView()
         self.message_entry.view.set_size_request(300, 75)
-        swin = gtk.ScrolledWindow()
-        swin.set_shadow_type(gtk.SHADOW_ETCHED_IN)
-        swin.set_policy(gtk.POLICY_AUTOMATIC, gtk.POLICY_AUTOMATIC)
+        self.message_entry.view.set_hexpand(True)
+        self.message_entry.view.set_vexpand(True)
+        swin = Gtk.ScrolledWindow()
+        swin.set_shadow_type(Gtk.ShadowType.ETCHED_IN)
+        swin.set_policy(Gtk.PolicyType.AUTOMATIC, Gtk.PolicyType.AUTOMATIC)
+        swin.set_hexpand(True)
+        swin.set_vexpand(True)
         swin.add(self.message_entry.view)
-        self.message_entry_container = gtk.HBox(False, 0)
-        self.message_entry_container.pack_start(label, False, False, 0)
-        self.message_entry_container.pack_start(swin, False, False, 0)
-        vbox.pack_start(self.message_entry_container, False, False, 0)
+        self.detail_grid.attach(label, 0, row, 1, 1)
+        self.detail_grid.attach(swin, 1, row, 2, 1)
+        message_entry_row = row
+        row = row + 1
 
         # Set up Save button
-        label = gtk.Label("")
-        label.set_size_request(90, -1)
-        self.save_button = gtk.Button(label=_("Save"))
+        self.save_button = Gtk.Button(label=_("Save"))
+        self.save_button.set_halign(Gtk.Align.START)
         self.save_button.connect("clicked", self.on_save_clicked)
-        self.save_container = gtk.HBox(False, 0)
-        self.save_container.pack_start(label, False, False, 0)
-        self.save_container.pack_start(self.save_button, False, False, 0)
-        vbox.pack_start(self.save_container, False, False, 0)
+        self.detail_grid.attach(self.save_button, 1, row, 1, 1)
+        save_row = row
+        row = row + 1
 
         # Set up the tagger line
-        label = gtk.Label(_("Tagger:"))
-        label.set_size_request(90, -1)
-        label.set_properties(xalign=0,yalign=0)
-        self.tagger_label = gtk.Label("")
-        self.tagger_label.set_properties(xalign=0,yalign=0,selectable=True)
+        label = Gtk.Label(label = _("Tagger:"))
+        label.set_properties(xalign=0, yalign=0)
+        self.tagger_label = Gtk.Label(label = "")
+        self.tagger_label.set_properties(xalign=0, yalign=0, selectable=True)
+        self.tagger_label.set_hexpand(True)
         self.tagger_label.set_line_wrap(True)
-        self.tagger_container = gtk.HBox(False, 0)
-        self.tagger_container.pack_start(label, False, False, 0)
-        self.tagger_container.pack_start(self.tagger_label, False, False, 0)
-        vbox.pack_start(self.tagger_container, False, False, 0)
+        self.detail_grid.attach(label, 0, row, 1, 1)
+        self.detail_grid.attach(self.tagger_label, 1, row, 2, 1)
+        tagger_row = row
+        row = row + 1
 
         # Set up the Date line
-        label = gtk.Label(_("Date:"))
-        label.set_size_request(90, -1)
-        label.set_properties(xalign=0,yalign=0)
-        self.date_label = gtk.Label("")
-        self.date_label.set_properties(xalign=0,yalign=0,selectable=True)
-        self.date_container = gtk.HBox(False, 0)
-        self.date_container.pack_start(label, False, False, 0)
-        self.date_container.pack_start(self.date_label, False, False, 0)
-        vbox.pack_start(self.date_container, False, False, 0)
+        label = Gtk.Label(label = _("Date:"))
+        label.set_properties(xalign=0, yalign=0)
+        self.date_label = Gtk.Label(label = "")
+        self.date_label.set_properties(xalign=0, yalign=0, selectable=True)
+        self.date_label.set_hexpand(True)
+        self.detail_grid.attach(label, 0, row, 1, 1)
+        self.detail_grid.attach(self.date_label, 1, row, 2, 1)
+        date_row = row
+        row = row + 1
 
         # Set up the Revision line
-        label = gtk.Label(_("Revision:"))
-        label.set_size_request(90, -1)
-        label.set_properties(xalign=0,yalign=0)
-        self.revision_label = gtk.Label("")
-        self.revision_label.set_properties(xalign=0,selectable=True)
+        label = Gtk.Label(label = _("Revision:"))
+        label.set_properties(xalign=0, yalign=0)
+        self.revision_label = Gtk.Label(label = "")
+        self.revision_label.set_properties(xalign=0, selectable=True)
+        self.revision_label.set_hexpand(True)
         self.revision_label.set_line_wrap(True)
-        self.revision_container = gtk.HBox(False, 0)
-        self.revision_container.pack_start(label, False, False, 0)
-        self.revision_container.pack_start(self.revision_label, False, False, 0)
-        vbox.pack_start(self.revision_container, False, False, 0)
+        self.detail_grid.attach(label, 0, row, 1, 1)
+        self.detail_grid.attach(self.revision_label, 1, row, 2, 1)
+        revision_row = row
+        row = row + 1
 
         # Set up the Log Message line
-        label = gtk.Label(_("Message:"))
-        label.set_size_request(90, -1)
-        label.set_properties(xalign=0,yalign=0)
-        self.message_label = gtk.Label("")
-        self.message_label.set_properties(xalign=0,yalign=0,selectable=True)
+        label = Gtk.Label(label = _("Message:"))
+        label.set_properties(xalign=0, yalign=0)
+        self.message_label = Gtk.Label(label = "")
+        self.message_label.set_properties(xalign=0, yalign=0, selectable=True)
+        self.message_label.set_hexpand(True)
+        self.message_label.set_vexpand(True)
         self.message_label.set_line_wrap(True)
-        self.message_label.set_size_request(250, -1)
-        self.message_container = gtk.HBox(False, 0)
-        self.message_container.pack_start(label, False, False, 0)
-        self.message_container.pack_start(self.message_label, False, False, 0)
-        vbox.pack_start(self.message_container, False, False, 0)
-        
-        self.add_containers = [self.tag_name_container, self.message_entry_container,
-            self.start_point_container, self.save_container]
-            
-        self.view_containers = [self.tag_name_container, self.tagger_container,
-            self.date_container, self.revision_container, self.message_container]
-
-        self.all_containers = [self.tag_name_container,  self.tagger_container, 
-            self.date_container, self.revision_container, self.message_container, 
-            self.message_entry_container, self.save_container, self.start_point_container]
-
-        vbox.show()
-        self.detail_container.add(vbox)
-        
+        vport = Gtk.Viewport()
+        vport.set_shadow_type(Gtk.ShadowType.NONE)
+        vport.set_hexpand(True)
+        vport.set_vexpand(True)
+        vport.add(self.message_label)
+        swin = Gtk.ScrolledWindow()
+        swin.set_shadow_type(Gtk.ShadowType.NONE)
+        swin.set_size_request(250, -1)
+        swin.set_policy(Gtk.PolicyType.NEVER, Gtk.PolicyType.AUTOMATIC)
+        swin.set_hexpand(True)
+        swin.set_vexpand(True)
+        swin.add(vport)
+        self.detail_grid.attach(label, 0, row, 1, 1)
+        self.detail_grid.attach(swin, 1, row, 2, 1)
+        message_row = row
+        row = row + 1
+
+        self.add_rows = [tag_name_row, message_entry_row,
+            start_point_row, save_row]
+
+        self.view_rows = [tag_name_row, tagger_row,
+            date_row, revision_row, message_row]
+
+        self.detail_grid.show()
+        self.detail_container.add(self.detail_grid)
+
     def load(self, callback, *args, **kwargs):
         self.items_treeview.clear()
 
@@ -223,14 +241,14 @@
 
     def on_delete_clicked(self, widget):
         selected = self.items_treeview.get_selected_row_items(0)
-    
+
         confirm = rabbitvcs.ui.dialog.Confirmation(_("Are you sure you want to delete %s?" % ", ".join(selected)))
         result = confirm.run()
-        
-        if result == gtk.RESPONSE_OK or result == True:
+
+        if result == Gtk.ResponseType.OK or result == True:
             for tag in selected:
                 self.git.tag_delete(tag)
-            
+
             self.load(self.show_add)
 
     def on_save_clicked(self, widget):
@@ -242,7 +260,7 @@
         self.load(self.show_detail, tag_name)
 
     def on_treeview_key_event(self, treeview, data=None):
-        if gtk.gdk.keyval_name(data.keyval) in ("Up", "Down", "Return"):
+        if Gdk.keyval_name(data.keyval) in ("Up", "Down", "Return"):
             self.on_treeview_event(treeview, data)
 
     def on_treeview_mouse_event(self, treeview, data=None):
@@ -257,36 +275,39 @@
         else:
             self.show_add()
 
-    def show_containers(self, containers):
-        for container in self.all_containers:
-            container.hide()
-        for container in containers:
-            container.show_all()
+    def show_rows(self, rows):
+        self.detail_grid.hide()
+        for w in self.detail_grid.get_children():
+            if self.detail_grid.child_get_property(w, "top-attach") in rows:
+                w.show_all()
+            else:
+                w.hide()
+        self.detail_grid.show()
 
     def show_add(self):
         self.items_treeview.unselect_all()
         self.tag_entry.set_text("")
         self.message_entry.set_text("")
         self.save_button.set_label(_("Add"))
-        self.show_containers(self.add_containers)
+        self.show_rows(self.add_rows)
         self.get_widget("detail_label").set_markup(_("<b>Add Tag</b>"))
-    
+
     def show_detail(self, tag_name):
         self.selected_tag = None
         for item in self.tag_list:
-            if item.name == tag_name:
+            if S(item.name) == tag_name:
                 self.selected_tag = item
                 break
 
         self.save_button.set_label(_("Save"))
         if self.selected_tag:
-            self.tag_entry.set_text(self.selected_tag.name)
-            self.revision_label.set_text(self.selected_tag.sha)
-            self.message_label.set_text(self.selected_tag.message.rstrip("\n"))
-            self.tagger_label.set_text(self.selected_tag.tagger)
-            self.date_label.set_text(rabbitvcs.util.helper.format_datetime(datetime.fromtimestamp(self.selected_tag.tag_time)))
+            self.tag_entry.set_text(S(self.selected_tag.name).display())
+            self.revision_label.set_text(S(self.selected_tag.sha).display())
+            self.message_label.set_text(S(self.selected_tag.message).display().rstrip("\n"))
+            self.tagger_label.set_text(S(self.selected_tag.tagger).display())
+            self.date_label.set_text(helper.format_datetime(datetime.fromtimestamp(self.selected_tag.tag_time), self.datetime_format))
 
-            self.show_containers(self.view_containers)
+            self.show_rows(self.view_rows)
             self.get_widget("detail_label").set_markup(_("<b>Tag Detail</b>"))
 
 
@@ -295,10 +316,11 @@
             self.path,
             ok_callback=self.on_log_dialog_closed
         )
-    
+
     def on_log_dialog_closed(self, data):
         if data:
-            self.start_point_entry.set_text(data)
+            self.start_point_entry.set_text(S(data).display())
+
 
 if __name__ == "__main__":
     from rabbitvcs.ui import main, REVISION_OPT, VCS_OPT
@@ -306,7 +328,7 @@
         [REVISION_OPT, VCS_OPT],
         usage="Usage: rabbitvcs tag-manager path"
     )
-    
+
     window = GitTagManager(paths[0], options.revision)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/unlock.py rabbitvcs/rabbitvcs/ui/unlock.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/unlock.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/unlock.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,31 +1,35 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import six.moves._thread
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView, InterfaceNonView
 from rabbitvcs.ui.add import Add
@@ -33,7 +37,7 @@
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 
 log = Log("rabbitvcs.ui.unlock")
@@ -42,52 +46,32 @@
 _ = gettext.gettext
 
 class SVNUnlock(Add):
-    def __init__(self, paths, base_dir):
-        InterfaceView.__init__(self, "add", "Add")
-
-        self.window = self.get_widget("Add")
-        self.window.set_title(_("Unlock"))
-
-        self.paths = paths
-        self.base_dir = base_dir
-        self.last_row_clicked = None
-        self.vcs = rabbitvcs.vcs.VCS()
+    def setup(self, window, columns):
+        window.set_title(_("Unlock"))
         self.svn = self.vcs.svn()
-        self.items = None
         self.statuses = None
-        self.files_table = rabbitvcs.ui.widget.Table(
-            self.get_widget("files_table"), 
-            [gobject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_PATH, 
-                gobject.TYPE_STRING], 
-            [rabbitvcs.ui.widget.TOGGLE_BUTTON, _("Path"), _("Extension")],
-            filters=[{
-                "callback": rabbitvcs.ui.widget.path_filter,
-                "user_data": {
-                    "base_dir": base_dir,
-                    "column": 1
-                }
-            }],
-            callbacks={
-                "row-activated":  self.on_files_table_row_activated,
-                "mouse-event":   self.on_files_table_mouse_event,
-                "key-event":     self.on_files_table_key_event
-            }
-        )
 
-        self.initialize_items()
-        
-        
     #
     # Helpers
     #
+    def on_context_menu_command_finished(self):
+        self.initialize_items()
+
+    def initialize_items(self):
+        """
+        Initializes the activated cache and loads the file items in a new thread
+        """
+
+        try:
+            six.moves._thread.start_new_thread(self.load, ())
+        except Exception as e:
+            log.exception(e)
 
     def load(self):
-        gtk.gdk.threads_enter()
         self.get_widget("status").set_text(_("Loading..."))
         self.items = self.vcs.get_items(self.paths, self.statuses)
         self.populate_files_table()
-        gtk.gdk.threads_leave()
-    
+
     def populate_files_table(self):
         self.files_table.clear()
 
@@ -96,23 +80,24 @@
             # FIXME: ...
             if item.simple_content_status() in (rabbitvcs.vcs.status.status_unversioned, rabbitvcs.vcs.status.status_ignored):
                 continue
-                
+
             if not self.svn.is_locked(item.path):
                 continue
-        
+
             self.files_table.append([
-                True, 
-                item.path, 
-                rabbitvcs.util.helper.get_file_extension(item.path)
+                True,
+                S(item.path),
+                item.path,
+                helper.get_file_extension(item.path)
             ])
             found += 1
-            
+
         self.get_widget("status").set_text(_("Found %d item(s)") % found)
-    
+
     #
     # UI Signal Callbacks
     #
-             
+
     def on_ok_clicked(self, widget):
         items = self.files_table.get_activated_rows(1)
         if not items:
@@ -124,19 +109,19 @@
             self.svn,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Unlock"))
         self.action.append(self.action.set_status, _("Running Unlock Command..."))
         for item in items:
             self.action.append(self.svn.unlock, item, force=True)
         self.action.append(self.action.set_status, _("Completed Unlock"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 class SVNUnlockQuiet:
     """
     This class provides a handler to unlock functionality.
-    
+
     """
 
     def __init__(self, paths, base_dir=None):
@@ -159,16 +144,17 @@
     guess = rabbitvcs.vcs.guess(paths[0])
     return cmap[guess["vcs"]](paths, base_dir)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT, QUIET_OPT
     (options, paths) = main(
         [BASEDIR_OPT, QUIET_OPT],
         usage="Usage: rabbitvcs unlock [path1] [path2] ..."
     )
-        
+
     if options.quiet:
         unlock_factory(quiet_classes_map, paths)
     else:
         window = unlock_factory(classes_map, paths, options.base_dir)
         window.register_gtk_quit()
-        gtk.main()
+        Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/unstage.py rabbitvcs/rabbitvcs/ui/unstage.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/unstage.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/unstage.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,31 +1,35 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
 import six.moves._thread
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 from rabbitvcs.ui.add import Add
@@ -33,7 +37,7 @@
 import rabbitvcs.ui.widget
 import rabbitvcs.ui.dialog
 import rabbitvcs.ui.action
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 from rabbitvcs.util.log import Log
 
 import rabbitvcs.vcs
@@ -44,49 +48,21 @@
 _ = gettext.gettext
 
 class GitUnstage(Add):
-    def __init__(self, paths, base_dir=None):
-        InterfaceView.__init__(self, "add", "Add")
-
-        self.window = self.get_widget("Add")
-        self.window.set_title(_("Unstage"))
-
-        self.paths = paths
-        self.base_dir = base_dir
-        self.last_row_clicked = None
-        self.vcs = rabbitvcs.vcs.VCS()
+    def setup(self, window, columns):
+        window.set_title(_("Unstage"))
         self.git = self.vcs.git(self.paths[0])
-        self.items = None
         self.statuses = self.git.STATUSES_FOR_UNSTAGE
-        self.files_table = rabbitvcs.ui.widget.Table(
-            self.get_widget("files_table"), 
-            [gobject.TYPE_BOOLEAN, rabbitvcs.ui.widget.TYPE_PATH, 
-                gobject.TYPE_STRING], 
-            [rabbitvcs.ui.widget.TOGGLE_BUTTON, _("Path"), _("Extension")],
-            filters=[{
-                "callback": rabbitvcs.ui.widget.path_filter,
-                "user_data": {
-                    "base_dir": base_dir,
-                    "column": 1
-                }
-            }],
-            callbacks={
-                "row-activated":  self.on_files_table_row_activated,
-                "mouse-event":   self.on_files_table_mouse_event,
-                "key-event":     self.on_files_table_key_event
-            }
-        )
-
-        self.initialize_items()
 
     def populate_files_table(self):
         self.files_table.clear()
         for item in self.items:
             self.files_table.append([
-                True, 
-                item.path, 
-                rabbitvcs.util.helper.get_file_extension(item.path)
+                True,
+                S(item.path),
+                item.path,
+                helper.get_file_extension(item.path)
             ])
-                    
+
     def on_ok_clicked(self, widget):
         items = self.files_table.get_activated_rows(1)
         if not items:
@@ -98,14 +74,14 @@
             self.git,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Unstage"))
         self.action.append(self.action.set_status, _("Running Unstage Command..."))
         for item in items:
             self.action.append(self.git.unstage, item)
         self.action.append(self.action.set_status, _("Completed Unstage"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 class GitUnstageQuiet:
     def __init__(self, paths, base_dir=None):
@@ -115,10 +91,10 @@
             self.git,
             run_in_thread=False
         )
-        
+
         for path in paths:
             self.action.append(self.git.unstage, path)
-        self.action.run()
+        self.action.schedule()
 
 classes_map = {
     rabbitvcs.vcs.VCS_GIT: GitUnstage
@@ -132,6 +108,7 @@
     guess = rabbitvcs.vcs.guess(paths[0])
     return classes_map[guess["vcs"]](paths, base_dir)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, BASEDIR_OPT, QUIET_OPT
     (options, paths) = main(
@@ -144,4 +121,4 @@
     else:
         window = unstage_factory(classes_map, paths, options.base_dir)
         window.register_gtk_quit()
-        gtk.main()
+        Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/update.py rabbitvcs/rabbitvcs/ui/update.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/update.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/update.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,29 +1,33 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceNonView, InterfaceView
 from rabbitvcs.ui.action import SVNAction, GitAction
@@ -36,9 +40,9 @@
 class SVNUpdate(InterfaceNonView):
     """
     This class provides an interface to generate an "update".
-    Pass it a path and it will start an update, running the notification dialog.  
+    Pass it a path and it will start an update, running the notification dialog.
     There is no glade .
-    
+
     """
 
     def __init__(self, paths):
@@ -49,21 +53,22 @@
     def start(self):
         self.action = SVNAction(
             self.svn,
-            register_gtk_quit=self.gtk_quit_is_set()
+            register_gtk_quit=self.gtk_quit_is_set(),
+            run_in_thread=False
         )
         self.action.append(self.action.set_header, _("Update"))
         self.action.append(self.action.set_status, _("Updating..."))
         self.action.append(self.svn.update, self.paths)
         self.action.append(self.action.set_status, _("Completed Update"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 class GitUpdate(InterfaceView):
     """
     This class provides an interface to generate an "update".
-    Pass it a path and it will start an update, running the notification dialog.  
+    Pass it a path and it will start an update, running the notification dialog.
     There is no glade .
-    
+
     """
 
     def __init__(self, paths):
@@ -77,7 +82,7 @@
             self.get_widget("repository_container"),
             self.git
         )
-        
+
     def on_apply_changes_toggled(self, widget, data=None):
         self.get_widget("merge").set_sensitive(self.get_widget("apply_changes").get_active())
         self.get_widget("rebase").set_sensitive(self.get_widget("apply_changes").get_active())
@@ -97,17 +102,18 @@
 
         self.action = GitAction(
             self.git,
-            register_gtk_quit=self.gtk_quit_is_set()
+            register_gtk_quit=self.gtk_quit_is_set(),
+            run_in_thread=False
         )
         self.action.append(self.action.set_header, _("Update"))
         self.action.append(self.action.set_status, _("Updating..."))
 
         if apply_changes:
             if rebase:
-                git_function_params.append ("rebase")
+                git_function_params.append("rebase")
 
             if fetch_all:
-                git_function_params.append ("all")
+                git_function_params.append("all")
                 repository = ""
                 branch = ""
 
@@ -117,14 +123,14 @@
                 self.action.append(self.git.fetch_all)
             else:
                 self.action.append(self.git.fetch, repository, branch)
-                
+
         self.action.append(self.action.set_status, _("Completed Update"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
 
 classes_map = {
-    rabbitvcs.vcs.VCS_SVN: SVNUpdate, 
+    rabbitvcs.vcs.VCS_SVN: SVNUpdate,
     rabbitvcs.vcs.VCS_GIT: GitUpdate
 }
 
@@ -132,6 +138,7 @@
     guess = rabbitvcs.vcs.guess(paths[0])
     return classes_map[guess["vcs"]](paths)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main
     (options, paths) = main(usage="Usage: rabbitvcs update [path1] [path2] ...")
@@ -140,4 +147,4 @@
     window.register_gtk_quit()
     if isinstance(window, SVNUpdate):
         window.start()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/updateto.py rabbitvcs/rabbitvcs/ui/updateto.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/updateto.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/updateto.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,29 +1,33 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import pygtk
-import gobject
-import gtk
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk, GObject, Gdk
+sa.restore()
 
 from rabbitvcs.ui import InterfaceView
 import rabbitvcs.ui.action
@@ -37,7 +41,7 @@
     """
     This class provides an interface to update a working copy to a specific
     revision.  It has a glade .
-    
+
     """
 
     def __init__(self, path, revision=None):
@@ -75,12 +79,12 @@
             self.svn,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         if rollback:
             self.action.append(self.action.set_header, _("Rollback To Revision"))
             self.action.append(self.action.set_status, _("Rolling Back..."))
             self.action.append(
-                self.svn.merge_ranges, 
+                self.svn.merge_ranges,
                 self.svn.get_repo_url(self.path),
                 [(self.svn.revision("HEAD").primitive(), revision.primitive())],
                 self.svn.revision("head"),
@@ -91,16 +95,16 @@
             self.action.append(self.action.set_header, _("Update To Revision"))
             self.action.append(self.action.set_status, _("Updating..."))
             self.action.append(
-                self.svn.update, 
+                self.svn.update,
                 self.path,
                 revision=revision,
                 recurse=recursive,
                 ignore_externals=omit_externals
             )
             self.action.append(self.action.set_status, _("Completed Update"))
-            
+
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def on_revision_changed(self, revision_selector):
         # Only allow rollback when a revision number is specified
@@ -113,7 +117,7 @@
 class GitUpdateToRevision(UpdateToRevision):
     def __init__(self, path, revision):
         UpdateToRevision.__init__(self, path, revision)
-        
+
         self.get_widget("revision_label").set_text(_("What revision/branch do you want to checkout?"))
 
         self.git = self.vcs.git(path)
@@ -134,7 +138,7 @@
             self.git,
             register_gtk_quit=self.gtk_quit_is_set()
         )
-        
+
         self.action.append(self.action.set_header, _("Checkout"))
         self.action.append(self.action.set_status, _("Checking out %s..." % revision))
         self.action.append(
@@ -144,7 +148,7 @@
         )
         self.action.append(self.action.set_status, _("Completed Checkout"))
         self.action.append(self.action.finish)
-        self.action.start()
+        self.action.schedule()
 
     def on_revision_changed(self, revision_selector):
         pass
@@ -161,13 +165,14 @@
 
     return classes_map[vcs](path, revision)
 
+
 if __name__ == "__main__":
     from rabbitvcs.ui import main, REVISION_OPT, VCS_OPT
     (options, args) = main(
         [REVISION_OPT, VCS_OPT],
         usage="Usage: rabbitvcs updateto [path]"
     )
- 
+
     window = updateto_factory(options.vcs, args[0], revision=options.revision)
     window.register_gtk_quit()
-    gtk.main()
+    Gtk.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/widget.py rabbitvcs/rabbitvcs/ui/widget.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/widget.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/widget.py	2019-09-13 08:36:17.257343196 +0800
@@ -1,80 +1,47 @@
 from __future__ import absolute_import
-import six
 from six.moves import range
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-try:
-    from gi.repository import GObject as gobject
-except ImportError:
-    import gobject
-
 import os
-if "NAUTILUS_PYTHON_REQUIRE_GTK3" in os.environ and os.environ["NAUTILUS_PYTHON_REQUIRE_GTK3"]:
-    from gi.repository import Gtk as gtk
-    GTK_FILL = gtk.AttachOptions.FILL
-    GTK_EXPAND = gtk.AttachOptions.EXPAND
-    GTK3 = True
-else:
-    import gtk
-    GTK_FILL = gtk.FILL
-    GTK_EXPAND = gtk.EXPAND
-    GTK3 = False
-
-# GI Pango is broken in some versions of pygobject 2.28.x, if that is the case
-# set HAS_PANGO to false and do without ellipsizing for now
-HAS_PANGO = True
-try:
-    from gi.repository import Pango as pango
-    PANGO_ELLIPSIZE_MIDDLE = pango.EllipsizeMode.MIDDLE
-    PANGO_ELLIPSIZE_END = pango.EllipsizeMode.END
-except ImportError:
-    import pango
-    PANGO_ELLIPSIZE_MIDDLE = pango.ELLIPSIZE_MIDDLE
-    PANGO_ELLIPSIZE_END = pango.ELLIPSIZE_END
-except AttributeError:
-    HAS_PANGO = False
-    pass
-
-
 import os.path
+from locale import getlocale, LC_MESSAGES, strxfrm
+
+import gi
+gi.require_version("Gtk", "3.0")
+from gi.repository import Gtk, GObject, Pango
 
 HAS_GTKSPELL = False
-if not GTK3:
-    try:
-        import gtkspell
-        HAS_GTKSPELL = True
-    except ImportError:
-        pass    
-
-HAS_GTKSOURCEVIEW = False
-if not GTK3:
-    try:
-        import gtksourceview
-        HAS_GTKSOURCEVIEW = True
-    except ImportError:
-        pass
+try:
+    gi.require_version("GtkSpell", "3.0")
+    from gi.repository import GtkSpell
+    HAS_GTKSPELL = True
+except (ImportError, ValueError):
+    pass
 
-import rabbitvcs.util.helper
+from rabbitvcs.util.decorators import gtk_unsafe
+from rabbitvcs.util import helper
+from rabbitvcs.util.strings import S
+import rabbitvcs.vcs
 
 from rabbitvcs import gettext
 _ = gettext.gettext
@@ -91,6 +58,7 @@
 TYPE_GRAPH = 'TYPE_GRAPH'
 TYPE_MARKUP = 'TYPE_MARKUP'
 TYPE_HIDDEN = 'TYPE_HIDDEN'
+TYPE_HIDDEN_OBJECT = 'TYPE_HIDDEN_OBJECT'
 
 ELLIPSIZE_COLUMN_CHARS = 20
 
@@ -102,24 +70,24 @@
     """
     Route filter requests for a table's columns.  This function is called for
     each cell of the table that gets displayed.
-    
-    @type   model: gtk.TreeModelFilter or gtk.TreeModelSort
-    @param  model: The TreeModelFilter or gtk.TreeModelSort instance for our
+
+    @type   model: Gtk.TreeModelFilter or Gtk.TreeModelSort
+    @param  model: The TreeModelFilter or Gtk.TreeModelSort instance for our
                    table
-    
-    @type   iter: gtk.TreeIter
+
+    @type   iter: Gtk.TreeIter
     @param  iter: The TreeIter instance for the table row being filtered
-    
+
     @type   column: int
     @param  column: The column index of the current item being filtered
-    
+
     @type   filters: list
     @param  filters: A list of dicts used to define how a column should be
         filtered
-        
+
         Note for filters:  Each dict consists of a callback function and user
         data like so:
-        
+
             {
                 "callback": self.file_filter,
                 "user_data": {
@@ -127,14 +95,14 @@
                     "base_dir": "/home/workingcopy"
                 }
             }
-    
+
     @return    The filtered output defined for the given column
-    
+
     """
     real_model = model.get_model()
-    
+
     real_iter = model.convert_iter_to_child_iter(iter)
-    
+
     row = real_model[real_model.get_path(real_iter)]
 
     if not filters:
@@ -151,49 +119,49 @@
     """
     A common filter function that is used in many tables.  Changes the displayed
     path to a path relative to the given base_dir (current working directory)
-    
-    @type   row: gtk.TreeModelRow
+
+    @type   row: Gtk.TreeModelRow
     @param  row: The row that is being filtered
-    
+
     @type   column: int
     @param  column: The column that is being filtered
-    
+
     @type   user_data: dict
     @param  user_data: A dictionary of user_data useful to this function
-    
+
     @rtype  str
     @return A relative path
-    
+
     """
     base_dir = user_data["base_dir"]
 
     if row[column]:
-        relpath = rabbitvcs.util.helper.get_relative_path(base_dir, row[column])
+        relpath = helper.get_relative_path(base_dir, row[column])
         if relpath == "":
             relpath = os.path.basename(row[column])
         return relpath
     else:
-        return row[column] 
+        return row[column]
 
 def long_text_filter(row, column, user_data=None):
     """
     Uses the format_long_text helper function to trim and prettify some text.
     """
     text = row[column]
-    
+
     cols = user_data["cols"]
-    
-    
+
+
     if text:
-        text = rabbitvcs.util.helper.format_long_text(text, cols)
-        
+        text = helper.format_long_text(text, cols)
+
     return text
 
 def git_revision_filter(row, column, user_data=None):
     """
-    Only show the first six characters of a git revision hash
+    Only show the first seven characters of a git revision hash
     """
-    
+
     text = row[column]
     if text:
         if text.startswith("<b>"):
@@ -209,7 +177,7 @@
     """
     text = row[column]
     if text: return _(text)
-    
+
 def compare_items(model, iter1, iter2, user_data=None):
 
     if not user_data:
@@ -217,44 +185,48 @@
         return 0
 
     colnum, coltype = user_data
-    
+
     real_model = model.get_model()
     real_iter1 = model.convert_iter_to_child_iter(iter1)
     real_iter2 = model.convert_iter_to_child_iter(iter2)
-    
+
     value1 = real_model.get_value(real_iter1, colnum)
     value2 = real_model.get_value(real_iter2, colnum)
-    
+
+    if coltype in [GObject.TYPE_STRING, str]:
+        value1 = strxfrm(value1)
+        value2 = strxfrm(value2)
+
     if value1 == value2:
         return 0
     elif value1 < value2:
         return -1
     else:
         return 1
-    
+
 class TableBase:
     def __init__(self, treeview, coltypes, colnames, values=[], filters=None,
                  filter_types=None, callbacks={}, flags={}):
         """
-        @type   treeview: gtk.Treeview
+        @type   treeview: Gtk.Treeview
         @param  treeview: The treeview widget to use
-        
+
         @type   coltypes: list
         @param  coltypes: Contains the "type" of each column (i.e. str or int)
-        
+
         @type   colnames: list
         @param  colnames: Contains the name string for each column
-        
+
         @type   values: list
         @param  values: Contains the data to be inserted into the table
-        
+
         @type   filters: list
         @param  filters: A list of dicts used to define how a column should be
             filtered
-            
+
             Note for filters:  Each dict consists of a callback function and user
             data like so:
-            
+
                 {
                     "callback": self.file_filter,
                     "user_data": {
@@ -262,29 +234,29 @@
                         "base_dir": "/home/workingcopy"
                     }
                 }
-        
+
         @type   filter_types: list
         @param  filter_types: Contains the filtered "type" of each column.
-        
+
         @type   callbacks: dict
         @param  callbacks: A dict of callbacks to be used.  Some are for signal
             handling while others are useful for other things.
-            
+
         @type   flags: dict
         @param  flags: A dict of flags
-        
+
         FLAGS:
             @type   sortable: boolean
             @param  sortable: whether the columns can be sorted
-            
+
             @type   sort_on: int
             @param  sort_on: the column number to initially sort by
-            
+
             @type   editable: list
             @param  editable: A list of which columns are editable
-        
+
         """
-        
+
         from .renderers.graphcell import CellRendererGraph
 
         if "sortable" not in flags:
@@ -293,7 +265,7 @@
             flags["sort_on"] = -1
         if "editable" not in flags:
             flags["editable"] = ()
-    
+
         self.treeview = treeview
         self.selected_rows = []
 
@@ -302,29 +274,29 @@
         self._reassert_selection = False
         i = 0
         for name in colnames:
-            if coltypes[i] == gobject.TYPE_BOOLEAN:
-                cell = gtk.CellRendererToggle()
+            if coltypes[i] == GObject.TYPE_BOOLEAN:
+                cell = Gtk.CellRendererToggle()
                 cell.set_property('activatable', True)
                 cell.set_property('xalign', 0)
                 cell.connect("toggled", self.toggled_cb, i)
-                
+
                 colname = ""
                 if name != TOGGLE_BUTTON:
                     colname = name
-                
-                col = gtk.TreeViewColumn(colname, cell)
+
+                col = Gtk.TreeViewColumn(colname, cell)
                 col.set_attributes(cell, active=i)
             elif coltypes[i] == TYPE_PATH:
                 # The type should be str but we have to use TYPE_PATH to
                 # distinguish from a regular str column
                 coltypes[i] = str
-                
-                # First we create the column, then we create a CellRenderer 
+
+                # First we create the column, then we create a CellRenderer
                 # instance for the path icon and a CellRenderer instance for
                 # the path.  Each is packed into the treeview column
-                col = gtk.TreeViewColumn(name)
+                col = Gtk.TreeViewColumn(name)
 
-                cellpb = gtk.CellRendererPixbuf()
+                cellpb = Gtk.CellRendererPixbuf()
                 cellpb.set_property('xalign', 0)
                 cellpb.set_property('yalign', 0)
                 col.pack_start(cellpb, False)
@@ -336,69 +308,72 @@
                     }
                 else:
                     data = {
-                        "callback": rabbitvcs.util.helper.get_node_kind,
+                        "callback": helper.get_node_kind,
                         "column": i
                     }
                 col.set_cell_data_func(cellpb, self.file_pixbuf, data)
-                
-                cell = gtk.CellRendererText()
+
+                cell = Gtk.CellRendererText()
                 cell.set_property('xalign', 0)
                 cell.set_property('yalign', 0)
                 col.pack_start(cell, False)
                 col.set_attributes(cell, text=i)
             elif coltypes[i] == TYPE_STATUS:
                 # Same as for TYPE_PATH
-                coltypes[i] = str                
-                col = gtk.TreeViewColumn(name)
-                
-                cellpb = gtk.CellRendererPixbuf()
+                coltypes[i] = str
+                col = Gtk.TreeViewColumn(name)
+
+                cellpb = Gtk.CellRendererPixbuf()
                 cellpb.set_property('xalign', 0)
                 cellpb.set_property('yalign', 0)
-                
+
                 col.pack_start(cellpb, False)
-                
+
                 data = None
-                
+
                 col.set_cell_data_func(cellpb, self.status_pixbuf, i)
-                
-                cell = gtk.CellRendererText()
+
+                cell = Gtk.CellRendererText()
                 cell.set_property('xalign', 0)
                 cell.set_property('yalign', 0)
                 col.pack_start(cell, False)
                 col.set_attributes(cell, text=i)
             elif coltypes[i] == TYPE_HIDDEN:
                 coltypes[i] = str
-                col = gtk.TreeViewColumn(name, cell)
+                col = Gtk.TreeViewColumn(name)
+                col.set_visible(False)
+            elif coltypes[i] == TYPE_HIDDEN_OBJECT:
+                coltypes[i] = GObject.TYPE_PYOBJECT
+                col = Gtk.TreeViewColumn(name)
                 col.set_visible(False)
             elif coltypes[i] == TYPE_ELLIPSIZED:
                 coltypes[i] = str
-                cell = gtk.CellRendererText()
+                cell = Gtk.CellRendererText()
                 cell.set_property('yalign', 0)
                 cell.set_property('xalign', 0)
-                if HAS_PANGO:
-                    cell.set_property('ellipsize', PANGO_ELLIPSIZE_END)
-                    cell.set_property('width-chars', ELLIPSIZE_COLUMN_CHARS)
-                col = gtk.TreeViewColumn(name, cell)
+                cell.set_property('ellipsize', Pango.EllipsizeMode.END)
+                cell.set_property('width-chars', ELLIPSIZE_COLUMN_CHARS)
+                col = Gtk.TreeViewColumn(name, cell)
                 col.set_attributes(cell, text=i)
             elif coltypes[i] == TYPE_GRAPH:
-                coltypes[i] = gobject.TYPE_PYOBJECT
+                coltypes[i] = GObject.TYPE_PYOBJECT
                 cell = CellRendererGraph()
-                col = gtk.TreeViewColumn(name, cell)
+                col = Gtk.TreeViewColumn(name, cell)
                 col.add_attribute(cell, "graph", i)
             else:
-                cell = gtk.CellRendererText()
+                cell = Gtk.CellRendererText()
                 cell.set_property('yalign', 0)
                 cell.set_property('xalign', 0)
                 if i in flags["editable"]:
                     cell.set_property('editable', True)
                     cell.connect("edited", self.__cell_edited, i)
-                
+
                 if coltypes[i] == TYPE_MARKUP:
-                    col = gtk.TreeViewColumn(name, cell, markup=i)
+                    col = Gtk.TreeViewColumn(name, cell, markup=i)
                 else:
-                    col = gtk.TreeViewColumn(name, cell, text=i)
+                    col = Gtk.TreeViewColumn(name, cell, text=i)
 
-                coltypes[i] = gobject.TYPE_STRING
+                coltypes[i] = GObject.TYPE_STRING
 
             if flags["sortable"]:
                 col.set_sort_column_id(i)
@@ -406,6 +381,7 @@
             self.treeview.append_column(col)
             i += 1
 
+        self.coltypes = coltypes
         self.data = self.get_store(coltypes)
 
         self.sorted = None
@@ -424,31 +400,31 @@
                         filters)
 
 
-		# This runs through the columns, and sets the "compare_items" comparator
+        # This runs through the columns, and sets the "compare_items" comparator
         # as needed. Note that the user data tells which column to sort on.
         if flags["sortable"]:
-            self.sorted = gtk.TreeModelSort(self.filter)
-            
+            self.sorted = Gtk.TreeModelSort(self.filter)
+
             self.sorted.set_default_sort_func(compare_items, None)
-            
+
             for idx in range(0, i):
                 self.sorted.set_sort_func(idx,
                                           compare_items,
                                           (idx, coltypes[idx]))
-               
-            self.sorted.set_sort_column_id(flags["sort_on"], gtk.SORT_ASCENDING)
-            
+
+            self.sorted.set_sort_column_id(flags["sort_on"], Gtk.SortType.ASCENDING)
+
             self.treeview.set_model(self.sorted)
-            
+
         elif filters:
             self.treeview.set_model(self.filter)
         else:
             self.treeview.set_model(self.data)
 
-        
+
         if len(values) > 0:
             self.populate(values)
-    
+
         self.set_resizable()
 
         # Set up some callbacks for all tables to deal with row clicking and
@@ -494,9 +470,9 @@
 
     def toggled_cb(self, cell, path, column):
         model = self.data
-        realpath = self._realpath(path)
+        realpath = self._realpath(Gtk.TreePath.new_from_string(path))
         # User has clicked a checkbox on a selected item.
-        toggleMulti = realpath[0] in self.selected_rows and len(self.selected_rows) > 1
+        toggleMulti = realpath in self.selected_rows and len(self.selected_rows) > 1
         model[realpath][column] = not model[realpath][column]
         if "row-toggled" in self.callbacks:
             self.callbacks["row-toggled"](model[realpath], column)
@@ -510,9 +486,20 @@
                     self.callbacks["row-toggled"](model[selPath], column)
             self._reassert_selection = True
 
-    def append(self, row):
-        self.data.append(row)
+    @gtk_unsafe
+    def real_append(self, **kwargs):
+        return self.data.append(**kwargs)
+
+    def append(self, row, **kwargs):
+        # Python 3 needs type conversions.
+        newrow = []
+        for i, item in enumerate(row):
+            if self.coltypes[i] in [GObject.TYPE_STRING, str]:
+                item = S(item).display()
+            newrow.append(item)
+        return self.real_append(row=newrow, **kwargs)
 
+    @gtk_unsafe
     def remove(self, index):
         model = self.data
         del model[index]
@@ -523,31 +510,34 @@
             rm_index = row
             if i > 0:
                 rm_index -= 1
-            
+
             self.remove(rm_index)
-            i += 1     
+            i += 1
 
     def get_items(self):
         return self.data
 
+    @gtk_unsafe
     def clear(self):
         self.data.clear()
         self.reset_selection()
-        
+
     def get_row(self, index):
         model = self.data
         return model[index]
-    
+
+    @gtk_unsafe
     def set_row(self, index, row):
         model = self.data
         model[index] = row
-    
+
+    @gtk_unsafe
     def set_row_item(self, row, column, val):
         model = self.data
         model[row][column] = val
-    
+
     def allow_multiple(self):
-        self.treeview.get_selection().set_mode(gtk.SELECTION_MULTIPLE)
+        self.treeview.get_selection().set_mode(Gtk.SelectionMode.MULTIPLE)
 
     def get_activated_rows(self, column=None):
         returner = []
@@ -556,11 +546,10 @@
                 item = row
                 if column is not None:
                     item = row[column]
-                
+
                 returner.append(item)
-                
         return returner
-    
+
     def scroll_to_bottom(self):
         bottom = len(self.get_items()) - 1
         self.treeview.scroll_to_cell(bottom)
@@ -575,10 +564,10 @@
     def set_column_width(self, column, width=None):
         col = self.treeview.get_column(column)
         if width is not None:
-            col.set_sizing(gtk.TREE_VIEW_COLUMN_FIXED)
+            col.set_sizing(Gtk.TreeViewColumnSizing.FIXED)
             col.set_fixed_width(width)
         else:
-            col.set_sizing(gtk.TREE_VIEW_COLUMN_AUTOSIZE)
+            col.set_sizing(Gtk.TreeViewColumnSizing.AUTOSIZE)
 
     def update_selection(self):
         selection = self.treeview.get_selection()
@@ -586,19 +575,18 @@
         # selected; user retains their selection after using
         # the new multicheck feature.
         if not self._reassert_selection:
-            (liststore, indexes) = selection.get_selected_rows()
+            (model, indexes) = selection.get_selected_rows()
 
             self.reset_selection()
 
-            for tup in indexes:
-                self.selected_rows.append(self._realpath(tup)[0])
+            for path in indexes:
+                self.selected_rows.append(self._realpath(path))
 
         else:
             self._reassert_selection = False
 
-            for tup in self.selected_rows:
-                path = self._sortedpath(tup);
-                selection.select_range(path, path)
+            for path in self.selected_rows:
+                selection.select_path(self._sortedpath(path))
 
     def reset_selection(self):
         self.selected_rows = []
@@ -607,22 +595,23 @@
         items = []
         for row in self.selected_rows:
             items.append(self.data[row][col])
-        
+
         return items
 
     def get_selected_rows(self):
         return self.selected_rows
-        
+
     def generate_string_from_data(self):
         lines = []
         for row in self.data:
             line = []
             for cell in row:
-                line.append(six.text_type(cell))
+                line.append(S(cell))
             lines.append("\t".join(line))
-        
+
         return "\n".join(lines)
-        
+
+    @gtk_unsafe
     def unselect_all(self):
         self.treeview.get_selection().unselect_all()
 
@@ -634,31 +623,30 @@
     def __button_press_event(self, treeview, data):
         info = treeview.get_path_at_pos(int(data.x), int(data.y))
         selection = treeview.get_selection()
-        
+        result = False
+
         # If info is none, that means the user is clicking the empty space
         # In that case, unselect everything and update the selected_rows
         if info is None:
             selection.unselect_all()
             self.update_selection()
-            return
-            
-        # this allows us to retain multiple selections with a right-click
-        if data.button == 3:
-            (liststore, indexes) = selection.get_selected_rows()
-            
+        elif data.button == 3:
+            # this allows us to retain multiple selections with a right-click
+            (model, indexes) = selection.get_selected_rows()
+
             # If the mouse click is one of the currently selected rows
             # keep the selection, otherwise, use the new selection
-            for index in indexes:
-                if index[0] == info[0][0]:
-                    return True
-            return False
+            result = any(index == info[0] for index in indexes)
+        if "mouse-event" in self.callbacks:
+            result = self.callbacks["mouse-event"](treeview, data) or result
+        return result
 
     def __row_activated_event(self, treeview, data, col):
         treeview.grab_focus()
         self.update_selection()
         if "row-activated" in self.callbacks:
             self.callbacks["row-activated"](treeview, data, col)
-    
+
     def __row_selected(self, treeview, started_editing):
         self.update_selection()
         if "row-selected" in self.callbacks:
@@ -670,14 +658,14 @@
         treeview.get_selection().select_all()
         self.update_selection()
         if "all-selected" in self.callbacks:
-            self.callbacks["all-selected"](treeview, started_editing)
+            self.callbacks["all-selected"](treeview)
 
     def __all_unselected(self, treeview):
         treeview.get_selection().unselect_all()
         self.update_selection()
         if "all-unselected" in self.callbacks:
-            self.callbacks["all-unselected"](treeview, started_editing)
-        
+            self.callbacks["all-unselected"](treeview)
+
     def __key_press_event(self, treeview, data):
         self.update_selection()
         if "key-event" in self.callbacks:
@@ -687,13 +675,11 @@
         self.update_selection()
         if "cursor-changed" in self.callbacks:
             self.callbacks["cursor-changed"](treeview)
-        if "mouse-event" in self.callbacks:
-            self.callbacks["mouse-event"](treeview)
 
     def __button_release_event(self, treeview, data):
         self.update_selection()
         if "mouse-event" in self.callbacks:
-            self.callbacks["mouse-event"](treeview, data)
+            return self.callbacks["mouse-event"](treeview, data)
 
     def __cell_edited(self, cell, row, data, column):
         self.update_selection()
@@ -704,57 +690,63 @@
 #        self.data.set_sort_column_id(column_idx, )
 
     def status_pixbuf(self, column, cell, model, iter, colnum):
-        
+
         path = model.get_path(iter)
-    
+
         real_path = model.convert_path_to_child_path(path)
-        
+
         status = self.data[real_path][colnum]
-        
+
         if status not in list(STATUS_EMBLEMS.keys()):
             status = "error"
-             
+
         icon = "emblem-" + STATUS_EMBLEMS[status]
-        
-        cell.set_property("icon_name", icon)
-        
+
+        cell.set_property("icon-name", icon)
+
 
     def file_pixbuf(self, column, cell, model, iter, data=None):
-        stock_id = None
-        
+        icon_name = None
+
         path = model.get_path(iter)
-    
+
         real_path = model.convert_path_to_child_path(path)
-            
+
         if data:
             real_item = self.data[real_path][data["column"]]
             kind = data["callback"](real_item)
-            stock_id = gtk.STOCK_FILE
+            icon_name = "text-x-generic"
             if kind == "dir":
-                stock_id = gtk.STOCK_DIRECTORY
+                icon_name = "folder"
+
+        if not icon_name is None:
+            cell.set_property("icon-name", icon_name)
 
-        if stock_id is not None:
-            cell.set_property("stock_id", stock_id)
 
 class Table(TableBase):
     """
     Generate a flat tree view.
-        
+
     See the TableBase documentation for parameter information
 
     """
-    
-    def __init__(self, treeview, coltypes, colnames, values=[], filters=None, 
+
+    def __init__(self, treeview, coltypes, colnames, values=[], filters=None,
             filter_types=None, callbacks={}, flags={}):
-        TableBase.__init__(self, treeview, coltypes, colnames, values, filters, 
+        TableBase.__init__(self, treeview, coltypes, colnames, values, filters,
             filter_types, callbacks, flags)
-    
+
     def get_store(self, coltypes):
-        return gtk.ListStore(*coltypes)
+        return Gtk.ListStore(*coltypes)
 
     def populate(self, values):
         for row in values:
-            self.data.append(row)
+            self.append(row)
+
+    def get_selected_rows(self):
+        # Return as a list of integer row indexes.
+        return [path[0] for path in self.selected_rows]
+
 
 class Tree(TableBase):
     """
@@ -770,50 +762,123 @@
                 ])
             ])
         ]
-        
+
         Note that with multiple columns, you add to the list in the first element
         of each tuple.  (i.e. ["A"] becomes ["A", "Z", ... ]
-        
+
     See the TableBase documentation for parameter information
 
     """
-    def __init__(self, treeview, coltypes, colnames, values=[], filters=None, 
+    def __init__(self, treeview, coltypes, colnames, values=[], filters=None,
             filter_types=None, callbacks={}, flags={}):
-        TableBase.__init__(self, treeview, coltypes, colnames, values, filters, 
-            filter_types, callbacks, flags={})
-    
+        TableBase.__init__(self, treeview, coltypes, colnames, values, filters,
+            filter_types, callbacks, flags)
+
     def get_store(self, coltypes):
-        return gtk.TreeStore(*coltypes)
+        return Gtk.TreeStore(*coltypes)
 
     def populate(self, values, parent=None):
         for node in values:
-            root = node[0]
-            new_root = self.data.append(parent, root)
+            root = self.append(node[0], parent=parent)
             if len(node) > 1 and node[1] is not None:
-                self.populate(node[1], new_root)
-        
+                self.populate(node[1], root)
+
+
+class Box:
+    def __init__(self, box=None, vertical=False, spacing=-1):
+        if not box:
+            box = Gtk.Grid()
+        self.box = box
+        if spacing >= 0:
+            box.set_row_spacing(spacing)
+            box.set_column_spacing(spacing)
+        self.middle = 0
+        # Determine pack start/end indexes.
+        ch = [(box.child_get_property(c, "left-attach"),
+               box.child_get_property(c, "width")) for c in box.get_children()]
+        cv = [(box.child_get_property(c, "top-attach"),
+              box.child_get_property(c, "height")) for c in box.get_children()]
+        if ch:
+            ch.sort(key = lambda x: x[0])
+            cv.sort(key = lambda x: x[0])
+            if ch[-1][0] - ch[0][0] > 0:
+                vertical = False
+            elif cv[-1][0] - cv[0][0] > 0:
+                vertical = True
+            c = cv if vertical else ch
+            last = c.pop()
+            self.middle = last[0] + last[1]
+            while c:
+                prev = c.pop()
+                next = prev[0] + prev[1]
+                if next < last[0]:
+                    self.middle = next
+                    break
+                last = prev
+
+        self.insert = self.box.insert_column
+        self.attach = lambda child, pos: self.box.attach(child, pos, 0, 1, 1)
+        self.set_expand = lambda child, expand: child.set_hexpand(expand)
+        self.set_align = lambda child, align: child.set_halign(align)
+        self.set_padding = lambda child, padding: (child.set_margin_start(padding), child.set_margin_end(padding))
+        if vertical:
+            self.insert = self.box.insert_row
+            self.attach = lambda child, pos: self.box.attach(child, 0, pos, 1, 1)
+            self.set_expand = lambda child, expand: child.set_vexpand(expand)
+            self.set_align = lambda child, align: child.set_valign(align)
+            self.set_padding = lambda child, padding: (child.set_margin_top(padding), child.set_margin_bottom(padding))
+
+    def add(self, child):
+        if isinstance(child, Box):
+            child = child.box
+        self.insert(self.middle)
+        self.attach(child, self.middle)
+        self.middle = self.middle + 1
+
+    def pack_start(self, child, expand, fill, padding):
+        if isinstance(child, Box):
+            child = child.box
+        self.set_expand(child, expand)
+        self.set_align(child, Gtk.Align.FILL if fill else Gtk.Align.START)
+        self.set_padding(child, padding)
+        self.add(child)
+
+    def pack_end(self, child, expand, fill, padding):
+        if isinstance(child, Box):
+            child = child.box
+        self.set_expand(child, expand)
+        self.set_align(child, Gtk.Align.FILL if fill else Gtk.Align.END)
+        self.set_padding(child, padding)
+        self.insert(self.middle)
+        self.attach(child, self.middle + 1)
+
+    def __getattr__(self, name):
+        return getattr(self.box, name)
+
 class ComboBox:
-    def __init__(self, cb, items=None):
-    
+    def __init__(self, cb, items=None, columns=1, textcolumn=0):
+
         self.cb = cb
-    
-        self.model = gtk.ListStore(str)
-        if items is not None:
+
+        coltypes = [str] * columns
+        self.model = Gtk.ListStore(*coltypes)
+        if not items is None:
             for i in items:
                 self.append(i)
 
+        self.cb.clear()
         self.cb.set_model(self.model)
+        self.cb.set_entry_text_column(textcolumn)
 
-        if type(self.cb) == gtk.ComboBoxEntry:
-            self.cb.set_text_column(0)
-        elif type(self.cb) == gtk.ComboBox:
-            cell = gtk.CellRendererText()
-            self.cb.pack_start(cell, True)
-            self.cb.add_attribute(cell, 'text', 0)
+        self.cell = Gtk.CellRendererText()
+        self.cb.pack_start(self.cell, True)
+        self.cb.add_attribute(self.cell, 'text', textcolumn)
 
     def append(self, item):
-        self.model.append([item])
-        
+        if not isinstance(item, list):
+            item = [item]
+        self.model.append(item)
+
     def set_active_from_value(self, value):
         index = 0
         for entry in self.model:
@@ -821,94 +886,93 @@
                 self.cb.set_active(index)
                 return
             index += 1
-    
+
     def get_active_text(self):
-        return self.cb.get_active_text()
-    
+        child = self.cb.get_child()
+        if isinstance(child, Gtk.Entry):
+            return child.get_text()
+        index = self.cb.get_active()
+        if index < 0:
+            return ""
+        return self.model[index][0]
+
     def get_active(self):
         return self.cb.get_active()
-    
+
     def set_active(self, index):
         self.cb.set_active(index)
-    
+
     def set_child_text(self, text):
-        self.cb.child.set_text(text)
-    
+        self.cb.get_child().set_text(S(text).display())
+
     def set_sensitive(self, val):
         self.cb.set_sensitive(val)
 
     def set_child_signal(self, signal, callback, userdata=None):
-        self.cb.child.connect(signal, callback, userdata)
-        
+        self.cb.get_child().connect(signal, callback, userdata)
+
 class TextView:
     def __init__(self, widget=None, value="", spellcheck=True):
         if widget is None:
-            self.view = gtk.TextView()
+            self.view = Gtk.TextView()
         else:
             self.view = widget
-        self.buffer = gtk.TextBuffer()
+        self.buffer = Gtk.TextBuffer()
         self.view.set_buffer(self.buffer)
-        self.buffer.set_text(value)
-        
+        self.buffer.set_text(S(value).display())
+
         if HAS_GTKSPELL and spellcheck:
             try:
-                gtkspell.Spell(self.view)
+                checker = GtkSpell.Checker()
+                try:
+                    checker.set_language(getlocale(LC_MESSAGES)[0])
+                except:
+                    checker = None          # Language not available.
+                if checker:
+                    checker.attach(self.view)
             except Exception as e:
                 log.exception(e)
-        
+
     def get_text(self):
         return self.buffer.get_text(
-            self.buffer.get_start_iter(), 
-            self.buffer.get_end_iter()
+            self.buffer.get_start_iter(),
+            self.buffer.get_end_iter(),
+            True
         )
-        
+
+    @gtk_unsafe
     def set_text(self, text):
-        self.buffer.set_text(text)
+        self.buffer.set_text(S(text).display())
 
+    @gtk_unsafe
     def append_text(self, text):
-        self.buffer.set_text(self.get_text() + text)
-
-class SourceView(TextView):
-    def __init__(self, widget=None, value=""):
-        if HAS_GTKSOURCEVIEW:
-            if widget is None:
-                self.view = gtksourceview.SourceView(self.buffer)
-            else:
-                self.view = widget
-            self.buffer = gtksourceview.SourceBuffer()
-            self.buffer.set_text(value)
-
-            if HAS_GTKSPELL:
-                gtkspell.Spell(self.view)
-
-            self.view.show()
-        else:
-            TextView.__init__(self, widget, value)
+        self.buffer.set_text(S(self.get_text() + text).display())
 
 class ProgressBar:
     def __init__(self, pbar):
         if pbar is None:
-            self.view = gtk.ProgressBar()
+            self.view = Gtk.ProgressBar()
         else:
             self.view = pbar
-        
+
         self.timer = None
-        
+
     def start_pulsate(self):
         # Set up an interval to make the progress bar pulse
         # The timeout is removed after the log action finishes
-        self.timer = gobject.timeout_add(100, self.update)
-    
+        self.timer = GObject.timeout_add(100, self.update)
+
     def stop_pulsate(self):
         if self.timer:
-            gobject.source_remove(self.timer)
+            GObject.source_remove(self.timer)
         self.timer = None
 
+    @gtk_unsafe
     def update(self, fraction=None):
         if fraction:
             if self.timer is not None:
                 self.stop_pulsate()
-                 
+
             if fraction > 1:
                 fraction = 1
             self.view.set_fraction(fraction)
@@ -917,42 +981,43 @@
             self.view.pulse()
             return True
 
+    @gtk_unsafe
     def set_text(self, text):
-        self.view.set_text(text)
+        self.view.set_text(S(text).display())
 
 class RevisionSelector:
     """
     Provides a standard way to generate a revision object from the UI.
-    
+
     """
 
-    def __init__(self, container, client, revision=None, 
+    def __init__(self, container, client, revision=None,
             url_combobox=None, url_entry=None, url=None, expand=False,
             revision_changed_callback=None):
         """
-        @type   container: A gtk container object (i.e. HBox, VBox, Box)
+        @type   container: A Gtk container object (i.e. HBox, VBox, Box)
         @param  container: The container that to add this widget
-        
+
         @type   client: VCS client object
         @param  client: A vcs client instance (i.e. rabbitvcs.vcs.VCS())
-        
+
         @type   revision: int
         @param  revision: A revision number to start with
-        
+
         @type   url_combobox: rabbitvcs.ui.widget.ComboBox
         @param  url_combobox: A repository url combobox
 
-        @type   url_entry: gtk.Entry
+        @type   url_entry: Gtk.Entry
         @param  url_entry: A repository url entry
-        
+
         @type   url: str
         @param  url: A repository url string
-        
+
         Note: The url fields are required for use with the log browser.  It can
                 be excluded.
 
         """
-        
+
         self.client = client
         self.revision = revision
         self.url_combobox = url_combobox
@@ -960,8 +1025,9 @@
         self.url = url
         self.revision_changed_callback = revision_changed_callback
         self.revision_change_inprogress = False
-        hbox = gtk.HBox(0, 4)
-        
+        hbox = Box(spacing = 4)
+        hbox.set_hexpand(expand)
+
         if self.url_combobox:
             self.url_combobox.cb.connect("changed", self.__on_url_combobox_changed)
 
@@ -978,25 +1044,25 @@
             ]
             if not client.is_path_repository_url(self.get_url()):
                 self.OPTIONS.append(_("Working Copy"))
-        
-        self.revision_kind_opt = ComboBox(gtk.ComboBox(), self.OPTIONS)
+
+        self.revision_kind_opt = ComboBox(Gtk.ComboBox(), self.OPTIONS)
         self.revision_kind_opt.set_active(0)
         self.revision_kind_opt.cb.connect("changed", self.__revision_kind_changed)
         hbox.pack_start(self.revision_kind_opt.cb, False, False, 0)
-        
-        self.revision_entry = gtk.Entry()
+
+        self.revision_entry = Gtk.Entry()
         self.revision_entry.connect("changed", self.__revision_entry_changed)
         hbox.pack_start(self.revision_entry, expand, expand, 0)
-        
+
         self.branch_selector = None
         if client.vcs == rabbitvcs.vcs.VCS_GIT:
             self.branch_selector = GitBranchSelector(hbox, client, self.__branch_selector_changed)
             self.branch_selector.hide()
-        
-        
-        self.revision_browse = gtk.Button()
-        revision_browse_image = gtk.Image()
-        revision_browse_image.set_from_stock(gtk.STOCK_FIND, 1)
+
+
+        self.revision_browse = Gtk.Button()
+        revision_browse_image = Gtk.Image()
+        revision_browse_image.set_from_icon_name("edit-find", Gtk.IconSize.MENU)
         revision_browse_image.show()
         self.revision_browse.add(revision_browse_image)
         self.revision_browse.connect("clicked", self.__revision_browse_clicked)
@@ -1006,37 +1072,37 @@
             self.set_kind_number(revision)
         else:
             self.set_kind_head()
-        
+
         self.revision_kind_opt.cb.show()
         self.revision_entry.show()
         self.revision_browse.show()
         hbox.show()
-        
-        container.add(hbox)
-    
+
+        container.add(hbox.box)
+
     def __revision_browse_clicked(self, widget):
         from rabbitvcs.ui.log import SVNLogDialog, GitLogDialog
         if self.client.vcs == rabbitvcs.vcs.VCS_GIT:
             GitLogDialog(self.get_url(), ok_callback=self.__log_closed)
         elif self.client.vcs == rabbitvcs.vcs.VCS_SVN:
             SVNLogDialog(self.get_url(), ok_callback=self.__log_closed)
-    
+
     def __log_closed(self, data):
         if data is not None:
             self.revision_kind_opt.set_active(1)
-            self.revision_entry.set_text(data)
+            self.revision_entry.set_text(S(data).display())
 
     def __revision_kind_changed(self, widget):
         self.determine_widget_sensitivity()
-        
+
         if self.revision_changed_callback:
             self.revision_change_inprogress = True
-            gobject.timeout_add(400, self.__revision_changed_callback, self)
+            GObject.timeout_add(400, self.__revision_changed_callback, self)
 
     def __revision_entry_changed(self, widget):
         if self.revision_changed_callback and not self.revision_change_inprogress:
             self.revision_change_inprogress = True
-            gobject.timeout_add(400, self.__revision_changed_callback, self)
+            GObject.timeout_add(400, self.__revision_changed_callback, self)
 
     def __revision_changed_callback(self, *args, **kwargs):
         self.revision_change_inprogress = False
@@ -1047,12 +1113,12 @@
 
     def determine_widget_sensitivity(self):
         index = self.revision_kind_opt.get_active()
-        
+
         allow_revision_browse = True
 
         # Default to showing the revision entry
         self.hide_branch_selector()
-        
+
         # Only allow number entry if "Number" is selected
         if index == 1:
             self.revision_entry.set_sensitive(True)
@@ -1072,10 +1138,14 @@
             self.revision_browse.set_sensitive(True)
         else:
             self.revision_browse.set_sensitive(False)
-    
+
     def get_url(self):
         if self.url_combobox:
-            return self.url_combobox.get_active_text()
+            url = self.url_combobox.get_active_text()
+            if url is None:
+                return ""
+            else:
+                return url
         elif self.url_entry:
             return self.url_entry.get_text()
         elif self.url:
@@ -1090,16 +1160,16 @@
         """
         @rtype  rabbitvcs.vcs.###.Revision
         @return A rabbitvcs revision object
-        
+
         index=0     HEAD
         index=1     Revision Number
         index=2
             SVN     Working Copy
             Git     Branch Selector
-        
+
         """
         index = self.revision_kind_opt.get_active()
-        
+
         if index == 0:
             return self.client.revision("head")
         elif index == 1:
@@ -1120,7 +1190,7 @@
     def set_kind_number(self, number=None):
         self.revision_kind_opt.set_active(1)
         if number is not None:
-            self.revision_entry.set_text(str(number))
+            self.revision_entry.set_text(S(number).display())
         self.determine_widget_sensitivity()
 
     def set_kind_working(self):
@@ -1142,138 +1212,128 @@
     def __branch_selector_changed(self, branch):
         self.__revision_entry_changed(self.revision_entry)
 
-class KeyValueTable(gtk.Table):
+class KeyValueTable(Gtk.Grid):
     """
-    Simple extension of a GTK table to display a two-column table of information
+    Simple extension of a GTK grid to display a two-column table of information
     with labels.
     """
-    
+
     default_col_spacing = 12
     default_row_spacing = 6
-        
+
     def __init__(self, stuff):
         """
         @param stuff: a list of two-element tuples - the first element of the
                       tuple is the key/label, and the second element is the
                       information
         """
-        if not stuff or len(stuff) == 0:
-            super(KeyValueTable, self).__init__()
-        else:
-            super(KeyValueTable, self).__init__(len(stuff), 2)
-            
+        super(KeyValueTable, self).__init__()
+        if stuff and len(stuff):
             row = 0
-            
+
             for key, value in stuff:
-                label_key = gtk.Label("<b>%s:</b>" % key)
+                label_key = Gtk.Label(label = "<b>%s:</b>" % key)
                 label_key.set_properties(xalign=0, use_markup=True)
-                
-                label_value = gtk.Label("%s" % value)
-                if HAS_PANGO:
-                    label_value.set_properties(xalign=0,                    \
-                                           ellipsize=PANGO_ELLIPSIZE_MIDDLE, \
+
+                label_value = Gtk.Label(label = "%s" % value)
+                label_value.set_properties(xalign=0,                    \
+                                           ellipsize=Pango.EllipsizeMode.MIDDLE, \
                                            selectable=True)
-                else:
-                    label_value.set_properties(xalign=0,selectable=True)
-                    
-                self.attach(label_key,
-                             0,1,
-                             row, row+1,
-                             xoptions=GTK_FILL)
-    
-                self.attach(label_value,
-                             1,2,
-                             row, row+1,
-                             xoptions=GTK_FILL|GTK_EXPAND)
-                        
+                label_value.set_hexpand(True)
+                label_value.set_halign(Gtk.Align.START)
+
+                self.attach(label_key, 0, row, 1, 1)
+                self.attach(label_value, 1, row, 1, 1)
+
                 label_key.show()
                 label_value.show()
-                
+
                 row += 1
-        
-        self.set_col_spacings(self.default_col_spacing)
-        self.set_row_spacings(self.default_row_spacing)
+
+        self.set_column_spacing(self.default_col_spacing)
+        self.set_row_spacing(self.default_row_spacing)
 
 class GitRepositorySelector:
     def __init__(self, container, git, changed_callback=None):
         self.git = git
         self.changed_callback = changed_callback
-        
-        vbox = gtk.VBox(False, 4)
-        
+
+        grid = Gtk.Grid()
+        grid.set_row_spacing(4)
+        grid.set_column_spacing(6)
+        grid.set_hexpand(True)
+
         # Set up the Repository Line
-        label = gtk.Label(_("Repository:"))
-        label.set_size_request(90, -1)
-        label.set_justify(gtk.JUSTIFY_LEFT)
+        label = Gtk.Label(label = _("Repository:"))
+        label.set_justify(Gtk.Justification.LEFT)
+        label.set_halign(Gtk.Align.START)
 
         tmp_repos = []
         for item in self.git.remote_list():
             tmp_repos.append(item["name"])
-        self.repository_opt = ComboBox(gtk.ComboBoxEntry(), tmp_repos)
+        self.repository_opt = ComboBox(Gtk.ComboBoxText.new_with_entry(), tmp_repos)
         self.repository_opt.set_active(0)
         self.repository_opt.cb.connect("changed", self.__repository_changed)
         self.repository_opt.cb.set_size_request(175, -1)
-        
-        hbox = gtk.HBox(False, 0)
-        hbox.pack_start(label, False, False, 0)
-        hbox.pack_start(self.repository_opt.cb, False, False, 0)
-        vbox.pack_start(hbox, False, False, 0)
+        self.repository_opt.cb.set_hexpand(True)
 
+        grid.attach(label, 0, 0, 1, 1)
+        grid.attach(self.repository_opt.cb, 1, 0, 1, 1)
 
         # Set up the Branch line
-        label = gtk.Label(_("Branch:"))
-        label.set_size_request(90, -1)
-        label.set_justify(gtk.JUSTIFY_LEFT)
+        label = Gtk.Label(label = _("Branch:"))
+        label.set_justify(Gtk.Justification.LEFT)
+        label.set_halign(Gtk.Align.START)
 
         tmp_branches = []
         active_branch_index = 0
         index = 0
         for item in self.git.branch_list():
             tmp_branches.append(item.name)
-            
+
             if item.tracking:
                 active_branch_index = index
-            
+
             index += 1
-            
-        self.branch_opt = ComboBox(gtk.ComboBoxEntry(), tmp_branches)
+
+        self.branch_opt = ComboBox(Gtk.ComboBoxText.new_with_entry(), tmp_branches)
         self.branch_opt.set_active(active_branch_index)
         self.branch_opt.cb.connect("changed", self.__branch_changed)
         self.branch_opt.cb.set_size_request(175, -1)
-        
-        hbox = gtk.HBox(False, 0)
-        hbox.pack_start(label, False, False, 0)
-        hbox.pack_start(self.branch_opt.cb, False, False, 0)
-        vbox.pack_start(hbox, False, False, 0)
-        
+        self.branch_opt.cb.set_hexpand(True)
+
+        grid.attach(label, 0, 1, 1, 1)
+        grid.attach(self.branch_opt.cb, 1, 1, 1, 1)
+
         # Set up the Host line
-        label = gtk.Label(_("Host:"))
-        label.set_justify(gtk.JUSTIFY_LEFT)
-        label.set_size_request(90, -1)
-        self.host = gtk.Label()
-        self.host.set_justify(gtk.JUSTIFY_LEFT)
-        hbox = gtk.HBox(False, 0)
-        hbox.pack_start(label, False, False, 0)
-        hbox.pack_start(self.host, False, False, 0)
-        vbox.pack_start(hbox, False, False, 4)
-
-        vbox.show_all()
-        container.add(vbox)
-        
+        label = Gtk.Label(label = _("Host:"))
+        label.set_justify(Gtk.Justification.LEFT)
+        label.set_halign(Gtk.Align.START)
+        self.host = Gtk.Label()
+        self.host.set_justify(Gtk.Justification.LEFT)
+        self.host.set_hexpand(True)
+        self.host.set_halign(Gtk.Align.START)
+
+        grid.attach(label, 0, 2, 1, 1)
+        grid.attach(self.host, 1, 2, 1, 1)
+
+        grid.show_all()
+        container.add(grid)
+
         self.__update_host()
-    
+
     def __update_host(self):
         repo = self.repository_opt.get_active_text()
         try:
-            self.host.set_text(self.git.config.get(("remote", repo), "url"))
+            self.host.set_text(S(self.git.config_get(("remote", repo), "url")).display())
         except KeyError as e:
             log.error("Missing remote %s config key" % repo)
-    
+
     def __repository_changed(self, repository_opt):
         if self.changed_callback:
             self.changed_callback(repository_opt.get_active_text(), self.branch_opt.get_active_text())
         self.__update_host()
-   
+
     def __branch_changed(self, branch_opt):
         if self.changed_callback:
             self.changed_callback(self.repository_opt.get_active_text(), self.branch_opt.get_active_text())
@@ -1282,8 +1342,8 @@
     def __init__(self, container, git, changed_callback=None):
         self.git = git
         self.changed_callback = changed_callback
-        
-        self.vbox = gtk.VBox(False, 4)
+
+        self.vbox = Box(vertical = True, spacing = 4)
 
         tmp_branches = []
         active = 0
@@ -1294,17 +1354,17 @@
                 active = index
             index += 1
 
-        self.branch_opt = ComboBox(gtk.ComboBoxEntry(), tmp_branches)
+        self.branch_opt = ComboBox(Gtk.ComboBoxText.new_with_entry(), tmp_branches)
         self.branch_opt.set_active(active)
         self.branch_opt.cb.connect("changed", self.__branch_changed)
         self.branch_opt.cb.set_size_request(175, -1)
 
-        hbox = gtk.HBox(False, 0)
-        hbox.pack_start(self.branch_opt.cb, False, False, 0)
+        hbox = Box()
+        hbox.pack_start(self.branch_opt.cb, True, False, 0)
         self.vbox.pack_start(hbox, False, False, 0)
-        
+
         self.vbox.show_all()
-        container.add(self.vbox)
+        container.add(self.vbox.box)
 
     def append(self, widget):
         self.vbox.pack_start(widget, False, False, 0)
@@ -1314,10 +1374,10 @@
 
     def __branch_changed(self, branch_opt):
         pass
-    
+
     def show(self):
         self.vbox.show_all()
-    
+
     def hide(self):
         self.vbox.hide()
 
@@ -1325,90 +1385,91 @@
     """
     Edit a set of text/config/ignore files
     """
-    
+
     def __init__(self, container, label, combobox_labels, combobox_paths, show_add_line=True, line_content=""):
         self.container = container
         self.label = label
         self.combobox_labels = combobox_labels
         self.combobox_paths = combobox_paths
-        
+
         self.cache = {}
-        
+
         self.last_path = None
-                
-        self.combobox = ComboBox(gtk.ComboBox(), self.combobox_labels)
+
+        self.combobox = ComboBox(Gtk.ComboBox(), self.combobox_labels)
         self.combobox.cb.connect("changed", self.__combobox_changed)
         self.combobox.cb.set_size_request(175, -1)
-        
-        self.textview = TextView(gtk.TextView())
 
-        scrolled_window = gtk.ScrolledWindow()
-        scrolled_window.set_shadow_type(gtk.SHADOW_ETCHED_IN)
+        self.textview = TextView(Gtk.TextView())
+
+        grid = Gtk.Grid()
+        grid.set_row_spacing(6)
+        grid.set_column_spacing(3)
+        grid.set_hexpand(True)
+        grid.set_vexpand(True)
+
+        combo_label = Gtk.Label(label = label)
+        combo_label.set_alignment(0, 0.5)
+        scrolled_window = Gtk.ScrolledWindow()
+        scrolled_window.set_shadow_type(Gtk.ShadowType.ETCHED_IN)
         scrolled_window.add(self.textview.view)
-        scrolled_window.set_policy(gtk.POLICY_AUTOMATIC, gtk.POLICY_AUTOMATIC)
+        scrolled_window.set_policy(Gtk.PolicyType.AUTOMATIC, Gtk.PolicyType.AUTOMATIC)
         scrolled_window.set_size_request(320, 150)
-        
-        vbox = gtk.VBox(False, 6)
-        
-        hbox = gtk.HBox(False, 3)
-        combo_label = gtk.Label(label)
-        combo_label.set_alignment(0, 0.5)
-        combo_label.set_size_request(130, -1)
-        hbox.pack_start(combo_label, False, False, 0)
-        hbox.pack_start(self.combobox.cb, True, True, 0)
-        vbox.pack_start(hbox, False, False, 0)
-        
+        scrolled_window.set_hexpand(True)
+        scrolled_window.set_vexpand(True)
+
+        grid.attach(combo_label, 0, 0, 1, 1)
+        grid.attach(self.combobox.cb, 1, 0, 2, 1)
+
         if show_add_line:
-            hbox = gtk.HBox(False, 3)
-            add_label = gtk.Label(_("Add line:"))
+            add_label = Gtk.Label(label = _("Add line:"))
             add_label.set_alignment(0, 0.5)
-            add_label.set_size_request(130, -1)
-            self.add_entry = gtk.Entry()
-            self.add_entry.set_text(line_content)
-            add_button = gtk.Button(_("Add"))
+            self.add_entry = Gtk.Entry()
+            self.add_entry.set_text(S(line_content).display())
+            self.add_entry.set_hexpand(True)
+            add_button = Gtk.Button(_("Add"))
             add_button.connect("clicked", self.__add_button_clicked)
-            hbox.pack_start(add_label, False, False, 0)
-            hbox.pack_start(self.add_entry, True, True, 0)
-            hbox.pack_start(add_button, False, False, 0)
-            vbox.pack_start(hbox, False, False, 0)
-        
-        vbox.pack_start(scrolled_window, True, True, 0)
-        vbox.show_all()
+            grid.attach(add_label, 0, 1, 1, 1)
+            grid.attach(self.add_entry, 1, 1, 1, 1)
+            grid.attach(add_button, 2, 1, 1, 1)
+
+        grid.attach(scrolled_window, 0, 2, 3, 1)
+        grid.show_all()
 
         self.combobox.set_active(0)
 
-        container.add(vbox)
-        
+        container.add(grid)
+
     def __combobox_changed(self, widget):
         index = self.combobox.get_active()
         path = self.combobox_paths[index]
 
         if not self.last_path:
             self.last_path = path
-        
+
         self.cache[self.last_path] = self.textview.get_text()
         self.last_path = path
-        
+
         self.load_file(path)
-    
+
     def __add_button_clicked(self, widget):
         text = self.add_entry.get_text()
         self.add_line(text)
         self.add_entry.set_text("")
-    
+
     def add_line(self, text):
         current_text = self.textview.get_text()
         if current_text:
             current_text += "\n" + text
         else:
             current_text = text
-        
-        self.textview.set_text(current_text)
-    
+
+        self.textview.set_text(S(current_text).display())
+
     def load_file(self, path):
         if os.path.exists(path):
             fh = open(path, "r")
-            self.textview.set_text(fh.read())
+            self.textview.set_text(S(fh.read()).display())
             fh.close()
         else:
             self.textview.set_text("")
@@ -1422,7 +1483,7 @@
         index = self.combobox.get_active()
         current_path = self.combobox_paths[index]
         self.cache[current_path] = self.textview.get_text()
-        
+
         for tmppath in paths:
             if tmppath in self.cache:
                 if not os.path.exists(os.path.dirname(tmppath)):
@@ -1430,4 +1491,4 @@
 
                 fh = open(tmppath, "w")
                 fh.write(self.cache[tmppath])
-                fh.close()
\ No newline at end of file
+                fh.close()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/wraplabel.py rabbitvcs/rabbitvcs/ui/wraplabel.py
--- rabbitvcs-0.17.1/rabbitvcs/ui/wraplabel.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/wraplabel.py	2019-09-13 08:36:17.261343300 +0800
@@ -24,24 +24,24 @@
 # SOFTWARE.
 
 # Python translation from wrapLabel.{cc|h} by Gian Mario Tagliaretti
+import gi
+gi.require_version("Gtk", "3.0")
+from gi.repository import Gtk, GObject, Pango
 
-import gtk
-import gobject
-import pango
+from rabbitvcs.util.strings import S
 
-
-class WrapLabel(gtk.Label):
+class WrapLabel(Gtk.Label):
     __gtype_name__ = 'WrapLabel'
 
     def __init__(self, str=None):
-        gtk.Label.__init__(self)
+        Gtk.Label.__init__(self)
 
         self.__wrap_width = 0
         self.layout = self.get_layout()
-        self.layout.set_wrap(pango.WRAP_WORD_CHAR)
+        self.layout.set_wrap(Pango.WrapMode.WORD_CHAR)
 
         if str != None:
-            self.set_text(str)
+            self.set_text(S(str).display())
 
         self.set_alignment(0.0, 0.0)
 
@@ -52,22 +52,22 @@
         requisition.height = height
 
     def do_size_allocate(self, allocation):
-        gtk.Label.do_size_allocate(self, allocation)
+        Gtk.Label.do_size_allocate(self, allocation)
         self.__set_wrap_width(allocation.width)
 
     def set_text(self, str):
-        gtk.Label.set_text(self, str)
+        Gtk.Label.set_text(self, S(str).display())
         self.__set_wrap_width(self.__wrap_width)
 
     def set_markup(self, str):
-        gtk.Label.set_markup(self, str)
+        Gtk.Label.set_markup(self, str)
         self.__set_wrap_width(self.__wrap_width)
 
     def __set_wrap_width(self, width):
         if width == 0:
             return
         layout = self.get_layout()
-        layout.set_width(width * pango.SCALE)
+        layout.set_width(width * Pango.SCALE)
         if self.__wrap_width != width:
             self.__wrap_width = width
             self.queue_resize()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/about.xml rabbitvcs/rabbitvcs/ui/xml/about.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/about.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/about.xml	1970-01-01 08:00:00.000000000 +0800
@@ -1,247 +0,0 @@
-<?xml version="1.0"?>
-<!--Generated with glade3 3.4.5 on Sat Feb  7 16:10:40 2009 -->
-<interface>
-  <object class="GtkWindow" id="About">
-    <property name="width_request">775</property>
-    <property name="height_request">575</property>
-    <property name="visible">True</property>
-    <property name="title" translatable="yes">About</property>
-    <property name="window_position">GTK_WIN_POS_CENTER</property>
-    <property name="icon_name">rabbitvcs-small</property>
-    <property name="gravity">GDK_GRAVITY_CENTER</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <child>
-      <object class="GtkVBox" id="vbox1">
-        <property name="orientation">vertical</property>
-        <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="spacing">18</property>
-        <child>
-          <object class="GtkAlignment" id="alignment1">
-            <property name="visible">True</property>
-            <property name="top_padding">12</property>
-            <child>
-              <object class="GtkLabel" id="label1">
-                <property name="visible">True</property>
-                <property name="label" translatable="yes">&lt;span size="xx-large"&gt;&lt;b&gt;RabbitVCS&lt;/b&gt;&lt;/span&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkAlignment" id="alignment2">
-            <property name="visible">True</property>
-            <property name="left_padding">12</property>
-            <child>
-              <object class="GtkVBox" id="vbox2">
-                <property name="orientation">vertical</property>
-                <property name="visible">True</property>
-                <property name="spacing">6</property>
-                <child>
-                  <object class="GtkHBox" id="hbox1">
-                    <property name="visible">True</property>
-                    <child>
-                      <object class="GtkLabel" id="label2">
-                        <property name="width_request">100</property>
-                        <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="yalign">0</property>
-                        <property name="label" translatable="yes">Authors:</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkLabel" id="authors">
-                        <property name="width_request">600</property>
-                        <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="wrap">True</property>
-                        <property name="selectable">True</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkHBox" id="hbox3">
-                    <property name="visible">True</property>
-                    <child>
-                      <object class="GtkLabel" id="label6">
-                        <property name="width_request">100</property>
-                        <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="yalign">0</property>
-                        <property name="label" translatable="yes">Thanks:</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkScrolledWindow" id="scrolledwindow1">
-                        <property name="height_request">175</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="hscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
-                        <property name="vscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
-                        <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
-                        <child>
-                          <object class="GtkTextView" id="thanks">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="editable">False</property>
-                            <property name="wrap_mode">GTK_WRAP_WORD</property>
-                            <property name="left_margin">5</property>
-                            <property name="right_margin">5</property>
-                          </object>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                  <packing>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
-              </object>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkVBox" id="vbox3">
-            <property name="orientation">vertical</property>
-            <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <child>
-              <object class="GtkLabel" id="label4">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Version Information&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkAlignment" id="alignment3">
-                <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkLabel" id="versions">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                </child>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkVBox" id="vbox4">
-            <property name="orientation">vertical</property>
-            <property name="visible">True</property>
-            <child>
-              <object class="GtkLabel" id="label5">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Links&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkAlignment" id="alignment4">
-                <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkLabel" id="links">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="label">http://code.googlecode.com/p/rabbitvcs
-http://subversion.tigris.org
-http://pysvn.tigris.org/
-http://voidspace.org.uk/python/configobj.html</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                </child>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">3</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
-            <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">GTK_BUTTONBOX_END</property>
-            <child>
-              <object class="GtkButton" id="close">
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="label">gtk-close</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_close_clicked" name="clicked"/>
-              </object>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">GTK_PACK_END</property>
-            <property name="position">4</property>
-          </packing>
-        </child>
-      </object>
-    </child>
-  </object>
-</interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/add.xml rabbitvcs/rabbitvcs/ui/xml/add.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/add.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/add.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,102 +1,64 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Add">
     <property name="width_request">450</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Add</property>
     <property name="window_position">center</property>
     <property name="default_width">400</property>
     <property name="default_height">300</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="gravity">center</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
+    <child type="titlebar">
+      <placeholder/>
+    </child>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">13</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">13</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">6</property>
-        <child>
-          <object class="GtkScrolledWindow" id="scrolledwindow1">
-            <property name="height_request">200</property>
-            <property name="visible">True</property>
-            <property name="can_focus">True</property>
-            <property name="hscrollbar_policy">automatic</property>
-            <property name="vscrollbar_policy">automatic</property>
-            <property name="shadow_type">etched-in</property>
-            <child>
-              <object class="GtkTreeView" id="files_table">
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-              </object>
-            </child>
-          </object>
-          <packing>
-            <property name="position">0</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkCheckButton" id="select_all">
-            <property name="label" translatable="yes">Select / Deselect all</property>
-            <property name="visible">True</property>
-            <property name="can_focus">True</property>
-            <property name="receives_default">False</property>
-            <property name="active">True</property>
-            <property name="draw_indicator">True</property>
-            <signal handler="on_select_all_toggled" name="toggled"/>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
-          </packing>
-        </child>
+        <property name="row_spacing">6</property>
         <child>
-          <object class="GtkCheckButton" id="show_ignored">
-            <property name="label" translatable="yes">Show ignored files</property>
-            <property name="visible">True</property>
-            <property name="can_focus">True</property>
-            <property name="receives_default">False</property>
-            <property name="active">False</property>
-            <property name="draw_indicator">True</property>
-            <signal handler="on_show_ignored_toggled" name="toggled"/>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
-          </packing>
-        </child>        
-        <child>
-          <object class="GtkHBox" id="hbox1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
             <child>
-              <object class="GtkLabel" id="status">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkHButtonBox" id="hbuttonbox2">
+              <object class="GtkButtonBox" id="hbuttonbox2">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="halign">end</property>
                 <property name="spacing">6</property>
                 <property name="layout_style">end</property>
                 <child>
                   <object class="GtkButton" id="cancel">
-                    <property name="label">gtk-cancel</property>
+                    <property name="label" translatable="yes">_Cancel</property>
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
                     <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_cancel_clicked" name="clicked"/>
+                    <property name="image">rabbitvcs-cancel</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
                   </object>
                   <packing>
                     <property name="expand">False</property>
@@ -106,12 +68,13 @@
                 </child>
                 <child>
                   <object class="GtkButton" id="ok">
-                    <property name="label">gtk-ok</property>
+                    <property name="label" translatable="yes">_OK</property>
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
                     <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_ok_clicked" name="clicked"/>
+                    <property name="image">rabbitvcs-ok</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
                   </object>
                   <packing>
                     <property name="expand">False</property>
@@ -121,21 +84,85 @@
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="pack_type">end</property>
-                <property name="position">1</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
+            <child>
+              <object class="GtkLabel" id="status">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">3</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkCheckButton" id="show_ignored">
+            <property name="label" translatable="yes">Show ignored files</property>
+            <property name="visible">True</property>
+            <property name="can_focus">True</property>
+            <property name="receives_default">False</property>
+            <property name="halign">start</property>
+            <property name="hexpand">True</property>
+            <property name="draw_indicator">True</property>
+            <signal name="toggled" handler="on_show_ignored_toggled" swapped="no"/>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkCheckButton" id="select_all">
+            <property name="label" translatable="yes">Select / Deselect all</property>
+            <property name="visible">True</property>
+            <property name="can_focus">True</property>
+            <property name="receives_default">False</property>
+            <property name="halign">start</property>
+            <property name="hexpand">True</property>
+            <property name="active">True</property>
+            <property name="draw_indicator">True</property>
+            <signal name="toggled" handler="on_select_all_toggled" swapped="no"/>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkScrolledWindow" id="scrolledwindow1">
+            <property name="height_request">200</property>
+            <property name="visible">True</property>
+            <property name="can_focus">True</property>
+            <property name="vexpand">True</property>
+            <property name="shadow_type">etched-in</property>
+            <child>
+              <object class="GtkTreeView" id="files_table">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="vexpand">True</property>
+                <child internal-child="selection">
+                  <object class="GtkTreeSelection"/>
+                </child>
+              </object>
+            </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
     </child>
   </object>
-</interface>
\ No newline at end of file
+</interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/annotate.xml rabbitvcs/rabbitvcs/ui/xml/annotate.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/annotate.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/annotate.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,270 +1,241 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.20"/>
+  <object class="GtkImage" id="document-save-as">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">document-save-as</property>
+  </object>
+  <object class="GtkImage" id="window-close">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">window-close</property>
+  </object>
   <object class="GtkWindow" id="Annotate">
     <property name="width_request">750</property>
     <property name="height_request">550</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Annotate</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
+    <child>
+      <placeholder/>
+    </child>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkScrolledWindow" id="scrolledwindow1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="can_focus">True</property>
-            <property name="hscrollbar_policy">automatic</property>
-            <property name="vscrollbar_policy">automatic</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <child>
-              <object class="GtkTreeView" id="table">
+              <object class="GtkEntry" id="from">
+                <property name="width_request">100</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
-                <property name="rubber_banding">True</property>
+                <property name="hexpand">True</property>
               </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
             </child>
-          </object>
-          <packing>
-            <property name="position">0</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHBox" id="hbox1">
-            <property name="visible">True</property>
             <child>
-              <object class="GtkVBox" id="vbox2">
+              <object class="GtkButton" id="from_show_log">
                 <property name="visible">True</property>
-                <property name="orientation">vertical</property>
-                <property name="spacing">6</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="margin_right">6</property>
+                <signal name="clicked" handler="on_from_show_log_clicked" swapped="no"/>
                 <child>
-                  <object class="GtkHBox" id="hbox2">
+                  <object class="GtkImage" id="image2">
                     <property name="visible">True</property>
-                    <property name="spacing">12</property>
-                    <child>
-                      <object class="GtkVBox" id="from_revision_container">
-                        <property name="visible">True</property>
-                        <property name="orientation">vertical</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkLabel" id="label1">
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">&lt;b&gt;From Revision&lt;/b&gt;</property>
-                            <property name="use_markup">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkHBox" id="hbox4">
-                            <property name="visible">True</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <object class="GtkEntry" id="from">
-                                <property name="width_request">100</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                              </object>
-                              <packing>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkButton" id="from_show_log">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">True</property>
-                                <signal handler="on_from_show_log_clicked" name="clicked"/>
-                                <child>
-                                  <object class="GtkImage" id="image2">
-                                    <property name="visible">True</property>
-                                    <property name="icon_name">rabbitvcs-show_log</property>
-                                  </object>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkVBox" id="vbox5">
-                        <property name="visible">True</property>
-                        <property name="orientation">vertical</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkLabel" id="label2">
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">&lt;b&gt;To Revision&lt;/b&gt;</property>
-                            <property name="use_markup">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkHBox" id="hbox3">
-                            <property name="visible">True</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <object class="GtkEntry" id="to">
-                                <property name="width_request">100</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                              </object>
-                              <packing>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkButton" id="to_show_log">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">True</property>
-                                <signal handler="on_to_show_log_clicked" name="clicked"/>
-                                <child>
-                                  <object class="GtkImage" id="image1">
-                                    <property name="visible">True</property>
-                                    <property name="icon_name">rabbitvcs-show_log</property>
-                                  </object>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkButton" id="refresh">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">True</property>
-                                <signal handler="on_refresh_clicked" name="clicked"/>
-                                <child>
-                                  <object class="GtkImage" id="image3">
-                                    <property name="visible">True</property>
-                                    <property name="stock">gtk-refresh</property>
-                                  </object>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="padding">6</property>
-                                <property name="position">2</property>
-                              </packing>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
+                    <property name="can_focus">False</property>
+                    <property name="icon_name">rabbitvcs-show_log</property>
+                  </object>
+                </child>
+                <accelerator key="f" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkEntry" id="to">
+                <property name="width_request">100</property>
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="hexpand">True</property>
+              </object>
+              <packing>
+                <property name="left_attach">2</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkButton" id="to_show_log">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="margin_right">6</property>
+                <signal name="clicked" handler="on_to_show_log_clicked" swapped="no"/>
+                <child>
+                  <object class="GtkImage" id="image1">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="icon_name">rabbitvcs-show_log</property>
+                  </object>
+                </child>
+                <accelerator key="t" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+              </object>
+              <packing>
+                <property name="left_attach">3</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkButton" id="refresh">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="margin_left">6</property>
+                <property name="margin_right">18</property>
+                <signal name="clicked" handler="on_refresh_clicked" swapped="no"/>
+                <child>
+                  <object class="GtkImage" id="image3">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="icon_name">view-refresh</property>
                   </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
                 </child>
+                <accelerator key="r" signal="clicked" modifiers="GDK_MOD1_MASK"/>
               </object>
               <packing>
-                <property name="position">0</property>
+                <property name="left_attach">4</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkVBox" id="vbox4">
+              <object class="GtkButtonBox" id="hbuttonbox1">
                 <property name="visible">True</property>
-                <property name="orientation">vertical</property>
+                <property name="can_focus">False</property>
+                <property name="halign">end</property>
+                <property name="spacing">6</property>
+                <property name="layout_style">end</property>
                 <child>
-                  <object class="GtkLabel" id="label3">
+                  <object class="GtkButton" id="save">
+                    <property name="label" translatable="yes">Save _As</property>
                     <property name="visible">True</property>
+                    <property name="sensitive">False</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">document-save-as</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_save_clicked" swapped="no"/>
                   </object>
                   <packing>
-                    <property name="position">1</property>
+                    <property name="expand">False</property>
+                    <property name="fill">False</property>
+                    <property name="position">0</property>
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkHButtonBox" id="hbuttonbox1">
+                  <object class="GtkButton" id="close">
+                    <property name="label" translatable="yes">_Close</property>
                     <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <property name="layout_style">end</property>
-                    <child>
-                      <object class="GtkButton" id="save">
-                        <property name="label">gtk-save-as</property>
-                        <property name="visible">True</property>
-                        <property name="sensitive">False</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">True</property>
-                        <property name="use_stock">True</property>
-                        <signal handler="on_save_clicked" name="clicked"/>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkButton" id="close">
-                        <property name="label">gtk-close</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">True</property>
-                        <property name="use_stock">True</property>
-                        <signal handler="on_close_clicked" name="clicked"/>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">window-close</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_close_clicked" swapped="no"/>
                   </object>
                   <packing>
                     <property name="expand">False</property>
                     <property name="fill">False</property>
-                    <property name="pack_type">end</property>
                     <property name="position">1</property>
                   </packing>
                 </child>
               </object>
               <packing>
-                <property name="pack_type">end</property>
-                <property name="position">1</property>
+                <property name="left_attach">5</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label2">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;To Revision&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">2</property>
+                <property name="top_attach">0</property>
+                <property name="width">2</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label1">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;From Revision&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+                <property name="width">2</property>
               </packing>
             </child>
+            <child>
+              <placeholder/>
+            </child>
+            <child>
+              <placeholder/>
+            </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkScrolledWindow" id="scrolledwindow1">
+            <property name="visible">True</property>
+            <property name="can_focus">True</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <child>
+              <object class="GtkTreeView" id="table">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="rubber_banding">True</property>
+                <child internal-child="selection">
+                  <object class="GtkTreeSelection"/>
+                </child>
+              </object>
+            </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/branch-merge.xml rabbitvcs/rabbitvcs/ui/xml/branch-merge.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/branch-merge.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/branch-merge.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,172 +1,233 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.12 -->
-  <!-- interface-naming-policy project-wide -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Merge">
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Merge</property>
     <property name="icon_name">rabbitvcs</property>
-    <signal name="destroy" handler="on_destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <placeholder/>
+    </child>
+    <child>
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="spacing">18</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkHBox" id="hbox1">
+          <object class="GtkButtonBox" id="hbuttonbox1">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkVBox" id="vbox2">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="spacing">6</property>
-                <child>
-                  <object class="GtkLabel" id="from_branch_label">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="label" translatable="yes">&lt;b&gt;From&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkAlignment" id="alignment1">
-                    <property name="visible">True</property>
-                    <property name="left_padding">12</property>
-                    <child>
-                      <object class="GtkVBox" id="from_container">
-                        <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkHBox" id="from_branch_container">
-                            <property name="visible">True</property>
-                            <child>
-                              <placeholder/>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkVBox" id="from_branch_info">
-                            <property name="visible">True</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <placeholder/>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                    </child>
-                  </object>
-                  <packing>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">0</property>
               </packing>
             </child>
+            <child>
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
+              </object>
+              <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
+                <property name="position">1</property>
+              </packing>
+            </child>
           </object>
           <packing>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox3">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="valign">start</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="to_branch_label">
+              <object class="GtkLabel" id="to_branch">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
                 <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Will be merged into&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment2">
+              <object class="GtkLabel" id="to_branch_label">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkLabel" id="to_branch">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                  </object>
-                </child>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Will be merged into&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkLabel" id="from_branch_label">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal name="clicked" handler="on_cancel_clicked"/>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;From&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkGrid" id="from_branch_info">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal name="clicked" handler="on_ok_clicked"/>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">2</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkGrid" id="from_branch_container">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/branch.xml rabbitvcs/rabbitvcs/ui/xml/branch.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/branch.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/branch.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,32 +1,51 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Branch">
     <property name="width_request">550</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Branch/tag</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox7">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">6</property>
+        <property name="margin_right">6</property>
+        <property name="margin_top">6</property>
+        <property name="margin_bottom">6</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox8">
+          <object class="GtkButtonBox" id="hbuttonbox5">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
+            <property name="can_focus">False</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Repository&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -35,96 +54,14 @@
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment2">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox1">
-                    <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHBox" id="hbox9">
-                        <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkLabel" id="label17">
-                            <property name="width_request">90</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">From:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkComboBoxEntry" id="from_urls">
-                            <property name="visible">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkButton" id="repo_browser">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <signal handler="on_repo_browser_clicked" name="clicked"/>
-                            <child>
-                              <object class="GtkImage" id="image1">
-                                <property name="visible">True</property>
-                                <property name="stock">gtk-find</property>
-                                <property name="icon-size">1</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">2</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox10">
-                        <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkLabel" id="label18">
-                            <property name="width_request">90</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">To:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkComboBoxEntry" id="to_urls">
-                            <property name="visible">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -134,174 +71,235 @@
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">3</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox9">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label2">
+              <object class="GtkScrolledWindow" id="scrolledwindow6">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Create copy from&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="margin_left">6</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="shadow_type">etched-in</property>
+                <child>
+                  <object class="GtkTextView" id="message">
+                    <property name="height_request">100</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="wrap_mode">word</property>
+                  </object>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">2</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="revision_container">
+              <object class="GtkButtonBox" id="hbuttonbox6">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="layout_style">start</property>
                 <child>
-                  <placeholder/>
+                  <object class="GtkButton" id="previous_messages">
+                    <property name="label" translatable="yes">Previous Messages</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="margin_left">6</property>
+                    <signal name="clicked" handler="on_previous_messages_clicked" swapped="no"/>
+                    <accelerator key="p" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+                  </object>
+                  <packing>
+                    <property name="expand">False</property>
+                    <property name="fill">False</property>
+                    <property name="position">0</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label3">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Add Message&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox3">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label3">
+              <object class="GtkLabel" id="label2">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Add Message&lt;/b&gt;</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Create copy from&lt;/b&gt;</property>
                 <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment1">
+              <object class="GtkGrid" id="revision_container">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">6</property>
+                <property name="hexpand">True</property>
                 <child>
-                  <object class="GtkVBox" id="vbox10">
-                    <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHButtonBox" id="hbuttonbox6">
-                        <property name="visible">True</property>
-                        <property name="layout_style">start</property>
-                        <child>
-                          <object class="GtkButton" id="previous_messages">
-                            <property name="label" translatable="yes">Previous Messages</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <signal handler="on_previous_messages_clicked" name="clicked"/>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkScrolledWindow" id="scrolledwindow6">
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="hscrollbar_policy">automatic</property>
-                        <property name="vscrollbar_policy">automatic</property>
-                        <property name="shadow_type">etched-in</property>
-                        <child>
-                          <object class="GtkTextView" id="message">
-                            <property name="height_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="wrap_mode">word</property>
-                          </object>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">-1</property>
-                      </packing>
-                    </child>
-                  </object>
+                  <placeholder/>
                 </child>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox5">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="row_spacing">6</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkLabel" id="label17">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_cancel_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="margin_left">6</property>
+                <property name="label" translatable="yes">From:</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label18">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">6</property>
+                <property name="label" translatable="yes">To:</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">2</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkComboBoxText" id="from_urls">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="has_entry">True</property>
+                <child internal-child="entry">
+                  <object class="GtkEntry">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                  </object>
+                </child>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkButton" id="repo_browser">
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_ok_clicked" name="clicked"/>
+                <signal name="clicked" handler="on_repo_browser_clicked" swapped="no"/>
+                <child>
+                  <object class="GtkImage" id="image1">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="icon_name">edit-find</property>
+                    <property name="icon_size">1</property>
+                  </object>
+                </child>
+                <accelerator key="f" signal="clicked" modifiers="GDK_MOD1_MASK"/>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">2</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkComboBoxText" id="to_urls">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="has_entry">True</property>
+                <child internal-child="entry">
+                  <object class="GtkEntry">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                  </object>
+                </child>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">2</property>
+                <property name="width">2</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label1">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Repository&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+                <property name="width">3</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">3</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/browser.xml rabbitvcs/rabbitvcs/ui/xml/browser.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/browser.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/browser.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,57 +1,88 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy project-wide -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="folder-new">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">folder-new</property>
+  </object>
+  <object class="GtkImage" id="window-close">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">window-close</property>
+  </object>
   <object class="GtkWindow" id="Browser">
     <property name="width_request">640</property>
     <property name="height_request">480</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Repository Browser</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <placeholder/>
+    </child>
+    <child>
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox2">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkVBox" id="vbox3">
+              <object class="GtkButtonBox" id="hbuttonbox1">
                 <property name="visible">True</property>
-                <property name="orientation">vertical</property>
+                <property name="can_focus">False</property>
+                <property name="halign">end</property>
                 <property name="spacing">6</property>
+                <property name="layout_style">end</property>
                 <child>
-                  <object class="GtkHBox" id="hbox1">
+                  <object class="GtkButton" id="refresh">
                     <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkLabel" id="label1">
-                        <property name="width_request">90</property>
-                        <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">URL:</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <signal name="clicked" handler="on_refresh_clicked" swapped="no"/>
                     <child>
-                      <object class="GtkComboBoxEntry" id="urls">
+                      <object class="GtkGrid">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="column_spacing">2</property>
+                        <child>
+                          <object class="GtkLabel" id="label3">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="label" translatable="yes">Load/Refresh</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkImage" id="image1">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="icon_name">view-refresh</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
+                          </packing>
+                        </child>
                       </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
                     </child>
+                    <accelerator key="r" signal="clicked" modifiers="GDK_MOD1_MASK"/>
                   </object>
                   <packing>
                     <property name="expand">False</property>
@@ -60,33 +91,14 @@
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkHBox" id="hbox2">
+                  <object class="GtkButton" id="close">
+                    <property name="label" translatable="yes">_Close</property>
                     <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkLabel" id="label2">
-                        <property name="width_request">90</property>
-                        <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">Revision:</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="revision_container">
-                        <property name="visible">True</property>
-                        <child>
-                          <placeholder/>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">window-close</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_close_clicked" swapped="no"/>
                   </object>
                   <packing>
                     <property name="expand">False</property>
@@ -96,124 +108,124 @@
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkScrolledWindow" id="scrolledwindow2">
+              <object class="GtkButton" id="create_folder_here">
+                <property name="label" translatable="yes">_Create folder here</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
-                <property name="hscrollbar_policy">automatic</property>
-                <property name="vscrollbar_policy">automatic</property>
-                <property name="shadow_type">etched-in</property>
-                <child>
-                  <object class="GtkTreeView" id="list">
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                  </object>
-                </child>
+                <property name="receives_default">True</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="image">folder-new</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_create_folder_here_clicked" swapped="no"/>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHBox" id="hbox3">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="row_spacing">6</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkHBox" id="hbox4">
+              <object class="GtkLabel" id="label2">
                 <property name="visible">True</property>
-                <child>
-                  <object class="GtkLabel" id="status">
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">Revision:</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label1">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">URL:</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkComboBoxText" id="urls">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="has_entry">True</property>
+                <child internal-child="entry">
+                  <object class="GtkEntry">
                     <property name="visible">True</property>
-                    <property name="xalign">0</property>
+                    <property name="can_focus">True</property>
                   </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkHButtonBox" id="hbuttonbox1">
+              <object class="GtkGrid" id="revision_container">
                 <property name="visible">True</property>
-                <property name="spacing">6</property>
-                <property name="layout_style">end</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
                 <child>
-                  <object class="GtkButton" id="refresh">
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <signal handler="on_refresh_clicked" name="clicked"/>
-                    <child>
-                      <object class="GtkHBox" id="hbox5">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkImage" id="image1">
-                            <property name="visible">True</property>
-                            <property name="stock">gtk-refresh</property>
-                          </object>
-                          <packing>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="label3">
-                            <property name="visible">True</property>
-                            <property name="label" translatable="yes">Load/Refresh</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                    </child>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
+                  <placeholder/>
                 </child>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkScrolledWindow" id="scrolledwindow2">
+                <property name="height_request">330</property>
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="shadow_type">etched-in</property>
                 <child>
-                  <object class="GtkButton" id="close">
-                    <property name="label">gtk-close</property>
+                  <object class="GtkTreeView" id="list">
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_close_clicked" name="clicked"/>
+                    <child internal-child="selection">
+                      <object class="GtkTreeSelection"/>
+                    </child>
                   </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
-                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">2</property>
+                <property name="width">2</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/changes.xml rabbitvcs/rabbitvcs/ui/xml/changes.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/changes.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/changes.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,491 +1,472 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="window-close">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">window-close</property>
+  </object>
   <object class="GtkWindow" id="Changes">
     <property name="width_request">640</property>
     <property name="height_request">500</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
     <property name="title" translatable="yes">Changes</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
+    <child>
+      <placeholder/>
+    </child>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox2">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-            <property name="orientation">vertical</property>
-            <property name="spacing">12</property>
+            <property name="can_focus">False</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
             <child>
-              <object class="GtkVBox" id="vbox3">
+              <object class="GtkButtonBox" id="hbuttonbox1">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="orientation">vertical</property>
+                <property name="halign">end</property>
+                <property name="hexpand">True</property>
                 <property name="spacing">6</property>
+                <property name="layout_style">end</property>
                 <child>
-                  <object class="GtkLabel" id="label1">
-                    <property name="visible">True</property>
-                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="xalign">0</property>
-                    <property name="label" translatable="yes">&lt;b&gt;First:&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkAlignment" id="alignment1">
+                  <object class="GtkButton" id="refresh">
                     <property name="visible">True</property>
-                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="left_padding">12</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <signal name="clicked" handler="on_refresh_clicked" swapped="no"/>
                     <child>
-                      <object class="GtkVBox" id="vbox4">
+                      <object class="GtkGrid">
                         <property name="visible">True</property>
-                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="orientation">vertical</property>
-                        <property name="spacing">6</property>
+                        <property name="can_focus">False</property>
+                        <property name="column_spacing">2</property>
                         <child>
-                          <object class="GtkHBox" id="hbox1">
+                          <object class="GtkLabel" id="label5">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <child>
-                              <object class="GtkLabel" id="label2">
-                                <property name="width_request">100</property>
-                                <property name="visible">True</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="xalign">0</property>
-                                <property name="label" translatable="yes">URL</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkHBox" id="hbox12">
-                                <property name="visible">True</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="spacing">4</property>
-                                <child>
-                                  <object class="GtkComboBoxEntry" id="first_urls">
-                                    <property name="visible">True</property>
-                                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                    <signal handler="on_first_urls_changed" name="changed"/>
-                                  </object>
-                                  <packing>
-                                    <property name="position">0</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkButton" id="first_urls_browse">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="receives_default">True</property>
-                                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                    <signal handler="on_first_urls_browse_clicked" name="clicked"/>
-                                    <child>
-                                      <object class="GtkImage" id="image5">
-                                        <property name="visible">True</property>
-                                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                        <property name="stock">gtk-zoom-fit</property>
-                                        <property name="icon-size">1</property>
-                                      </object>
-                                    </child>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">False</property>
-                                    <property name="fill">False</property>
-                                    <property name="position">1</property>
-                                  </packing>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
+                            <property name="label" translatable="yes">Load/Refresh</property>
                           </object>
                           <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">0</property>
                           </packing>
                         </child>
                         <child>
-                          <object class="GtkHBox" id="hbox2">
+                          <object class="GtkImage" id="image2">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <child>
-                              <object class="GtkLabel" id="label3">
-                                <property name="width_request">100</property>
-                                <property name="visible">True</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="xalign">0</property>
-                                <property name="label" translatable="yes">Revision</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkHBox" id="first_revision_container">
-                                <property name="visible">True</property>
-                                <child>
-                                  <placeholder/>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
+                            <property name="icon_name">view-refresh</property>
                           </object>
                           <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
                           </packing>
                         </child>
                       </object>
                     </child>
+                    <accelerator key="r" signal="clicked" modifiers="GDK_MOD1_MASK"/>
                   </object>
                   <packing>
                     <property name="expand">False</property>
                     <property name="fill">False</property>
-                    <property name="position">1</property>
+                    <property name="position">0</property>
                   </packing>
                 </child>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkVBox" id="vbox7">
-                <property name="visible">True</property>
-                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="orientation">vertical</property>
-                <property name="spacing">6</property>
                 <child>
-                  <object class="GtkLabel" id="label6">
+                  <object class="GtkButton" id="close">
+                    <property name="label" translatable="yes">_Close</property>
                     <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
                     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="xalign">0</property>
-                    <property name="label" translatable="yes">&lt;b&gt;Second:&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
+                    <property name="image">window-close</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_close_clicked" swapped="no"/>
                   </object>
                   <packing>
                     <property name="expand">False</property>
                     <property name="fill">False</property>
-                    <property name="position">0</property>
+                    <property name="position">1</property>
                   </packing>
                 </child>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkComboBox" id="more_actions">
+                <property name="visible">True</property>
+                <property name="sensitive">False</property>
+                <property name="can_focus">False</property>
+                <signal name="changed" handler="on_more_actions_changed" swapped="no"/>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">3</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
+            <child>
+              <object class="GtkScrolledWindow" id="scrolledwindow1">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                <property name="margin_left">6</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="shadow_type">etched-in</property>
+                <property name="propagate_natural_height">True</property>
                 <child>
-                  <object class="GtkAlignment" id="alignment3">
+                  <object class="GtkTreeView" id="changes_table">
+                    <property name="height_request">200</property>
                     <property name="visible">True</property>
+                    <property name="can_focus">True</property>
                     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="left_padding">12</property>
-                    <child>
-                      <object class="GtkVBox" id="vbox8">
-                        <property name="visible">True</property>
-                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="orientation">vertical</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkHBox" id="hbox7">
-                            <property name="visible">True</property>
-                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <child>
-                              <object class="GtkLabel" id="label7">
-                                <property name="width_request">100</property>
-                                <property name="visible">True</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="xalign">0</property>
-                                <property name="label" translatable="yes">URL</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkHBox" id="hbox14">
-                                <property name="visible">True</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="spacing">4</property>
-                                <child>
-                                  <object class="GtkComboBoxEntry" id="second_urls">
-                                    <property name="visible">True</property>
-                                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                    <signal handler="on_second_urls_changed" name="changed"/>
-                                  </object>
-                                  <packing>
-                                    <property name="position">0</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkButton" id="second_urls_browse">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="receives_default">True</property>
-                                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                    <signal handler="on_second_urls_browse_clicked" name="clicked"/>
-                                    <child>
-                                      <object class="GtkImage" id="image7">
-                                        <property name="visible">True</property>
-                                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                        <property name="stock">gtk-zoom-fit</property>
-                                        <property name="icon-size">1</property>
-                                      </object>
-                                    </child>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">False</property>
-                                    <property name="fill">False</property>
-                                    <property name="position">1</property>
-                                  </packing>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkHBox" id="hbox17">
-                            <property name="visible">True</property>
-                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <child>
-                              <object class="GtkLabel" id="label11">
-                                <property name="width_request">100</property>
-                                <property name="visible">True</property>
-                                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                                <property name="xalign">0</property>
-                                <property name="label" translatable="yes">Revision</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkHBox" id="second_revision_container">
-                                <property name="visible">True</property>
-                                <child>
-                                  <placeholder/>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
+                    <signal name="cursor-changed" handler="on_changes_table_cursor_changed" swapped="no"/>
+                    <signal name="row-activated" handler="on_changes_table_row_doubleclicked" swapped="no"/>
+                    <child internal-child="selection">
+                      <object class="GtkTreeSelection"/>
                     </child>
                   </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
-                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkVBox" id="vbox5">
+              <object class="GtkLabel" id="label4">
                 <property name="visible">True</property>
-                <property name="orientation">vertical</property>
-                <property name="spacing">6</property>
-                <child>
-                  <object class="GtkHBox" id="hbox5">
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Differences&lt;/b&gt; (double-click to compare with base)</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
+            <property name="column_spacing">6</property>
+            <child>
+              <object class="GtkLabel" id="label11">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                <property name="margin_left">6</property>
+                <property name="label" translatable="yes">Revision</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">2</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label7">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                <property name="margin_left">6</property>
+                <property name="label" translatable="yes">URL</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkComboBoxText" id="second_urls">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                <property name="hexpand">True</property>
+                <property name="has_entry">True</property>
+                <signal name="changed" handler="on_second_urls_changed" swapped="no"/>
+                <child internal-child="entry">
+                  <object class="GtkEntry">
                     <property name="visible">True</property>
-                    <child>
-                      <object class="GtkLabel" id="label4">
-                        <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;Differences&lt;/b&gt; (double-click to compare with base)</property>
-                        <property name="use_markup">True</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
+                    <property name="can_focus">True</property>
                   </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
                 </child>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkButton" id="second_urls_browse">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                <signal name="clicked" handler="on_second_urls_browse_clicked" swapped="no"/>
                 <child>
-                  <object class="GtkHBox" id="hbox19">
+                  <object class="GtkImage" id="image7">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
                     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="spacing">4</property>
-                    <child>
-                      <object class="GtkScrolledWindow" id="scrolledwindow1">
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="hscrollbar_policy">automatic</property>
-                        <property name="vscrollbar_policy">automatic</property>
-                        <property name="shadow_type">etched-in</property>
-                        <child>
-                          <object class="GtkTreeView" id="changes_table">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <!--<signal handler="on_changes_table_button_pressed" name="button_press_event"/>-->
-                            <signal handler="on_changes_table_cursor_changed" name="cursor_changed"/>
-                            <signal handler="on_changes_table_row_doubleclicked" name="row_activated"/>
-                            <!--<signal handler="on_changes_table_key_released" name="key_release_event"/>-->
-                          </object>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
+                    <property name="icon_name">zoom-fit-best</property>
+                    <property name="icon_size">1</property>
                   </object>
-                  <packing>
-                    <property name="position">1</property>
-                  </packing>
                 </child>
+                <accelerator key="s" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+              </object>
+              <packing>
+                <property name="left_attach">2</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label6">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                <property name="label" translatable="yes">&lt;b&gt;Second:&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="position">2</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+                <property name="width">3</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkGrid" id="second_revision_container">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">2</property>
+                <property name="width">2</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHBox" id="hbox4">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkComboBox" id="more_actions">
+              <object class="GtkLabel" id="label3">
                 <property name="visible">True</property>
-                <property name="sensitive">False</property>
-                <signal handler="on_more_actions_changed" name="changed"/>
+                <property name="can_focus">False</property>
+                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                <property name="margin_left">6</property>
+                <property name="label" translatable="yes">Revision</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">2</property>
               </packing>
             </child>
             <child>
-              <object class="GtkHButtonBox" id="hbuttonbox1">
+              <object class="GtkLabel" id="label2">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="spacing">6</property>
-                <property name="layout_style">end</property>
-                <child>
-                  <object class="GtkButton" id="refresh">
+                <property name="margin_left">6</property>
+                <property name="label" translatable="yes">URL</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkComboBoxText" id="first_urls">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                <property name="hexpand">True</property>
+                <property name="has_entry">True</property>
+                <signal name="changed" handler="on_first_urls_changed" swapped="no"/>
+                <child internal-child="entry">
+                  <object class="GtkEntry">
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <signal handler="on_refresh_clicked" name="clicked"/>
-                    <child>
-                      <object class="GtkHBox" id="hbox6">
-                        <property name="visible">True</property>
-                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <child>
-                          <object class="GtkImage" id="image2">
-                            <property name="visible">True</property>
-                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <property name="stock">gtk-refresh</property>
-                          </object>
-                          <packing>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="label5">
-                            <property name="visible">True</property>
-                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                            <property name="label" translatable="yes">Load/Refresh</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                    </child>
                   </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
                 </child>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkButton" id="first_urls_browse">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                <signal name="clicked" handler="on_first_urls_browse_clicked" swapped="no"/>
                 <child>
-                  <object class="GtkButton" id="close">
-                    <property name="label">gtk-close</property>
+                  <object class="GtkImage" id="image5">
                     <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
+                    <property name="can_focus">False</property>
                     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_close_clicked" name="clicked"/>
+                    <property name="icon_name">zoom-fit-best</property>
+                    <property name="icon_size">1</property>
                   </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
-                  </packing>
+                </child>
+                <accelerator key="f" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+              </object>
+              <packing>
+                <property name="left_attach">2</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label1">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                <property name="label" translatable="yes">&lt;b&gt;First:&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+                <property name="width">3</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkGrid" id="first_revision_container">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="pack_type">end</property>
-                <property name="position">1</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">2</property>
+                <property name="width">2</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/checkmods.xml rabbitvcs/rabbitvcs/ui/xml/checkmods.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/checkmods.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/checkmods.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,40 +1,109 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="view-refresh">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">view-refresh</property>
+  </object>
+  <object class="GtkImage" id="window-close">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">window-close</property>
+  </object>
   <object class="GtkWindow" id="CheckMods">
     <property name="width_request">550</property>
     <property name="height_request">300</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Check for Modifications</property>
     <property name="window_position">center</property>
     <property name="default_width">400</property>
     <property name="default_height">300</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="gravity">center</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="spacing">18</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="row_spacing">18</property>
+        <child>
+          <object class="GtkButtonBox" id="hbuttonbox2">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="hexpand">True</property>
+            <property name="spacing">6</property>
+            <property name="layout_style">end</property>
+            <child>
+              <object class="GtkButton" id="refresh">
+                <property name="label" translatable="yes">_Refresh</property>
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">view-refresh</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_refresh_clicked" swapped="no"/>
+              </object>
+              <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
+                <property name="position">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkButton" id="close">
+                <property name="label" translatable="yes">_Close</property>
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">window-close</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_close_clicked" swapped="no"/>
+              </object>
+              <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
+                <property name="position">1</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
         <child>
           <object class="GtkNotebook" id="notebook">
             <property name="visible">True</property>
             <property name="can_focus">True</property>
-            <signal handler="on_notebook_switch_page" name="switch_page"/>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <signal name="switch-page" handler="on_notebook_switch_page" swapped="no"/>
             <child>
               <object class="GtkScrolledWindow" id="scrolledwindow1">
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
-                <property name="hscrollbar_policy">automatic</property>
-                <property name="vscrollbar_policy">automatic</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
                 <property name="shadow_type">etched-in</property>
                 <child>
                   <object class="GtkTreeView" id="local_files_table">
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
+                    <child internal-child="selection">
+                      <object class="GtkTreeSelection"/>
+                    </child>
                   </object>
                 </child>
               </object>
@@ -42,6 +111,7 @@
             <child type="tab">
               <object class="GtkLabel" id="local_mods">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="label" translatable="yes">Local</property>
               </object>
               <packing>
@@ -52,19 +122,26 @@
               <object class="GtkScrolledWindow" id="scrolledwindow2">
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
-                <property name="hscrollbar_policy">automatic</property>
-                <property name="vscrollbar_policy">automatic</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
                 <child>
                   <object class="GtkTreeView" id="remote_files_table">
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
+                    <child internal-child="selection">
+                      <object class="GtkTreeSelection"/>
+                    </child>
                   </object>
                 </child>
               </object>
+              <packing>
+                <property name="position">1</property>
+              </packing>
             </child>
             <child type="tab">
               <object class="GtkLabel" id="remote_mods">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="label" translatable="yes">Remote</property>
               </object>
               <packing>
@@ -80,50 +157,8 @@
             </child>
           </object>
           <packing>
-            <property name="position">0</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHButtonBox" id="hbuttonbox2">
-            <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
-            <child>
-              <object class="GtkButton" id="refresh">
-                <property name="label">gtk-refresh</property>
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_refresh_clicked" name="clicked"/>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkButton" id="close">
-                <property name="label">gtk-close</property>
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_close_clicked" name="clicked"/>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/checkout.xml rabbitvcs/rabbitvcs/ui/xml/checkout.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/checkout.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/checkout.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,33 +1,59 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.16 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Checkout">
     <property name="width_request">550</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Checkout</property>
     <property name="window_position">center</property>
     <property name="default_width">450</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
+    <child type="titlebar">
+      <placeholder/>
+    </child>
     <child>
-      <object class="GtkVBox" id="vbox2">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox3">
+          <object class="GtkButtonBox" id="hbuttonbox1">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
+            <property name="can_focus">False</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label2">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Repository&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -36,125 +62,15 @@
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment1">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox1">
-                    <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHBox" id="hbox2">
-                        <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkLabel" id="label3">
-                            <property name="width_request">90</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">URL:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkComboBoxEntry" id="repositories">
-                            <property name="visible">True</property>
-                            <signal handler="on_repositories_changed" name="changed"/>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkButton" id="repo_chooser">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <property name="has_tooltip">True</property>
-                            <property name="tooltip-text" translatable="yes">Browse...</property>
-                            <signal handler="on_repo_chooser_clicked" name="clicked"/>
-                            <child>
-                              <object class="GtkImage" id="image3">
-                                <property name="visible">True</property>
-                                <property name="stock">gtk-find</property>
-                                <property name="icon-size">1</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">2</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox3">
-                        <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkLabel" id="label4">
-                            <property name="width_request">90</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Destination:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkEntry" id="destination">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <signal handler="on_destination_changed" name="changed"/>
-                            <signal handler="on_destination_key_released" name="key_release_event"/>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkButton" id="file_chooser">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <property name="tooltip-text" translatable="yes">Browse...</property>
-                            <signal handler="on_file_chooser_clicked" name="clicked"/>
-                            <child>
-                              <object class="GtkImage" id="image2">
-                                <property name="visible">True</property>
-                                <property name="stock">gtk-harddisk</property>
-                                <property name="icon-size">2</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">2</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="sensitive">False</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -164,153 +80,276 @@
             </child>
           </object>
           <packing>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">3</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="options_box">
-            <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+          <object class="GtkGrid" id="revision_selector_box">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkLabel" id="label5">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Options&lt;/b&gt;</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Revision&lt;/b&gt;</property>
                 <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment2">
+              <object class="GtkGrid" id="revision_container">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
                 <child>
-                  <object class="GtkVBox" id="vbox4">
-                    <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkCheckButton" id="recursive">
-                        <property name="label" translatable="yes">Recursive</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="active">True</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkCheckButton" id="omit_externals">
-                        <property name="label" translatable="yes">Omit Externals</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="revision_selector_box">
-            <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+          <object class="GtkGrid" id="options_box">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label5">
+              <object class="GtkCheckButton" id="omit_externals">
+                <property name="label" translatable="yes">Omit Externals</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Revision&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="draw_indicator">True</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">2</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="revision_container">
+              <object class="GtkCheckButton" id="recursive">
+                <property name="label" translatable="yes">Recursive</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <placeholder/>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="active">True</property>
+                <property name="draw_indicator">True</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label1">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Options&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="row_spacing">6</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkLabel" id="label4">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="label" translatable="yes">Destination:</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">2</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkEntry" id="destination">
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_cancel_clicked" name="clicked"/>
+                <property name="hexpand">True</property>
+                <signal name="changed" handler="on_destination_changed" swapped="no"/>
+                <signal name="key-release-event" handler="on_destination_key_released" swapped="no"/>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">2</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label3">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="label" translatable="yes">URL:</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkButton" id="file_chooser">
                 <property name="visible">True</property>
-                <property name="sensitive">False</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_ok_clicked" name="clicked"/>
+                <property name="tooltip_text" translatable="yes">Browse...</property>
+                <signal name="clicked" handler="on_file_chooser_clicked" swapped="no"/>
+                <child>
+                  <object class="GtkImage" id="image2">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="icon_name">drive-harddisk</property>
+                    <property name="icon_size">2</property>
+                  </object>
+                </child>
+                <accelerator key="d" signal="clicked" modifiers="GDK_MOD1_MASK"/>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">2</property>
+                <property name="top_attach">2</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label2">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Repository&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+                <property name="width">3</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkGrid">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="column_spacing">6</property>
+                <child>
+                  <object class="GtkComboBoxText" id="repositories">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="has_entry">True</property>
+                    <signal name="changed" handler="on_repositories_changed" swapped="no"/>
+                    <child internal-child="entry">
+                      <object class="GtkEntry">
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                      </object>
+                    </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButton" id="repo_chooser">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="has_tooltip">True</property>
+                    <property name="tooltip_text" translatable="yes">Browse...</property>
+                    <signal name="clicked" handler="on_repo_chooser_clicked" swapped="no"/>
+                    <child>
+                      <object class="GtkImage" id="image3">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="icon_name">edit-find</property>
+                        <property name="icon_size">1</property>
+                      </object>
+                    </child>
+                    <accelerator key="u" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">1</property>
+                <property name="width">2</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">3</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/clean.xml rabbitvcs/rabbitvcs/ui/xml/clean.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/clean.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/clean.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,175 +1,214 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.12 -->
-  <!-- interface-naming-policy project-wide -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Clean">
     <property name="width_request">400</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Clean</property>
     <property name="window_position">center-always</property>
-    <signal handler="on_destroy" name="destroy"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox3">
+          <object class="GtkButtonBox" id="hbuttonbox1">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="hexpand">True</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Clean your Repository&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="label2">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="xalign">0.10000000149011612</property>
-                <property name="label" translatable="yes">Remove untracked files from the working tree</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
               </object>
               <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">1</property>
               </packing>
             </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkAlignment" id="alignment1">
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">2</property>
                 <child>
-                  <object class="GtkVBox" id="vbox2">
+                  <object class="GtkCheckButton" id="force">
+                    <property name="label" translatable="yes">Force</property>
                     <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">3</property>
-                    <child>
-                      <object class="GtkCheckButton" id="remove_directories">
-                        <property name="label" translatable="yes">Remove directories</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="active">True</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkCheckButton" id="remove_ignored_too">
-                        <property name="label" translatable="yes">Remove ignored files, too</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="draw_indicator">True</property>
-                        <signal handler="on_remove_ignored_too_toggled" name="toggled"/>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkCheckButton" id="remove_only_ignored">
-                        <property name="label" translatable="yes">Remove only ignored files</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="draw_indicator">True</property>
-                        <signal handler="on_remove_only_ignored_toggled" name="toggled"/>
-                      </object>
-                      <packing>
-                        <property name="position">2</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkCheckButton" id="dryrun">
-                        <property name="label" translatable="yes">Dry run</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="position">3</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkCheckButton" id="force">
-                        <property name="label" translatable="yes">Force</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="active">True</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="position">4</property>
-                      </packing>
-                    </child>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="active">True</property>
+                    <property name="draw_indicator">True</property>
                   </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">4</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkCheckButton" id="dryrun">
+                    <property name="label" translatable="yes">Dry run</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">3</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkCheckButton" id="remove_only_ignored">
+                    <property name="label" translatable="yes">Remove only ignored files</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                    <signal name="toggled" handler="on_remove_only_ignored_toggled" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkCheckButton" id="remove_ignored_too">
+                    <property name="label" translatable="yes">Remove ignored files, too</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                    <signal name="toggled" handler="on_remove_ignored_too_toggled" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkCheckButton" id="remove_directories">
+                    <property name="label" translatable="yes">Remove directories</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="active">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">2</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">2</property>
               </packing>
             </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
-            <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkLabel" id="label2">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_cancel_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">Remove untracked files from the working tree</property>
+                <property name="xalign">0.10000000149011612</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_ok_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Clean your Repository&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/cleanup.xml rabbitvcs/rabbitvcs/ui/xml/cleanup.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/cleanup.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/cleanup.xml	1970-01-01 08:00:00.000000000 +0800
@@ -1,89 +0,0 @@
-<?xml version="1.0"?>
-<!--Generated with glade3 3.4.5 on Thu Jan 29 16:44:10 2009 -->
-<interface>
-  <object class="GtkWindow" id="Cleanup">
-    <property name="width_request">400</property>
-    <property name="visible">True</property>
-    <property name="title" translatable="yes">Cleaning Up...</property>
-    <property name="window_position">center</property>
-    <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <child>
-      <object class="GtkVBox" id="vbox24">
-        <property name="orientation">vertical</property>
-        <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <child>
-          <object class="GtkImage" id="icon">
-            <property name="visible">True</property>
-            <property name="xalign">0.10000000149011612</property>
-            <property name="ypad">5</property>
-            <property name="stock">gtk-directory</property>
-            <property name="icon_size">6</property>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkLabel" id="label">
-            <property name="visible">True</property>
-            <property name="xalign">0.10000000149011612</property>
-            <property name="ypad">5</property>
-            <property name="label" translatable="yes">Cleanup Requested....
-
-Begin working copy cleanup?</property>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHButtonBox" id="hbuttonbox15">
-            <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">GTK_BUTTONBOX_END</property>
-            <child>
-              <object class="GtkButton" id="cancel">
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="label">gtk-cancel</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_cancel_clicked" name="clicked"/>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkButton" id="ok">
-                <property name="visible">True</property>
-                <property name="sensitive">False</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="label">gtk-ok</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_ok_clicked" name="clicked"/>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
-          </packing>
-        </child>
-      </object>
-    </child>
-  </object>
-</interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/commit.xml rabbitvcs/rabbitvcs/ui/xml/commit.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/commit.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/commit.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,146 +1,227 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.16 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.20"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Commit">
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Commit</property>
     <property name="window_position">center</property>
     <property name="default_width">640</property>
     <property name="default_height">640</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox4">
+      <placeholder/>
+    </child>
+    <child>
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="spacing">18</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
         <property name="orientation">vertical</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkHBox" id="commit_to_box">
-            <property name="spacing">12</property>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label7">
-                <property name="width_request">100</property>
+              <object class="GtkButtonBox" id="hbuttonbox3">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="yalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Commit to:&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-                <property name="wrap_mode">char</property>
+                <property name="can_focus">False</property>
+                <property name="halign">end</property>
+                <property name="spacing">6</property>
+                <property name="layout_style">end</property>
+                <child>
+                  <object class="GtkButton" id="cancel">
+                    <property name="label" translatable="yes">_Cancel</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">rabbitvcs-cancel</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="expand">False</property>
+                    <property name="fill">False</property>
+                    <property name="position">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButton" id="ok">
+                    <property name="label" translatable="yes">_OK</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">rabbitvcs-ok</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="expand">False</property>
+                    <property name="fill">False</property>
+                    <property name="position">1</property>
+                  </packing>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">2</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="to">
-                <property name="width_request">500</property>
+              <object class="GtkButton" id="refresh">
                 <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="tooltip_text" translatable="yes">Refresh</property>
+                <property name="margin_left">6</property>
+                <property name="margin_right">6</property>
+                <signal name="clicked" handler="on_refresh_clicked" swapped="no"/>
+                <child>
+                  <object class="GtkImage" id="image1">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="icon_name">view-refresh</property>
+                  </object>
+                </child>
+                <accelerator key="r" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="status">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="selectable">True</property>
                 <property name="xalign">0</property>
-                <property name="wrap">True</property>
-                <property name="wrap_mode">char</property>
-                <property name="selectable">True</property>               
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVPaned" id="pane">
+          <object class="GtkPaned" id="pane">
             <property name="visible">True</property>
             <property name="can_focus">True</property>
-            <property name="border_width">6</property>  
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="border_width">6</property>
+            <property name="orientation">vertical</property>
             <child>
-              <object class="GtkVBox" id="add_message_box">
+              <object class="GtkGrid" id="add_message_box">
                 <property name="visible">True</property>
-                <property name="spacing">6</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
                 <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
                 <child>
-                  <object class="GtkLabel" id="label1">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="label" translatable="yes">&lt;b&gt;Add Message&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkAlignment" id="alignment3">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
-                    <property name="left_padding">12</property>
+                    <property name="can_focus">False</property>
+                    <property name="margin_left">12</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkVBox" id="vbox6">
+                      <object class="GtkScrolledWindow" id="scrolledwindow3">
                         <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <property name="orientation">vertical</property>
+                        <property name="can_focus">True</property>
+                        <property name="hexpand">True</property>
+                        <property name="vexpand">True</property>
+                        <property name="shadow_type">etched-in</property>
                         <child>
-                          <object class="GtkHButtonBox" id="hbuttonbox4">
-                            <property name="width_request">0</property>
+                          <object class="GtkTextView" id="message">
                             <property name="visible">True</property>
-                            <property name="layout_style">start</property>
-                            <child>
-                              <object class="GtkButton" id="previous_messages">
-                                <property name="label" translatable="yes">Previous Messages</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">True</property>
-                                <signal handler="on_previous_messages_clicked" name="clicked"/>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
+                            <property name="can_focus">True</property>
+                            <property name="has_focus">True</property>
+                            <property name="hexpand">True</property>
+                            <property name="vexpand">True</property>
+                            <property name="pixels_below_lines">7</property>
+                            <property name="wrap_mode">word</property>
+                            <property name="accepts_tab">False</property>
                           </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
                         </child>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkButtonBox" id="hbuttonbox4">
+                        <property name="width_request">0</property>
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
+                        <property name="layout_style">start</property>
                         <child>
-                          <object class="GtkScrolledWindow" id="scrolledwindow3">
+                          <object class="GtkButton" id="previous_messages">
+                            <property name="label" translatable="yes">Previous Messages</property>
                             <property name="visible">True</property>
                             <property name="can_focus">True</property>
-                            <property name="hscrollbar_policy">automatic</property>
-                            <property name="vscrollbar_policy">automatic</property>
-                            <property name="shadow_type">etched-in</property>
-                            <child>
-                              <object class="GtkTextView" id="message">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="has_focus">True</property>
-                                <property name="pixels_below_lines">7</property>
-                                <property name="wrap_mode">word</property>
-                                <property name="accepts_tab">False</property>
-                              </object>
-                            </child>
+                            <property name="receives_default">True</property>
+                            <signal name="clicked" handler="on_previous_messages_clicked" swapped="no"/>
                           </object>
                           <packing>
-                            <property name="position">-1</property>
+                            <property name="expand">False</property>
+                            <property name="fill">False</property>
+                            <property name="position">0</property>
                           </packing>
                         </child>
                       </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
+                      </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="position">1</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label1">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">&lt;b&gt;Add Message&lt;/b&gt;</property>
+                    <property name="use_markup">True</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
               </object>
@@ -150,97 +231,107 @@
               </packing>
             </child>
             <child>
-              <object class="GtkVBox" id="vbox2">
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="spacing">6</property>
+                <property name="can_focus">False</property>
+                <property name="margin_top">10</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
                 <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
                 <child>
-                  <object class="GtkLabel" id="label2">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="label" translatable="yes">&lt;b&gt;Changed Files&lt;/b&gt; (double-click to compare with base)</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkAlignment" id="alignment1">
-                    <property name="visible">True</property>
-                    <property name="left_padding">12</property>
+                    <property name="can_focus">False</property>
+                    <property name="margin_left">12</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkVBox" id="vbox3">
+                      <object class="GtkGrid" id="options_box">
                         <property name="visible">True</property>
-                        <property name="spacing">6</property>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
                         <property name="orientation">vertical</property>
                         <child>
-                          <object class="GtkScrolledWindow" id="scrolledwindow2">
+                          <object class="GtkCheckButton" id="toggle_show_unversioned">
+                            <property name="label" translatable="yes">Show unversioned files</property>
                             <property name="visible">True</property>
                             <property name="can_focus">True</property>
-                            <property name="hscrollbar_policy">automatic</property>
-                            <property name="vscrollbar_policy">automatic</property>
-                            <property name="shadow_type">etched-in</property>
-                            <child>
-                              <object class="GtkTreeView" id="files_table">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                              </object>
-                            </child>
+                            <property name="receives_default">False</property>
+                            <property name="halign">start</property>
+                            <property name="hexpand">True</property>
+                            <property name="active">True</property>
+                            <property name="draw_indicator">True</property>
+                            <signal name="toggled" handler="on_toggle_show_unversioned_toggled" swapped="no"/>
                           </object>
                           <packing>
-                            <property name="position">0</property>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">1</property>
                           </packing>
                         </child>
                         <child>
-                          <object class="GtkVBox" id="options_box">
+                          <object class="GtkCheckButton" id="toggle_show_all">
+                            <property name="label" translatable="yes">Select / Deselect all</property>
                             <property name="visible">True</property>
-                            <property name="orientation">vertical</property>
-                            <child>
-                              <object class="GtkCheckButton" id="toggle_show_all">
-                                <property name="label" translatable="yes">Select / Deselect all</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="draw_indicator">True</property>
-                                <signal handler="on_toggle_show_all_toggled" name="toggled"/>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkCheckButton" id="toggle_show_unversioned">
-                                <property name="label" translatable="yes">Show unversioned files</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="active">True</property>
-                                <property name="draw_indicator">True</property>
-                                <signal handler="on_toggle_show_unversioned_toggled" name="toggled"/>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="halign">start</property>
+                            <property name="hexpand">True</property>
+                            <property name="draw_indicator">True</property>
+                            <signal name="toggled" handler="on_toggle_show_all_toggled" swapped="no"/>
                           </object>
                           <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
                           </packing>
                         </child>
                       </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkScrolledWindow" id="scrolledwindow2">
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="hexpand">True</property>
+                        <property name="vexpand">True</property>
+                        <property name="shadow_type">etched-in</property>
+                        <child>
+                          <object class="GtkTreeView" id="files_table">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <child internal-child="selection">
+                              <object class="GtkTreeSelection"/>
+                            </child>
+                          </object>
+                        </child>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
+                      </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="position">1</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label2">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">&lt;b&gt;Changed Files&lt;/b&gt; (double-click to compare with base)</property>
+                    <property name="use_markup">True</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
               </object>
@@ -248,94 +339,54 @@
                 <property name="resize">False</property>
                 <property name="shrink">True</property>
               </packing>
-            </child>             
+            </child>
           </object>
-          
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
         </child>
         <child>
-          <object class="GtkHBox" id="hbox1">
-            <property name="spacing">6</property>
+          <object class="GtkGrid" id="commit_to_box">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="column_spacing">12</property>
             <child>
-              <object class="GtkLabel" id="status">
+              <object class="GtkLabel" id="to">
+                <property name="width_request">500</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="wrap">True</property>
+                <property name="wrap_mode">char</property>
                 <property name="selectable">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="refresh">
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="tooltip-text" translatable="yes">Refresh</property>
-                <signal handler="on_refresh_clicked" name="clicked"/>
-                <child>
-                  <object class="GtkImage" id="image1">
-                    <property name="visible">True</property>
-                    <property name="stock">gtk-refresh</property>
-                  </object>
-                </child>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>            
-            <child>
-              <object class="GtkHButtonBox" id="hbuttonbox3">
+              <object class="GtkLabel" id="label7">
                 <property name="visible">True</property>
-                <property name="spacing">6</property>
-                <property name="layout_style">end</property>
-                <child>
-                  <object class="GtkButton" id="cancel">
-                    <property name="label">gtk-cancel</property>
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_cancel_clicked" name="clicked"/>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkButton" id="ok">
-                    <property name="label">gtk-ok</property>
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_ok_clicked" name="clicked"/>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Commit to:&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="wrap_mode">char</property>
+                <property name="xalign">0</property>
+                <property name="yalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="pack_type">end</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">3</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/authentication.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/authentication.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/authentication.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/authentication.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,33 +1,52 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
-
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkDialog" id="Authentication">
     <property name="width_request">450</property>
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">Authentication</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">dialog</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox4">
+      <object class="GtkBox" id="dialog-vbox4">
         <property name="visible">True</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkVBox" id="vbox1">
+        <property name="can_focus">False</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
+        <child internal-child="action_area">
+          <object class="GtkButtonBox" id="dialog-action_area4">
             <property name="visible">True</property>
-            <property name="border_width">6</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label2">
+              <object class="GtkButton" id="auth_cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Please add your authentication details&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">False</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -36,147 +55,19 @@
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment11">
+              <object class="GtkButton" id="auth_ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox3">
-                    <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHBox" id="hbox2">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label3">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="label" translatable="yes">Realm:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="auth_realm">
-                            <property name="width_request">300</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="wrap">True</property>
-                            <property name="wrap_mode">char</property>
-                            <property name="selectable">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox3">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label4">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Login:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkEntry" id="auth_login">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="activates_default">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox4">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label5">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Password:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkEntry" id="auth_password">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="visibility">False</property>
-                            <property name="activates_default">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">2</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox5">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label6">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkCheckButton" id="auth_save">
-                            <property name="label" translatable="yes">Save Authentication</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="draw_indicator">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">3</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="can_default">True</property>
+                <property name="has_default">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">1</property>
               </packing>
             </child>
@@ -184,48 +75,147 @@
           <packing>
             <property name="expand">False</property>
             <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="pack_type">end</property>
+            <property name="position">0</property>
           </packing>
         </child>
-        <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area4">
+        <child>
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="auth_cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">False</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
+                <child>
+                  <object class="GtkCheckButton" id="auth_save">
+                    <property name="label" translatable="yes">Save Authentication</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">3</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkEntry" id="auth_password">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <property name="visibility">False</property>
+                    <property name="activates_default">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkEntry" id="auth_login">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <property name="activates_default">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="auth_realm">
+                    <property name="width_request">300</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="wrap">True</property>
+                    <property name="wrap_mode">char</property>
+                    <property name="selectable">True</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label5">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Password:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label4">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Login:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label3">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Realm:</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="auth_ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label2">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="can_default">True</property>
-                <property name="has_default">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Please add your authentication details&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
             <property name="expand">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">0</property>
+            <property name="fill">False</property>
+            <property name="position">1</property>
           </packing>
         </child>
       </object>
@@ -235,7 +225,4 @@
       <action-widget response="-5">auth_ok</action-widget>
     </action-widgets>
   </object>
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/cert_authentication.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/cert_authentication.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/cert_authentication.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/cert_authentication.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,31 +1,49 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkDialog" id="CertAuthentication">
     <property name="width_request">400</property>
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">dialog</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox9">
+      <object class="GtkBox" id="dialog-vbox9">
         <property name="visible">True</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkVBox" id="vbox2">
+        <property name="can_focus">False</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
+        <child internal-child="action_area">
+          <object class="GtkButtonBox" id="dialog-action_area9">
             <property name="visible">True</property>
-            <property name="border_width">6</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButton" id="certauth_cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Please add your authentication details&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -34,114 +52,15 @@
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment3">
+              <object class="GtkButton" id="certauth_ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox10">
-                    <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHBox" id="hbox14">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label19">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="label" translatable="yes">Realm:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="certauth_realm">
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="wrap">True</property>
-                            <property name="selectable">True</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox1">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label21">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Password:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkEntry" id="certauth_password">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="visibility">False</property>
-                            <property name="activates_default">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox13">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label20">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkCheckButton" id="certauth_save">
-                            <property name="label" translatable="yes">Save Authentication</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="draw_indicator">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">2</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="can_default">True</property>
+                <property name="has_default">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -151,48 +70,124 @@
             </child>
           </object>
           <packing>
-            <property name="position">1</property>
+            <property name="expand">False</property>
+            <property name="fill">False</property>
+            <property name="pack_type">end</property>
+            <property name="position">0</property>
           </packing>
         </child>
-        <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area9">
+        <child>
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="certauth_cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
+                <child>
+                  <object class="GtkCheckButton" id="certauth_save">
+                    <property name="label" translatable="yes">Save Authentication</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkEntry" id="certauth_password">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <property name="visibility">False</property>
+                    <property name="activates_default">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label21">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Password:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="certauth_realm">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="wrap">True</property>
+                    <property name="selectable">True</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label19">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Realm:</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="certauth_ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="can_default">True</property>
-                <property name="has_default">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Please add your authentication details&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
             <property name="expand">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">0</property>
+            <property name="fill">True</property>
+            <property name="position">1</property>
           </packing>
         </child>
       </object>
@@ -202,8 +197,4 @@
       <action-widget response="-5">certauth_ok</action-widget>
     </action-widgets>
   </object>
-
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/certificate.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/certificate.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/certificate.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/certificate.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,247 +1,33 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
+  <requires lib="gtk+" version="3.0"/>
   <object class="GtkDialog" id="Certificate">
     <property name="width_request">550</property>
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">Check Certificate</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">dialog</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox3">
+      <object class="GtkBox" id="dialog-vbox3">
         <property name="width_request">400</property>
         <property name="visible">True</property>
+        <property name="can_focus">False</property>
+        <property name="orientation">vertical</property>
         <property name="spacing">12</property>
-        <child>
-          <object class="GtkVBox" id="vbox4">
-            <property name="visible">True</property>
-            <property name="border_width">6</property>
-            <property name="spacing">6</property>
-            <child>
-              <object class="GtkLabel" id="label12">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Certificate Details&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkAlignment" id="alignment1">
-                <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox5">
-                    <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHBox" id="hbox6">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label7">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="label" translatable="yes">Realm:</property>
-                            <property name="ellipsize">start</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="cert_realm">
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="wrap">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox7">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label8">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="label" translatable="yes">Host:</property>
-                            <property name="ellipsize">start</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="cert_host">
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="wrap">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox8">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label9">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="label" translatable="yes">Issuer:</property>
-                            <property name="ellipsize">start</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="cert_issuer">
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="wrap">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">2</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox9">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label10">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="label" translatable="yes">Valid:</property>
-                            <property name="ellipsize">start</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="cert_valid">
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="wrap">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">3</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox10">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label11">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="label" translatable="yes">Fingerprint:</property>
-                            <property name="ellipsize">start</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="cert_fingerprint">
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0</property>
-                            <property name="wrap">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">4</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
-          </packing>
-        </child>
         <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area3">
+          <object class="GtkButtonBox" id="dialog-action_area3">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="layout_style">spread</property>
             <child>
               <object class="GtkButton" id="cert_accept_once">
@@ -290,6 +76,188 @@
             <property name="position">0</property>
           </packing>
         </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
+            <child>
+              <object class="GtkGrid">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
+                <child>
+                  <object class="GtkLabel" id="cert_fingerprint">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="wrap">True</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">4</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label11">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Fingerprint:</property>
+                    <property name="ellipsize">start</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">4</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="cert_valid">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="wrap">True</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">3</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label10">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Valid:</property>
+                    <property name="ellipsize">start</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">3</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="cert_issuer">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="wrap">True</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label9">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Issuer:</property>
+                    <property name="ellipsize">start</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="cert_host">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="wrap">True</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label8">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Host:</property>
+                    <property name="ellipsize">start</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="cert_realm">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="wrap">True</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label7">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Realm:</property>
+                    <property name="ellipsize">start</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label12">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Certificate Details&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="expand">False</property>
+            <property name="fill">False</property>
+            <property name="position">1</property>
+          </packing>
+        </child>
       </object>
     </child>
     <action-widgets>
@@ -297,8 +265,4 @@
       <action-widget response="2">cert_accept_forever</action-widget>
     </action-widgets>
   </object>
-
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/confirmation.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/confirmation.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/confirmation.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/confirmation.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,30 +1,50 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
-
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-no">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-no</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-yes">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-yes</property>
+  </object>
   <object class="GtkDialog" id="Confirmation">
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">Confirmation</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">dialog</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox7">
+      <object class="GtkBox" id="dialog-vbox7">
         <property name="visible">True</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkHBox" id="hbox15">
+        <property name="can_focus">False</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
+        <child internal-child="action_area">
+          <object class="GtkButtonBox" id="dialog-action_area7">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkImage" id="image1">
-                <property name="width_request">75</property>
+              <object class="GtkButton" id="confirm_cancel">
+                <property name="label" translatable="yes">_No</property>
                 <property name="visible">True</property>
-                <property name="stock">gtk-dialog-warning</property>
-                <property name="icon-size">6</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-no</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -33,12 +53,15 @@
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="confirm_message">
+              <object class="GtkButton" id="confirm_ok">
+                <property name="label" translatable="yes">_Yes</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="xpad">6</property>
-                <property name="ypad">6</property>
-                <property name="label" translatable="yes">Are you sure you want to continue?</property>
+                <property name="can_focus">True</property>
+                <property name="can_default">True</property>
+                <property name="has_default">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-yes</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -50,48 +73,48 @@
           <packing>
             <property name="expand">False</property>
             <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="pack_type">end</property>
+            <property name="position">0</property>
           </packing>
         </child>
-        <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area7">
+        <child>
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkButton" id="confirm_cancel">
-                <property name="label">gtk-no</property>
+              <object class="GtkLabel" id="confirm_message">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">Are you sure you want to continue?</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="confirm_ok">
-                <property name="label">gtk-yes</property>
+              <object class="GtkImage" id="image1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="can_default">True</property>
-                <property name="has_default">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="pixel_size">48</property>
+                <property name="icon_name">dialog-warning</property>
+                <property name="icon_size">6</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
             <property name="expand">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">0</property>
+            <property name="fill">False</property>
+            <property name="position">1</property>
           </packing>
         </child>
       </object>
@@ -101,7 +124,4 @@
       <action-widget response="-5">confirm_ok</action-widget>
     </action-widgets>
   </object>
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/conflict_decision.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/conflict_decision.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/conflict_decision.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/conflict_decision.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,21 +1,30 @@
 <?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
   <object class="GtkDialog" id="ConflictDecision">
     <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">Edit Conflicts</property>
     <property name="type_hint">normal</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox16">
+      <object class="GtkBox" id="dialog-vbox16">
         <property name="visible">True</property>
         <property name="can_focus">False</property>
-        <property name="spacing">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
         <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area16">
+          <object class="GtkButtonBox" id="dialog-action_area16">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="layout_style">center</property>
             <child>
               <object class="GtkButton" id="cancel">
@@ -78,75 +87,54 @@
           </packing>
         </child>
         <child>
-          <object class="GtkHBox" id="hbox1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
-            <property name="spacing">6</property>
+            <property name="row_spacing">18</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkVBox" id="vbox1">
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
-                <child>
-                  <object class="GtkImage" id="image1">
-                    <property name="visible">True</property>
-                    <property name="can_focus">False</property>
-                    <property name="xpad">25</property>
-                    <property name="ypad">25</property>
-                    <property name="stock">gtk-dialog-warning</property>
-                    <property name="icon-size">6</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
+                <property name="margin_top">7</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;A conflict was found in the following file:&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+                <property name="yalign">0.10000000149011612</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkVBox" id="vbox2">
+              <object class="GtkLabel" id="filename">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
-                <property name="border_width">12</property>
-                <property name="spacing">18</property>
-                <child>
-                  <object class="GtkLabel" id="label1">
-                    <property name="visible">True</property>
-                    <property name="can_focus">False</property>
-                    <property name="xalign">0</property>
-                    <property name="yalign">0.10000000149011612</property>
-                    <property name="label" translatable="yes">&lt;b&gt;A conflict was found in the following file:&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkLabel" id="filename">
-                    <property name="visible">True</property>
-                    <property name="can_focus">False</property>
-                    <property name="xalign">0</property>
-                    <property name="yalign">0</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="xalign">0</property>
+                <property name="yalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkImage" id="image1">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="valign">start</property>
+                <property name="pixel_size">64</property>
+                <property name="icon_name">dialog-warning</property>
+                <property name="icon_size">6</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+                <property name="height">2</property>
               </packing>
             </child>
           </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/create_folder.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/create_folder.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/create_folder.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/create_folder.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,56 +1,48 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkDialog" id="CreateFolder">
     <property name="width_request">320</property>
     <property name="height_request">240</property>
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">Create Folder...</property>
     <property name="type_hint">normal</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox12">
+      <object class="GtkBox" id="dialog-vbox12">
         <property name="visible">True</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkVBox" id="vbox1">
+        <property name="can_focus">False</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
+        <child internal-child="action_area">
+          <object class="GtkButtonBox" id="dialog-action_area12">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="hexpand">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkHBox" id="vbox3">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="spacing">6</property>
-                <child>
-                  <object class="GtkLabel" id="label1">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="label" translatable="yes">&lt;b&gt;Folder Name&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                  <packing>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkAlignment" id="alignment2">
-                    <property name="visible">True</property>
-                    <property name="left_padding">12</property>
-                    <child>
-                      <object class="GtkEntry" id="folder_name">
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="invisible_char">&#x25CF;</property>
-                        <signal handler="on_folder_name_changed" name="changed"/>
-                      </object>
-                    </child>
-                  </object>
-                  <packing>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -59,98 +51,122 @@
               </packing>
             </child>
             <child>
-              <object class="GtkVBox" id="vbox2">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="spacing">6</property>
-                <child>
-                  <object class="GtkLabel" id="label2">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="label" translatable="yes">&lt;b&gt;Add Message&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkAlignment" id="alignment1">
-                    <property name="visible">True</property>
-                    <property name="left_padding">12</property>
-                    <child>
-                      <object class="GtkScrolledWindow" id="scrolledwindow1">
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="hscrollbar_policy">automatic</property>
-                        <property name="vscrollbar_policy">automatic</property>
-                        <property name="shadow_type">etched-in</property>
-                        <child>
-                          <object class="GtkTextView" id="log_message">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                          </object>
-                        </child>
-                      </object>
-                    </child>
-                  </object>
-                  <packing>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="has_focus">True</property>
+                <property name="can_default">True</property>
+                <property name="has_default">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">1</property>
+            <property name="expand">False</property>
+            <property name="fill">False</property>
+            <property name="pack_type">end</property>
+            <property name="position">0</property>
           </packing>
         </child>
-        <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area12">
+        <child>
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkEntry" id="folder_name">
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="invisible_char">●</property>
+                <signal name="changed" handler="on_folder_name_changed" swapped="no"/>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="has_focus">True</property>
-                <property name="can_default">True</property>
-                <property name="has_default">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Folder Name&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
             <property name="expand">False</property>
-            <property name="pack_type">end</property>
+            <property name="fill">False</property>
             <property name="position">0</property>
           </packing>
         </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
+            <child>
+              <object class="GtkScrolledWindow" id="scrolledwindow1">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="shadow_type">etched-in</property>
+                <child>
+                  <object class="GtkTextView" id="log_message">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                  </object>
+                </child>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label2">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Add Message&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="expand">False</property>
+            <property name="fill">True</property>
+            <property name="position">2</property>
+          </packing>
+        </child>
       </object>
     </child>
     <action-widgets>
@@ -158,8 +174,4 @@
       <action-widget response="-5">ok</action-widget>
     </action-widgets>
   </object>
-
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/delete_confirmation.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/delete_confirmation.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/delete_confirmation.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/delete_confirmation.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,29 +1,52 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
+  <requires lib="gtk+" version="3.20"/>
+  <object class="GtkImage" id="edit-delete">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">edit-delete</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
   <object class="GtkDialog" id="DeleteConfirmation">
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">Delete Confirmation</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">dialog</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox10">
+      <object class="GtkBox" id="dialog-vbox10">
         <property name="visible">True</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkHBox" id="hbox16">
+        <property name="can_focus">False</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
+        <child internal-child="action_area">
+          <object class="GtkButtonBox" id="dialog-action_area10">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkImage" id="image2">
-                <property name="width_request">75</property>
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="stock">gtk-dialog-warning</property>
-                <property name="icon-size">6</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -32,84 +55,83 @@
               </packing>
             </child>
             <child>
-              <object class="GtkVBox" id="vbox11">
+              <object class="GtkButton" id="delete">
+                <property name="label" translatable="yes">_Delete</property>
                 <property name="visible">True</property>
-                <property name="border_width">12</property>
-                <property name="spacing">18</property>
-                <child>
-                  <object class="GtkLabel" id="message">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="label" translatable="yes">&lt;span size="large"&gt;&lt;b&gt;Are you sure you want to delete %item%?&lt;/b&gt;&lt;/span&gt;</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkLabel" id="submessage">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="label" translatable="yes">The item(s) will be sent to the trash can.</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="can_default">True</property>
+                <property name="has_default">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">edit-delete</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">1</property>
+            <property name="expand">False</property>
+            <property name="fill">False</property>
+            <property name="pack_type">end</property>
+            <property name="position">0</property>
           </packing>
         </child>
-        <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area10">
+        <child>
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="row_spacing">6</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkLabel" id="submessage">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">The item(s) will be sent to the trash can.</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="delete">
-                <property name="label">gtk-delete</property>
+              <object class="GtkLabel" id="message">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="can_default">True</property>
-                <property name="has_default">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;span size="large"&gt;&lt;b&gt;Are you sure you want to delete %item%?&lt;/b&gt;&lt;/span&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkImage" id="image2">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="pixel_size">64</property>
+                <property name="icon_name">dialog-warning</property>
+                <property name="icon_size">6</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+                <property name="height">2</property>
               </packing>
             </child>
           </object>
           <packing>
             <property name="expand">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">0</property>
+            <property name="fill">True</property>
+            <property name="position">1</property>
           </packing>
         </child>
       </object>
@@ -119,8 +141,4 @@
       <action-widget response="-5">delete</action-widget>
     </action-widgets>
   </object>
-
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/error_notification.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/error_notification.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/error_notification.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/error_notification.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,61 +1,114 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="window-close">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">window-close</property>
+  </object>
   <object class="GtkDialog" id="ErrorNotification">
     <property name="width_request">500</property>
     <property name="height_request">300</property>
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">RabbitVCS Error</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">normal</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox15">
+      <object class="GtkBox" id="dialog-vbox15">
         <property name="visible">True</property>
-        <property name="spacing">6</property>
-        <child>
-          <object class="GtkHBox" id="hbox1">
+        <property name="can_focus">False</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
+        <child internal-child="action_area">
+          <object class="GtkButtonBox" id="dialog-action_area15">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="hexpand">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkImage" id="image1">
+              <object class="GtkButton" id="button1">
+                <property name="label" translatable="yes">_Close</property>
                 <property name="visible">True</property>
-                <property name="stock">gtk-dialog-warning</property>
-                <property name="icon-size">6</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">window-close</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_close_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">0</property>
               </packing>
             </child>
+          </object>
+          <packing>
+            <property name="expand">False</property>
+            <property name="fill">False</property>
+            <property name="pack_type">end</property>
+            <property name="position">0</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="column_spacing">6</property>
             <child>
               <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
                 <property name="label" translatable="yes">&lt;span weight="bold" size="xx-large"&gt;RabbitVCS Error&lt;/span&gt;</property>
                 <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkImage" id="image1">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">6</property>
+                <property name="pixel_size">64</property>
+                <property name="icon_name">dialog-warning</property>
+                <property name="icon_size">6</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
             <property name="expand">False</property>
+            <property name="fill">True</property>
             <property name="position">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHBox" id="notice_box">
+          <object class="GtkGrid" id="notice_box">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <child>
               <placeholder/>
             </child>
           </object>
           <packing>
             <property name="expand">False</property>
+            <property name="fill">True</property>
             <property name="position">2</property>
           </packing>
         </child>
@@ -63,8 +116,8 @@
           <object class="GtkScrolledWindow" id="scrolledwindow1">
             <property name="visible">True</property>
             <property name="can_focus">True</property>
-            <property name="hscrollbar_policy">automatic</property>
-            <property name="vscrollbar_policy">automatic</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="shadow_type">etched-in</property>
             <child>
               <object class="GtkTextView" id="error_text">
@@ -76,39 +129,12 @@
             </child>
           </object>
           <packing>
-            <property name="position">3</property>
-          </packing>
-        </child>
-        <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area15">
-            <property name="visible">True</property>
-            <property name="layout_style">end</property>
-            <child>
-              <object class="GtkButton" id="button1">
-                <property name="label">gtk-close</property>
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
             <property name="expand">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">0</property>
+            <property name="fill">True</property>
+            <property name="position">3</property>
           </packing>
         </child>
       </object>
     </child>
   </object>
-
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/loading.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/loading.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/loading.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/loading.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,51 +1,55 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
-
+  <requires lib="gtk+" version="3.20"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
   <object class="GtkDialog" id="Loading">
     <property name="width_request">300</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
     <property name="border_width">5</property>
-    <property name="title" translatable="yes">Loading...</property>
-    <property name="window_position">center-on-parent</property>
+    <property name="title" translatable="yes">Loading</property>
+    <property name="resizable">False</property>
+    <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">dialog</property>
-    <property name="has_separator">False</property>
-    <signal handler="on_destroy" name="destroy"/>
+    <property name="gravity">center</property>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox13">
+      <object class="GtkBox" id="dialog-vbox13">
         <property name="visible">True</property>
+        <property name="can_focus">False</property>
         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-        <property name="spacing">6</property>
-        <child>
-          <object class="GtkProgressBar" id="pbar">
-            <property name="visible">True</property>
-            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
-          </packing>
-        </child>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
         <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area13">
+          <object class="GtkButtonBox" id="dialog-action_area13">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
             <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+            <property name="halign">end</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="layout_style">end</property>
             <child>
               <object class="GtkButton" id="loading_cancel">
-                <property name="label">gtk-cancel</property>
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">True</property>
                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_loading_cancel_clicked" name="clicked"/>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_loading_cancel_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -56,14 +60,25 @@
           </object>
           <packing>
             <property name="expand">False</property>
+            <property name="fill">False</property>
             <property name="pack_type">end</property>
             <property name="position">0</property>
           </packing>
         </child>
+        <child>
+          <object class="GtkProgressBar" id="pbar">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+            <property name="hexpand">True</property>
+          </object>
+          <packing>
+            <property name="expand">False</property>
+            <property name="fill">False</property>
+            <property name="position">1</property>
+          </packing>
+        </child>
       </object>
     </child>
   </object>
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/mark_resolved_prompt.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/mark_resolved_prompt.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/mark_resolved_prompt.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/mark_resolved_prompt.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
   <object class="GtkDialog" id="MarkResolvedPrompt">
     <property name="can_focus">False</property>
     <property name="border_width">5</property>
@@ -9,15 +9,23 @@
     <property name="resizable">False</property>
     <property name="modal">True</property>
     <property name="type_hint">dialog</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox2">
+      <object class="GtkBox" id="dialog-vbox2">
         <property name="visible">True</property>
         <property name="can_focus">False</property>
-        <property name="spacing">2</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
         <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area2">
+          <object class="GtkButtonBox" id="dialog-action_area2">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
             <property name="layout_style">end</property>
             <child>
               <object class="GtkButton" id="button2">
@@ -49,6 +57,7 @@
           <packing>
             <property name="expand">True</property>
             <property name="fill">True</property>
+            <property name="pack_type">end</property>
             <property name="position">0</property>
           </packing>
         </child>
@@ -56,6 +65,8 @@
           <object class="GtkLabel" id="label1">
             <property name="visible">True</property>
             <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="label" translatable="yes">&lt;b&gt;Mark Conflict As&lt;/b&gt;</property>
             <property name="use_markup">True</property>
           </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/message_box.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/message_box.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/message_box.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/message_box.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,44 +1,45 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkDialog" id="MessageBox">
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">Message</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">dialog</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox8">
+      <object class="GtkBox" id="dialog-vbox8">
         <property name="visible">True</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkLabel" id="messagebox_message">
-            <property name="visible">True</property>
-            <property name="xalign">0</property>
-            <property name="xpad">6</property>
-            <property name="ypad">6</property>
-            <property name="selectable">True</property>
-          </object>
-          <packing>
-            <property name="position">1</property>
-          </packing>
-        </child>
+        <property name="can_focus">False</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
         <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area8">
+          <object class="GtkButtonBox" id="dialog-action_area8">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
             <property name="layout_style">end</property>
             <child>
               <object class="GtkButton" id="messagebox_ok">
-                <property name="label">gtk-ok</property>
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -49,18 +50,33 @@
           </object>
           <packing>
             <property name="expand">False</property>
+            <property name="fill">False</property>
             <property name="pack_type">end</property>
             <property name="position">0</property>
           </packing>
         </child>
+        <child>
+          <object class="GtkLabel" id="messagebox_message">
+            <property name="width_request">175</property>
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="margin_left">6</property>
+            <property name="margin_right">6</property>
+            <property name="margin_top">6</property>
+            <property name="margin_bottom">6</property>
+            <property name="selectable">True</property>
+            <property name="xalign">0</property>
+          </object>
+          <packing>
+            <property name="expand">False</property>
+            <property name="fill">True</property>
+            <property name="position">1</property>
+          </packing>
+        </child>
       </object>
     </child>
     <action-widgets>
       <action-widget response="1">messagebox_ok</action-widget>
     </action-widgets>
   </object>
-
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/name_email_prompt.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/name_email_prompt.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/name_email_prompt.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/name_email_prompt.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,130 +1,53 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
-
-
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkDialog" id="NameEmailPrompt">
     <property name="width_request">400</property>
+    <property name="can_focus">False</property>
     <property name="border_width">12</property>
     <property name="title" translatable="yes">Name and Email</property>
     <property name="window_position">center-on-parent</property>
     <property name="type_hint">normal</property>
-    <property name="has_separator">False</property>
-    <signal handler="on_key_release_event" name="key_release_event"/>
+    <signal name="key-release-event" handler="on_key_release_event" swapped="no"/>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox18">
+      <object class="GtkBox" id="dialog-vbox18">
         <property name="visible">True</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkLabel" id="label1">
-            <property name="visible">True</property>
-            <property name="xalign">0</property>
-            <property name="label" translatable="yes">&lt;b&gt;Enter Name and Email Details&lt;/b&gt;</property>
-            <property name="use_markup">True</property>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkAlignment" id="alignment1">
-            <property name="visible">True</property>
-            <property name="left_padding">12</property>
-            <child>
-              <object class="GtkVBox" id="vbox1">
-                <property name="visible">True</property>
-                <property name="spacing">6</property>
-                <child>
-                  <object class="GtkHBox" id="hbox1">
-                    <property name="visible">True</property>
-                    <child>
-                      <object class="GtkLabel" id="label2">
-                        <property name="width_request">90</property>
-                        <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">Name:</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkEntry" id="name">
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="invisible_char">&#x25CF;</property>
-                        <property name="invisible_char_set">True</property>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkHBox" id="hbox2">
-                    <property name="visible">True</property>
-                    <child>
-                      <object class="GtkLabel" id="label3">
-                        <property name="width_request">90</property>
-                        <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">Email:</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkEntry" id="email">
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="invisible_char">&#x25CF;</property>
-                        <property name="invisible_char_set">True</property>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
-              </object>
-            </child>
-          </object>
-          <packing>
-            <property name="position">2</property>
-          </packing>
-        </child>
+        <property name="can_focus">False</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
         <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area18">
+          <object class="GtkButtonBox" id="dialog-action_area18">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="layout_style">end</property>
             <child>
               <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -134,11 +57,12 @@
             </child>
             <child>
               <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -149,10 +73,103 @@
           </object>
           <packing>
             <property name="expand">False</property>
+            <property name="fill">False</property>
             <property name="pack_type">end</property>
             <property name="position">0</property>
           </packing>
         </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
+            <child>
+              <object class="GtkLabel" id="label1">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Enter Name and Email Details&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkGrid">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="margin_right">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
+                <child>
+                  <object class="GtkEntry" id="email">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <property name="invisible_char">●</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label3">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Email:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkEntry" id="name">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <property name="invisible_char">●</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label2">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Name:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="expand">False</property>
+            <property name="fill">False</property>
+            <property name="position">1</property>
+          </packing>
+        </child>
       </object>
     </child>
     <action-widgets>
@@ -160,5 +177,4 @@
       <action-widget response="-5">ok</action-widget>
     </action-widgets>
   </object>
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/one_line_text_change.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/one_line_text_change.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/one_line_text_change.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/one_line_text_change.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,31 +1,53 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
-
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkDialog" id="OneLineTextChange">
     <property name="width_request">500</property>
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">Text Change</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">normal</property>
-    <property name="has_separator">False</property>
-    <signal handler="on_key_release_event" name="key_release_event"/>
+    <signal name="key-release-event" handler="on_key_release_event" swapped="no"/>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox13">
+      <object class="GtkBox" id="dialog-vbox13">
         <property name="visible">True</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkHBox" id="hbox1">
+        <property name="can_focus">False</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
+        <child internal-child="action_area">
+          <object class="GtkButtonBox" id="dialog-action_area13">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label">
-                <property name="width_request">100</property>
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">New Name:</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -34,12 +56,21 @@
               </packing>
             </child>
             <child>
-              <object class="GtkEntry" id="new_text">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
-                <property name="invisible_char">&#x25CF;</property>
+                <property name="has_focus">True</property>
+                <property name="is_focus">True</property>
+                <property name="can_default">True</property>
+                <property name="has_default">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">1</property>
               </packing>
             </child>
@@ -47,51 +78,45 @@
           <packing>
             <property name="expand">False</property>
             <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="pack_type">end</property>
+            <property name="position">0</property>
           </packing>
         </child>
-        <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area13">
+        <child>
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkEntry" id="new_text">
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="hexpand">True</property>
+                <property name="invisible_char">●</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="has_focus">True</property>
-                <property name="is_focus">True</property>
-                <property name="can_default">True</property>
-                <property name="has_default">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">New Name:</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
             <property name="expand">False</property>
             <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">0</property>
+            <property name="position">1</property>
           </packing>
         </child>
       </object>
@@ -101,7 +126,4 @@
       <action-widget response="-5">ok</action-widget>
     </action-widgets>
   </object>
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/previous_messages.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/previous_messages.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/previous_messages.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/previous_messages.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,34 +1,52 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
-
+  <requires lib="gtk+" version="3.20"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkDialog" id="PreviousMessages">
     <property name="width_request">500</property>
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">Previous Messages</property>
     <property name="window_position">center</property>
     <property name="default_width">450</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">dialog</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox1">
+      <object class="GtkBox" id="dialog-vbox1">
         <property name="visible">True</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkVBox" id="vbox7">
+        <property name="can_focus">False</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
+        <child internal-child="action_area">
+          <object class="GtkButtonBox" id="dialog-action_area1">
             <property name="visible">True</property>
-            <property name="border_width">6</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="hexpand">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label14">
+              <object class="GtkButton" id="prevmes_cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Previous Messages&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -37,121 +55,133 @@
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment2">
+              <object class="GtkButton" id="prevmes_ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkScrolledWindow" id="scrolledwindow4">
-                    <property name="height_request">200</property>
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="hscrollbar_policy">automatic</property>
-                    <property name="vscrollbar_policy">automatic</property>
-                    <property name="shadow_type">etched-in</property>
-                    <child>
-                      <object class="GtkTreeView" id="prevmes_table">
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                      </object>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">1</property>
+            <property name="expand">False</property>
+            <property name="fill">False</property>
+            <property name="pack_type">end</property>
+            <property name="position">0</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox6">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="border_width">6</property>
-            <property name="spacing">6</property>
-            <child>
-              <object class="GtkLabel" id="label13">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Message&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkAlignment" id="alignment5">
+              <object class="GtkScrolledWindow" id="scrolledwindow4">
+                <property name="height_request">200</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">True</property>
+                <property name="margin_left">12</property>
+                <property name="margin_right">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="shadow_type">etched-in</property>
                 <child>
-                  <object class="GtkScrolledWindow" id="scrolledwindow5">
+                  <object class="GtkTreeView" id="prevmes_table">
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
-                    <property name="hscrollbar_policy">automatic</property>
-                    <property name="vscrollbar_policy">automatic</property>
-                    <property name="shadow_type">etched-in</property>
-                    <child>
-                      <object class="GtkTextView" id="prevmes_message">
-                        <property name="height_request">100</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="wrap_mode">word</property>
-                      </object>
+                    <child internal-child="selection">
+                      <object class="GtkTreeSelection"/>
                     </child>
                   </object>
                 </child>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label14">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Previous Messages&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">2</property>
+            <property name="expand">True</property>
+            <property name="fill">True</property>
+            <property name="position">1</property>
           </packing>
         </child>
-        <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area1">
+        <child>
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="prevmes_cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkScrolledWindow" id="scrolledwindow5">
+                <property name="height_request">175</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="margin_left">12</property>
+                <property name="margin_right">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="shadow_type">etched-in</property>
+                <child>
+                  <object class="GtkTextView" id="prevmes_message">
+                    <property name="height_request">100</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="wrap_mode">word</property>
+                  </object>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="prevmes_ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label13">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Message&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">0</property>
+            <property name="expand">True</property>
+            <property name="fill">True</property>
+            <property name="position">2</property>
           </packing>
         </child>
       </object>
@@ -161,7 +191,4 @@
       <action-widget response="-5">prevmes_ok</action-widget>
     </action-widgets>
   </object>
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/property.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/property.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/property.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/property.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,34 +1,50 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
-
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkDialog" id="Property">
-    <property name="default_width">600</property>
-    <property name="default_height">400</property>
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">Property</property>
     <property name="window_position">center</property>
+    <property name="default_width">600</property>
+    <property name="default_height">400</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">dialog</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox5">
+      <object class="GtkBox" id="dialog-vbox5">
         <property name="visible">True</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkVBox" id="vbox8">
+        <property name="can_focus">False</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
+        <child internal-child="action_area">
+          <object class="GtkButtonBox" id="dialog-action_area5">
             <property name="visible">True</property>
-            <property name="border_width">6</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label15">
+              <object class="GtkButton" id="property_cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Edit Property Details&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -37,174 +53,156 @@
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment12">
+              <object class="GtkButton" id="property_ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox9">
-                    <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHBox" id="hbox11">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label16">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Property:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkComboBoxEntry" id="property_name">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox12">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label17">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="yalign">0.05000000074505806</property>
-                            <property name="label" translatable="yes">Value:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkScrolledWindow" id="scrolledwindow1">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="hscrollbar_policy">automatic</property>
-                            <property name="vscrollbar_policy">automatic</property>
-                            <property name="shadow_type">etched-in</property>
-                            <child>
-                              <object class="GtkTextView" id="property_value">
-                                <property name="height_request">100</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="wrap_mode">word</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox17">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label18">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkCheckButton" id="property_recurse">
-                            <property name="label" translatable="yes">Apply property recursively</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="active">True</property>
-                            <property name="draw_indicator">True</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">2</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="can_default">True</property>
+                <property name="has_default">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">1</property>
+            <property name="expand">False</property>
+            <property name="fill">False</property>
+            <property name="pack_type">end</property>
+            <property name="position">0</property>
           </packing>
         </child>
-        <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area5">
+        <child>
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="property_cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="margin_right">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
+                <child>
+                  <object class="GtkCheckButton" id="property_recurse">
+                    <property name="label" translatable="yes">Apply property recursively</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="active">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkScrolledWindow" id="scrolledwindow1">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="shadow_type">etched-in</property>
+                    <child>
+                      <object class="GtkTextView" id="property_value">
+                        <property name="height_request">100</property>
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="wrap_mode">word</property>
+                      </object>
+                    </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label17">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Value:</property>
+                    <property name="xalign">0</property>
+                    <property name="yalign">0.05000000074505806</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkComboBoxText" id="property_name">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <property name="has_entry">True</property>
+                    <child internal-child="entry">
+                      <object class="GtkEntry">
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                      </object>
+                    </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label16">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Property:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="property_ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label15">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="can_default">True</property>
-                <property name="has_default">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Edit Property Details&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
             <property name="expand">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">0</property>
+            <property name="fill">True</property>
+            <property name="position">1</property>
           </packing>
         </child>
       </object>
@@ -214,7 +212,4 @@
       <action-widget response="-5">property_ok</action-widget>
     </action-widgets>
   </object>
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/ssl_client_cert_prompt.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/ssl_client_cert_prompt.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/ssl_client_cert_prompt.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/ssl_client_cert_prompt.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,32 +1,54 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
-
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkDialog" id="SSLClientCertPrompt">
     <property name="width_request">400</property>
+    <property name="can_focus">False</property>
     <property name="border_width">5</property>
     <property name="title" translatable="yes">SSL Client Certification</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">dialog</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox9">
+      <object class="GtkBox" id="dialog-vbox9">
         <property name="visible">True</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkVBox" id="vbox1">
+        <property name="can_focus">False</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
+        <child internal-child="action_area">
+          <object class="GtkButtonBox" id="dialog-action_area9">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButton" id="sslclientcert_cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Please provide your ssl certification file&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_sslclientcert_cancel_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -35,109 +57,13 @@
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment1">
+              <object class="GtkButton" id="sslclientcert_ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox2">
-                    <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHBox" id="hbox2">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label2">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Realm:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="sslclientcert_realm">
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox1">
-                        <property name="visible">True</property>
-                        <property name="spacing">2</property>
-                        <child>
-                          <object class="GtkLabel" id="label3">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Path:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkEntry" id="sslclientcert_path">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="invisible_char">&#x25CF;</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkButton" id="sslclientcert_browse">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <signal handler="on_sslclientcert_browse_clicked" name="clicked"/>
-                            <child>
-                              <object class="GtkImage" id="image1">
-                                <property name="visible">True</property>
-                                <property name="stock">gtk-harddisk</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">2</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkCheckButton" id="sslclientcert_save">
-                        <property name="label" translatable="yes">Save Authentication</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="xalign">0.4699999988079071</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="position">2</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -147,47 +73,141 @@
             </child>
           </object>
           <packing>
-            <property name="position">1</property>
+            <property name="expand">False</property>
+            <property name="fill">False</property>
+            <property name="pack_type">end</property>
+            <property name="position">0</property>
           </packing>
         </child>
-        <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area9">
+        <child>
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="sslclientcert_cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_sslclientcert_cancel_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="margin_right">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
+                <child>
+                  <object class="GtkCheckButton" id="sslclientcert_save">
+                    <property name="label" translatable="yes">Save Authentication</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">2</property>
+                    <property name="width">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButton" id="sslclientcert_browse">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <signal name="clicked" handler="on_sslclientcert_browse_clicked" swapped="no"/>
+                    <child>
+                      <object class="GtkImage" id="image1">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="icon_name">drive-harddisk</property>
+                      </object>
+                    </child>
+                    <accelerator key="p" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">2</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkEntry" id="sslclientcert_path">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <property name="invisible_char">●</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label3">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Path:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="sslclientcert_realm">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                    <property name="width">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label2">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">Realm:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="sslclientcert_ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Please provide your ssl certification file&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
             <property name="expand">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">0</property>
+            <property name="fill">True</property>
+            <property name="position">1</property>
           </packing>
         </child>
       </object>
@@ -197,7 +217,4 @@
       <action-widget response="-5">sslclientcert_ok</action-widget>
     </action-widgets>
   </object>
-
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/text_change.xml rabbitvcs/rabbitvcs/ui/xml/dialogs/text_change.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/dialogs/text_change.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/dialogs/text_change.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,90 +1,55 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
-
-
-
-
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkDialog" id="TextChange">
     <property name="width_request">350</property>
     <property name="height_request">200</property>
+    <property name="can_focus">False</property>
     <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
     <property name="border_width">5</property>
     <property name="window_position">center-on-parent</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="type_hint">dialog</property>
-    <property name="has_separator">False</property>
+    <child>
+      <placeholder/>
+    </child>
     <child internal-child="vbox">
-      <object class="GtkVBox" id="dialog-vbox12">
+      <object class="GtkBox" id="dialog-vbox12">
         <property name="visible">True</property>
+        <property name="can_focus">False</property>
         <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-        <property name="spacing">12</property>
-        <child>
-          <object class="GtkVBox" id="vbox12">
-            <property name="visible">True</property>
-            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-            <property name="spacing">6</property>
-            <child>
-              <object class="GtkLabel" id="label22">
-                <property name="visible">True</property>
-                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Message&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkAlignment" id="alignment4">
-                <property name="visible">True</property>
-                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkScrolledWindow" id="textchange_scrollwin">
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                    <property name="hscrollbar_policy">automatic</property>
-                    <property name="vscrollbar_policy">automatic</property>
-                    <property name="shadow_type">etched-in</property>
-                    <child>
-                      <object class="GtkTextView" id="textchange_message">
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                        <property name="wrap_mode">word</property>
-                      </object>
-                    </child>
-                  </object>
-                </child>
-              </object>
-              <packing>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="position">1</property>
-          </packing>
-        </child>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="spacing">18</property>
         <child internal-child="action_area">
-          <object class="GtkHButtonBox" id="dialog-action_area12">
+          <object class="GtkButtonBox" id="dialog-action_area12">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
             <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+            <property name="halign">end</property>
+            <property name="hexpand">True</property>
             <property name="layout_style">end</property>
             <child>
               <object class="GtkButton" id="textchange_cancel">
-                <property name="label">gtk-cancel</property>
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">True</property>
                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="use_stock">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -94,7 +59,7 @@
             </child>
             <child>
               <object class="GtkButton" id="textchange_ok">
-                <property name="label">gtk-ok</property>
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="has_focus">True</property>
@@ -102,7 +67,8 @@
                 <property name="has_default">True</property>
                 <property name="receives_default">True</property>
                 <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
-                <property name="use_stock">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -113,10 +79,39 @@
           </object>
           <packing>
             <property name="expand">False</property>
+            <property name="fill">False</property>
             <property name="pack_type">end</property>
             <property name="position">0</property>
           </packing>
         </child>
+        <child>
+          <object class="GtkScrolledWindow" id="textchange_scrollwin">
+            <property name="visible">True</property>
+            <property name="can_focus">True</property>
+            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+            <property name="margin_left">12</property>
+            <property name="margin_right">12</property>
+            <property name="margin_top">6</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="shadow_type">etched-in</property>
+            <child>
+              <object class="GtkTextView" id="textchange_message">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="wrap_mode">word</property>
+              </object>
+            </child>
+          </object>
+          <packing>
+            <property name="expand">True</property>
+            <property name="fill">True</property>
+            <property name="position">1</property>
+          </packing>
+        </child>
       </object>
     </child>
     <action-widgets>
@@ -124,6 +119,4 @@
       <action-widget response="-5">textchange_ok</action-widget>
     </action-widgets>
   </object>
-
-
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/git-update.xml rabbitvcs/rabbitvcs/ui/xml/git-update.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/git-update.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/git-update.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,28 +1,56 @@
 <?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.12 -->
-  <!-- interface-naming-policy project-wide -->
+  <requires lib="gtk+" version="3.20"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvxs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Update">
     <property name="visible">True</property>
-    <property name="title" translatable="yes">Update Local Repository</property>
+    <property name="can_focus">False</property>
     <property name="window_position">center-always</property>
-    <signal name="destroy" handler="on_destroy"/>
-    <signal name="key_press_event" handler="on_key_pressed"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
+    <child type="titlebar">
+      <placeholder/>
+    </child>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="spacing">18</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox3">
+          <object class="GtkButtonBox" id="hbuttonbox1">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="valign">end</property>
+            <property name="hexpand">False</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Options&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -31,191 +59,149 @@
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="repository_container">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <placeholder/>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">3</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox2">
+          <object class="GtkCheckButton" id="all">
+            <property name="label" translatable="yes">Fetch from all remotes</property>
             <property name="visible">True</property>
-            <property name="spacing">5</property>
+            <property name="can_focus">True</property>
+            <property name="receives_default">False</property>
+            <property name="halign">start</property>
+            <property name="valign">start</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="draw_indicator">True</property>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">5</property>
             <child>
-              <object class="GtkCheckButton" id="apply_changes">
-                <property name="label" translatable="yes">Apply remote changes</property>
+              <object class="GtkRadioButton" id="rebase">
+                <property name="label" translatable="yes">Apply remote changes prior to local changes (rebase)</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="relief">none</property>
                 <property name="active">True</property>
                 <property name="draw_indicator">True</property>
-                <signal name="toggled" handler="on_apply_changes_toggled"/>
+                <property name="group">merge</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">2</property>
               </packing>
             </child>
             <child>
-              <object class="GtkVBox" id="vbox5">
+              <object class="GtkRadioButton" id="merge">
+                <property name="label" translatable="yes">Merge into local branch</property>
                 <property name="visible">True</property>
-                <property name="spacing">5</property>
-                <child>
-                  <object class="GtkHBox" id="hbox4">
-                    <property name="visible">True</property>
-                    <child>
-                      <object class="GtkLabel" id="label5">
-                        <property name="width_request">30</property>
-                        <property name="visible">True</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkRadioButton" id="merge">
-                        <property name="label" translatable="yes">merge into local branch</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="relief">none</property>
-                        <property name="active">True</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                  <packing>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkHBox" id="hbox5">
-                    <property name="visible">True</property>
-                    <child>
-                      <object class="GtkLabel" id="label6">
-                        <property name="width_request">30</property>
-                        <property name="visible">True</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkRadioButton" id="rebase">
-                        <property name="label" translatable="yes">apply remote changes prior to local changes (rebase)</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="relief">none</property>
-                        <property name="active">True</property>
-                        <property name="draw_indicator">True</property>
-                        <property name="group">merge</property>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                  <packing>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="relief">none</property>
+                <property name="active">True</property>
+                <property name="draw_indicator">True</property>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHBox" id="hbox3">
-            <property name="visible">True</property>
             <child>
-              <object class="GtkCheckButton" id="all">
-                <property name="label" translatable="yes">Fetch from all remotes</property>
+              <object class="GtkCheckButton" id="apply_changes">
+                <property name="label" translatable="yes">Apply remote changes</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="active">True</property>
                 <property name="draw_indicator">True</property>
+                <signal name="toggled" handler="on_apply_changes_toggled" swapped="no"/>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">3</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal name="clicked" handler="on_cancel_clicked"/>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Options&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkGrid" id="repository_container">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal name="clicked" handler="on_ok_clicked"/>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <child>
+                  <placeholder/>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/ignore.xml rabbitvcs/rabbitvcs/ui/xml/ignore.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/ignore.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/ignore.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,32 +1,54 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.14 -->
-  <!-- interface-naming-policy project-wide -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Ignore">
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Ignore</property>
     <property name="window_position">center-always</property>
     <property name="icon_name">rabbitvcs</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox2">
+          <object class="GtkButtonBox" id="hbuttonbox1">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="hexpand">True</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="yalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Ignore and exclude files from being tracked&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -35,62 +57,70 @@
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="fileeditor_container">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <placeholder/>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
               </object>
               <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_cancel_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Ignore and exclude files from being tracked&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+                <property name="yalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkGrid" id="fileeditor_container">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_ok_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <child>
+                  <placeholder/>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/import.xml rabbitvcs/rabbitvcs/ui/xml/import.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/import.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/import.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,194 +1,233 @@
-<?xml version="1.0"?>
-<!--Generated with glade3 3.4.5 on Thu Jan 29 16:44:40 2009 -->
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Import">
     <property name="width_request">550</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Import</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox16">
-        <property name="orientation">vertical</property>
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="spacing">18</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox1">
-            <property name="orientation">vertical</property>
+          <object class="GtkButtonBox" id="hbuttonbox11">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="hexpand">True</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Repository&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
+                <property name="expand">True</property>
+                <property name="fill">True</property>
+                <property name="position">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment14">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox17">
-                    <property name="orientation">vertical</property>
-                    <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkComboBoxEntry" id="repositories">
-                        <property name="visible">True</property>
-                        <child internal-child="entry">
-                          <object class="GtkEntry" id="repository">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                          </object>
-                        </child>
-                      </object>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
+                <property name="expand">True</property>
+                <property name="fill">True</property>
                 <property name="position">1</property>
               </packing>
             </child>
           </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
+          </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox2">
-            <property name="orientation">vertical</property>
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <child>
-              <object class="GtkLabel" id="label2">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Import Message&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-              </packing>
-            </child>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkAlignment" id="alignment1">
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
                 <child>
-                  <object class="GtkVBox" id="vbox18">
-                    <property name="orientation">vertical</property>
+                  <object class="GtkCheckButton" id="include_ignored">
+                    <property name="label" translatable="yes">Include ignored files</property>
                     <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHButtonBox" id="hbuttonbox12">
-                        <property name="visible">True</property>
-                        <property name="layout_style">GTK_BUTTONBOX_START</property>
-                        <child>
-                          <object class="GtkButton" id="previous_messages">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <property name="label" translatable="yes">Previous Messages</property>
-                            <signal handler="on_previous_messages_clicked" name="clicked"/>
-                          </object>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                      </packing>
-                    </child>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkScrolledWindow" id="scrolledwindow13">
+                    <property name="height_request">150</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="shadow_type">etched-in</property>
                     <child>
-                      <object class="GtkScrolledWindow" id="scrolledwindow13">
-                        <property name="height_request">150</property>
+                      <object class="GtkTextView" id="message">
                         <property name="visible">True</property>
                         <property name="can_focus">True</property>
-                        <property name="hscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
-                        <property name="vscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
-                        <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
-                        <child>
-                          <object class="GtkTextView" id="message">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="wrap_mode">GTK_WRAP_WORD</property>
-                          </object>
-                        </child>
+                        <property name="wrap_mode">word</property>
                       </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
                     </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButtonBox" id="hbuttonbox12">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="layout_style">start</property>
                     <child>
-                      <object class="GtkCheckButton" id="include_ignored">
+                      <object class="GtkButton" id="previous_messages">
+                        <property name="label" translatable="yes">Previous Messages</property>
                         <property name="visible">True</property>
                         <property name="can_focus">True</property>
-                        <property name="label" translatable="yes">Include ignored files</property>
-                        <property name="draw_indicator">True</property>
+                        <property name="receives_default">True</property>
+                        <signal name="clicked" handler="on_previous_messages_clicked" swapped="no"/>
+                        <accelerator key="p" signal="clicked" modifiers="GDK_MOD1_MASK"/>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">2</property>
+                        <property name="expand">True</property>
+                        <property name="fill">True</property>
+                        <property name="position">0</property>
                       </packing>
                     </child>
                   </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label2">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Import Message&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox11">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">GTK_BUTTONBOX_END</property>
+            <property name="can_focus">False</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
+              <object class="GtkComboBoxText" id="repositories">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="label">gtk-cancel</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_cancel_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="has_entry">True</property>
+                <child internal-child="entry">
+                  <object class="GtkEntry" id="repository">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                  </object>
+                </child>
               </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="label">gtk-ok</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_ok_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Repository&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">GTK_PACK_END</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/lock.xml rabbitvcs/rabbitvcs/ui/xml/lock.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/lock.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/lock.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,277 +1,294 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Lock">
     <property name="width_request">600</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Lock Files</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox3">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButtonBox" id="hbuttonbox1">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Please describe why you are locking these files&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">False</property>
+                <property name="halign">end</property>
+                <property name="spacing">6</property>
+                <property name="layout_style">end</property>
+                <child>
+                  <object class="GtkButton" id="cancel">
+                    <property name="label" translatable="yes">_Cancel</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">rabbitvcs-cancel</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="expand">False</property>
+                    <property name="fill">False</property>
+                    <property name="position">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButton" id="ok">
+                    <property name="label" translatable="yes">_OK</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">rabbitvcs-ok</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="expand">False</property>
+                    <property name="fill">False</property>
+                    <property name="position">1</property>
+                  </packing>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment1">
+              <object class="GtkLabel" id="status">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox4">
-                    <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHButtonBox" id="hbuttonbox2">
-                        <property name="visible">True</property>
-                        <property name="layout_style">start</property>
-                        <child>
-                          <object class="GtkButton" id="previous_messages">
-                            <property name="label" translatable="yes">Previous Messages</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <signal handler="on_previous_messages_clicked" name="clicked"/>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkScrolledWindow" id="scrolledwindow2">
-                        <property name="height_request">100</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="hscrollbar_policy">automatic</property>
-                        <property name="vscrollbar_policy">automatic</property>
-                        <property name="shadow_type">etched-in</property>
-                        <child>
-                          <object class="GtkTextView" id="message">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="wrap_mode">word</property>
-                          </object>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">False</property>
+                <property name="halign">start</property>
+                <property name="margin_right">6</property>
+                <property name="hexpand">True</property>
+                <property name="width_chars">0</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox5">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label2">
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Files to lock&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkAlignment" id="alignment2">
-                <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <child>
+                  <object class="GtkCheckButton" id="steal_locks">
+                    <property name="label" translatable="yes">Steal the locks</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
                 <child>
-                  <object class="GtkVBox" id="vbox2">
+                  <object class="GtkCheckButton" id="select_all">
+                    <property name="label" translatable="yes">Select / Deselect all</property>
                     <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="margin_top">6</property>
+                    <property name="hexpand">True</property>
+                    <property name="active">True</property>
+                    <property name="draw_indicator">True</property>
+                    <signal name="toggled" handler="on_select_all_toggled" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkScrolledWindow" id="scrolledwindow1">
+                    <property name="height_request">250</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="shadow_type">etched-in</property>
                     <child>
-                      <object class="GtkScrolledWindow" id="scrolledwindow1">
-                        <property name="height_request">250</property>
+                      <object class="GtkTreeView" id="files_table">
                         <property name="visible">True</property>
                         <property name="can_focus">True</property>
-                        <property name="hscrollbar_policy">automatic</property>
-                        <property name="vscrollbar_policy">automatic</property>
-                        <property name="shadow_type">etched-in</property>
-                        <child>
-                          <object class="GtkTreeView" id="files_table">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                          </object>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkVBox" id="vbox6">
-                        <property name="visible">True</property>
-                        <property name="orientation">vertical</property>
-                        <child>
-                          <object class="GtkCheckButton" id="select_all">
-                            <property name="label" translatable="yes">Select / Deselect all</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="active">True</property>
-                            <property name="draw_indicator">True</property>
-                            <signal handler="on_select_all_toggled" name="toggled"/>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkCheckButton" id="steal_locks">
-                            <property name="label" translatable="yes">Steal the locks</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="draw_indicator">True</property>
-                            <!--<signal handler="on_steal_locks_toggled" name="toggled"/>-->
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
-                          </packing>
+                        <child internal-child="selection">
+                          <object class="GtkTreeSelection"/>
                         </child>
                       </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
                     </child>
                   </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHBox" id="hbox1">
-            <property name="visible">True</property>
             <child>
-              <object class="GtkLabel" id="status">
+              <object class="GtkLabel" id="label2">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Files to lock&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
                 <property name="xalign">0</property>
-                <property name="width_chars">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkHButtonBox" id="hbuttonbox1">
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="spacing">6</property>
-                <property name="layout_style">end</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
                 <child>
-                  <object class="GtkButton" id="cancel">
-                    <property name="label">gtk-cancel</property>
+                  <object class="GtkScrolledWindow" id="scrolledwindow2">
+                    <property name="height_request">100</property>
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_cancel_clicked" name="clicked"/>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="shadow_type">etched-in</property>
+                    <child>
+                      <object class="GtkTextView" id="message">
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="wrap_mode">word</property>
+                      </object>
+                    </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkButton" id="ok">
-                    <property name="label">gtk-ok</property>
+                  <object class="GtkButtonBox" id="hbuttonbox2">
                     <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_ok_clicked" name="clicked"/>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="layout_style">start</property>
+                    <child>
+                      <object class="GtkButton" id="previous_messages">
+                        <property name="label" translatable="yes">Previous Messages</property>
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">True</property>
+                        <signal name="clicked" handler="on_previous_messages_clicked" swapped="no"/>
+                        <accelerator key="p" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">False</property>
+                        <property name="position">0</property>
+                      </packing>
+                    </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="pack_type">end</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label1">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Please describe why you are locking these files&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/log.xml rabbitvcs/rabbitvcs/ui/xml/log.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/log.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/log.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,466 +1,489 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.20"/>
+  <object class="GtkImage" id="go-next">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">go-next</property>
+  </object>
+  <object class="GtkImage" id="go-previous">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">go-previous</property>
+  </object>
+  <object class="GtkTextBuffer" id="search_buffer">
+    <signal name="changed" handler="on_search" swapped="no"/>
+  </object>
+  <object class="GtkImage" id="window-close">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">window-close</property>
+  </object>
   <object class="GtkWindow" id="Log">
     <property name="width_request">775</property>
     <property name="height_request">560</property>
     <property name="visible">True</property>
-    <property name="title" translatable="yes">Log</property>
+    <property name="can_focus">False</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event" />
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
+    <child type="titlebar">
+      <placeholder/>
+    </child>
     <child>
-      <object class="GtkVBox" id="vbox11">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <placeholder/>
-        </child>
-        <child>
-          <object class="GtkVPaned" id="vpaned1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="can_focus">True</property>
-            <property name="orientation">vertical</property>
+            <property name="can_focus">False</property>
             <child>
-              <object class="GtkVBox" id="vbox2">
+              <object class="GtkButton" id="close">
+                <property name="label" translatable="yes">_Close</property>
                 <property name="visible">True</property>
-                <property name="orientation">vertical</property>
-                <property name="spacing">6</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="halign">end</property>
+                <property name="hexpand">True</property>
+                <property name="image">window-close</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_close_clicked" swapped="no"/>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkGrid">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <child>
-                  <object class="GtkHBox" id="hbox5">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
-                    <property name="spacing">12</property>
+                    <property name="can_focus">False</property>
                     <child>
-                      <object class="GtkLabel" id="label2">
+                      <object class="GtkButton" id="refresh">
                         <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;Revisions Table&lt;/b&gt;</property>
-                        <property name="use_markup">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">True</property>
+                        <property name="tooltip_text" translatable="yes">Refresh</property>
+                        <signal name="clicked" handler="on_refresh_clicked" swapped="no"/>
+                        <child>
+                          <object class="GtkImage" id="image1">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="icon_name">view-refresh</property>
+                          </object>
+                        </child>
+                        <accelerator key="r" signal="clicked" modifiers="GDK_MOD1_MASK"/>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
+                        <property name="left_attach">2</property>
+                        <property name="top_attach">0</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkEntry" id="limit">
+                        <property name="width_request">75</property>
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="text" translatable="yes">100</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">1</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkHBox" id="hbox-search">
+                      <object class="GtkLabel" id="label5">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="border_width">1</property>
-                        <property name="spacing">3</property>
-                        <child>
-                          <object class="GtkTextView" id="revisions_search">
-                            <property name="visible">True</property>
-                            <property name="border_width">1</property>
-                            <property name="pixels_above_lines">3</property>
-                            <property name="left_margin">4</property>
-                            <property name="right_margin">3</property>
-                            <property name="indent">4</property>
-                            <property name="buffer">search_buffer</property>
-                          </object>
-
-
-                          <packing>
-                            <property name="expand">True</property>
-                            <property name="fill">True</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
+                        <property name="label" translatable="yes">Limit:</property>
                       </object>
                       <packing>
-                        <property name="expand">True</property>
-                        <property name="fill">True</property>
-                        <property name="position">1</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButtonBox" id="hbuttonbox1">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="spacing">6</property>
+                    <property name="layout_style">start</property>
                     <child>
-                      <object class="GtkCheckButton" id="stop_on_copy">
-                        <property name="label" translatable="yes">Stop on copy</property>
+                      <object class="GtkButton" id="previous">
+                        <property name="label" translatable="yes">_Back</property>
                         <property name="visible">True</property>
+                        <property name="sensitive">False</property>
                         <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="use_action_appearance">False</property>
-                        <property name="draw_indicator">True</property>
-                        <signal name="toggled" handler="on_stop_on_copy_toggled" swapped="no"/>
+                        <property name="receives_default">True</property>
+                        <property name="image">go-previous</property>
+                        <property name="use_underline">True</property>
+                        <signal name="clicked" handler="on_previous_clicked" swapped="no"/>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">False</property>
+                        <property name="position">0</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkButton" id="next">
+                        <property name="label" translatable="yes">_Forward</property>
+                        <property name="visible">True</property>
+                        <property name="sensitive">False</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">True</property>
+                        <property name="image">go-next</property>
+                        <property name="use_underline">True</property>
+                        <signal name="clicked" handler="on_next_clicked" swapped="no"/>
                       </object>
                       <packing>
                         <property name="expand">False</property>
                         <property name="fill">False</property>
-                        <property name="pack_type">end</property>
                         <property name="position">1</property>
                       </packing>
                     </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkPaned" id="vpaned1">
+            <property name="visible">True</property>
+            <property name="can_focus">True</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="position">274</property>
+            <property name="position_set">True</property>
+            <child>
+              <object class="GtkGrid">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <child>
+                  <object class="GtkGrid">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkHBox" id="hbox6">
+                      <object class="GtkScrolledWindow" id="scrolledwindow7">
                         <property name="visible">True</property>
-                        <property name="spacing">3</property>
+                        <property name="can_focus">True</property>
+                        <property name="hexpand">True</property>
+                        <property name="vexpand">True</property>
+                        <property name="shadow_type">etched-in</property>
                         <child>
-                          <object class="GtkLabel" id="label6">
+                          <object class="GtkTreeView" id="revisions_table">
                             <property name="visible">True</property>
-                            <property name="label" translatable="yes">Showing Revisions:</property>
+                            <property name="can_focus">True</property>
+                            <property name="rubber_banding">True</property>
+                            <child internal-child="selection">
+                              <object class="GtkTreeSelection"/>
+                            </child>
                           </object>
-                          <packing>
-                            <property name="position">0</property>
-                          </packing>
                         </child>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
+                      </packing>
+                    </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkGrid">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="column_spacing">12</property>
+                    <child>
+                      <object class="GtkGrid">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="column_spacing">3</property>
                         <child>
-                          <object class="GtkLabel" id="start">
+                          <object class="GtkLabel" id="end">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="label" translatable="yes">N/A</property>
                           </object>
                           <packing>
-                            <property name="position">1</property>
+                            <property name="left_attach">3</property>
+                            <property name="top_attach">0</property>
                           </packing>
                         </child>
                         <child>
                           <object class="GtkLabel" id="label9">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="label" translatable="yes">to</property>
                           </object>
                           <packing>
-                            <property name="position">2</property>
+                            <property name="left_attach">2</property>
+                            <property name="top_attach">0</property>
                           </packing>
                         </child>
                         <child>
-                          <object class="GtkLabel" id="end">
+                          <object class="GtkLabel" id="start">
                             <property name="visible">True</property>
+                            <property name="can_focus">False</property>
                             <property name="label" translatable="yes">N/A</property>
                           </object>
                           <packing>
-                            <property name="position">3</property>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">0</property>
                           </packing>
                         </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="pack_type">end</property>
-                        <property name="position">2</property>
-                      </packing>
-                    </child>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkAlignment" id="alignment1">
-                    <property name="visible">True</property>
-                    <child>
-                      <object class="GtkVBox" id="vbox4">
-                        <property name="visible">True</property>
-                        <property name="orientation">vertical</property>
-                        <property name="spacing">6</property>
                         <child>
-                          <object class="GtkScrolledWindow" id="scrolledwindow7">
-                            <property name="height_request">180</property>
+                          <object class="GtkLabel" id="label6">
                             <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="hscrollbar_policy">automatic</property>
-                            <property name="vscrollbar_policy">automatic</property>
-                            <property name="shadow_type">etched-in</property>
-                            <child>
-                              <object class="GtkTreeView" id="revisions_table">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="rubber_banding">True</property>
-                              </object>
-                            </child>
+                            <property name="can_focus">False</property>
+                            <property name="label" translatable="yes">Showing Revisions:</property>
                           </object>
                           <packing>
-                            <property name="position">0</property>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
                           </packing>
                         </child>
                       </object>
+                      <packing>
+                        <property name="left_attach">3</property>
+                        <property name="top_attach">0</property>
+                      </packing>
                     </child>
-                  </object>
-                  <packing>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
-              </object>
-              <packing>
-                <property name="resize">False</property>
-                <property name="shrink">True</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkHPaned" id="hpaned1">
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="border_width">6</property>
-                <child>
-                  <object class="GtkVBox" id="vbox3">
-                    <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
                     <child>
-                      <object class="GtkLabel" id="label3">
+                      <object class="GtkCheckButton" id="stop_on_copy">
+                        <property name="label" translatable="yes">Stop on copy</property>
                         <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;Affected File(s)&lt;/b&gt; (double-click to compare with base)</property>
-                        <property name="use_markup">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">False</property>
+                        <property name="draw_indicator">True</property>
+                        <signal name="toggled" handler="on_stop_on_copy_toggled" swapped="no"/>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
+                        <property name="left_attach">2</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkAlignment" id="alignment2">
+                      <object class="GtkGrid" id="hbox-search">
                         <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
+                        <property name="column_spacing">3</property>
                         <child>
-                          <object class="GtkScrolledWindow" id="scrolledwindow8">
-                            <property name="height_request">80</property>
+                          <object class="GtkTextView" id="revisions_search">
                             <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="hscrollbar_policy">automatic</property>
-                            <property name="vscrollbar_policy">automatic</property>
-                            <property name="shadow_type">etched-in</property>
-                            <child>
-                              <object class="GtkTreeView" id="paths_table">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                              </object>
-                            </child>
+                            <property name="can_focus">False</property>
+                            <property name="hexpand">True</property>
+                            <property name="border_width">1</property>
+                            <property name="pixels_above_lines">3</property>
+                            <property name="left_margin">4</property>
+                            <property name="right_margin">3</property>
+                            <property name="indent">4</property>
+                            <property name="buffer">search_buffer</property>
                           </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
+                          </packing>
                         </child>
                       </object>
                       <packing>
-                        <property name="position">1</property>
+                        <property name="left_attach">1</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
-                  </object>
-                  <packing>
-                    <property name="resize">False</property>
-                    <property name="shrink">True</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkVBox" id="vbox1">
-                    <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
                     <child>
-                      <object class="GtkLabel" id="label1">
+                      <object class="GtkLabel" id="label2">
                         <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;Message&lt;/b&gt;</property>
+                        <property name="can_focus">False</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Revisions Table&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkAlignment" id="alignment9">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkScrolledWindow" id="scrolledwindow9">
-                            <property name="height_request">80</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="hscrollbar_policy">automatic</property>
-                            <property name="vscrollbar_policy">automatic</property>
-                            <property name="shadow_type">etched-in</property>
-                            <child>
-                              <object class="GtkTextView" id="message">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="editable">False</property>
-                                <property name="wrap_mode">word</property>
-                              </object>
-                            </child>
-                          </object>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="resize">True</property>
-                    <property name="shrink">True</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
               </object>
               <packing>
-                <property name="resize">False</property>
+                <property name="resize">True</property>
                 <property name="shrink">True</property>
               </packing>
             </child>
-          </object>
-          <packing>
-            <property name="position">2</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHBox" id="hbox3">
-            <property name="visible">True</property>
-            <property name="spacing">12</property>
             <child>
-              <object class="GtkHBox" id="hbox8">
+              <object class="GtkPaned" id="hpaned1">
                 <property name="visible">True</property>
-                <property name="spacing">6</property>
+                <property name="can_focus">True</property>
+                <property name="margin_top">6</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="position">390</property>
+                <property name="position_set">True</property>
                 <child>
-                  <object class="GtkHButtonBox" id="hbuttonbox1">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <property name="layout_style">start</property>
+                    <property name="can_focus">False</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkButton" id="previous">
-                        <property name="label">gtk-go-back</property>
+                      <object class="GtkScrolledWindow" id="scrolledwindow8">
+                        <property name="height_request">80</property>
                         <property name="visible">True</property>
-                        <property name="sensitive">False</property>
                         <property name="can_focus">True</property>
-                        <property name="receives_default">True</property>
-                        <property name="use_stock">True</property>
-                        <signal handler="on_previous_clicked" name="clicked"/>
+                        <property name="hexpand">True</property>
+                        <property name="vexpand">True</property>
+                        <property name="shadow_type">etched-in</property>
+                        <child>
+                          <object class="GtkTreeView" id="paths_table">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="hexpand">True</property>
+                            <property name="vexpand">True</property>
+                            <child internal-child="selection">
+                              <object class="GtkTreeSelection"/>
+                            </child>
+                          </object>
+                        </child>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkButton" id="next">
-                        <property name="label">gtk-go-forward</property>
+                      <object class="GtkLabel" id="label3">
                         <property name="visible">True</property>
-                        <property name="sensitive">False</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">True</property>
-                        <property name="use_stock">True</property>
-                        <signal handler="on_next_clicked" name="clicked"/>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Affected File(s)&lt;/b&gt; (double-click to compare with base)</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
+                    <property name="resize">True</property>
+                    <property name="shrink">True</property>
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkHBox" id="hbox2">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkLabel" id="label5">
-                        <property name="visible">True</property>
-                        <property name="label" translatable="yes">Limit:</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
+                    <property name="can_focus">False</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkEntry" id="limit">
-                        <property name="width_request">75</property>
+                      <object class="GtkScrolledWindow" id="scrolledwindow9">
+                        <property name="height_request">80</property>
                         <property name="visible">True</property>
                         <property name="can_focus">True</property>
-                        <property name="text" translatable="yes">100</property>
+                        <property name="hexpand">True</property>
+                        <property name="vexpand">True</property>
+                        <property name="shadow_type">etched-in</property>
+                        <child>
+                          <object class="GtkTextView" id="message">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="hexpand">True</property>
+                            <property name="vexpand">True</property>
+                            <property name="editable">False</property>
+                            <property name="wrap_mode">word</property>
+                          </object>
+                        </child>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkButton" id="refresh">
+                      <object class="GtkLabel" id="label1">
                         <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">True</property>
-                        <property name="tooltip-text" translatable="yes">Refresh</property>
-                        <signal handler="on_refresh_clicked" name="clicked"/>
-                        <child>
-                          <object class="GtkImage" id="image1">
-                            <property name="visible">True</property>
-                            <property name="stock">gtk-refresh</property>
-                          </object>
-                        </child>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Message&lt;/b&gt;</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">2</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkHButtonBox" id="hbuttonbox7">
-                <property name="visible">True</property>
-                <property name="spacing">6</property>
-                <property name="layout_style">end</property>
-                <child>
-                  <object class="GtkButton" id="ok">
-                    <property name="label">gtk-close</property>
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_close_clicked" name="clicked"/>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
+                    <property name="resize">True</property>
+                    <property name="shrink">True</property>
                   </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="pack_type">end</property>
-                <property name="position">1</property>
+                <property name="resize">True</property>
+                <property name="shrink">True</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
-
-
     </child>
   </object>
-  <object class="GtkTextBuffer" id="search_buffer">
-    <signal name="changed" handler="on_search" swapped="no"/>
-  </object>  
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/manager.xml rabbitvcs/rabbitvcs/ui/xml/manager.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/manager.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/manager.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,206 +1,251 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.12 -->
-  <!-- interface-naming-policy project-wide -->
+  <requires lib="gtk+" version="3.20"/>
+  <object class="GtkImage" id="window-close">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">window-close</property>
+  </object>
   <object class="GtkWindow" id="Manager">
     <property name="width_request">450</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="window_position">center-always</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
+    <child type="titlebar">
+      <placeholder/>
+    </child>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
+        <child>
+          <object class="GtkButtonBox" id="hbuttonbox1">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="halign">end</property>
+            <property name="hexpand">True</property>
+            <property name="spacing">6</property>
+            <property name="layout_style">end</property>
+            <child>
+              <object class="GtkButton" id="close">
+                <property name="label" translatable="yes">_Close</property>
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">window-close</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_close_clicked" swapped="no"/>
+              </object>
+              <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
+                <property name="position">0</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
         <child>
-          <object class="GtkHBox" id="hbox1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="column_spacing">6</property>
+            <property name="column_homogeneous">True</property>
             <child>
-              <object class="GtkVBox" id="vbox2">
+              <object class="GtkGrid" id="right_side">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
                 <property name="orientation">vertical</property>
-                <property name="spacing">6</property>
+                <property name="row_spacing">6</property>
                 <child>
-                  <object class="GtkLabel" id="items_label">
+                  <object class="GtkGrid" id="detail_container">
                     <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="use_markup">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="orientation">vertical</property>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkAlignment" id="alignment1">
+                  <object class="GtkLabel" id="detail_label">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
                     <property name="xalign">0</property>
-                    <property name="left_padding">12</property>
-                    <child>
-                      <object class="GtkHBox" id="hbox2">
-                        <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkScrolledWindow" id="scrolledwindow1">
-                            <property name="width_request">200</property>
-                            <property name="height_request">150</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="hscrollbar_policy">automatic</property>
-                            <property name="vscrollbar_policy">automatic</property>
-                            <property name="shadow_type">etched-in</property>
-                            <child>
-                              <object class="GtkTreeView" id="items_treeview">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkVBox" id="vbox4">
-                            <property name="visible">True</property>
-                            <property name="orientation">vertical</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <object class="GtkButton" id="add">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">True</property>
-                                <signal handler="on_add_clicked" name="clicked"/>
-                                <child>
-                                  <object class="GtkImage" id="image3">
-                                    <property name="visible">True</property>
-                                    <property name="stock">gtk-add</property>
-                                  </object>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkButton" id="delete">
-                                <property name="visible">True</property>
-                                <property name="sensitive">False</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">True</property>
-                                <signal handler="on_delete_clicked" name="clicked"/>
-                                <child>
-                                  <object class="GtkImage" id="image4">
-                                    <property name="visible">True</property>
-                                    <property name="stock">gtk-delete</property>
-                                  </object>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                    </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
               </object>
               <packing>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="right_side">
-                <property name="left_padding">25</property>
+              <object class="GtkGrid">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
                 <child>
-                  <object class="GtkVBox" id="vbox3">
+                  <object class="GtkScrolledWindow" id="scrolledwindow1">
+                    <property name="width_request">200</property>
+                    <property name="height_request">150</property>
                     <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
+                    <property name="can_focus">True</property>
+                    <property name="margin_left">12</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="shadow_type">etched-in</property>
+                    <child>
+                      <object class="GtkTreeView" id="items_treeview">
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <child internal-child="selection">
+                          <object class="GtkTreeSelection"/>
+                        </child>
+                      </object>
+                    </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                    <property name="height">3</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButton" id="delete">
+                    <property name="visible">True</property>
+                    <property name="sensitive">False</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="valign">start</property>
+                    <signal name="clicked" handler="on_delete_clicked" swapped="no"/>
                     <child>
-                      <object class="GtkLabel" id="detail_label">
+                      <object class="GtkImage" id="image4">
                         <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">label</property>
+                        <property name="can_focus">False</property>
+                        <property name="icon_name">edit-delete</property>
                       </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
                     </child>
+                    <accelerator key="d" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButton" id="add">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="valign">start</property>
+                    <signal name="clicked" handler="on_add_clicked" swapped="no"/>
                     <child>
-                      <object class="GtkAlignment" id="detail_container">
+                      <object class="GtkImage" id="image3">
                         <property name="visible">True</property>
-                        <child>
-                          <placeholder/>
-                        </child>
+                        <property name="can_focus">False</property>
+                        <property name="icon_name">list-add</property>
                       </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
                     </child>
+                    <accelerator key="a" signal="clicked" modifiers="GDK_MOD1_MASK"/>
                   </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="items_label">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="use_markup">True</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                    <property name="width">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="vexpand">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">3</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
-            <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
-            <child>
-              <object class="GtkButton" id="close">
-                <property name="label">gtk-close</property>
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_close_clicked" name="clicked"/>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/merge.xml rabbitvcs/rabbitvcs/ui/xml/merge.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/merge.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/merge.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,1009 +1,1070 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.10 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
   <object class="GtkAssistant" id="Merge">
     <property name="width_request">600</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="border_width">12</property>
     <property name="title" translatable="yes">Merge Assistant</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="gravity">center</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_apply_clicked" name="apply"/>
-    <signal handler="on_cancel_clicked" name="cancel"/>
-    <signal handler="on_close_clicked" name="close"/>
-    <signal handler="on_prepare" name="prepare"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="apply" handler="on_apply_clicked" swapped="no"/>
+    <signal name="cancel" handler="on_cancel_clicked" swapped="no"/>
+    <signal name="close" handler="on_close_clicked" swapped="no"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
+    <signal name="prepare" handler="on_prepare" swapped="no"/>
     <child>
       <placeholder/>
     </child>
     <child>
-      <placeholder/>
-    </child>
-    <child>
-      <placeholder/>
-    </child>
-    <child>
-      <object class="GtkVBox" id="page1">
+      <object class="GtkGrid" id="page1">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox3">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="orientation">vertical</property>
             <child>
-              <object class="GtkRadioButton" id="mergetype_range_opt">
-                <property name="label" translatable="yes">Merge a range of revisions</property>
+              <object class="GtkLabel" id="label2">
+                <property name="width_request">475</property>
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">False</property>
-                <property name="active">True</property>
-                <property name="draw_indicator">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">30</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">Choose this method if you wish to reintegrate a branch into the trunk.</property>
+                <property name="wrap">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="label47">
-                <property name="width_request">475</property>
+              <object class="GtkRadioButton" id="mergetype_reintegrate_opt">
+                <property name="label" translatable="yes">Reintegrate a branch</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="xpad">30</property>
-                <property name="label" translatable="yes">Choose this method if you have made some changes to a branch and wish to merge your changes with another branch.</property>
-                <property name="wrap">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="draw_indicator">True</property>
+                <property name="group">mergetype_range_opt</property>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox5">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="orientation">vertical</property>
             <child>
+              <object class="GtkLabel" id="label51">
+                <property name="width_request">475</property>
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">30</property>
+                <property name="label" translatable="yes">Choose this method if you wish to merge two different branches into your working copy.</property>
+                <property name="wrap">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
               <object class="GtkRadioButton" id="mergetype_tree_opt">
                 <property name="label" translatable="yes">Merge two different trees</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
                 <property name="active">True</property>
                 <property name="draw_indicator">True</property>
                 <property name="group">mergetype_range_opt</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkLabel" id="label51">
-                <property name="width_request">475</property>
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="xpad">30</property>
-                <property name="label" translatable="yes">Choose this method if you wish to merge two different branches into your working copy.</property>
-                <property name="wrap">True</property>
-              </object>
-              <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox6">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="orientation">vertical</property>
             <child>
-              <object class="GtkRadioButton" id="mergetype_reintegrate_opt">
-                <property name="label" translatable="yes">Reintegrate a branch</property>
+              <object class="GtkLabel" id="label47">
+                <property name="width_request">475</property>
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">False</property>
-                <property name="draw_indicator">True</property>
-                <property name="group">mergetype_range_opt</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">30</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">Choose this method if you have made some changes to a branch and wish to merge your changes with another branch.</property>
+                <property name="wrap">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="label2">
-                <property name="width_request">475</property>
+              <object class="GtkRadioButton" id="mergetype_range_opt">
+                <property name="label" translatable="yes">Merge a range of revisions</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="xpad">30</property>
-                <property name="label" translatable="yes">Choose this method if you wish to reintegrate a branch into the trunk.</property>
-                <property name="wrap">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="active">True</property>
+                <property name="draw_indicator">True</property>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
       <packing>
         <property name="page_type">intro</property>
-        <property name="title">Step 1: Merge Type</property>
+        <property name="title" translatable="yes">Step 1: Merge Type</property>
+        <property name="has_padding">False</property>
       </packing>
     </child>
     <child>
-      <object class="GtkVBox" id="page2a">
+      <object class="GtkGrid" id="page2a">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox8">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label3">
+              <object class="GtkLabel" id="mergerange_working_copy">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
                 <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;URL to merge from&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment2">
+              <object class="GtkLabel" id="label5">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkComboBoxEntry" id="mergerange_from_urls">
-                    <property name="visible">True</property>
-                    <signal handler="on_mergerange_from_urls_changed" name="changed"/>
-                  </object>
-                </child>
+                <property name="can_focus">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Working Copy&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox9">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
-            <child>
-              <object class="GtkLabel" id="label4">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Revision Range&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkAlignment" id="alignment5">
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
                 <child>
-                  <object class="GtkVBox" id="vbox34">
+                  <object class="GtkLabel" id="label56">
+                    <property name="width_request">500</property>
                     <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHBox" id="hbox18">
-                        <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkEntry" id="mergerange_revisions">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <signal handler="on_mergerange_revisions_changed" name="changed"/>
-                          </object>
-                          <packing>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkButton" id="mergerange_show_log1">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <property name="tooltip-text" translatable="yes">Show log</property>
-                            <signal handler="on_mergerange_show_log1_clicked" name="clicked"/>
-                            <child>
-                              <object class="GtkImage" id="image1">
-                                <property name="visible">True</property>
-                                <property name="pixel_size">24</property>
-                                <property name="icon_name">rabbitvcs-show_log</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkLabel" id="label56">
-                        <property name="width_request">500</property>
-                        <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="xpad">30</property>
-                        <property name="label" translatable="yes">Use the log dialog to select the revisions that you wish to merge.  Or write out the revisions manually, each separated by a comma.  You can specify a revision range by a dash. 
+                    <property name="can_focus">False</property>
+                    <property name="margin_left">8</property>
+                    <property name="hexpand">True</property>
+                    <property name="label" translatable="yes">Use the log dialog to select the revisions that you wish to merge.  Or write out the revisions manually, each separated by a comma.  You can specify a revision range by a dash. 
 
 Example: 4-7,9,11,15-HEAD
 
 To merge all revisions, leave the box empty.</property>
-                        <property name="wrap">True</property>
+                    <property name="wrap">True</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                    <property name="width">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButton" id="mergerange_show_log1">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="tooltip_text" translatable="yes">Show log</property>
+                    <signal name="clicked" handler="on_mergerange_show_log1_clicked" swapped="no"/>
+                    <child>
+                      <object class="GtkImage" id="image1">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="pixel_size">24</property>
+                        <property name="icon_name">rabbitvcs-show_log</property>
                       </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
                     </child>
+                    <accelerator key="r" signal="clicked" modifiers="GDK_MOD1_MASK"/>
                   </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkEntry" id="mergerange_revisions">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <signal name="changed" handler="on_mergerange_revisions_changed" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label4">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Revision Range&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox10">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label5">
+              <object class="GtkComboBoxText" id="mergerange_from_urls">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Working Copy&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="has_entry">True</property>
+                <signal name="changed" handler="on_mergerange_from_urls_changed" swapped="no"/>
+                <child internal-child="entry">
+                  <object class="GtkEntry">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                  </object>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment6">
+              <object class="GtkLabel" id="label3">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkHBox" id="hbox19">
-                    <property name="visible">True</property>
-                    <property name="spacing">12</property>
-                    <child>
-                      <object class="GtkLabel" id="mergerange_working_copy">
-                        <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;URL to merge from&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
       <packing>
-        <property name="title">Step 2: Merge a Range of Revisions</property>
+        <property name="title" translatable="yes">Step 2: Merge a Range of Revisions</property>
+        <property name="has_padding">False</property>
       </packing>
     </child>
     <child>
-      <object class="GtkVBox" id="page2b">
+      <object class="GtkGrid" id="page2b">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox11">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
-            <child>
-              <object class="GtkLabel" id="label6">
-                <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="row_spacing">6</property>
+            <child>
+              <object class="GtkLabel" id="mergetree_working_copy">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
                 <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;From URL&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment1">
+              <object class="GtkLabel" id="label10">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Working Copy&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="row_spacing">6</property>
+            <child>
+              <object class="GtkGrid">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
                 <child>
-                  <object class="GtkVBox" id="vbox7">
+                  <object class="GtkRadioButton" id="mergetree_to_revision_number_opt">
+                    <property name="label" translatable="yes">Revision</property>
                     <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="draw_indicator">True</property>
+                    <property name="group">mergetree_to_revision_head_opt</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkEntry" id="mergetree_to_revision_number">
+                    <property name="width_request">75</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <signal name="focus-in-event" handler="on_mergetree_to_revision_number_focused" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButton" id="mergetree_to_show_log">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="tooltip_text" translatable="yes">Show log</property>
+                    <signal name="clicked" handler="on_mergetree_to_show_log_clicked" swapped="no"/>
                     <child>
-                      <object class="GtkHBox" id="hbox1">
+                      <object class="GtkImage" id="image4">
                         <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkAlignment" id="alignment7">
-                            <property name="visible">True</property>
-                            <child>
-                              <object class="GtkComboBoxEntry" id="merge_reintegrate_repos">
-                                <property name="visible">True</property>
-                                <signal handler="on_merge_reintegrate_from_urls_changed" name="changed"/>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkButton" id="merge_reintegrate_browse">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <property name="has_tooltip">True</property>
-                            <property name="tooltip-text" translatable="yes">Show log</property>
-                            <signal handler="on_merge_reintegrate_browse_clicked" name="clicked"/>
-                            <child>
-                              <object class="GtkImage" id="image2">
-                                <property name="visible">True</property>
-                                <property name="stock">gtk-harddisk</property>
-                                <property name="pixel_size">24</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="pack_type">end</property>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
+                        <property name="can_focus">False</property>
+                        <property name="pixel_size">24</property>
+                        <property name="icon_name">rabbitvcs-show_log</property>
                       </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
                     </child>
-                    <child>
-                      <object class="GtkAlignment" id="revision_container">
+                    <accelerator key="t" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">2</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkRadioButton" id="mergetree_to_revision_head_opt">
+                    <property name="label" translatable="yes">HEAD</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="active">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                    <property name="width">3</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkComboBoxText" id="mergetree_to_urls">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="has_entry">True</property>
+                    <signal name="changed" handler="on_mergetree_to_urls_changed" swapped="no"/>
+                    <child internal-child="entry">
+                      <object class="GtkEntry">
                         <property name="visible">True</property>
-                        <child>
-                          <placeholder/>
-                        </child>
+                        <property name="can_focus">True</property>
                       </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
                     </child>
                   </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                    <property name="width">3</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkVBox" id="vbox12">
-            <property name="visible">True</property>
-            <property name="orientation">vertical</property>
             <child>
-              <object class="GtkLabel" id="label7">
+              <object class="GtkLabel" id="label9">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Working Copy&lt;/b&gt;</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;To: (URL and revision to merge)&lt;/b&gt;</property>
                 <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
-            <child>
-              <object class="GtkAlignment" id="alignment8">
-                <property name="visible">True</property>
-                <property name="left_padding">12</property>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="row_spacing">6</property>
+            <child>
+              <object class="GtkGrid">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
                 <child>
-                  <object class="GtkHBox" id="hbox20">
+                  <object class="GtkButton" id="mergetree_from_show_log">
                     <property name="visible">True</property>
-                    <property name="spacing">12</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="tooltip_text" translatable="yes">Show log</property>
+                    <signal name="clicked" handler="on_mergetree_from_show_log_clicked" swapped="no"/>
                     <child>
-                      <object class="GtkLabel" id="merge_reintegrate_working_copy">
+                      <object class="GtkImage" id="image3">
                         <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                        <property name="wrap">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="pixel_size">24</property>
+                        <property name="icon_name">rabbitvcs-show_log</property>
+                      </object>
+                    </child>
+                    <accelerator key="f" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">2</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkEntry" id="mergetree_from_revision_number">
+                    <property name="width_request">75</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <signal name="focus-in-event" handler="on_mergetree_from_revision_number_focused" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkRadioButton" id="mergetree_from_revision_number_opt">
+                    <property name="label" translatable="yes">Revision</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="draw_indicator">True</property>
+                    <property name="group">mergetree_from_revision_head_opt</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkRadioButton" id="mergetree_from_revision_head_opt">
+                    <property name="label" translatable="yes">HEAD</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="active">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                    <property name="width">3</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkComboBoxText" id="mergetree_from_urls">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="has_entry">True</property>
+                    <signal name="changed" handler="on_mergetree_from_urls_changed" swapped="no"/>
+                    <child internal-child="entry">
+                      <object class="GtkEntry">
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
                       </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
                     </child>
                   </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                    <property name="width">3</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label8">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;From: (URL and revision to merge)&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
       <packing>
-        <property name="title">Step 2: Reintegrate a Branch</property>
+        <property name="title" translatable="yes">Step 2: Merge two different trees</property>
+        <property name="has_padding">False</property>
       </packing>
     </child>
     <child>
-      <object class="GtkVBox" id="page2c">
+      <object class="GtkGrid" id="page2c">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox13">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label8">
+              <object class="GtkLabel" id="merge_reintegrate_working_copy">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="wrap">True</property>
                 <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;From: (URL and revision to merge)&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment9">
+              <object class="GtkLabel" id="label7">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox38">
-                    <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkComboBoxEntry" id="mergetree_from_urls">
-                        <property name="visible">True</property>
-                        <signal handler="on_mergetree_from_urls_changed" name="changed"/>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkVBox" id="vbox2">
-                        <property name="visible">True</property>
-                        <property name="orientation">vertical</property>
-                        <child>
-                          <object class="GtkRadioButton" id="mergetree_from_revision_head_opt">
-                            <property name="label" translatable="yes">HEAD</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="active">True</property>
-                            <property name="draw_indicator">True</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkHBox" id="hbox22">
-                            <property name="visible">True</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <object class="GtkRadioButton" id="mergetree_from_revision_number_opt">
-                                <property name="label" translatable="yes">Revision</property>
-                                <property name="width_request">140</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="draw_indicator">True</property>
-                                <property name="group">mergetree_from_revision_head_opt</property>
-                              </object>
-                              <packing>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkEntry" id="mergetree_from_revision_number">
-                                <property name="width_request">75</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <signal handler="on_mergetree_from_revision_number_focused" name="focus_in_event"/>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkButton" id="mergetree_from_show_log">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">True</property>
-                                <property name="tooltip-text" translatable="yes">Show log</property>
-                                <signal handler="on_mergetree_from_show_log_clicked" name="clicked"/>
-                                <child>
-                                  <object class="GtkImage" id="image3">
-                                    <property name="visible">True</property>
-                                    <property name="pixel_size">24</property>
-                                    <property name="icon_name">rabbitvcs-show_log</property>
-                                  </object>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">2</property>
-                              </packing>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Working Copy&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox14">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label9">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;To: (URL and revision to merge)&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkAlignment" id="alignment10">
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
                 <child>
-                  <object class="GtkVBox" id="vbox39">
+                  <object class="GtkButton" id="merge_reintegrate_browse">
                     <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="has_tooltip">True</property>
+                    <property name="tooltip_text" translatable="yes">Show log</property>
+                    <signal name="clicked" handler="on_merge_reintegrate_browse_clicked" swapped="no"/>
                     <child>
-                      <object class="GtkComboBoxEntry" id="mergetree_to_urls">
+                      <object class="GtkImage" id="image2">
                         <property name="visible">True</property>
-                        <signal handler="on_mergetree_to_urls_changed" name="changed"/>
+                        <property name="can_focus">False</property>
+                        <property name="pixel_size">24</property>
+                        <property name="icon_name">drive-harddisk</property>
                       </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
                     </child>
-                    <child>
-                      <object class="GtkVBox" id="vbox4">
+                    <accelerator key="u" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkComboBoxText" id="merge_reintegrate_repos">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="has_entry">True</property>
+                    <signal name="changed" handler="on_merge_reintegrate_from_urls_changed" swapped="no"/>
+                    <child internal-child="entry">
+                      <object class="GtkEntry">
                         <property name="visible">True</property>
-                        <property name="orientation">vertical</property>
-                        <child>
-                          <object class="GtkRadioButton" id="mergetree_to_revision_head_opt">
-                            <property name="label" translatable="yes">HEAD</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="active">True</property>
-                            <property name="draw_indicator">True</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkHBox" id="hbox23">
-                            <property name="visible">True</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <object class="GtkRadioButton" id="mergetree_to_revision_number_opt">
-                                <property name="label" translatable="yes">Revision</property>
-                                <property name="width_request">140</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="draw_indicator">True</property>
-                                <property name="group">mergetree_to_revision_head_opt</property>
-                              </object>
-                              <packing>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkEntry" id="mergetree_to_revision_number">
-                                <property name="width_request">75</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <signal handler="on_mergetree_to_revision_number_focused" name="focus_in_event"/>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkButton" id="mergetree_to_show_log">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">True</property>
-                                <property name="tooltip-text" translatable="yes">Show log</property>
-                                <signal handler="on_mergetree_to_show_log_clicked" name="clicked"/>
-                                <child>
-                                  <object class="GtkImage" id="image4">
-                                    <property name="visible">True</property>
-                                    <property name="pixel_size">24</property>
-                                    <property name="icon_name">rabbitvcs-show_log</property>
-                                  </object>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">2</property>
-                              </packing>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
+                        <property name="can_focus">True</property>
                       </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
                     </child>
                   </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkGrid" id="revision_container">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="orientation">vertical</property>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                    <child>
+                      <placeholder/>
+                    </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                    <property name="width">2</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkVBox" id="vbox15">
-            <property name="visible">True</property>
-            <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label10">
+              <object class="GtkLabel" id="label6">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Working Copy&lt;/b&gt;</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;From URL&lt;/b&gt;</property>
                 <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkAlignment" id="alignment11">
-                <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkHBox" id="hbox21">
-                    <property name="visible">True</property>
-                    <property name="spacing">12</property>
-                    <child>
-                      <object class="GtkLabel" id="mergetree_working_copy">
-                        <property name="visible">True</property>
-                        <property name="xalign">0</property>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
       <packing>
-        <property name="title">Step 2: Merge two different trees</property>
+        <property name="title" translatable="yes">Step 2: Reintegrate a Branch</property>
+        <property name="has_padding">False</property>
       </packing>
     </child>
     <child>
-      <object class="GtkVBox" id="page3">
+      <object class="GtkGrid" id="page3">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox1">
+          <object class="GtkButtonBox" id="hbuttonbox24">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
-            <child>
-              <object class="GtkLabel" id="label1">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Options&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkAlignment" id="alignment3">
+              <object class="GtkButton" id="mergeoptions_test_merge">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <signal name="clicked" handler="on_test_clicked" swapped="no"/>
                 <child>
-                  <object class="GtkVBox" id="vbox41">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <child>
-                      <object class="GtkCheckButton" id="mergeoptions_recursive">
-                        <property name="label" translatable="yes">Recursive</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="active">True</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
+                    <property name="can_focus">False</property>
                     <child>
-                      <object class="GtkCheckButton" id="mergeoptions_ignore_ancestry">
-                        <property name="label" translatable="yes">Ignore ancestry</property>
+                      <object class="GtkLabel" id="label11">
                         <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="draw_indicator">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="label" translatable="yes">Test Merge</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
+                        <property name="left_attach">1</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkCheckButton" id="mergeoptions_only_record">
-                        <property name="label" translatable="yes">Only record the merge</property>
+                      <object class="GtkImage" id="image5">
                         <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="draw_indicator">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="icon_name">system-run</property>
                       </object>
                       <packing>
-                        <property name="position">2</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                   </object>
                 </child>
+                <accelerator key="t" signal="clicked" modifiers="GDK_MOD1_MASK"/>
               </object>
               <packing>
                 <property name="expand">False</property>
                 <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="position">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox24">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="mergeoptions_test_merge">
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <signal handler="on_test_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
                 <child>
-                  <object class="GtkHBox" id="hbox2">
+                  <object class="GtkCheckButton" id="mergeoptions_only_record">
+                    <property name="label" translatable="yes">Only record the merge</property>
                     <property name="visible">True</property>
-                    <child>
-                      <object class="GtkImage" id="image5">
-                        <property name="visible">True</property>
-                        <property name="stock">gtk-execute</property>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkLabel" id="label11">
-                        <property name="visible">True</property>
-                        <property name="label" translatable="yes">Test Merge</property>
-                      </object>
-                      <packing>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkCheckButton" id="mergeoptions_ignore_ancestry">
+                    <property name="label" translatable="yes">Ignore ancestry</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkCheckButton" id="mergeoptions_recursive">
+                    <property name="label" translatable="yes">Recursive</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="active">True</property>
+                    <property name="draw_indicator">True</property>
                   </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label1">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Options&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
       <packing>
         <property name="page_type">confirm</property>
-        <property name="title">Step 3: Final Options</property>
+        <property name="title" translatable="yes">Step 3: Final Options</property>
+        <property name="has_padding">False</property>
       </packing>
     </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
+    <child>
+      <placeholder/>
+    </child>
   </object>
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/notification.xml rabbitvcs/rabbitvcs/ui/xml/notification.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/notification.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/notification.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,7 +1,22 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.20"/>
+  <object class="GtkImage" id="document-save-as">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">document-save-as</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Notification">
     <property name="width_request">740</property>
     <property name="can_focus">True</property>
@@ -9,47 +24,119 @@
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="gravity">center</property>
-    <signal handler="on_destroy" name="destroy"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <child type="titlebar">
+      <placeholder/>
+    </child>
     <child>
-      <object class="GtkVBox" id="vbox14">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox2">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="action">
+              <object class="GtkButtonBox" id="hbuttonbox10">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="spacing">6</property>
+                <property name="layout_style">end</property>
+                <child>
+                  <object class="GtkButton" id="cancel">
+                    <property name="label" translatable="yes">_Cancel</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">rabbitvcs-cancel</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="expand">False</property>
+                    <property name="fill">False</property>
+                    <property name="position">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButton" id="ok">
+                    <property name="label" translatable="yes">_OK</property>
+                    <property name="visible">True</property>
+                    <property name="sensitive">False</property>
+                    <property name="can_focus">True</property>
+                    <property name="can_default">True</property>
+                    <property name="has_default">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">rabbitvcs-ok</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="expand">False</property>
+                    <property name="fill">False</property>
+                    <property name="position">1</property>
+                  </packing>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="status">
+              <object class="GtkButtonBox" id="hbuttonbox1">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="selectable">True</property>
+                <property name="can_focus">False</property>
+                <property name="layout_style">start</property>
+                <child>
+                  <object class="GtkButton" id="saveas">
+                    <property name="label" translatable="yes">Save _As</property>
+                    <property name="visible">True</property>
+                    <property name="sensitive">False</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">document-save-as</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_saveas_clicked" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="expand">False</property>
+                    <property name="fill">False</property>
+                    <property name="position">0</property>
+                  </packing>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">3</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkProgressBar" id="pbar">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
@@ -57,123 +144,60 @@
             <property name="height_request">225</property>
             <property name="visible">True</property>
             <property name="can_focus">True</property>
-            <property name="hscrollbar_policy">automatic</property>
-            <property name="vscrollbar_policy">automatic</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="shadow_type">etched-in</property>
             <child>
               <object class="GtkTreeView" id="table">
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
+                <child internal-child="selection">
+                  <object class="GtkTreeSelection"/>
+                </child>
               </object>
             </child>
           </object>
           <packing>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
-            <child>
-              <object class="GtkProgressBar" id="pbar">
-                <property name="visible">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">3</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHBox" id="hbox1">
-            <property name="visible">True</property>
-            <property name="spacing">6</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkHButtonBox" id="hbuttonbox1">
+              <object class="GtkLabel" id="status">
                 <property name="visible">True</property>
-                <property name="layout_style">start</property>
-                <child>
-                  <object class="GtkButton" id="saveas">
-                    <property name="label">gtk-save-as</property>
-                    <property name="visible">True</property>
-                    <property name="sensitive">False</property>
-                    <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_saveas_clicked" name="clicked"/>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="selectable">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkHButtonBox" id="hbuttonbox10">
+              <object class="GtkLabel" id="action">
                 <property name="visible">True</property>
-                <property name="spacing">6</property>
-                <property name="layout_style">end</property>
-                <child>
-                  <object class="GtkButton" id="cancel">
-                    <property name="label">gtk-cancel</property>
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_cancel_clicked" name="clicked"/>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkButton" id="ok">
-                    <property name="label">gtk-ok</property>
-                    <property name="visible">True</property>
-                    <property name="sensitive">False</property>
-                    <property name="can_focus">True</property>
-                    <property name="can_default">True</property>
-                    <property name="has_default">True</property>
-                    <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_ok_clicked" name="clicked"/>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="pack_type">end</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">3</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/properties.xml rabbitvcs/rabbitvcs/ui/xml/properties.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/properties.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/properties.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,113 +1,166 @@
-<?xml version="1.0"?>
-<!--Generated with glade3 3.4.1 on Thu Oct 15 09:51:29 2009 -->
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="document-new">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">document-new</property>
+  </object>
+  <object class="GtkImage" id="document-save">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">document-save</property>
+  </object>
+  <object class="GtkImage" id="edit-delete">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">edit-delete</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-editprops">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-editprops</property>
+  </object>
   <object class="GtkWindow" id="Properties">
     <property name="width_request">600</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Properties</property>
-    <property name="window_position">GTK_WIN_POS_CENTER</property>
+    <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox12">
-        <property name="orientation">vertical</property>
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="spacing">18</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox1">
-            <property name="orientation">vertical</property>
+          <object class="GtkButtonBox" id="hbuttonbox8">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Properties for:&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
                 <property name="fill">False</property>
+                <property name="position">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment13">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_Save</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">document-save</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
+              </object>
+              <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
+                <property name="position">1</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
+            <child>
+              <object class="GtkGrid">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
                 <child>
-                  <object class="GtkVBox" id="vbox13">
-                    <property name="orientation">vertical</property>
+                  <object class="GtkButtonBox" id="hbuttonbox9">
                     <property name="visible">True</property>
-                    <property name="spacing">6</property>
+                    <property name="can_focus">False</property>
+                    <property name="margin_top">8</property>
+                    <property name="hexpand">True</property>
+                    <property name="spacing">3</property>
+                    <property name="layout_style">start</property>
                     <child>
-                      <object class="GtkHBox" id="hbox1">
+                      <object class="GtkButton" id="new">
+                        <property name="label" translatable="yes">_New...</property>
                         <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkEntry" id="path">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="tooltip-text">URL/Path</property>
-                            <signal handler="on_refresh_activate" name="activate"/>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkButton" id="refresh">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <signal handler="on_refresh_activate" name="clicked"/>
-                            <child>
-                              <object class="GtkImage" id="image1">
-                                <property name="visible">True</property>
-                                <property name="stock">gtk-refresh</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">2</property>
-                          </packing>
-                        </child>
-                        </object> 
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">True</property>
+                        <property name="image">document-new</property>
+                        <property name="use_underline">True</property>
+                        <signal name="clicked" handler="on_new_clicked" swapped="no"/>
+                      </object>
                       <packing>
                         <property name="expand">False</property>
                         <property name="fill">False</property>
+                        <property name="position">0</property>
                       </packing>
-                    </child>                    
+                    </child>
                     <child>
-                      <object class="GtkScrolledWindow" id="scrolledwindow12">
-                        <property name="height_request">150</property>
+                      <object class="GtkButton" id="edit">
+                        <property name="label" translatable="yes">_Edit...</property>
                         <property name="visible">True</property>
+                        <property name="sensitive">False</property>
                         <property name="can_focus">True</property>
-                        <property name="hscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
-                        <property name="vscrollbar_policy">GTK_POLICY_AUTOMATIC</property>
-                        <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
-                        <child>
-                          <object class="GtkTreeView" id="table">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="rubber_banding">True</property>
-                            <signal handler="on_table_button_released" name="button_release_event"/>
-                            <signal handler="on_table_cursor_changed" name="cursor_changed"/>
-                          </object>
-                        </child>
+                        <property name="receives_default">True</property>
+                        <property name="image">rabbitvcs-editprops</property>
+                        <property name="use_underline">True</property>
+                        <signal name="clicked" handler="on_edit_clicked" swapped="no"/>
                       </object>
                       <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">False</property>
                         <property name="position">1</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkLabel" id="recursive_label">
+                      <object class="GtkButton" id="delete">
+                        <property name="label" translatable="yes">_Delete</property>
                         <property name="visible">True</property>
-                        <property name="label" translatable="yes">&lt;i&gt;Selected properties will be applied recursively.&lt;/i&gt;</property>
-                        <property name="use_markup">True</property>
+                        <property name="sensitive">False</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">True</property>
+                        <property name="image">edit-delete</property>
+                        <property name="use_underline">True</property>
+                        <signal name="clicked" handler="on_delete_clicked" swapped="no"/>
                       </object>
                       <packing>
                         <property name="expand">False</property>
@@ -115,123 +168,135 @@
                         <property name="position">2</property>
                       </packing>
                     </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">4</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkCheckButton" id="delete_recurse">
+                    <property name="label" translatable="yes">Delete properties recursively</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">3</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="recursive_label">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="label" translatable="yes">&lt;i&gt;Selected properties will be applied recursively.&lt;/i&gt;</property>
+                    <property name="use_markup">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkScrolledWindow" id="scrolledwindow12">
+                    <property name="height_request">150</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="shadow_type">etched-in</property>
                     <child>
-                      <object class="GtkCheckButton" id="delete_recurse">
+                      <object class="GtkTreeView" id="table">
                         <property name="visible">True</property>
                         <property name="can_focus">True</property>
-                        <property name="label" translatable="yes">Delete properties recursively</property>
-                        <property name="draw_indicator">True</property>
+                        <property name="rubber_banding">True</property>
+                        <signal name="button-release-event" handler="on_table_button_released" swapped="no"/>
+                        <signal name="cursor-changed" handler="on_table_cursor_changed" swapped="no"/>
+                        <child internal-child="selection">
+                          <object class="GtkTreeSelection"/>
+                        </child>
                       </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">3</property>
-                      </packing>
                     </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkGrid">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="column_spacing">6</property>
                     <child>
-                      <object class="GtkHButtonBox" id="hbuttonbox9">
+                      <object class="GtkButton" id="refresh">
                         <property name="visible">True</property>
-                        <property name="spacing">3</property>
-                        <property name="layout_style">GTK_BUTTONBOX_START</property>
-                        <child>
-                          <object class="GtkButton" id="new">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <property name="label" translatable="yes">New...</property>
-                            <signal handler="on_new_clicked" name="clicked"/>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkButton" id="edit">
-                            <property name="visible">True</property>
-                            <property name="sensitive">False</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <property name="label" translatable="yes">Edit...</property>
-                            <signal handler="on_edit_clicked" name="clicked"/>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">True</property>
+                        <signal name="clicked" handler="on_refresh_activate" swapped="no"/>
                         <child>
-                          <object class="GtkButton" id="delete">
+                          <object class="GtkImage" id="image1">
                             <property name="visible">True</property>
-                            <property name="sensitive">False</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">True</property>
-                            <property name="label" translatable="yes">Delete</property>
-                            <signal handler="on_delete_clicked" name="clicked"/>
+                            <property name="can_focus">False</property>
+                            <property name="icon_name">view-refresh</property>
                           </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">2</property>
-                          </packing>
                         </child>
+                        <accelerator key="r" signal="clicked" modifiers="GDK_MOD1_MASK"/>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">4</property>
+                        <property name="left_attach">1</property>
+                        <property name="top_attach">0</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkEntry" id="path">
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="tooltip_text">URL/Path</property>
+                        <property name="hexpand">True</property>
+                        <signal name="activate" handler="on_refresh_activate" swapped="no"/>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                   </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
-          </object>
-        </child>
-        <child>
-          <object class="GtkHButtonBox" id="hbuttonbox8">
-            <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">GTK_BUTTONBOX_END</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="label">gtk-cancel</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_cancel_clicked" name="clicked"/>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkButton" id="ok">
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="label">gtk-save</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_ok_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Properties for:&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">GTK_PACK_END</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/property_editor.xml rabbitvcs/rabbitvcs/ui/xml/property_editor.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/property_editor.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/property_editor.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,152 +1,106 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.16 -->
-  <!-- interface-naming-policy project-wide -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="document-new">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">document-new</property>
+  </object>
+  <object class="GtkImage" id="view-refresh">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">view-refresh</property>
+  </object>
+  <object class="GtkImage" id="window-close">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">window-close</property>
+  </object>
   <object class="GtkWindow" id="PropertyEditor">
-    <property name="default_width">600</property>
-    <property name="default_height">400</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Property Editor</property>
+    <property name="default_width">600</property>
+    <property name="default_height">400</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkTable" id="table2">
+          <object class="GtkButtonBox" id="hbuttonbox1">
             <property name="visible">True</property>
-            <property name="n_rows">2</property>
-            <property name="n_columns">2</property>
-            <property name="column_spacing">20</property>
-            <property name="row_spacing">6</property>
-            <child>
-              <object class="GtkHBox" id="hbox1">
-                <property name="visible">True</property>
-                <child>
-                  <object class="GtkLabel" id="wc_lbl">
-                    <property name="visible">True</property>
-                    <property name="label" translatable="yes">&lt;b&gt;Working Copy:&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
-                    <property name="single_line_mode">True</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-              </object>
-              <packing>
-                <property name="x_options">GTK_SHRINK | GTK_FILL</property>
-                <property name="y_options">GTK_SHRINK | GTK_FILL</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkHBox" id="hbox2">
-                <property name="visible">True</property>
-                <child>
-                  <object class="GtkLabel" id="remote_lbl">
-                    <property name="visible">True</property>
-                    <property name="label" translatable="yes">&lt;b&gt;Remote URI:&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
-                    <property name="single_line_mode">True</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-              </object>
-              <packing>
-                <property name="top_attach">1</property>
-                <property name="bottom_attach">2</property>
-                <property name="x_options">GTK_SHRINK | GTK_FILL</property>
-                <property name="y_options">GTK_SHRINK | GTK_FILL</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkHBox" id="hbox3">
-                <property name="visible">True</property>
-                <child>
-                  <object class="GtkLabel" id="remote_uri_text">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="ellipsize">middle</property>
-                  </object>
-                  <packing>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-              </object>
-              <packing>
-                <property name="left_attach">1</property>
-                <property name="right_attach">2</property>
-                <property name="top_attach">1</property>
-                <property name="bottom_attach">2</property>
-              </packing>
-            </child>
+            <property name="can_focus">False</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="spacing">6</property>
+            <property name="homogeneous">True</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkHBox" id="hbox4">
+              <object class="GtkButton" id="close">
+                <property name="label" translatable="yes">_Close</property>
                 <property name="visible">True</property>
-                <child>
-                  <object class="GtkLabel" id="wc_text">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="ellipsize">middle</property>
-                  </object>
-                  <packing>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="tooltip_text" translatable="yes">Close this dialog.</property>
+                <property name="image">window-close</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_close_clicked" swapped="no"/>
               </object>
               <packing>
-                <property name="left_attach">1</property>
-                <property name="right_attach">2</property>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
+                <property name="position">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">4</property>
           </packing>
         </child>
         <child>
-          <object class="GtkScrolledWindow" id="scrolledwindow1">
+          <object class="GtkGrid" id="note_box">
             <property name="visible">True</property>
-            <property name="can_focus">True</property>
-            <property name="hscrollbar_policy">automatic</property>
-            <property name="vscrollbar_policy">automatic</property>
-            <property name="shadow_type">etched-in</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <child>
-              <object class="GtkTreeView" id="table">
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-              </object>
+              <placeholder/>
             </child>
           </object>
           <packing>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">3</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox2">
+          <object class="GtkButtonBox" id="hbuttonbox2">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="spacing">6</property>
             <property name="homogeneous">True</property>
             <property name="layout_style">center</property>
             <child>
               <object class="GtkButton" id="refresh">
-                <property name="label">gtk-refresh</property>
+                <property name="label" translatable="yes">_Refresh</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">True</property>
-                <property name="tooltip-text" translatable="yes">Refresh the list of properties.</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_refresh_clicked" name="clicked"/>
+                <property name="tooltip_text" translatable="yes">Refresh the list of properties.</property>
+                <property name="image">view-refresh</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_refresh_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -156,13 +110,14 @@
             </child>
             <child>
               <object class="GtkButton" id="new">
-                <property name="label">gtk-new</property>
+                <property name="label" translatable="yes">_New</property>
                 <property name="visible">True</property>
                 <property name="can_focus">True</property>
                 <property name="receives_default">True</property>
-                <property name="tooltip-text" translatable="yes">Add a new property.</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_new_clicked" name="clicked"/>
+                <property name="tooltip_text" translatable="yes">Add a new property.</property>
+                <property name="image">document-new</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_new_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -172,50 +127,99 @@
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHBox" id="note_box">
+          <object class="GtkScrolledWindow" id="scrolledwindow1">
             <property name="visible">True</property>
-            <property name="homogeneous">True</property>
+            <property name="can_focus">True</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="shadow_type">etched-in</property>
             <child>
-              <placeholder/>
+              <object class="GtkTreeView" id="table">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <child internal-child="selection">
+                  <object class="GtkTreeSelection"/>
+                </child>
+              </object>
             </child>
           </object>
           <packing>
-            <property name="position">3</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="homogeneous">True</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
+            <property name="column_spacing">20</property>
             <child>
-              <object class="GtkButton" id="close">
-                <property name="label">gtk-close</property>
+              <object class="GtkLabel" id="remote_lbl">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="tooltip-text" translatable="yes">Close this dialog.</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_close_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="halign">start</property>
+                <property name="label" translatable="yes">&lt;b&gt;Remote URI:&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="single_line_mode">True</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="wc_text">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="ellipsize">middle</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="remote_uri_text">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="ellipsize">middle</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="wc_lbl">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="halign">start</property>
+                <property name="label" translatable="yes">&lt;b&gt;Working Copy:&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="single_line_mode">True</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">4</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/property_page.xml rabbitvcs/rabbitvcs/ui/xml/property_page.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/property_page.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/property_page.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,30 +1,7 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.16 -->
-  <!-- interface-naming-policy project-wide -->
-  <object class="GtkHBox" id="property_page_label">
-    <property name="visible">True</property>
-    <child>
-      <object class="GtkImage" id="rabbitvcs-icon">
-        <property name="visible">True</property>
-        <property name="icon_name">rabbitvcs</property>
-      </object>
-      <packing>
-        <property name="expand">False</property>
-        <property name="fill">False</property>
-        <property name="position">0</property>
-      </packing>
-    </child>
-    <child>
-      <object class="GtkLabel" id="rabbitvcs-title">
-        <property name="visible">True</property>
-        <property name="label" translatable="yes">RabbitVCS</property>
-      </object>
-      <packing>
-        <property name="position">1</property>
-      </packing>
-    </child>
-  </object>
+  <requires lib="gtk+" version="3.0"/>
   <object class="GtkExpander" id="file_info_expander">
     <property name="visible">True</property>
     <property name="can_focus">True</property>
@@ -34,199 +11,220 @@
     <child type="label">
       <object class="GtkLabel" id="file_expander_path">
         <property name="visible">True</property>
+        <property name="can_focus">False</property>
         <property name="xalign">0</property>
       </object>
     </child>
   </object>
-  <object class="GtkVBox" id="file_info_table">
+  <object class="GtkGrid" id="file_info_table">
     <property name="visible">True</property>
-    <property name="border_width">12</property>
+    <property name="can_focus">False</property>
+    <property name="margin_bottom">12</property>
+    <property name="hexpand">True</property>
     <property name="orientation">vertical</property>
-    <property name="spacing">12</property>
+    <property name="row_spacing">12</property>
     <child>
-      <object class="GtkFixed" id="fixed1">
+      <object class="GtkFixed" id="fixed2">
         <property name="height_request">12</property>
         <property name="visible">True</property>
+        <property name="can_focus">False</property>
+        <property name="hexpand">True</property>
       </object>
       <packing>
-        <property name="position">0</property>
+        <property name="left_attach">0</property>
+        <property name="top_attach">2</property>
       </packing>
     </child>
     <child>
-      <object class="GtkHBox" id="icon_plus_table">
+      <object class="GtkGrid" id="icon_plus_table">
         <property name="visible">True</property>
+        <property name="can_focus">False</property>
         <child>
-          <object class="GtkImage" id="vcs_icon">
-            <property name="visible">True</property>
-            <property name="yalign">0</property>
-            <property name="xpad">8</property>
-            <property name="stock">gtk-file</property>
-            <property name="icon-size">6</property>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkTable" id="file_info">
+          <object class="GtkGrid" id="file_info">
             <property name="visible">True</property>
-            <property name="n_rows">4</property>
-            <property name="n_columns">2</property>
-            <property name="column_spacing">16</property>
+            <property name="can_focus">False</property>
             <property name="row_spacing">8</property>
+            <property name="column_spacing">16</property>
             <child>
-              <object class="GtkLabel" id="filename_label">
+              <object class="GtkLabel" id="prop_status_label">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">Property status:</property>
                 <property name="xalign">0</property>
-                <property name="label" translatable="yes">Name:</property>
               </object>
               <packing>
-                <property name="x_options">GTK_FILL</property>
-                <property name="y_options">GTK_FILL</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">3</property>
               </packing>
             </child>
             <child>
               <object class="GtkLabel" id="content_status_label">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
+                <property name="can_focus">False</property>
                 <property name="label" translatable="yes">Content status:</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
+                <property name="left_attach">0</property>
                 <property name="top_attach">2</property>
-                <property name="bottom_attach">3</property>
-                <property name="x_options">GTK_FILL</property>
-                <property name="y_options">GTK_FILL</property>
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="prop_status_label">
+              <object class="GtkLabel" id="vcs_label">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">VCS:</property>
                 <property name="xalign">0</property>
-                <property name="label" translatable="yes">Property status:</property>
               </object>
               <packing>
-                <property name="top_attach">3</property>
-                <property name="bottom_attach">4</property>
-                <property name="x_options">GTK_FILL</property>
-                <property name="y_options">GTK_FILL</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="vcs_label">
+              <object class="GtkLabel" id="vcs_type">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="selectable">True</property>
                 <property name="xalign">0</property>
-                <property name="label" translatable="yes">VCS:</property>
               </object>
               <packing>
+                <property name="left_attach">1</property>
                 <property name="top_attach">1</property>
-                <property name="bottom_attach">2</property>
-                <property name="x_options">GTK_FILL</property>
-                <property name="y_options">GTK_FILL</property>
               </packing>
             </child>
             <child>
               <object class="GtkLabel" id="file_name">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
                 <property name="selectable">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
                 <property name="left_attach">1</property>
-                <property name="right_attach">2</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="vcs_type">
+              <object class="GtkLabel" id="filename_label">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">Name:</property>
                 <property name="xalign">0</property>
-                <property name="selectable">True</property>
               </object>
               <packing>
-                <property name="left_attach">1</property>
-                <property name="right_attach">2</property>
-                <property name="top_attach">1</property>
-                <property name="bottom_attach">2</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkHBox" id="prop_status_box">
+              <object class="GtkGrid" id="content_status_box">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <child>
-                  <object class="GtkImage" id="prop_status_icon">
+                  <object class="GtkLabel" id="content_status">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="selectable">True</property>
+                    <property name="xalign">0</property>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="position">0</property>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkLabel" id="prop_status">
+                  <object class="GtkImage" id="content_status_icon">
                     <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="selectable">True</property>
+                    <property name="can_focus">False</property>
                   </object>
                   <packing>
-                    <property name="position">1</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
               </object>
               <packing>
                 <property name="left_attach">1</property>
-                <property name="right_attach">2</property>
-                <property name="top_attach">3</property>
-                <property name="bottom_attach">4</property>
+                <property name="top_attach">2</property>
               </packing>
             </child>
             <child>
-              <object class="GtkHBox" id="content_status_box">
+              <object class="GtkGrid" id="prop_status_box">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <child>
-                  <object class="GtkImage" id="content_status_icon">
+                  <object class="GtkLabel" id="prop_status">
                     <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="selectable">True</property>
+                    <property name="xalign">0</property>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="position">0</property>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkLabel" id="content_status">
+                  <object class="GtkImage" id="prop_status_icon">
                     <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="selectable">True</property>
+                    <property name="can_focus">False</property>
                   </object>
                   <packing>
-                    <property name="position">1</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
               </object>
               <packing>
                 <property name="left_attach">1</property>
-                <property name="right_attach">2</property>
-                <property name="top_attach">2</property>
-                <property name="bottom_attach">3</property>
+                <property name="top_attach">3</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">1</property>
+            <property name="left_attach">1</property>
+            <property name="top_attach">0</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkImage" id="vcs_icon">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="valign">start</property>
+            <property name="margin_left">8</property>
+            <property name="margin_right">8</property>
+            <property name="vexpand">True</property>
+            <property name="icon_name">text-x-generic</property>
+            <property name="icon_size">6</property>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
       <packing>
-        <property name="position">1</property>
+        <property name="left_attach">0</property>
+        <property name="top_attach">1</property>
       </packing>
     </child>
     <child>
-      <object class="GtkFixed" id="fixed2">
+      <object class="GtkFixed" id="fixed1">
         <property name="height_request">12</property>
         <property name="visible">True</property>
+        <property name="can_focus">False</property>
+        <property name="hexpand">True</property>
       </object>
       <packing>
-        <property name="position">2</property>
+        <property name="left_attach">0</property>
+        <property name="top_attach">0</property>
       </packing>
     </child>
   </object>
@@ -234,15 +232,39 @@
     <property name="visible">True</property>
     <property name="can_focus">True</property>
     <property name="hscrollbar_policy">never</property>
-    <property name="vscrollbar_policy">automatic</property>
     <child>
       <object class="GtkViewport" id="prop_page_viewport">
         <property name="visible">True</property>
+        <property name="can_focus">False</property>
         <property name="resize_mode">queue</property>
         <child>
-          <object class="GtkVBox" id="property_page">
+          <object class="GtkGrid" id="property_page">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
+            <property name="can_focus">False</property>
+            <child>
+              <placeholder/>
+            </child>
+            <child>
+              <placeholder/>
+            </child>
+            <child>
+              <placeholder/>
+            </child>
+            <child>
+              <placeholder/>
+            </child>
+            <child>
+              <placeholder/>
+            </child>
+            <child>
+              <placeholder/>
+            </child>
+            <child>
+              <placeholder/>
+            </child>
+            <child>
+              <placeholder/>
+            </child>
             <child>
               <placeholder/>
             </child>
@@ -251,4 +273,32 @@
       </object>
     </child>
   </object>
+  <object class="GtkGrid" id="property_page_label">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <child>
+      <object class="GtkLabel" id="rabbitvcs-title">
+        <property name="visible">True</property>
+        <property name="can_focus">False</property>
+        <property name="halign">center</property>
+        <property name="label" translatable="yes">RabbitVCS</property>
+      </object>
+      <packing>
+        <property name="left_attach">0</property>
+        <property name="top_attach">1</property>
+      </packing>
+    </child>
+    <child>
+      <object class="GtkImage" id="rabbitvcs-icon">
+        <property name="visible">True</property>
+        <property name="can_focus">False</property>
+        <property name="halign">center</property>
+        <property name="icon_name">rabbitvcs</property>
+      </object>
+      <packing>
+        <property name="left_attach">0</property>
+        <property name="top_attach">0</property>
+      </packing>
+    </child>
+  </object>
 </interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/pull.xml rabbitvcs/rabbitvcs/ui/xml/pull.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/pull.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/pull.xml	1970-01-01 08:00:00.000000000 +0800
@@ -1,134 +0,0 @@
-<?xml version="1.0"?>
-<interface>
-  <!-- interface-requires gtk+ 2.12 -->
-  <!-- interface-naming-policy project-wide -->
-  <object class="GtkWindow" id="Pull">
-    <property name="visible">True</property>
-    <property name="title" translatable="yes">Pull</property>
-    <property name="window_position">center-always</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <child>
-      <object class="GtkVBox" id="vbox1">
-        <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="spacing">18</property>
-        <child>
-          <object class="GtkVBox" id="vbox3">
-            <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <child>
-              <object class="GtkLabel" id="label1">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Pull Information&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkAlignment" id="repository_container">
-                <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <placeholder/>
-                </child>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHBox" id="hbox1">
-            <property name="visible">True</property>
-            <child>
-              <object class="GtkLabel" id="label2">
-                <property name="width_request">90</property>
-                <property name="visible">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkCheckButton" id="merge">
-                <property name="label" translatable="yes">Merge changes into local branch</property>
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">False</property>
-                <property name="active">True</property>
-                <property name="draw_indicator">True</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
-            <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
-            <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_cancel_clicked" name="clicked"/>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_ok_clicked" name="clicked"/>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">1</property>
-          </packing>
-        </child>
-      </object>
-    </child>
-  </object>
-</interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/push.xml rabbitvcs/rabbitvcs/ui/xml/push.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/push.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/push.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,191 +1,239 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.12 -->
-  <!-- interface-naming-policy project-wide -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Push">
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Push</property>
     <property name="window_position">center-always</property>
     <property name="icon_name">rabbitvcs</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <placeholder/>
+    </child>
+    <child>
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox3">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButtonBox" id="hbuttonbox1">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Push Information&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">False</property>
+                <property name="spacing">6</property>
+                <property name="layout_style">end</property>
+                <child>
+                  <object class="GtkButton" id="cancel">
+                    <property name="label" translatable="yes">_Cancel</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">rabbitvcs-cancel</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="expand">False</property>
+                    <property name="fill">False</property>
+                    <property name="position">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkButton" id="ok">
+                    <property name="label" translatable="yes">_OK</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">True</property>
+                    <property name="image">rabbitvcs-ok</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
+                  </object>
+                  <packing>
+                    <property name="expand">False</property>
+                    <property name="fill">False</property>
+                    <property name="position">1</property>
+                  </packing>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="repository_container">
+              <object class="GtkLabel" id="status">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <placeholder/>
-                </child>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">3</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox2">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
+            <child>
+              <object class="GtkScrolledWindow" id="scrolledwindow1">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="shadow_type">etched-in</property>
+                <child>
+                  <object class="GtkTreeView" id="log">
+                    <property name="width_request">450</property>
+                    <property name="height_request">200</property>
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <child internal-child="selection">
+                      <object class="GtkTreeSelection"/>
+                    </child>
+                  </object>
+                </child>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
             <child>
               <object class="GtkLabel" id="label4">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
+                <property name="can_focus">False</property>
                 <property name="label" translatable="yes">&lt;b&gt;Commits to Push&lt;/b&gt;</property>
                 <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
-            <child>
-              <object class="GtkAlignment" id="alignment2">
-                <property name="visible">True</property>
-                <property name="left_padding">12</property>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkGrid">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
+            <child>
+              <object class="GtkGrid" id="repository_container">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
                 <child>
-                  <object class="GtkScrolledWindow" id="scrolledwindow1">
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="hscrollbar_policy">automatic</property>
-                    <property name="vscrollbar_policy">automatic</property>
-                    <property name="shadow_type">etched-in</property>
-                    <child>
-                      <object class="GtkTreeView" id="log">
-                        <property name="width_request">450</property>
-                        <property name="height_request">200</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                      </object>
-                    </child>
-                  </object>
+                  <placeholder/>
                 </child>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label1">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Push Information&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
         <child>
-        <object class="GtkAlignment" id="tagsContainer">
-          <property name="visible">True</property>
-          <property name="left_padding">10</property>
-          <child>
-            <object class="GtkHBox" id="pushTagsBox">
-              <property name="visible">True</property>
-              <child>
-                <object class="GtkCheckButton" id="tags">
-                  <property name="visible">True</property>
-                  <property name="xalign">0</property>
-                  <property name="label">Include tags</property>
-                </object>
-                <packing>
-                  <property name="expand">False</property>
-                  <property name="fill">False</property>
-                  <property name="position">1</property>
-                </packing>
-              </child>
-            </object>
-          </child>
-        </object>
-        </child>
-        <child>
-          <object class="GtkHBox" id="hbox1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="orientation">vertical</property>
             <child>
-              <object class="GtkLabel" id="status">
+              <object class="GtkCheckButton" id="tags">
+                <property name="label">Include tags</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
+                <property name="can_focus">False</property>
+                <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="draw_indicator">True</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkHButtonBox" id="hbuttonbox1">
+              <object class="GtkCheckButton" id="force_with_lease">
+                <property name="label" translatable="yes">Force with lease</property>
                 <property name="visible">True</property>
-                <property name="spacing">6</property>
-                <property name="layout_style">end</property>
-                <child>
-                  <object class="GtkButton" id="cancel">
-                    <property name="label">gtk-cancel</property>
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_cancel_clicked" name="clicked"/>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkButton" id="ok">
-                    <property name="label">gtk-ok</property>
-                    <property name="visible">True</property>
-                    <property name="can_focus">True</property>
-                    <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_ok_clicked" name="clicked"/>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
-                  </packing>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="draw_indicator">True</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="pack_type">end</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/relocate.xml rabbitvcs/rabbitvcs/ui/xml/relocate.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/relocate.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/relocate.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,163 +1,176 @@
-<?xml version="1.0"?>
-<!--Generated with glade3 3.4.5 on Thu Feb 12 09:48:19 2009 -->
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Relocate">
     <property name="width_request">640</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Relocate</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox28">
-        <property name="orientation">vertical</property>
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="spacing">18</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox1">
-            <property name="orientation">vertical</property>
+          <object class="GtkButtonBox" id="hbuttonbox17">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Change the repository of your working copy&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
+                <property name="expand">True</property>
+                <property name="fill">True</property>
+                <property name="position">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment1">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox29">
-                    <property name="orientation">vertical</property>
-                    <property name="visible">True</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHBox" id="hbox15">
-                        <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkLabel" id="label44">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">From:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkEntry" id="from_url">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox16">
-                        <property name="visible">True</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkLabel" id="label46">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">To:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkComboBoxEntry" id="to_urls">
-                            <property name="visible">True</property>
-                            <child internal-child="entry">
-                              <object class="GtkEntry" id="to_url">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
+                <property name="expand">True</property>
+                <property name="fill">True</property>
                 <property name="position">1</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox17">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">GTK_BUTTONBOX_END</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="label">gtk-cancel</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_cancel_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
+                <child>
+                  <object class="GtkLabel" id="label46">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">To:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkComboBoxText" id="to_urls">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="has_entry">True</property>
+                    <child internal-child="entry">
+                      <object class="GtkEntry" id="to_url">
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="hexpand">True</property>
+                      </object>
+                    </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkEntry" id="from_url">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label44">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">From:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
               </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="label">gtk-ok</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_ok_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Change the repository of your working copy&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">GTK_PACK_END</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/reset.xml rabbitvcs/rabbitvcs/ui/xml/reset.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/reset.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/reset.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,29 +1,51 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.12 -->
-  <!-- interface-naming-policy project-wide -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Reset">
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Reset</property>
     <property name="window_position">center-always</property>
-    <signal handler="on_destroy" name="destroy"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox6">
+          <object class="GtkButtonBox" id="hbuttonbox1">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Reset your Repository&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -32,10 +54,14 @@
               </packing>
             </child>
             <child>
-              <object class="GtkLabel" id="label3">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">Reset current HEAD to specified state.</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -45,290 +71,318 @@
             </child>
           </object>
           <packing>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">4</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox7">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
-            <child>
-              <object class="GtkLabel" id="label9">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Path&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
-              </object>
-              <packing>
-                <property name="position">0</property>
-              </packing>
-            </child>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkAlignment" id="alignment2">
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <child>
+                  <object class="GtkRadioButton" id="none_opt">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="active">True</property>
+                    <property name="draw_indicator">True</property>
+                    <property name="group">mixed_opt</property>
+                    <child>
+                      <object class="GtkLabel">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="label" translatable="yes">None</property>
+                        <property name="xalign">0</property>
+                      </object>
+                    </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">4</property>
+                  </packing>
+                </child>
                 <child>
-                  <object class="GtkHBox" id="hbox1">
+                  <object class="GtkRadioButton" id="merge_opt">
                     <property name="visible">True</property>
-                    <property name="spacing">6</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                    <property name="group">mixed_opt</property>
                     <child>
-                      <object class="GtkEntry" id="path">
+                      <object class="GtkLabel" id="label7">
                         <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="invisible_char">&#x25CF;</property>
-                        <signal handler="on_path_changed" name="changed"/>
+                        <property name="can_focus">False</property>
+                        <property name="label" translatable="yes">&lt;i&gt;Merge&lt;/i&gt; - Resets the index to match the tree recorded by the named commit,
+and updates the files that are different between the named commit
+and the current commit in the working tree</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
+                      </object>
+                    </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">3</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkRadioButton" id="hard_opt">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                    <property name="group">mixed_opt</property>
+                    <child>
+                      <object class="GtkLabel" id="label6">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="label" translatable="yes">&lt;i&gt;Hard&lt;/i&gt; - Matches the working tree and index to that of the 
+tree being switched to</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
+                      </object>
+                    </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkRadioButton" id="soft_opt">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
+                    <property name="group">mixed_opt</property>
+                    <child>
+                      <object class="GtkLabel" id="label5">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="label" translatable="yes">&lt;i&gt;Soft&lt;/i&gt; - Does not touch the index file or working tree at all, 
+but requires them to be in good working order</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
                       </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
                     </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkRadioButton" id="mixed_opt">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="receives_default">False</property>
+                    <property name="halign">start</property>
+                    <property name="hexpand">True</property>
+                    <property name="draw_indicator">True</property>
                     <child>
-                      <object class="GtkButton" id="browse">
+                      <object class="GtkLabel" id="label4">
                         <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">True</property>
-                        <signal handler="on_browse_clicked" name="clicked"/>
-                        <child>
-                          <object class="GtkImage" id="image1">
-                            <property name="visible">True</property>
-                            <property name="stock">gtk-harddisk</property>
-                          </object>
-                        </child>
+                        <property name="can_focus">False</property>
+                        <property name="label" translatable="yes">&lt;i&gt;Mixed&lt;/i&gt; - Reset the index but not the working tree</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
                       </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
                     </child>
                   </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
                 </child>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label2">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Options&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">3</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vboxa">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label8">
+              <object class="GtkGrid" id="revision_container">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Revision&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="orientation">vertical</property>
+                <child>
+                  <placeholder/>
+                </child>
               </object>
               <packing>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="revision_container">
+              <object class="GtkLabel" id="label8">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <placeholder/>
-                </child>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">&lt;b&gt;Revision&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox2">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="row_spacing">6</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkVBox" id="vbox3">
+              <object class="GtkButton" id="browse">
                 <property name="visible">True</property>
-                <property name="orientation">vertical</property>
-                <property name="spacing">6</property>
-                <child>
-                  <object class="GtkLabel" id="label2">
-                    <property name="visible">True</property>
-                    <property name="xalign">0</property>
-                    <property name="label" translatable="yes">&lt;b&gt;Options&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                  <packing>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <signal name="clicked" handler="on_browse_clicked" swapped="no"/>
                 <child>
-                  <object class="GtkAlignment" id="alignment1">
+                  <object class="GtkImage" id="image1">
                     <property name="visible">True</property>
-                    <property name="left_padding">12</property>
-                    <child>
-                      <object class="GtkVBox" id="vbox4">
-                        <property name="visible">True</property>
-                        <property name="orientation">vertical</property>
-                        <property name="spacing">6</property>
-                        <child>
-                          <object class="GtkRadioButton" id="mixed_opt">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="draw_indicator">True</property>
-                            <child>
-                              <object class="GtkLabel" id="label4">
-                                <property name="visible">True</property>
-                                <property name="label" translatable="yes">&lt;i&gt;Mixed&lt;/i&gt; - Reset the index but not the working tree</property>
-                                <property name="use_markup">True</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkRadioButton" id="soft_opt">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="draw_indicator">True</property>
-                            <property name="group">mixed_opt</property>
-                            <child>
-                              <object class="GtkLabel" id="label5">
-                                <property name="visible">True</property>
-                                <property name="label" translatable="yes">&lt;i&gt;Soft&lt;/i&gt; - Does not touch the index file or working tree at all, 
-but requires them to be in good working order</property>
-                                <property name="use_markup">True</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkRadioButton" id="hard_opt">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="draw_indicator">True</property>
-                            <property name="group">mixed_opt</property>
-                            <child>
-                              <object class="GtkLabel" id="label6">
-                                <property name="visible">True</property>
-                                <property name="label" translatable="yes">&lt;i&gt;Hard&lt;/i&gt; - Matches the working tree and index to that of the 
-tree being switched to</property>
-                                <property name="use_markup">True</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="position">2</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkRadioButton" id="merge_opt">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="draw_indicator">True</property>
-                            <property name="group">mixed_opt</property>
-                            <child>
-                              <object class="GtkLabel" id="label7">
-                                <property name="visible">True</property>
-                                <property name="label" translatable="yes">&lt;i&gt;Merge&lt;/i&gt; - Resets the index to match the tree recorded by the named commit,
-and updates the files that are different between the named commit
-and the current commit in the working tree</property>
-                                <property name="use_markup">True</property>
-                              </object>
-                            </child>
-                          </object>
-                          <packing>
-                            <property name="position">3</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkRadioButton" id="none_opt">
-                            <property name="label" translatable="yes">None</property>
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                            <property name="receives_default">False</property>
-                            <property name="active">True</property>
-                            <property name="draw_indicator">True</property>
-                            <property name="group">mixed_opt</property>
-                          </object>
-                          <packing>
-                            <property name="position">4</property>
-                          </packing>
-                        </child>
-                      </object>
-                    </child>
+                    <property name="can_focus">False</property>
+                    <property name="icon_name">drive-harddisk</property>
                   </object>
-                  <packing>
-                    <property name="position">1</property>
-                  </packing>
                 </child>
+                <accelerator key="p" signal="clicked" modifiers="GDK_MOD1_MASK"/>
               </object>
               <packing>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkEntry" id="path">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="invisible_char">●</property>
+                <signal name="changed" handler="on_path_changed" swapped="no"/>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label9">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Path&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+                <property name="width">2</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="position">3</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkLabel" id="label3">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_cancel_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">Reset current HEAD to specified state.</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_ok_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Reset your Repository&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">4</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/revert.xml rabbitvcs/rabbitvcs/ui/xml/revert.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/revert.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/revert.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,86 +1,61 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Revert">
     <property name="width_request">450</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Revert</property>
     <property name="window_position">center</property>
     <property name="default_width">400</property>
     <property name="default_height">300</property>
     <property name="icon_name">rabbitvcs-small</property>
     <property name="gravity">center</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">6</property>
+        <property name="row_spacing">6</property>
         <child>
-          <object class="GtkScrolledWindow" id="scrolledwindow1">
-            <property name="height_request">200</property>
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="can_focus">True</property>
-            <property name="hscrollbar_policy">automatic</property>
-            <property name="vscrollbar_policy">automatic</property>
-            <property name="shadow_type">etched-in</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <child>
-              <object class="GtkTreeView" id="files_table">
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-              </object>
-            </child>
-          </object>
-          <packing>
-            <property name="position">0</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkCheckButton" id="select_all">
-            <property name="label" translatable="yes">Select / Deselect all</property>
-            <property name="visible">True</property>
-            <property name="can_focus">True</property>
-            <property name="receives_default">False</property>
-            <property name="active">True</property>
-            <property name="draw_indicator">True</property>
-            <signal handler="on_select_all_toggled" name="toggled"/>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHBox" id="hbox1">
-            <property name="visible">True</property>
-            <child>
-              <object class="GtkLabel" id="status">
-                <property name="visible">True</property>
-                <property name="xalign">0</property>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkHButtonBox" id="hbuttonbox2">
+              <object class="GtkButtonBox" id="hbuttonbox2">
                 <property name="visible">True</property>
+                <property name="can_focus">False</property>
                 <property name="spacing">6</property>
                 <property name="layout_style">end</property>
                 <child>
                   <object class="GtkButton" id="cancel">
-                    <property name="label">gtk-cancel</property>
+                    <property name="label" translatable="yes">_Cancel</property>
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
                     <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_cancel_clicked" name="clicked"/>
+                    <property name="image">rabbitvcs-cancel</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
                   </object>
                   <packing>
                     <property name="expand">False</property>
@@ -90,12 +65,13 @@
                 </child>
                 <child>
                   <object class="GtkButton" id="ok">
-                    <property name="label">gtk-ok</property>
+                    <property name="label" translatable="yes">_OK</property>
                     <property name="visible">True</property>
                     <property name="can_focus">True</property>
                     <property name="receives_default">True</property>
-                    <property name="use_stock">True</property>
-                    <signal handler="on_ok_clicked" name="clicked"/>
+                    <property name="image">rabbitvcs-ok</property>
+                    <property name="use_underline">True</property>
+                    <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
                   </object>
                   <packing>
                     <property name="expand">False</property>
@@ -105,21 +81,69 @@
                 </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="pack_type">end</property>
-                <property name="position">1</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="status">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="xalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkCheckButton" id="select_all">
+            <property name="label" translatable="yes">Select / Deselect all</property>
+            <property name="visible">True</property>
+            <property name="can_focus">True</property>
+            <property name="receives_default">False</property>
+            <property name="halign">start</property>
+            <property name="hexpand">True</property>
+            <property name="active">True</property>
+            <property name="draw_indicator">True</property>
+            <signal name="toggled" handler="on_select_all_toggled" swapped="no"/>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
+        <child>
+          <object class="GtkScrolledWindow" id="scrolledwindow1">
+            <property name="height_request">200</property>
+            <property name="visible">True</property>
+            <property name="can_focus">True</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
+            <property name="shadow_type">etched-in</property>
+            <child>
+              <object class="GtkTreeView" id="files_table">
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <child internal-child="selection">
+                  <object class="GtkTreeSelection"/>
+                </child>
+              </object>
+            </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
     </child>
   </object>
-</interface>
\ No newline at end of file
+</interface>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/settings.xml rabbitvcs/rabbitvcs/ui/xml/settings.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/settings.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/settings.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,7 +1,47 @@
 <?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <requires lib="gtk+" version="2.18"/>
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="edit-clear-1">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">edit-clear</property>
+  </object>
+  <object class="GtkImage" id="edit-clear-2">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">edit-clear</property>
+  </object>
+  <object class="GtkImage" id="edit-clear-3">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">edit-clear</property>
+  </object>
+  <object class="GtkImage" id="process-stop">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">process-stop</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
+  <object class="GtkImage" id="system-run">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">system-run</property>
+  </object>
+  <object class="GtkImage" id="view-refresh">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">view-refresh</property>
+  </object>
   <object class="GtkWindow" id="Settings">
     <property name="width_request">550</property>
     <property name="height_request">425</property>
@@ -13,266 +53,334 @@
     <signal name="destroy" handler="on_destroy" swapped="no"/>
     <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox1">
+      <placeholder/>
+    </child>
+    <child>
+      <object class="GtkGrid">
         <property name="visible">True</property>
         <property name="can_focus">False</property>
-        <property name="border_width">12</property>
-        <property name="spacing">18</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="row_spacing">18</property>
+        <child>
+          <object class="GtkButtonBox" id="hbuttonbox1">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="spacing">6</property>
+            <property name="layout_style">end</property>
+            <child>
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
+              </object>
+              <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
+                <property name="position">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
+              </object>
+              <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
+                <property name="position">1</property>
+              </packing>
+            </child>
+          </object>
+          <packing>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
+          </packing>
+        </child>
         <child>
           <object class="GtkNotebook" id="pages">
             <property name="visible">True</property>
             <property name="can_focus">True</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <child>
-              <object class="GtkVBox" id="vbox3">
+              <object class="GtkGrid" id="general_page">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="margin_right">12</property>
+                <property name="margin_top">12</property>
+                <property name="margin_bottom">12</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">18</property>
                 <child>
-                  <object class="GtkVBox" id="vbox4">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="border_width">12</property>
-                    <property name="spacing">6</property>
+                    <property name="hexpand">True</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkLabel" id="label8">
+                      <object class="GtkLabel" id="label10">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;RabbitVCS&lt;/b&gt;</property>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Version Control Systems&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkAlignment" id="alignment2">
+                      <object class="GtkGrid">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="left_padding">12</property>
+                        <property name="margin_left">12</property>
+                        <property name="hexpand">True</property>
+                        <property name="orientation">vertical</property>
                         <child>
-                          <object class="GtkVBox" id="vbox5">
+                          <object class="GtkCheckButton" id="enable_subversion">
+                            <property name="label" translatable="yes">Enable Subversion</property>
                             <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <object class="GtkVBox" id="vbox13">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <child>
-                                  <object class="GtkCheckButton" id="enable_attributes">
-                                    <property name="label" translatable="yes">Enable file attributes</property>
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="receives_default">False</property>
-                                    <property name="active">True</property>
-                                    <property name="draw_indicator">True</property>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">False</property>
-                                    <property name="fill">False</property>
-                                    <property name="position">0</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkCheckButton" id="enable_recursive">
-                                    <property name="label" translatable="yes">Enable recursive status checks</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="receives_default">False</property>
-                                    <property name="active">True</property>
-                                    <property name="draw_indicator">True</property>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">False</property>
-                                    <property name="fill">False</property>
-                                    <property name="position">2</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkCheckButton" id="enable_emblems">
-                                    <property name="label" translatable="yes">Enable emblems</property>
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="receives_default">False</property>
-                                    <property name="active">True</property>
-                                    <property name="draw_indicator">True</property>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">False</property>
-                                    <property name="fill">False</property>
-                                    <property name="position">2</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkCheckButton" id="show_debug">
-                                    <property name="label" translatable="yes">Show RabbitVCS debugging tools</property>
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="receives_default">False</property>
-                                    <property name="tooltip_text" translatable="yes">The debug menu is used to diagnose problems with RabbitVCS itself</property>
-                                    <property name="draw_indicator">True</property>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">False</property>
-                                    <property name="fill">False</property>
-                                    <property name="position">3</property>
-                                  </packing>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="halign">start</property>
+                            <property name="hexpand">True</property>
+                            <property name="active">True</property>
+                            <property name="draw_indicator">True</property>
                           </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkCheckButton" id="enable_git">
+                            <property name="label" translatable="yes">Enable Git</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="halign">start</property>
+                            <property name="hexpand">True</property>
+                            <property name="active">True</property>
+                            <property name="draw_indicator">True</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">1</property>
+                          </packing>
                         </child>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
                       </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkVBox" id="vbox20">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="border_width">12</property>
-                    <property name="spacing">6</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkLabel" id="label10">
+                      <object class="GtkGrid">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;Version Control Systems&lt;/b&gt;</property>
-                        <property name="use_markup">True</property>
+                        <property name="margin_left">12</property>
+                        <property name="hexpand">True</property>
+                        <property name="orientation">vertical</property>
+                        <property name="column_spacing">5</property>
+                        <child>
+                          <object class="GtkCheckButton" id="show_debug">
+                            <property name="label" translatable="yes">Show RabbitVCS debugging tools</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="tooltip_text" translatable="yes">The debug menu is used to diagnose problems with RabbitVCS itself</property>
+                            <property name="halign">start</property>
+                            <property name="hexpand">True</property>
+                            <property name="draw_indicator">True</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">3</property>
+                            <property name="width">2</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkCheckButton" id="enable_emblems">
+                            <property name="label" translatable="yes">Enable emblems</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="halign">start</property>
+                            <property name="hexpand">True</property>
+                            <property name="active">True</property>
+                            <property name="draw_indicator">True</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">2</property>
+                            <property name="width">2</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkCheckButton" id="enable_recursive">
+                            <property name="label" translatable="yes">Enable recursive status checks</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="halign">start</property>
+                            <property name="hexpand">True</property>
+                            <property name="active">True</property>
+                            <property name="draw_indicator">True</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">1</property>
+                            <property name="width">2</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkCheckButton" id="enable_attributes">
+                            <property name="label" translatable="yes">Enable file attributes</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="halign">start</property>
+                            <property name="hexpand">True</property>
+                            <property name="active">True</property>
+                            <property name="draw_indicator">True</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
+                            <property name="width">2</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkLabel">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="halign">start</property>
+                            <property name="hexpand">False</property>
+                            <property name="label" translatable="yes">Date/time format</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">4</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkComboBox" id="datetime_format">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="halign">start</property>
+                            <property name="hexpand">True</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">4</property>
+                          </packing>
+                        </child>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkAlignment" id="alignment7">
+                      <object class="GtkLabel" id="label8">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="left_padding">12</property>
-                        <child>
-                          <object class="GtkVBox" id="vbox21">
-                            <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <child>
-                              <object class="GtkCheckButton" id="enable_subversion">
-                                <property name="label" translatable="yes">Enable Subversion</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="active">True</property>
-                                <property name="draw_indicator">True</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkCheckButton" id="enable_git">
-                                <property name="label" translatable="yes">Enable Git</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="active">True</property>
-                                <property name="draw_indicator">True</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
-                          </object>
-                        </child>
+                        <property name="label" translatable="yes">&lt;b&gt;RabbitVCS&lt;/b&gt;</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">True</property>
-                    <property name="position">1</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkVBox" id="vbox17">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="border_width">12</property>
-                    <property name="spacing">6</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkLabel" id="label19">
+                      <object class="GtkLabel">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;Language&lt;/b&gt;</property>
+                        <property name="halign">start</property>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Default Commit Message&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkAlignment" id="alignment4">
+                      <object class="GtkScrolledWindow">
                         <property name="visible">True</property>
-                        <property name="can_focus">False</property>
-                        <property name="left_padding">12</property>
+                        <property name="can_focus">True</property>
+                        <property name="hexpand">True</property>
+                        <property name="vexpand">True</property>
+                        <property name="hscrollbar_policy">never</property>
+                        <property name="shadow_type">in</property>
                         <child>
-                          <object class="GtkVBox" id="vbox18">
+                          <object class="GtkTextView" id="default_commit_message">
                             <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <object class="GtkComboBox" id="language">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="pack_type">end</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
+                            <property name="can_focus">True</property>
+                            <property name="hexpand">True</property>
+                            <property name="vexpand">True</property>
+                            <property name="pixels_below_lines">7</property>
+                            <property name="wrap_mode">word</property>
+                            <property name="accepts_tab">False</property>
                           </object>
                         </child>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
                       </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">2</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
                   </packing>
                 </child>
               </object>
@@ -287,182 +395,175 @@
               </packing>
             </child>
             <child>
-              <object class="GtkVBox" id="vbox2">
+              <object class="GtkGrid" id="external_page">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
-                <property name="border_width">12</property>
-                <property name="spacing">18</property>
+                <property name="margin_left">12</property>
+                <property name="margin_right">12</property>
+                <property name="margin_top">12</property>
+                <property name="margin_bottom">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">18</property>
                 <child>
-                  <object class="GtkVBox" id="vbox7">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="spacing">6</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkLabel" id="label4">
+                      <object class="GtkLabel" id="merge_label">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;Program used to compare files&lt;/b&gt;</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Configure the program to resolve conflicted files.&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkAlignment" id="alignment1">
+                      <object class="GtkGrid">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="left_padding">12</property>
+                        <property name="margin_left">12</property>
+                        <property name="hexpand">True</property>
+                        <property name="orientation">vertical</property>
                         <child>
-                          <object class="GtkVBox" id="vbox8">
+                          <object class="GtkLabel" id="merge_arg_hints">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <object class="GtkHBox" id="hbox1">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="spacing">6</property>
-                                <child>
-                                  <object class="GtkEntry" id="diff_tool">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="primary_icon_activatable">False</property>
-                                    <property name="secondary_icon_activatable">False</property>
-                                    <property name="primary_icon_sensitive">True</property>
-                                    <property name="secondary_icon_sensitive">True</property>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">True</property>
-                                    <property name="fill">True</property>
-                                    <property name="position">0</property>
-                                  </packing>
-                                </child>
-                                <child>
-                                  <object class="GtkButton" id="diff_tool_browse">
-                                    <property name="visible">True</property>
-                                    <property name="can_focus">True</property>
-                                    <property name="receives_default">True</property>
-                                    <property name="tooltip_text" translatable="yes">Browse...</property>
-                                    <signal name="clicked" handler="on_external_diff_tool_browse_clicked" swapped="no"/>
-                                    <child>
-                                      <object class="GtkImage" id="image1">
-                                        <property name="visible">True</property>
-                                        <property name="can_focus">False</property>
-                                        <property name="stock">gtk-harddisk</property>
-                                      </object>
-                                    </child>
-                                  </object>
-                                  <packing>
-                                    <property name="expand">False</property>
-                                    <property name="fill">False</property>
-                                    <property name="position">1</property>
-                                  </packing>
-                                </child>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkCheckButton" id="diff_tool_swap">
-                                <property name="label" translatable="yes">Show new version on the left side</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">False</property>
-                                <property name="draw_indicator">True</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
+                            <property name="label" translatable="yes">Use the following macros to configure the merge tool:
+%base       - The common ancestor of the two files to be merged.
+%mine      - The file you modified in your working copy.
+%theirs    - The file being merged into your working copy.
+%merged - The file to store the merged result.</property>
+                            <property name="track_visited_links">False</property>
+                            <property name="xalign">0</property>
                           </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">1</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkEntry" id="merge_tool">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="hexpand">True</property>
+                            <property name="invisible_char">•</property>
+                            <property name="primary_icon_activatable">False</property>
+                            <property name="secondary_icon_activatable">False</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
+                          </packing>
                         </child>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkLabel" id="merge_label">
-                        <property name="visible">True</property>
-                        <property name="can_focus">False</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;Configure the program to resolve conflicted files.&lt;/b&gt;</property>
-                        <property name="use_markup">True</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">2</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
                       </packing>
                     </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkGrid">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkAlignment" id="alignment6">
+                      <object class="GtkGrid">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="left_padding">12</property>
+                        <property name="margin_left">12</property>
+                        <property name="hexpand">True</property>
+                        <property name="orientation">vertical</property>
+                        <property name="row_spacing">6</property>
+                        <property name="column_spacing">6</property>
                         <child>
-                          <object class="GtkVBox" id="vbox19">
+                          <object class="GtkButton" id="diff_tool_browse">
                             <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <child>
-                              <object class="GtkEntry" id="merge_tool">
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="invisible_char">•</property>
-                                <property name="primary_icon_activatable">False</property>
-                                <property name="secondary_icon_activatable">False</property>
-                                <property name="primary_icon_sensitive">True</property>
-                                <property name="secondary_icon_sensitive">True</property>
-                              </object>
-                              <packing>
-                                <property name="expand">True</property>
-                                <property name="fill">True</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">True</property>
+                            <property name="tooltip_text" translatable="yes">Browse...</property>
+                            <signal name="clicked" handler="on_external_diff_tool_browse_clicked" swapped="no"/>
                             <child>
-                              <object class="GtkLabel" id="merge_arg_hints">
+                              <object class="GtkImage" id="image1">
                                 <property name="visible">True</property>
                                 <property name="can_focus">False</property>
-                                <property name="xalign">0</property>
-                                <property name="label" translatable="yes">Use the following macros to configure the merge tool:
-%base       - The common ancestor of the two files to be merged.
-%mine      - The file you modified in your working copy.
-%theirs    - The file being merged into your working copy.
-%merged - The file to store the merged result.</property>
-                                <property name="track_visited_links">False</property>
+                                <property name="icon_name">drive-harddisk</property>
                               </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
-                              </packing>
                             </child>
+                            <accelerator key="p" signal="clicked" modifiers="GDK_MOD1_MASK"/>
+                          </object>
+                          <packing>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkCheckButton" id="diff_tool_swap">
+                            <property name="label" translatable="yes">Show new version on the left side</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">False</property>
+                            <property name="halign">start</property>
+                            <property name="hexpand">True</property>
+                            <property name="draw_indicator">True</property>
                           </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">1</property>
+                            <property name="width">2</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkEntry" id="diff_tool">
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="hexpand">True</property>
+                            <property name="primary_icon_activatable">False</property>
+                            <property name="secondary_icon_activatable">False</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
+                          </packing>
                         </child>
                       </object>
                       <packing>
-                        <property name="expand">True</property>
-                        <property name="fill">True</property>
-                        <property name="position">3</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkLabel" id="label4">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Program used to compare files&lt;/b&gt;</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
               </object>
@@ -482,550 +583,458 @@
               </packing>
             </child>
             <child>
-              <object class="GtkVBox" id="vbox6">
+              <object class="GtkGrid" id="saved_page">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
-                <property name="border_width">12</property>
-                <property name="spacing">18</property>
+                <property name="margin_left">12</property>
+                <property name="margin_right">12</property>
+                <property name="margin_top">12</property>
+                <property name="margin_bottom">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">18</property>
                 <child>
-                  <object class="GtkVBox" id="vbox10">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkLabel" id="label1">
-                        <property name="visible">True</property>
-                        <property name="can_focus">False</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;URL History&lt;/b&gt;</property>
-                        <property name="use_markup">True</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
+                    <property name="hexpand">True</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkAlignment" id="alignment8">
+                      <object class="GtkGrid">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="left_padding">12</property>
+                        <property name="margin_left">12</property>
+                        <property name="hexpand">True</property>
+                        <property name="column_spacing">6</property>
+                        <child>
+                          <object class="GtkButton" id="cache_clear_authentication">
+                            <property name="label" translatable="yes">Clear</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">True</property>
+                            <property name="image">edit-clear-3</property>
+                            <signal name="clicked" handler="on_cache_clear_authentication_clicked" swapped="no"/>
+                          </object>
+                          <packing>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">0</property>
+                          </packing>
+                        </child>
                         <child>
-                          <object class="GtkHBox" id="hbox2">
+                          <object class="GtkLabel" id="label6">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <object class="GtkLabel" id="label2">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="xalign">0</property>
-                                <property name="label" translatable="yes">Number of URLs to remember</property>
-                              </object>
-                              <packing>
-                                <property name="expand">True</property>
-                                <property name="fill">True</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkEntry" id="cache_number_repositories">
-                                <property name="width_request">60</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="primary_icon_activatable">False</property>
-                                <property name="secondary_icon_activatable">False</property>
-                                <property name="primary_icon_sensitive">True</property>
-                                <property name="secondary_icon_sensitive">True</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkButton" id="cache_clear_repositories">
-                                <property name="label">gtk-clear</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">True</property>
-                                <property name="use_stock">True</property>
-                                <signal name="clicked" handler="on_cache_clear_repositories_clicked" swapped="no"/>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">2</property>
-                              </packing>
-                            </child>
+                            <property name="hexpand">True</property>
+                            <property name="label" translatable="yes">Clear your authentication information</property>
+                            <property name="xalign">0.0099999997764825821</property>
                           </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
+                          </packing>
                         </child>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
                       </packing>
                     </child>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
-                <child>
-                  <object class="GtkVBox" id="vbox11">
-                    <property name="visible">True</property>
-                    <property name="can_focus">False</property>
-                    <property name="spacing">6</property>
                     <child>
-                      <object class="GtkLabel" id="label3">
+                      <object class="GtkLabel" id="label5">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;Log Messages&lt;/b&gt;</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Authentication&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkAlignment" id="alignment9">
-                        <property name="visible">True</property>
-                        <property name="can_focus">False</property>
-                        <property name="left_padding">12</property>
-                        <child>
-                          <object class="GtkHBox" id="hbox9">
-                            <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <object class="GtkLabel" id="label14">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="xalign">0</property>
-                                <property name="label" translatable="yes">Number of messages to remember</property>
-                                <property name="wrap_mode">word-char</property>
-                              </object>
-                              <packing>
-                                <property name="expand">True</property>
-                                <property name="fill">True</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkButton" id="cache_clear_messages">
-                                <property name="label">gtk-clear</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">True</property>
-                                <property name="use_stock">True</property>
-                                <signal name="clicked" handler="on_cache_clear_messages_clicked" swapped="no"/>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="pack_type">end</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkEntry" id="cache_number_messages">
-                                <property name="width_request">60</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="primary_icon_activatable">False</property>
-                                <property name="secondary_icon_activatable">False</property>
-                                <property name="primary_icon_sensitive">True</property>
-                                <property name="secondary_icon_sensitive">True</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">2</property>
-                              </packing>
-                            </child>
-                          </object>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">1</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkVBox" id="vbox12">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="spacing">6</property>
+                    <property name="hexpand">True</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkLabel" id="label5">
+                      <object class="GtkGrid">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="xalign">0</property>
-                        <property name="label" translatable="yes">&lt;b&gt;Authentication&lt;/b&gt;</property>
-                        <property name="use_markup">True</property>
+                        <property name="margin_left">12</property>
+                        <property name="hexpand">True</property>
+                        <property name="column_spacing">6</property>
+                        <child>
+                          <object class="GtkButton" id="cache_clear_messages">
+                            <property name="label" translatable="yes">Clear</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">True</property>
+                            <property name="image">edit-clear-2</property>
+                            <signal name="clicked" handler="on_cache_clear_messages_clicked" swapped="no"/>
+                          </object>
+                          <packing>
+                            <property name="left_attach">2</property>
+                            <property name="top_attach">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkEntry" id="cache_number_messages">
+                            <property name="width_request">60</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="primary_icon_activatable">False</property>
+                            <property name="secondary_icon_activatable">False</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkLabel" id="label14">
+                            <property name="visible">True</property>
+                            <property name="can_focus">False</property>
+                            <property name="hexpand">True</property>
+                            <property name="label" translatable="yes">Number of messages to remember</property>
+                            <property name="wrap_mode">word-char</property>
+                            <property name="xalign">0</property>
+                          </object>
+                          <packing>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
+                          </packing>
+                        </child>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkAlignment" id="alignment10">
+                      <object class="GtkLabel" id="label3">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="left_padding">12</property>
-                        <child>
-                          <object class="GtkHBox" id="hbox10">
-                            <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <property name="spacing">6</property>
-                            <child>
-                              <object class="GtkLabel" id="label6">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="xalign">0.0099999997764825821</property>
-                                <property name="label" translatable="yes">Clear your authentication information</property>
-                              </object>
-                              <packing>
-                                <property name="expand">True</property>
-                                <property name="fill">True</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkButton" id="cache_clear_authentication">
-                                <property name="label">gtk-clear</property>
-                                <property name="visible">True</property>
-                                <property name="can_focus">True</property>
-                                <property name="receives_default">True</property>
-                                <property name="use_stock">True</property>
-                                <signal name="clicked" handler="on_cache_clear_authentication_clicked" swapped="no"/>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="pack_type">end</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
-                          </object>
-                        </child>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Log Messages&lt;/b&gt;</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">2</property>
-                  </packing>
-                </child>
-              </object>
-              <packing>
-                <property name="position">2</property>
-              </packing>
-            </child>
-            <child type="tab">
-              <object class="GtkLabel" id="saved_data">
-                <property name="visible">True</property>
-                <property name="can_focus">False</property>
-                <property name="label" translatable="yes">Saved Data</property>
-              </object>
-              <packing>
-                <property name="position">2</property>
-                <property name="tab_fill">False</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkVBox" id="vbox14">
-                <property name="visible">True</property>
-                <property name="can_focus">False</property>
-                <property name="border_width">12</property>
-                <property name="spacing">6</property>
-                <child>
-                  <object class="GtkLabel" id="label9">
-                    <property name="visible">True</property>
-                    <property name="can_focus">False</property>
-                    <property name="xalign">0</property>
-                    <property name="yalign">0</property>
-                    <property name="label" translatable="yes">&lt;b&gt;Logging Options&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkAlignment" id="alignment3">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="left_padding">12</property>
+                    <property name="hexpand">True</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkVBox" id="vbox16">
+                      <object class="GtkGrid">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="spacing">6</property>
+                        <property name="margin_left">12</property>
+                        <property name="hexpand">True</property>
+                        <property name="column_spacing">6</property>
                         <child>
-                          <object class="GtkHBox" id="hbox5">
+                          <object class="GtkButton" id="cache_clear_repositories">
+                            <property name="label" translatable="yes">Clear</property>
                             <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <child>
-                              <object class="GtkLabel" id="label11">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="xalign">0</property>
-                                <property name="label" translatable="yes">Type:</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkComboBox" id="logging_type">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="pack_type">end</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
+                            <property name="can_focus">True</property>
+                            <property name="receives_default">True</property>
+                            <property name="image">edit-clear-1</property>
+                            <signal name="clicked" handler="on_cache_clear_repositories_clicked" swapped="no"/>
+                          </object>
+                          <packing>
+                            <property name="left_attach">2</property>
+                            <property name="top_attach">0</property>
+                          </packing>
+                        </child>
+                        <child>
+                          <object class="GtkEntry" id="cache_number_repositories">
+                            <property name="width_request">60</property>
+                            <property name="visible">True</property>
+                            <property name="can_focus">True</property>
+                            <property name="primary_icon_activatable">False</property>
+                            <property name="secondary_icon_activatable">False</property>
                           </object>
                           <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
+                            <property name="left_attach">1</property>
+                            <property name="top_attach">0</property>
                           </packing>
                         </child>
                         <child>
-                          <object class="GtkHBox" id="hbox7">
+                          <object class="GtkLabel" id="label2">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <child>
-                              <object class="GtkLabel" id="label12">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                                <property name="xalign">0</property>
-                                <property name="label" translatable="yes">Minimum level to log</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="position">0</property>
-                              </packing>
-                            </child>
-                            <child>
-                              <object class="GtkComboBox" id="logging_level">
-                                <property name="visible">True</property>
-                                <property name="can_focus">False</property>
-                              </object>
-                              <packing>
-                                <property name="expand">False</property>
-                                <property name="fill">False</property>
-                                <property name="pack_type">end</property>
-                                <property name="position">1</property>
-                              </packing>
-                            </child>
+                            <property name="hexpand">True</property>
+                            <property name="label" translatable="yes">Number of URLs to remember</property>
+                            <property name="xalign">0</property>
                           </object>
                           <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">1</property>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
                           </packing>
                         </child>
                       </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkLabel" id="label1">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">&lt;b&gt;URL History&lt;/b&gt;</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
+                      </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">True</property>
-                    <property name="fill">True</property>
-                    <property name="position">1</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
               </object>
               <packing>
-                <property name="position">3</property>
+                <property name="position">2</property>
               </packing>
             </child>
             <child type="tab">
-              <object class="GtkLabel" id="logging">
+              <object class="GtkLabel" id="saved_data">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
-                <property name="label" translatable="yes">Logging</property>
+                <property name="label" translatable="yes">Saved Data</property>
               </object>
               <packing>
-                <property name="position">3</property>
+                <property name="position">2</property>
                 <property name="tab_fill">False</property>
               </packing>
             </child>
             <child>
-              <object class="GtkVBox" id="vbox9">
+              <object class="GtkGrid" id="logging_page">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
-                <property name="border_width">12</property>
-                <property name="spacing">6</property>
+                <property name="margin_left">12</property>
+                <property name="margin_right">12</property>
+                <property name="margin_top">12</property>
+                <property name="margin_bottom">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">18</property>
                 <child>
-                  <object class="GtkAlignment" id="alignment5">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="yscale">0</property>
-                    <property name="left_padding">6</property>
-                    <property name="right_padding">6</property>
+                    <property name="hexpand">True</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <object class="GtkTable" id="table1">
+                      <object class="GtkLabel" id="label9">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="n_rows">3</property>
-                        <property name="n_columns">2</property>
-                        <property name="column_spacing">12</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Logging Options&lt;/b&gt;</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
+                        <property name="yalign">0</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkGrid">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="margin_left">12</property>
+                        <property name="hexpand">True</property>
+                        <property name="orientation">vertical</property>
                         <property name="row_spacing">6</property>
                         <child>
-                          <object class="GtkLabel" id="label13">
-                            <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">&lt;b&gt;Checker type:&lt;/b&gt;</property>
-                            <property name="use_markup">True</property>
-                          </object>
-                          <packing>
-                            <property name="x_options">GTK_FILL</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="label15">
-                            <property name="visible">True</property>
-                            <property name="can_focus">False</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">&lt;b&gt;Memory usage:&lt;/b&gt; </property>
-                            <property name="use_markup">True</property>
-                          </object>
-                          <packing>
-                            <property name="top_attach">2</property>
-                            <property name="bottom_attach">3</property>
-                            <property name="x_options">GTK_FILL</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkLabel" id="checker_type">
+                          <object class="GtkComboBox" id="logging_level">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Unknown</property>
                           </object>
                           <packing>
                             <property name="left_attach">1</property>
-                            <property name="right_attach">2</property>
-                            <property name="x_options">GTK_FILL</property>
+                            <property name="top_attach">1</property>
                           </packing>
                         </child>
                         <child>
-                          <object class="GtkLabel" id="memory_usage">
+                          <object class="GtkComboBox" id="logging_type">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
-                            <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Unknown</property>
                           </object>
                           <packing>
                             <property name="left_attach">1</property>
-                            <property name="right_attach">2</property>
-                            <property name="top_attach">2</property>
-                            <property name="bottom_attach">3</property>
-                            <property name="x_options">GTK_FILL</property>
+                            <property name="top_attach">0</property>
                           </packing>
                         </child>
                         <child>
-                          <object class="GtkLabel" id="label16">
+                          <object class="GtkLabel" id="label12">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
+                            <property name="hexpand">True</property>
+                            <property name="label" translatable="yes">Minimum level to log:</property>
                             <property name="xalign">0</property>
-                            <property name="label" translatable="yes">&lt;b&gt;Process ID:&lt;/b&gt;</property>
-                            <property name="use_markup">True</property>
                           </object>
                           <packing>
+                            <property name="left_attach">0</property>
                             <property name="top_attach">1</property>
-                            <property name="bottom_attach">2</property>
-                            <property name="x_options">GTK_FILL</property>
                           </packing>
                         </child>
                         <child>
-                          <object class="GtkLabel" id="pid">
+                          <object class="GtkLabel" id="label11">
                             <property name="visible">True</property>
                             <property name="can_focus">False</property>
+                            <property name="hexpand">True</property>
+                            <property name="label" translatable="yes">Type:</property>
                             <property name="xalign">0</property>
-                            <property name="label" translatable="yes">Unknown</property>
                           </object>
                           <packing>
-                            <property name="left_attach">1</property>
-                            <property name="right_attach">2</property>
-                            <property name="top_attach">1</property>
-                            <property name="bottom_attach">2</property>
-                            <property name="x_options">GTK_FILL</property>
+                            <property name="left_attach">0</property>
+                            <property name="top_attach">0</property>
                           </packing>
                         </child>
                       </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
+                      </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">True</property>
-                    <property name="padding">6</property>
-                    <property name="position">0</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
+              </object>
+              <packing>
+                <property name="position">3</property>
+              </packing>
+            </child>
+            <child type="tab">
+              <object class="GtkLabel" id="logging">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="label" translatable="yes">Logging</property>
+              </object>
+              <packing>
+                <property name="position">3</property>
+                <property name="tab_fill">False</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkGrid" id="checker_page">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="margin_right">12</property>
+                <property name="margin_top">12</property>
+                <property name="margin_bottom">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">18</property>
                 <child>
-                  <object class="GtkHSeparator" id="hseparator1">
+                  <object class="GtkButtonBox" id="hbuttonbox2">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
+                    <property name="layout_style">center</property>
+                    <child>
+                      <object class="GtkButton" id="refresh_info">
+                        <property name="label" translatable="yes">Refresh Information</property>
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">True</property>
+                        <property name="image">view-refresh</property>
+                        <signal name="clicked" handler="on_refresh_info_clicked" swapped="no"/>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">False</property>
+                        <property name="position">0</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkButton" id="restart_checker">
+                        <property name="label" translatable="yes">Restart Checker</property>
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">True</property>
+                        <property name="image">system-run</property>
+                        <signal name="clicked" handler="on_restart_checker_clicked" swapped="no"/>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">False</property>
+                        <property name="position">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkButton" id="stop_checker">
+                        <property name="label" translatable="yes">Stop Checker</property>
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="receives_default">True</property>
+                        <property name="image">process-stop</property>
+                        <property name="yalign">0.54000002145767212</property>
+                        <signal name="clicked" handler="on_stop_checker_clicked" swapped="no"/>
+                      </object>
+                      <packing>
+                        <property name="expand">False</property>
+                        <property name="fill">False</property>
+                        <property name="position">2</property>
+                      </packing>
+                    </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">True</property>
-                    <property name="position">1</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">3</property>
                   </packing>
                 </child>
                 <child>
                   <object class="GtkFrame" id="frame1">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
+                    <property name="hexpand">True</property>
                     <property name="label_xalign">0</property>
                     <property name="shadow_type">none</property>
                     <child>
-                      <object class="GtkAlignment" id="info_table_area">
+                      <object class="GtkGrid" id="info_table_area">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
-                        <property name="yalign">0</property>
-                        <property name="yscale">0</property>
-                        <property name="top_padding">12</property>
-                        <property name="bottom_padding">12</property>
-                        <property name="left_padding">12</property>
-                        <property name="right_padding">12</property>
+                        <property name="margin_left">12</property>
+                        <property name="margin_right">12</property>
+                        <property name="margin_top">12</property>
+                        <property name="margin_bottom">12</property>
+                        <property name="hexpand">True</property>
+                        <property name="orientation">vertical</property>
                         <child>
                           <placeholder/>
                         </child>
@@ -1035,70 +1044,143 @@
                       <object class="GtkLabel" id="label7">
                         <property name="visible">True</property>
                         <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
                         <property name="label" translatable="yes">&lt;b&gt;Other Information&lt;/b&gt;</property>
                         <property name="use_markup">True</property>
                       </object>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">True</property>
-                    <property name="fill">True</property>
-                    <property name="position">2</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">2</property>
                   </packing>
                 </child>
                 <child>
-                  <object class="GtkHButtonBox" id="hbuttonbox2">
+                  <object class="GtkSeparator">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="layout_style">center</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkGrid">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="margin_left">6</property>
+                    <property name="hexpand">True</property>
+                    <property name="row_spacing">6</property>
+                    <property name="column_spacing">12</property>
                     <child>
-                      <object class="GtkButton" id="refresh_info">
-                        <property name="label" translatable="yes">Refresh Information</property>
+                      <object class="GtkLabel" id="label13">
                         <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">True</property>
-                        <signal name="clicked" handler="on_refresh_info_clicked" swapped="no"/>
+                        <property name="can_focus">False</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Checker type:&lt;/b&gt;</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkButton" id="restart_checker">
-                        <property name="label" translatable="yes">Restart Checker</property>
+                      <object class="GtkLabel" id="checker_type">
                         <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">True</property>
-                        <signal name="clicked" handler="on_restart_checker_clicked" swapped="no"/>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">Unknown</property>
+                        <property name="xalign">0</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
+                        <property name="left_attach">1</property>
+                        <property name="top_attach">0</property>
                       </packing>
                     </child>
                     <child>
-                      <object class="GtkButton" id="stop_checker">
-                        <property name="label" translatable="yes">Stop Checker</property>
+                      <object class="GtkLabel" id="pid">
                         <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">True</property>
-                        <property name="yalign">0.54000002145767212</property>
-                        <signal name="clicked" handler="on_stop_checker_clicked" swapped="no"/>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">Unknown</property>
+                        <property name="xalign">0</property>
                       </object>
                       <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">2</property>
+                        <property name="left_attach">1</property>
+                        <property name="top_attach">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkLabel" id="memory_usage">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">Unknown</property>
+                        <property name="xalign">0</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">1</property>
+                        <property name="top_attach">2</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkLabel" id="label16">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Process ID:&lt;/b&gt;</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkLabel" id="label15">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Memory usage:&lt;/b&gt; </property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">2</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkLabel" id="label17">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Locale:&lt;/b&gt; </property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">3</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkLabel" id="locale">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">Unknown</property>
+                        <property name="xalign">0</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">1</property>
+                        <property name="top_attach">3</property>
                       </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">3</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
               </object>
@@ -1118,38 +1200,60 @@
               </packing>
             </child>
             <child>
-              <object class="GtkVBox" id="vbox15">
+              <object class="GtkGrid" id="git_page">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
-                <property name="border_width">12</property>
-                <property name="spacing">6</property>
-                <child>
-                  <object class="GtkLabel" id="label18">
-                    <property name="visible">True</property>
-                    <property name="can_focus">False</property>
-                    <property name="xalign">0</property>
-                    <property name="label" translatable="yes">&lt;b&gt;Configuration Editor&lt;/b&gt;</property>
-                    <property name="use_markup">True</property>
-                  </object>
-                  <packing>
-                    <property name="expand">False</property>
-                    <property name="fill">False</property>
-                    <property name="position">0</property>
-                  </packing>
-                </child>
+                <property name="margin_left">12</property>
+                <property name="margin_right">12</property>
+                <property name="margin_top">12</property>
+                <property name="margin_bottom">12</property>
+                <property name="hexpand">True</property>
+                <property name="vexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">18</property>
                 <child>
-                  <object class="GtkAlignment" id="git_config_container">
+                  <object class="GtkGrid">
                     <property name="visible">True</property>
                     <property name="can_focus">False</property>
-                    <property name="left_padding">12</property>
+                    <property name="hexpand">True</property>
+                    <property name="vexpand">True</property>
+                    <property name="orientation">vertical</property>
+                    <property name="row_spacing">6</property>
                     <child>
-                      <placeholder/>
+                      <object class="GtkLabel" id="label18">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="hexpand">True</property>
+                        <property name="label" translatable="yes">&lt;b&gt;Configuration Editor&lt;/b&gt;</property>
+                        <property name="use_markup">True</property>
+                        <property name="xalign">0</property>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">0</property>
+                      </packing>
+                    </child>
+                    <child>
+                      <object class="GtkGrid" id="git_config_container">
+                        <property name="visible">True</property>
+                        <property name="can_focus">False</property>
+                        <property name="margin_left">12</property>
+                        <property name="hexpand">True</property>
+                        <property name="vexpand">True</property>
+                        <property name="orientation">vertical</property>
+                        <child>
+                          <placeholder/>
+                        </child>
+                      </object>
+                      <packing>
+                        <property name="left_attach">0</property>
+                        <property name="top_attach">1</property>
+                      </packing>
                     </child>
                   </object>
                   <packing>
-                    <property name="expand">True</property>
-                    <property name="fill">True</property>
-                    <property name="position">1</property>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
                   </packing>
                 </child>
               </object>
@@ -1158,7 +1262,7 @@
               </packing>
             </child>
             <child type="tab">
-              <object class="GtkLabel" id="label17">
+              <object class="GtkLabel" id="git">
                 <property name="visible">True</property>
                 <property name="can_focus">False</property>
                 <property name="label" translatable="yes">Git</property>
@@ -1170,53 +1274,8 @@
             </child>
           </object>
           <packing>
-            <property name="expand">True</property>
-            <property name="fill">True</property>
-            <property name="position">0</property>
-          </packing>
-        </child>
-        <child>
-          <object class="GtkHButtonBox" id="hbuttonbox1">
-            <property name="visible">True</property>
-            <property name="can_focus">False</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
-            <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
-              </packing>
-            </child>
-            <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
-                <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
-              </object>
-              <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
-              </packing>
-            </child>
-          </object>
-          <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/switch.xml rabbitvcs/rabbitvcs/ui/xml/switch.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/switch.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/switch.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,111 +1,72 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.0"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Switch">
     <property name="width_request">550</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Switch</property>
     <property name="window_position">center</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal handler="on_destroy" name="destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
     <child>
-      <object class="GtkVBox" id="vbox19">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
         <property name="orientation">vertical</property>
-        <property name="spacing">18</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="vbox1">
+          <object class="GtkButtonBox" id="hbuttonbox13">
             <property name="visible">True</property>
-            <property name="orientation">vertical</property>
+            <property name="can_focus">False</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="label1">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Switch Details&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
+                <property name="expand">False</property>
+                <property name="fill">False</property>
                 <property name="position">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment1">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox20">
-                    <property name="visible">True</property>
-                    <property name="orientation">vertical</property>
-                    <property name="spacing">6</property>
-                    <child>
-                      <object class="GtkHBox" id="hbox1">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label23">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="xpad">5</property>
-                            <property name="label" translatable="yes">From:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkEntry" id="path">
-                            <property name="visible">True</property>
-                            <property name="can_focus">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkHBox" id="hbox5">
-                        <property name="visible">True</property>
-                        <child>
-                          <object class="GtkLabel" id="label11">
-                            <property name="width_request">100</property>
-                            <property name="visible">True</property>
-                            <property name="xalign">0</property>
-                            <property name="xpad">5</property>
-                            <property name="label" translatable="yes">To:</property>
-                          </object>
-                          <packing>
-                            <property name="expand">False</property>
-                            <property name="fill">False</property>
-                            <property name="position">0</property>
-                          </packing>
-                        </child>
-                        <child>
-                          <object class="GtkComboBoxEntry" id="repositories">
-                            <property name="visible">True</property>
-                          </object>
-                          <packing>
-                            <property name="position">1</property>
-                          </packing>
-                        </child>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -115,89 +76,146 @@
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="vbox2">
+          <object class="GtkGrid">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
             <property name="orientation">vertical</property>
-            <property name="spacing">6</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label2">
+              <object class="GtkGrid" id="revision_container">
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Revision&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <child>
+                  <placeholder/>
+                </child>
               </object>
               <packing>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="revision_container">
+              <object class="GtkLabel" id="label2">
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <placeholder/>
-                </child>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Revision&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox13">
+          <object class="GtkGrid">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="orientation">vertical</property>
+            <property name="row_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkGrid">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_cancel_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="margin_left">12</property>
+                <property name="hexpand">True</property>
+                <property name="orientation">vertical</property>
+                <property name="row_spacing">6</property>
+                <property name="column_spacing">6</property>
+                <child>
+                  <object class="GtkComboBoxText" id="repositories">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="has_entry">True</property>
+                    <child internal-child="entry">
+                      <object class="GtkEntry">
+                        <property name="visible">True</property>
+                        <property name="can_focus">True</property>
+                        <property name="hexpand">True</property>
+                      </object>
+                    </child>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label11">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">To:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">1</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkEntry" id="path">
+                    <property name="visible">True</property>
+                    <property name="can_focus">True</property>
+                    <property name="hexpand">True</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">1</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
+                <child>
+                  <object class="GtkLabel" id="label23">
+                    <property name="visible">True</property>
+                    <property name="can_focus">False</property>
+                    <property name="label" translatable="yes">From:</property>
+                    <property name="xalign">0</property>
+                  </object>
+                  <packing>
+                    <property name="left_attach">0</property>
+                    <property name="top_attach">0</property>
+                  </packing>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">1</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="label1">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal handler="on_ok_clicked" name="clicked"/>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Switch Details&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/ui/xml/update.xml rabbitvcs/rabbitvcs/ui/xml/update.xml
--- rabbitvcs-0.17.1/rabbitvcs/ui/xml/update.xml	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/ui/xml/update.xml	2019-09-13 08:36:17.261343300 +0800
@@ -1,30 +1,59 @@
-<?xml version="1.0"?>
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Generated with glade 3.22.1 -->
 <interface>
-  <!-- interface-requires gtk+ 2.6 -->
-  <!-- interface-naming-policy toplevel-contextual -->
+  <requires lib="gtk+" version="3.20"/>
+  <object class="GtkImage" id="rabbitvcs-cancel">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-cancel</property>
+  </object>
+  <object class="GtkImage" id="rabbitvcs-ok">
+    <property name="visible">True</property>
+    <property name="can_focus">False</property>
+    <property name="icon_name">rabbitvcs-ok</property>
+  </object>
   <object class="GtkWindow" id="Update">
     <property name="width_request">400</property>
     <property name="visible">True</property>
+    <property name="can_focus">False</property>
     <property name="title" translatable="yes">Update</property>
     <property name="window_position">center-always</property>
     <property name="icon_name">rabbitvcs-small</property>
-    <signal name="destroy" handler="on_destroy"/>
-    <signal handler="on_key_pressed" name="key_press_event"/>
+    <signal name="destroy" handler="on_destroy" swapped="no"/>
+    <signal name="key-press-event" handler="on_key_pressed" swapped="no"/>
+    <child type="titlebar">
+      <placeholder/>
+    </child>
     <child>
-      <object class="GtkVBox" id="vbox25">
+      <object class="GtkGrid">
         <property name="visible">True</property>
-        <property name="border_width">12</property>
-        <property name="spacing">18</property>
+        <property name="can_focus">False</property>
+        <property name="margin_left">12</property>
+        <property name="margin_right">12</property>
+        <property name="margin_top">12</property>
+        <property name="margin_bottom">12</property>
+        <property name="hexpand">True</property>
+        <property name="vexpand">True</property>
+        <property name="orientation">vertical</property>
+        <property name="row_spacing">18</property>
         <child>
-          <object class="GtkVBox" id="revision_box">
+          <object class="GtkButtonBox" id="hbuttonbox16">
             <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="valign">end</property>
+            <property name="hexpand">True</property>
+            <property name="vexpand">True</property>
             <property name="spacing">6</property>
+            <property name="layout_style">end</property>
             <child>
-              <object class="GtkLabel" id="revision_label">
+              <object class="GtkButton" id="cancel">
+                <property name="label" translatable="yes">_Cancel</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Revision&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-cancel</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_cancel_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -33,12 +62,14 @@
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="revision_container">
+              <object class="GtkButton" id="ok">
+                <property name="label" translatable="yes">_OK</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <placeholder/>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">True</property>
+                <property name="image">rabbitvcs-ok</property>
+                <property name="use_underline">True</property>
+                <signal name="clicked" handler="on_ok_clicked" swapped="no"/>
               </object>
               <packing>
                 <property name="expand">False</property>
@@ -48,133 +79,150 @@
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">1</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">2</property>
           </packing>
         </child>
         <child>
-          <object class="GtkVBox" id="options_box">
-            <property name="spacing">6</property>
+          <object class="GtkGrid" id="options_box">
+            <property name="visible">True</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkLabel" id="label2">
+              <object class="GtkCheckButton" id="rollback">
+                <property name="label" translatable="yes">Rollback to specified revision number</property>
                 <property name="visible">True</property>
-                <property name="xalign">0</property>
-                <property name="label" translatable="yes">&lt;b&gt;Options&lt;/b&gt;</property>
-                <property name="use_markup">True</property>
+                <property name="sensitive">False</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="draw_indicator">True</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">2</property>
               </packing>
             </child>
             <child>
-              <object class="GtkAlignment" id="alignment2">
+              <object class="GtkCheckButton" id="omit_externals">
+                <property name="label" translatable="yes">Omit Externals</property>
                 <property name="visible">True</property>
-                <property name="left_padding">12</property>
-                <child>
-                  <object class="GtkVBox" id="vbox26">
-                    <property name="visible">True</property>
-                    <child>
-                      <object class="GtkCheckButton" id="recursive">
-                        <property name="label" translatable="yes">Recursive</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="active">True</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">0</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkCheckButton" id="omit_externals">
-                        <property name="label" translatable="yes">Omit Externals</property>
-                        <property name="visible">True</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="expand">False</property>
-                        <property name="fill">False</property>
-                        <property name="position">1</property>
-                      </packing>
-                    </child>
-                    <child>
-                      <object class="GtkCheckButton" id="rollback">
-                        <property name="label" translatable="yes">Rollback to specified revision number</property>
-                        <property name="visible">True</property>
-                        <property name="sensitive">False</property>
-                        <property name="can_focus">True</property>
-                        <property name="receives_default">False</property>
-                        <property name="draw_indicator">True</property>
-                      </object>
-                      <packing>
-                        <property name="position">2</property>
-                      </packing>
-                    </child>
-                  </object>
-                </child>
+                <property name="can_focus">True</property>
+                <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="draw_indicator">True</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">1</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkCheckButton" id="recursive">
+                <property name="label" translatable="yes">Recursive</property>
+                <property name="visible">True</property>
+                <property name="can_focus">True</property>
+                <property name="receives_default">False</property>
+                <property name="halign">start</property>
+                <property name="hexpand">True</property>
+                <property name="active">True</property>
+                <property name="draw_indicator">True</property>
+              </object>
+              <packing>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
+              </packing>
+            </child>
+            <child>
+              <object class="GtkLabel" id="label2">
+                <property name="visible">True</property>
+                <property name="can_focus">False</property>
+                <property name="halign">start</property>
+                <property name="valign">start</property>
+                <property name="label" translatable="yes">&lt;b&gt;Options&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
+                <property name="yalign">0</property>
+              </object>
+              <packing>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
+                <property name="height">3</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="position">2</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">1</property>
           </packing>
         </child>
         <child>
-          <object class="GtkHButtonBox" id="hbuttonbox16">
+          <object class="GtkGrid" id="revision_box">
             <property name="visible">True</property>
-            <property name="spacing">6</property>
-            <property name="layout_style">end</property>
+            <property name="can_focus">False</property>
+            <property name="hexpand">True</property>
+            <property name="column_spacing">6</property>
             <child>
-              <object class="GtkButton" id="cancel">
-                <property name="label">gtk-cancel</property>
+              <object class="GtkGrid" id="revision_container">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal name="clicked" handler="on_cancel_clicked"/>
+                <property name="can_focus">False</property>
+                <property name="hexpand">True</property>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
+                <child>
+                  <placeholder/>
+                </child>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">0</property>
+                <property name="left_attach">1</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
             <child>
-              <object class="GtkButton" id="ok">
-                <property name="label">gtk-ok</property>
+              <object class="GtkLabel" id="revision_label">
                 <property name="visible">True</property>
-                <property name="can_focus">True</property>
-                <property name="receives_default">True</property>
-                <property name="use_stock">True</property>
-                <signal name="clicked" handler="on_ok_clicked"/>
+                <property name="can_focus">False</property>
+                <property name="valign">start</property>
+                <property name="margin_top">6</property>
+                <property name="vexpand">True</property>
+                <property name="label" translatable="yes">&lt;b&gt;Revision&lt;/b&gt;</property>
+                <property name="use_markup">True</property>
+                <property name="xalign">0</property>
               </object>
               <packing>
-                <property name="expand">False</property>
-                <property name="fill">False</property>
-                <property name="position">1</property>
+                <property name="left_attach">0</property>
+                <property name="top_attach">0</property>
               </packing>
             </child>
           </object>
           <packing>
-            <property name="expand">False</property>
-            <property name="fill">False</property>
-            <property name="pack_type">end</property>
-            <property name="position">0</property>
+            <property name="left_attach">0</property>
+            <property name="top_attach">0</property>
           </packing>
         </child>
       </object>
diff -uNr rabbitvcs-0.17.1/rabbitvcs/util/__init__.py rabbitvcs/rabbitvcs/util/__init__.py
--- rabbitvcs-0.17.1/rabbitvcs/util/__init__.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/util/__init__.py	2019-09-13 08:36:17.261343300 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -28,94 +28,94 @@
 class Function:
     """
     Provides an interface to define and call a function.
-    
+
     Usage:
         f = Function(self.do_this, path)
         f.run()
-    
+
     """
-    
+
     def __init__(self, func, *args, **kwargs):
         self.func = func
         self.args = args
         self.kwargs = kwargs
         self.result = None
-    
+
     def start(self):
         self.result = self.func(*self.args, **self.kwargs)
-    
+
     def call(self):
         return self.func(*self.args, **self.kwargs)
-    
+
     def set_args(self, *args, **kwargs):
         self.args = args
         self.kwargs = kwargs
-    
+
     def get_result(self):
         return self.result
 
 class FunctionQueue:
     """
     Provides an interface to generate a queue of function calls.
-    
+
     """
-    
+
     def __init__(self):
         self.queue = []
         self.cancel = False
         self._exception = None
         self.position = 0
-    
+
     def cancel_queue(self):
         self.cancel = True
-    
+
     def append(self, func, *args, **kwargs):
         """
         Append a Function object to the FunctionQueue
-        
+
         @type   func: def
         @param  func: A method call
-        
+
         @type   *args: list
         @param  *args: A list of arguments
-        
+
         @type   **kwargs: list
         @param  **kwargs: A list of keyword arguments
-        
+
         """
-        
+
         self.queue.append(Function(func, *args, **kwargs))
-    
+
     def insert(self, position, func, *args, **kwargs):
         """
         Insert a Function object into the FunctionQueue
-        
+
         @type   func: def
         @param  func: A method call
-        
+
         @type   *args: list
         @param  *args: A list of arguments
-        
+
         @type   **kwargs: list
         @param  **kwargs: A list of keyword arguments
-        
+
         """
-        
+
         self.queue.insert(position, Function(func, *args, **kwargs))
-    
+
     def set_exception_callback(self, func):
         self._exception = Function(func)
-    
+
     def start(self):
         """
         Runs through the queue and calls each function
-        
+
         """
-        
+
         for func in self.queue:
             if self.cancel == True:
                 return
-            
+
             try:
                 func.start()
             except Exception as e:
@@ -124,20 +124,20 @@
                     self._exception.set_args(e)
                     self._exception.call()
                 break
-            
+
             self.position += 1
-    
+
     def get_position(self):
         return self.position
-    
+
     def get_result(self, index):
         """
         Retrieve the result of a single function call by specifying the order
         in which the function was in the queue.
-        
+
         @type   index: int
         @param  index: The queue index
-        
+
         """
-        
+
         return self.queue[index].get_result()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/util/_locale.py rabbitvcs/rabbitvcs/util/_locale.py
--- rabbitvcs-0.17.1/rabbitvcs/util/_locale.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/util/_locale.py	2019-09-13 08:36:17.261343300 +0800
@@ -5,35 +5,45 @@
 from rabbitvcs.util.log import Log
 import rabbitvcs.util.settings
 import rabbitvcs.util.helper
+from rabbitvcs import gettext
 
 log = Log("rabbitvcs.util.locale")
 
-def initialize_locale():
-    try:
-        settings = rabbitvcs.util.settings.SettingsManager()
-
-        sane_default = locale.getdefaultlocale(['LANG', 'LANGUAGE'])
+def set_locale(language, encoding):
+    sane_default = locale.getlocale(locale.LC_MESSAGES)
+    loc = language
+    if not encoding:
+        if not language:
+            return sane_default
+        encoding = sane_default[1]
+    if not loc:
+        loc = sane_default[0]
 
-        # Just try to set the default locale for the user
-        locale.setlocale(locale.LC_ALL, sane_default)
-
-        # Now, if the user has set a default, try to apply that
-        user_default = settings.get("general", "language")
-        if user_default:
-            locale.setlocale(locale.LC_ALL, (user_default, sane_default[1]))
+    try:
+        locale.setlocale(locale.LC_ALL, (loc, encoding))
     except locale.Error:
         # If the user's environment does not specify an encoding, Python will
         # pick a default which might not be available. It seems to pick
         # ISO8859-1 (latin1), but UTF8 is a better idea on GNU/Linux.
-        log.warning("Could not set default locale (LANG: %s)" % os.environ.get("LANG"))
-        
-        (loc, enc) = sane_default
-        
+        log.warning("Could not set locale (%s, %s)" % (loc, encoding))
+
         # We should only try this if we have a region to set as well.
-        if loc and enc != "UTF8":
+        if language and encoding != "UTF-8":
             try:
-                locale.setlocale(locale.LC_ALL, (loc, "UTF8"))
+                locale.setlocale(locale.LC_ALL, (language, "UTF-8"))
                 log.warning("Manually set encoding to UTF-8")
             except locale.Error:
-                # Nope, no UTF8 either.
+                # Nope, no UTF-8 either.
                 log.warning("Could not set user's locale to UTF-8")
+
+    loc = locale.getlocale(locale.LC_MESSAGES)
+    langs = []
+    if loc[0]:
+        langs.append(loc[0])
+    gettext.set_language(langs)
+    return loc
+
+def initialize_locale():
+    sane_default = locale.getdefaultlocale(['LANG', 'LANGUAGE'])
+    # Just try to set the default locale for the user
+    set_locale(*sane_default)
diff -uNr rabbitvcs-0.17.1/rabbitvcs/util/configspec/configspec.ini rabbitvcs/rabbitvcs/util/configspec/configspec.ini
--- rabbitvcs-0.17.1/rabbitvcs/util/configspec/configspec.ini	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/util/configspec/configspec.ini	2019-09-13 08:36:17.261343300 +0800
@@ -1,14 +1,16 @@
 [general]
-language = string(default="English")
 enable_attributes = boolean(default=True)
 enable_emblems = boolean(default=True)
 enable_recursive = boolean(default=True)
 show_debug = boolean(default=False)
 show_unversioned_files = boolean(default=True)
+datetime_format = string(default="")
+default_commit_message = string(default="")
 
 [external]
 diff_tool = string(default="/usr/bin/meld")
 diff_tool_swap = boolean(default=False)
+merge_tool = string(default="")
 
 [cache]
 number_repositories = integer(default=30)
@@ -21,4 +23,4 @@
 [HideItem]
 svn = boolean(default=False)
 hg = boolean(default=False)
-git = boolean(default=False)
\ No newline at end of file
+git = boolean(default=False)
diff -uNr rabbitvcs-0.17.1/rabbitvcs/util/contextmenu.py rabbitvcs/rabbitvcs/util/contextmenu.py
--- rabbitvcs-0.17.1/rabbitvcs/util/contextmenu.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/util/contextmenu.py	2019-09-13 08:36:17.261343300 +0800
@@ -1,23 +1,23 @@
 from __future__ import absolute_import
 from __future__ import print_function
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2010 by Jason Heeris <jason.heeris@gmail.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -31,21 +31,20 @@
 # Yes, * imports are bad. You write it out then.
 from .contextmenuitems import *
 
-if "NAUTILUS_PYTHON_REQUIRE_GTK3" in os.environ and os.environ["NAUTILUS_PYTHON_REQUIRE_GTK3"]:
-    from gi.repository import Gtk as gtk
-else:
-    import gtk
-
-try:
-    from gi.repository import GObject as gobject
-except ImportError:
-    import gobject
+from rabbitvcs.util import helper
+
+import gi
+gi.require_version("Gtk", "3.0")
+sa = helper.SanitizeArgv()
+from gi.repository import Gtk as gtk
+from gi.repository import GLib as glib
+sa.restore()
 
 from rabbitvcs.vcs import create_vcs_instance, VCS_SVN, VCS_GIT, VCS_DUMMY, VCS_MERCURIAL
 from rabbitvcs.util.log import Log
 from rabbitvcs import gettext
 from rabbitvcs.util.settings import SettingsManager
-import rabbitvcs.util.helper
+import rabbitvcs.vcs
 
 log = Log("rabbitvcs.util.contextmenu")
 _ = gettext.gettext
@@ -55,43 +54,43 @@
 class MenuBuilder(object):
     """
     Generalised menu builder class. Subclasses must provide:
-    
+
     connect_to_signal(self, menuitem, callback, callback_args) - connect the
     menu item to a signal (or do whatever needs to be done) so that the callback
     is called upon activation.
-    
+
     In actual fact, a standard GTK compatible method for this is provided by
     this class. All a subclass has to do is define the class parameter "signal",
-    and it will be automatically done. 
-    
+    and it will be automatically done.
+
     make_menu_item(self, item, id_magic) - create the menu item for whatever
     toolkit (usually this should be just call a  convenience method on the
     MenuItem instance).
-    
+
     attach_submenu(self, menu_node, submenu_list) - given a list of whatever
     make_menu_item(...) returns, create a submenu and attach it to the given
     node.
-    
+
     top_level_menu(self, items) - in some circumstances we need to treat the top
     level menu differently (eg. Nautilus, because Xenu said so). This processes
     a list of menu items returned by make_menu_item(...) to create the overall
-    menu.  
+    menu.
     """
-    
+
     def __init__(self, structure, conditions, callbacks):
         """
         @param  structure: Menu structure
         @type   structure: list
-                
-        Note on "structure". The menu structure is defined in a list of tuples 
+
+        Note on "structure". The menu structure is defined in a list of tuples
         of two elements each.  The first element is a class - the MenuItem
         subclass that defines the menu interface (see below).
-        
+
         The second element is either None (if there is no submenu) or a list of
-        tuples if there is a submenu.  The submenus are generated recursively. 
+        tuples if there is a submenu.  The submenus are generated recursively.
         FYI, this is a list of tuples so that we retain the desired menu item
         order (dicts do not retain order)
-        
+
             Example:
             [
                 (MenuClassOne, [
@@ -101,26 +100,26 @@
                 (MenuClassTwo, None),
                 (MenuClassThree, None)
             ]
-            
+
         """
-        # The index is mostly for identifier magic 
+        # The index is mostly for identifier magic
         index = 0
         last_level = -1
-        last_item = last_menuitem = None        
+        last_item = last_menuitem = None
 
         stack = [] # ([items], last_item, last_menuitem)
-        flat_structure = rabbitvcs.util.helper.walk_tree_depth_first(
+        flat_structure = helper.walk_tree_depth_first(
                                 structure,
                                 show_levels=True,
                                 preprocess=lambda x: x(conditions, callbacks),
                                 filter=lambda x: x.show())
-        
+
         # Here's how this works: we walk the tree, which is a series of (level,
         # MenuItem instance) tuples. We accumulate items in the list in
         # stack[level][0], and when we go back up a level we put them in a
         # submenu (as defined by the subclasses). We need to keep track of the
         # last item on each level, in case they are separators, so that's on the
-        # stack too.       
+        # stack too.
         for (level, item) in flat_structure:
             index += 1
 
@@ -132,31 +131,31 @@
                     # Remove separators at the end of menus
                     if type(last_item) == MenuSeparator:
                         stack[-1][0].remove(last_menuitem)
-                                    
+
                     (items, last_item, last_menuitem) = stack.pop()
-                    
+
                     # Every time we back out of a level, we attach the list of
-                    # items as a submenu, however the subclass wants to do it.                    
-                    self.attach_submenu(last_menuitem, items)                                
+                    # items as a submenu, however the subclass wants to do it.
+                    self.attach_submenu(last_menuitem, items)
 
             # Have we gone up a level? Save the context and create a submenu
             if level > last_level:
                 # Skip separators at the start of a menu
                 if type(item) == MenuSeparator: continue
-                                
+
                 stack.append(([], last_item, last_menuitem))
-                
+
                 last_item = last_menuitem = None
-        
+
             # Skip duplicate separators
             if (type(last_item) == type(item) == MenuSeparator and
                 level == last_level):
                 continue
-            
+
             menuitem = self.make_menu_item(item, index)
 
             self.connect_signal(menuitem, item.callback, item.callback_args)
-        
+
             stack[-1][0].append(menuitem)
 
             last_item = item
@@ -166,12 +165,12 @@
         # Hey, we're out of the loop. Go back up any remaining levels (in case
         # there were submenus at the end) and finish the job.
         for (items, last_item2, last_menuitem2) in stack[:0:-1]:
-            
+
             if type(last_item) == MenuSeparator:
                 stack[-1][0].remove(last_menuitem)
-            
+
             self.attach_submenu(last_menuitem2, items)
-            
+
             last_item = last_item2
             last_menuitem = last_menuitem2
 
@@ -180,7 +179,7 @@
         else:
             log.debug("Empty top level menu!")
             self.menu = self.top_level_menu([])
-            
+
     def connect_signal(self, menuitem, callback, callback_args):
         if callback:
             if callback_args:
@@ -192,27 +191,27 @@
     """
     Provides a standard Gtk Context Menu class used for all context menus
     in gtk dialogs/windows.
-    
+
     """
-    
+
     signal = "button-press-event"
-                            
+
     def make_menu_item(self, item, id_magic):
-        return item.make_gtk_menu_item(id_magic)
-    
+        return item.make_gtk3_menu_item(id_magic)
+
     def attach_submenu(self, menu_node, submenu_list):
         submenu = gtk.Menu()
         menu_node.set_submenu(submenu)
         [submenu.add(item) for item in submenu_list]
-    
+
     def top_level_menu(self, items):
         menu = gtk.Menu()
         [menu.add(item) for item in items]
         return menu
-        
-    def show(self, event):        
+
+    def show(self, event):
         self.menu.show_all()
-        self.menu.popup(None, None, None, event.button, event.time)
+        self.menu.popup(None, None, None, None, event.button, event.time)
 
     def get_widget(self):
         return self.menu
@@ -223,16 +222,16 @@
     a GtkContextMenu.  Allows us to have a standard common set of methods we can
     call from the callback object.
     """
-    
+
     def __init__(self):
         pass
-    
+
     def on_context_menu_command_finished(self):
         pass
 
     def rescan_after_process_exit(self, proc, paths=None):
         self.execute_after_process_exit(proc, self.on_context_menu_command_finished)
-        
+
     def execute_after_process_exit(self, proc, callback=None):
         if callback is None:
             callback = self.on_context_menu_command_finished
@@ -242,9 +241,9 @@
             # First we need to see if the process is still running
 
             retval = proc.poll()
-            
+
             log.debug("%s" % retval)
-            
+
             still_going = (retval is None)
 
             if not still_going and callable(callback):
@@ -253,50 +252,50 @@
             return still_going
 
         # Add our callback function on a 1 second timeout
-        gobject.timeout_add_seconds(1, is_process_still_alive)
-        
+        glib.timeout_add_seconds(1, is_process_still_alive)
+
 class ContextMenuCallbacks:
     """
     The base class for context menu callbacks.  This is inheritied by
     sub-classes.
     """
     def __init__(self, caller, base_dir, vcs_client, paths=[]):
-        """        
+        """
         @param  caller: The calling object
         @type   caller: RabbitVCS extension
-        
+
         @param  base_dir: The curent working directory
         @type   base_dir: string
 
         @param  vcs_client: The vcs client to be used
         @type   vcs_client: rabbitvcs.vcs.create_vcs_instance()
-        
+
         @param  paths: The selected paths
         @type   paths: list
-        
-        """  
+
+        """
         self.caller = caller
         self.base_dir = base_dir
         self.vcs_client = vcs_client
         self.paths = paths
-        
+
     def debug_shell(self, widget, data1=None, data2=None):
         """
-        
+
         Open up an IPython shell which shares the context of the extension.
-        
+
         See: http://ipython.scipy.org/moin/Cookbook/EmbeddingInGTK
-        
+
         """
         import gtk
         from rabbitvcs.debug.ipython_view import IPythonView
-        
+
         window = gtk.Window()
         window.set_size_request(750,550)
         window.set_resizable(True)
         window.set_position(gtk.WIN_POS_CENTER)
         scrolled_window = gtk.ScrolledWindow()
-        scrolled_window.set_policy(gtk.POLICY_AUTOMATIC, gtk.POLICY_AUTOMATIC)
+        scrolled_window.set_policy(gtk.PolicyType.AUTOMATIC, gtk.PolicyType.AUTOMATIC)
         ipython_view = IPythonView()
         ipython_view.updateNamespace(locals())
         ipython_view.set_wrap_mode(gtk.WRAP_CHAR)
@@ -305,19 +304,19 @@
         scrolled_window.show()
         window.add(scrolled_window)
         window.show()
-    
+
     def refresh_status(self, widget, data1=None, data2=None):
         """
         Refreshes an item status, which is actually just invalidate.
         """
-        
+
         self.debug_invalidate(widget)
-    
+
     def debug_revert(self, widget, data1=None, data2=None):
         client = pysvn.Client()
         for path in self.paths:
             client.revert(path, recurse=True)
-        
+
     def debug_invalidate(self, widget, data1=None, data2=None):
         rabbitvcs_extension = self.caller
         nautilusVFSFile_table = rabbitvcs_extension.nautilusVFSFile_table
@@ -325,69 +324,69 @@
             log.debug("callback_debug_invalidate() called for %s" % path)
             if path in nautilusVFSFile_table:
                 nautilusVFSFile_table[path].invalidate_extension_info()
-    
+
     def debug_add_emblem(self, widget, data1=None, data2=None):
         def add_emblem_dialog():
             from subprocess import Popen, PIPE
             command = ["zenity", "--entry", "--title=RabbitVCS", "--text=Emblem to add:"]
             emblem = Popen(command, stdout=PIPE).communicate()[0].replace("\n", "")
-            
+
             rabbitvcs_extension = self.caller
             nautilusVFSFile_table = rabbitvcs_extension.nautilusVFSFile_table
             for path in self.paths:
                 if path in nautilusVFSFile_table:
                     nautilusVFSFile_table[path].add_emblem(emblem)
             return False
-            
-        gobject.idle_add(add_emblem_dialog)
-    
+
+        glib.idle_add(add_emblem_dialog)
+
     # End debugging callbacks
 
     def checkout(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("checkout", self.paths)
+        proc = helper.launch_ui_window("checkout", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
-    
+
     def update(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("update", self.paths)
+        proc = helper.launch_ui_window("update", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def commit(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("commit", self.paths)
+        proc = helper.launch_ui_window("commit", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def add(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("add", self.paths)
+        proc = helper.launch_ui_window("add", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def check_for_modifications(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("checkmods", self.paths)
+        proc = helper.launch_ui_window("checkmods", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def delete(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("delete", self.paths)
+        proc = helper.launch_ui_window("delete", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def revert(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("revert", self.paths)
+        proc = helper.launch_ui_window("revert", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def diff(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("diff", self.paths)
+        proc = helper.launch_ui_window("diff", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def diff_multiple(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("diff", self.paths)
+        proc = helper.launch_ui_window("diff", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def diff_previous_revision(self, widget, data1=None, data2=None):
         guess = self.vcs_client.guess(self.paths[0])
         if guess["vcs"] == rabbitvcs.vcs.VCS_SVN:
             previous_revision_number = self.vcs_client.svn().get_revision(self.paths[0]) - 1
-        
-            pathrev1 = rabbitvcs.util.helper.create_path_revision_string(self.vcs_client.svn().get_repo_url(self.paths[0]), previous_revision_number)
-            pathrev2 = rabbitvcs.util.helper.create_path_revision_string(self.paths[0], "working")
-            
-            proc = rabbitvcs.util.helper.launch_ui_window("diff", [
+
+            pathrev1 = helper.create_path_revision_string(self.vcs_client.svn().get_repo_url(self.paths[0]), previous_revision_number)
+            pathrev2 = helper.create_path_revision_string(self.paths[0], "working")
+
+            proc = helper.launch_ui_window("diff", [
                 "-s",
                 pathrev1,
                 pathrev2,
@@ -396,10 +395,10 @@
             self.caller.rescan_after_process_exit(proc, self.paths)
 
     def compare_tool(self, widget, data1=None, data2=None):
-        pathrev1 = rabbitvcs.util.helper.create_path_revision_string(self.paths[0], "base")
-        pathrev2 = rabbitvcs.util.helper.create_path_revision_string(self.paths[0], "working")
+        pathrev1 = helper.create_path_revision_string(self.paths[0], "base")
+        pathrev2 = helper.create_path_revision_string(self.paths[0], "working")
 
-        proc = rabbitvcs.util.helper.launch_ui_window("diff", [
+        proc = helper.launch_ui_window("diff", [
             "-s",
             pathrev1,
             pathrev2
@@ -407,7 +406,7 @@
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def compare_tool_multiple(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("diff", ["-s"] + self.paths)
+        proc = helper.launch_ui_window("diff", ["-s"] + self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def compare_tool_previous_revision(self, widget, data1=None, data2=None):
@@ -415,10 +414,10 @@
         if guess["vcs"] == rabbitvcs.vcs.VCS_SVN:
             previous_revision_number = self.vcs_client.svn().get_revision(self.paths[0]) - 1
 
-            pathrev1 = rabbitvcs.util.helper.create_path_revision_string(self.vcs_client.svn().get_repo_url(self.paths[0]), previous_revision_number)
-            pathrev2 = rabbitvcs.util.helper.create_path_revision_string(self.paths[0], "working")
+            pathrev1 = helper.create_path_revision_string(self.vcs_client.svn().get_repo_url(self.paths[0]), previous_revision_number)
+            pathrev2 = helper.create_path_revision_string(self.paths[0], "working")
 
-            proc = rabbitvcs.util.helper.launch_ui_window("diff", [
+            proc = helper.launch_ui_window("diff", [
                 "-s",
                 pathrev1,
                 pathrev2,
@@ -427,185 +426,188 @@
             self.caller.rescan_after_process_exit(proc, self.paths)
 
     def show_changes(self, widget, data1=None, data2=None):
-        pathrev1 = rabbitvcs.util.helper.create_path_revision_string(self.paths[0])
+        pathrev1 = helper.create_path_revision_string(self.paths[0])
         pathrev2 = pathrev1
         if len(self.paths) == 2:
-            pathrev2 = rabbitvcs.util.helper.create_path_revision_string(self.paths[1])
-        
-        proc = rabbitvcs.util.helper.launch_ui_window("changes", [pathrev1, pathrev2])
+            pathrev2 = helper.create_path_revision_string(self.paths[1])
+
+        proc = helper.launch_ui_window("changes", [pathrev1, pathrev2])
         self.caller.rescan_after_process_exit(proc, self.paths)
-    
+
     def show_log(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("log", self.paths)
+        proc = helper.launch_ui_window("log", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def rename(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("rename", self.paths)
+        proc = helper.launch_ui_window("rename", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def create_patch(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("createpatch", self.paths)
+        proc = helper.launch_ui_window("createpatch", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
-    
+
     def apply_patch(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("applypatch", self.paths)
+        proc = helper.launch_ui_window("applypatch", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
-    
+
     def properties(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("property_editor", self.paths)
+        proc = helper.launch_ui_window("property_editor", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def about(self, widget, data1=None, data2=None):
-        rabbitvcs.util.helper.launch_ui_window("about")
-        
+        helper.launch_ui_window("about")
+
     def settings(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("settings", [self.base_dir])
+        base_dir = self.base_dir
+        if len(self.paths) == 1 and os.path.isdir(self.paths[0]):
+            base_dir = self.paths[0]
+        proc = helper.launch_ui_window("settings", [base_dir])
         self.caller.reload_settings(proc)
 
     def ignore_by_filename(self, widget, data1=None, data2=None):
         path = self.paths[0]
         base_dir = os.path.join(self.base_dir, os.path.dirname(path))
-        proc = rabbitvcs.util.helper.launch_ui_window("ignore", [base_dir, os.path.basename(path)])
+        proc = helper.launch_ui_window("ignore", [base_dir, os.path.basename(path)])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def ignore_by_file_extension(self, widget, data1=None, data2=None):
         path = self.paths[0]
-        pattern = "*%s" % rabbitvcs.util.helper.get_file_extension(path)
+        pattern = "*%s" % helper.get_file_extension(path)
         base_dir = os.path.join(self.base_dir, os.path.dirname(path))
-        proc = rabbitvcs.util.helper.launch_ui_window("ignore", [base_dir, pattern])
+        proc = helper.launch_ui_window("ignore", [base_dir, pattern])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def get_lock(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("lock", self.paths)
+        proc = helper.launch_ui_window("lock", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def branch_tag(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("branch", self.paths)
+        proc = helper.launch_ui_window("branch", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def switch(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("switch", self.paths)
+        proc = helper.launch_ui_window("switch", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def merge(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("merge", self.paths)
+        proc = helper.launch_ui_window("merge", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def _import(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("import", self.paths)
+        proc = helper.launch_ui_window("import", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def export(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("export", self.paths)
+        proc = helper.launch_ui_window("export", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def svn_export(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("export", ["--vcs=svn", self.paths[0]])
+        proc = helper.launch_ui_window("export", ["--vcs=svn", self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def git_export(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("export", ["--vcs=git", self.paths[0]])
+        proc = helper.launch_ui_window("export", ["--vcs=git", self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def update_to_revision(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("updateto", self.paths)
+        proc = helper.launch_ui_window("updateto", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
-    
+
     def mark_resolved(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("markresolved", self.paths)
+        proc = helper.launch_ui_window("markresolved", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
-        
+
     def annotate(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("annotate", self.paths)
+        proc = helper.launch_ui_window("annotate", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def unlock(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("unlock", self.paths)
+        proc = helper.launch_ui_window("unlock", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
-        
+
     def create_repository(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("create", ["--vcs", "svn", self.paths[0]])
+        proc = helper.launch_ui_window("create", ["--vcs", "svn", self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
-    
+
     def relocate(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("relocate", self.paths)
+        proc = helper.launch_ui_window("relocate", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def cleanup(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("cleanup", self.paths)
+        proc = helper.launch_ui_window("cleanup", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def restore(self, widget, data1=None, data2=None):
         guess = self.vcs_client.guess(self.paths[0])
         if guess["vcs"] == rabbitvcs.vcs.VCS_SVN:
-            proc = rabbitvcs.util.helper.launch_ui_window("update", self.paths)
+            proc = helper.launch_ui_window("update", self.paths)
         elif guess["vcs"] == rabbitvcs.vcs.VCS_GIT:
-            proc = rabbitvcs.util.helper.launch_ui_window("checkout", ["-q", "--vcs", "git"] + self.paths)
+            proc = helper.launch_ui_window("checkout", ["-q", "--vcs", "git"] + self.paths)
 
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def _open(self, widget, data1=None, data2=None):
         pass
-    
+
     def browse_to(self, widget, data1=None, data2=None):
         pass
 
     def repo_browser(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("browser", [self.paths[0]])
+        proc = helper.launch_ui_window("browser", [self.paths[0]])
 
     def initialize_repository(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("create", ["--vcs", "git", self.paths[0]])
+        proc = helper.launch_ui_window("create", ["--vcs", "git", self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def clone(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("clone", [self.paths[0]])
+        proc = helper.launch_ui_window("clone", [self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def push(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("push", self.paths)
+        proc = helper.launch_ui_window("push", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def branches(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("branches", [self.paths[0]])
+        proc = helper.launch_ui_window("branches", [self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def tags(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("tags", [self.paths[0]])
+        proc = helper.launch_ui_window("tags", [self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def remotes(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("remotes", [self.paths[0]])
+        proc = helper.launch_ui_window("remotes", [self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def clean(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("clean", [self.paths[0]])
+        proc = helper.launch_ui_window("clean", [self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def reset(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("reset", [self.paths[0]])
+        proc = helper.launch_ui_window("reset", [self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def stage(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("stage", [self.paths[0]])
+        proc = helper.launch_ui_window("stage", [self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def unstage(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("unstage", [self.paths[0]])
+        proc = helper.launch_ui_window("unstage", [self.paths[0]])
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def edit_conflicts(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("editconflicts", [self.paths[0]])
+        proc = helper.launch_ui_window("editconflicts", [self.paths[0]])
         self.caller.rescan_after_process_exit(proc, [self.paths[0]])
 
 class ContextMenuConditions:
     """
     Provides a standard interface to checking conditions for menu items.
-    
+
     This class should never be instantied directly, rather the narrowly defined
     FileManagerContextMenuConditions and GtkFilesContextMenuConditions classes
     should be called.
-    
-    """    
+
+    """
     def __init__(self):
         pass
 
@@ -642,7 +644,7 @@
             "has_conflicted"                : lambda path: "complicated" in self.text_statuses,
             "has_obstructed"                : lambda path: "obstructed" in self.text_statuses
         }
-        
+
         for key,func in list(checks.items()):
             self.path_dict[key] = False
 
@@ -663,14 +665,14 @@
             else:
                 return (self.path_dict["is_dir"] and
                         not self.path_dict["is_working_copy"])
-    
+
         return False
-    
+
     def update(self, data=None):
         return (self.path_dict["is_in_a_or_a_working_copy"] and
                 self.path_dict["is_versioned"] and
                 not self.path_dict["is_added"])
-                        
+
     def commit(self, data=None):
         if self.path_dict["is_svn"] or self.path_dict["is_git"] or self.path_dict["is_mercurial"]:
             if self.path_dict["is_in_a_or_a_working_copy"]:
@@ -685,66 +687,66 @@
 
     def diff_menu(self, data=None):
         return self.path_dict["is_in_a_or_a_working_copy"]
-    
+
     def diff_multiple(self, data=None):
-        if (self.path_dict["length"] == 2 and 
+        if (self.path_dict["length"] == 2 and
                 self.path_dict["is_versioned"] and
                 self.path_dict["is_in_a_or_a_working_copy"]):
             return True
         return False
 
     def compare_tool_multiple(self, data=None):
-        if (self.path_dict["length"] == 2 and 
+        if (self.path_dict["length"] == 2 and
                 self.path_dict["is_versioned"] and
                 self.path_dict["is_in_a_or_a_working_copy"]):
             return True
         return False
-        
+
     def diff(self, data=None):
         if (self.path_dict["length"] == 1 and
                 self.path_dict["is_in_a_or_a_working_copy"] and
-                (self.path_dict["is_modified"] or self.path_dict["has_modified"] or 
+                (self.path_dict["is_modified"] or self.path_dict["has_modified"] or
                 self.path_dict["is_conflicted"] or self.path_dict["has_conflicted"])):
-            return True        
+            return True
         return False
 
     def diff_previous_revision(self, data=None):
         if (self.path_dict["is_svn"] and
                 self.path_dict["length"] == 1 and
                 self.path_dict["is_in_a_or_a_working_copy"]):
-            return True        
+            return True
         return False
 
     def compare_tool(self, data=None):
         if (self.path_dict["length"] == 1 and
                 self.path_dict["is_in_a_or_a_working_copy"] and
-                (self.path_dict["is_modified"] or self.path_dict["has_modified"] or 
+                (self.path_dict["is_modified"] or self.path_dict["has_modified"] or
                 self.path_dict["is_conflicted"] or self.path_dict["has_conflicted"])):
-            return True        
+            return True
         return False
 
     def compare_tool_previous_revision(self, data=None):
         if (self.path_dict["is_svn"] and
                 self.path_dict["length"] == 1 and
                 self.path_dict["is_in_a_or_a_working_copy"]):
-            return True        
+            return True
         return False
 
     def show_changes(self, data=None):
         return (self.path_dict["is_in_a_or_a_working_copy"] and
-            self.path_dict["is_versioned"] and 
+            self.path_dict["is_versioned"] and
             self.path_dict["length"] in (1,2))
-        
+
     def show_log(self, data=None):
         return (self.path_dict["length"] == 1 and
                 self.path_dict["is_in_a_or_a_working_copy"] and
                 self.path_dict["is_versioned"] and
                 not self.path_dict["is_added"])
-        
+
     def add(self, data=None):
         if not self.path_dict["is_svn"]:
             return False
-            
+
         if (self.path_dict["is_dir"] and
                 self.path_dict["is_in_a_or_a_working_copy"]):
             return True
@@ -761,12 +763,13 @@
     def rename(self, data=None):
         return (self.path_dict["length"] == 1 and
                 self.path_dict["is_in_a_or_a_working_copy"] and
+                not self.path_dict["is_working_copy"] and
                 self.path_dict["is_versioned"])
-        
+
     def delete(self, data=None):
         return (self.path_dict["exists"] or self.path_dict["is_versioned"]) and \
             not self.path_dict["is_deleted"]
-        
+
     def revert(self, data=None):
         if self.path_dict["is_in_a_or_a_working_copy"]:
             if (self.path_dict["is_added"] or
@@ -781,14 +784,14 @@
                         self.path_dict["has_missing"])):
                     return True
         return False
-        
+
     def annotate(self, data=None):
         return (self.path_dict["length"] == 1 and
                 not self.path_dict["is_dir"] and
                 self.path_dict["is_in_a_or_a_working_copy"] and
                 self.path_dict["is_versioned"] and
                 not self.path_dict["is_added"])
-        
+
     def properties(self, data=None):
         return (self.path_dict["length"] == 1 and
                 self.path_dict["is_in_a_or_a_working_copy"] and
@@ -809,12 +812,12 @@
                     self.path_dict["has_missing"])):
                 return True
         return False
-    
+
     def apply_patch(self, data=None):
         if self.path_dict["is_in_a_or_a_working_copy"]:
             return True
         return False
-    
+
     def add_to_ignore_list(self, data=None):
         return (self.path_dict["is_in_a_or_a_working_copy"] and
                 not self.path_dict["is_versioned"])
@@ -822,7 +825,7 @@
     def ignore_by_filename(self, *args):
         return (self.path_dict["is_in_a_or_a_working_copy"] and
                 not self.path_dict["is_versioned"])
-    
+
     def ignore_by_file_extension(self, *args):
         return (self.path_dict["is_in_a_or_a_working_copy"] and
                 not self.path_dict["is_versioned"])
@@ -860,14 +863,14 @@
 
     def update_to_revision(self, data=None):
         return (self.path_dict["length"] == 1 and
-                self.path_dict["is_versioned"] and 
+                self.path_dict["is_versioned"] and
                 self.path_dict["is_in_a_or_a_working_copy"])
-    
+
     def mark_resolved(self, data=None):
         return (self.path_dict["is_in_a_or_a_working_copy"] and
                 self.path_dict["is_versioned"] and
                 self.path_dict["is_conflicted"])
-            
+
     def create_repository(self, data=None):
         return (self.path_dict["length"] == 1 and
                 not self.path_dict["is_in_a_or_a_working_copy"])
@@ -882,10 +885,10 @@
 
     def browse_to(self, data=None):
         return self.path_dict["exists"]
-    
+
     def _open(self, data=None):
         return self.path_dict["is_file"]
-    
+
     def restore(self, data=None):
         return self.path_dict["has_missing"]
 
@@ -905,28 +908,28 @@
             not self.path_dict["is_in_a_or_a_working_copy"])
 
     def rabbitvcs_git(self, data=None):
-        return (self.path_dict["is_git"] or 
+        return (self.path_dict["is_git"] or
             not self.path_dict["is_in_a_or_a_working_copy"])
 
     def rabbitvcs_mercurial(self, data=None):
-        return (self.path_dict["is_mercurial"] or 
+        return (self.path_dict["is_mercurial"] or
             not self.path_dict["is_in_a_or_a_working_copy"])
-    
+
     def debug(self, data=None):
         return settings.get("general", "show_debug")
-    
+
     def separator(self, data=None):
         return True
-    
+
     def help(self, data=None):
         return False
-    
+
     def settings(self, data=None):
         return True
-    
+
     def about(self, data=None):
         return True
-    
+
     def bugs(self, data=None):
         return True
 
@@ -937,7 +940,7 @@
     def clone(self, data=None):
         return (self.path_dict["is_dir"] and
             not self.path_dict["is_in_a_or_a_working_copy"])
-            
+
     def push(self, data=None):
         return (self.path_dict["is_git"] or self.path_dict["is_mercurial"])
 
@@ -946,7 +949,7 @@
 
     def tags(self, data=None):
         return (self.path_dict["is_git"])
-        
+
     def remotes(self, data=None):
         return (self.path_dict["is_git"])
 
@@ -989,81 +992,81 @@
     the standard ContextMenuCallbacks class and overrides some methods.
     """
     def __init__(self, caller, base_dir, vcs_client, paths=[]):
-        """        
+        """
         @param  caller: The calling object
         @type   caller: RabbitVCS extension
-        
+
         @param  base_dir: The curent working directory
         @type   base_dir: string
 
         @param  vcs_client: The vcs client to be used
         @type   vcs_client: rabbitvcs.vcs.create_vcs_instance()
-        
+
         @param  paths: The selected paths
         @type   paths: list
-        
-        """  
+
+        """
         ContextMenuCallbacks.__init__(self, caller, base_dir, vcs_client, paths)
 
     def _open(self, widget, data1=None, data2=None):
         for path in self.paths:
-            rabbitvcs.util.helper.open_item(path)
+            helper.open_item(path)
 
     def add(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("add", ["-q"] + self.paths)
+        proc = helper.launch_ui_window("add", ["-q"] + self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def revert(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("revert", ["-q"] + self.paths)
+        proc = helper.launch_ui_window("revert", ["-q"] + self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
-    
+
     def mark_resolved(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("markresolved", ["-q"] + self.paths)
+        proc = helper.launch_ui_window("markresolved", ["-q"] + self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
-    
+
     def browse_to(self, widget, data1=None, data2=None):
-        rabbitvcs.util.helper.browse_to_item(self.paths[0])
+        helper.browse_to_item(self.paths[0])
 
     def delete(self, widget, data1=None, data2=None):
         if len(self.paths) > 0:
-            proc = rabbitvcs.util.helper.launch_ui_window("delete", self.paths)
+            proc = helper.launch_ui_window("delete", self.paths)
             self.caller.rescan_after_process_exit(proc, self.paths)
-  
+
     def update(self, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("update", self.paths)
+        proc = helper.launch_ui_window("update", self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
-    
+
     def unlock(self, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("unlock", ["-q"] + self.paths)
+        proc = helper.launch_ui_window("unlock", ["-q"] + self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
-            
+
     def show_log(self, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("log", self.paths)
+        proc = helper.launch_ui_window("log", self.paths)
         self.caller.rescan_after_process_exit(proc, [self.paths[0]])
 
     def stage(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("stage", ["-q"] + self.paths)
+        proc = helper.launch_ui_window("stage", ["-q"] + self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
     def unstage(self, widget, data1=None, data2=None):
-        proc = rabbitvcs.util.helper.launch_ui_window("unstage", ["-q"] + self.paths)
+        proc = helper.launch_ui_window("unstage", ["-q"] + self.paths)
         self.caller.rescan_after_process_exit(proc, self.paths)
 
 class GtkFilesContextMenuConditions(ContextMenuConditions):
     """
-    Sub-class for ContextMenuConditions for our dialogs.  Allows us to override 
-    some generic condition methods with condition logic more suitable 
+    Sub-class for ContextMenuConditions for our dialogs.  Allows us to override
+    some generic condition methods with condition logic more suitable
     to the dialogs.
-    
+
     """
     def __init__(self, vcs_client, paths=[]):
-        """    
+        """
         @param  vcs_client: The vcs client to be used
         @type   vcs_client: rabbitvcs.vcs.create_vcs_instance()
-        
+
         @param  paths: The selected paths
         @type   paths: list
-        
+
         """
         self.vcs_client = vcs_client
         self.paths = paths
@@ -1077,38 +1080,38 @@
         for path in paths:
             if not path:
                 continue
-                
+
             statuses_tmp = self.vcs_client.statuses(path, invalidate=True)
             for status in statuses_tmp:
                 self.statuses[status.path] = status
 
         self.text_statuses = [self.statuses[key].simple_content_status() for key in list(self.statuses.keys())]
         self.prop_statuses = [self.statuses[key].simple_metadata_status() for key in list(self.statuses.keys())]
-        
+
 class GtkFilesContextMenu:
     """
     Defines context menu items for a table with files
-    
+
     """
-    def __init__(self, caller, event, base_dir, paths=[], 
+    def __init__(self, caller, event, base_dir, paths=[],
             conditions=None, callbacks=None):
-        """    
+        """
         @param  caller: The calling object
         @type   caller: RabbitVCS extension
-        
+
         @param  base_dir: The curent working directory
         @type   base_dir: string
-        
+
         @param  paths: The selected paths
         @type   paths: list
-        
+
         @param  conditions: The conditions class that determines menu item visibility
         @kind   conditions: ContextMenuConditions
-        
+
         @param  callbacks: The callbacks class that determines what actions are taken
         @kind   callbacks: ContextMenuCallbacks
-        
-        """        
+
+        """
         self.caller = caller
         self.event = event
         self.paths = paths
@@ -1122,12 +1125,12 @@
         self.callbacks = callbacks
         if self.callbacks is None:
             self.callbacks = GtkFilesContextMenuCallbacks(
-                self.caller, 
+                self.caller,
                 self.base_dir,
-                self.vcs_client, 
+                self.vcs_client,
                 paths
             )
-            
+
         ignore_items = get_ignore_list_items(paths)
 
         # The first element of each tuple is a key that matches a
@@ -1151,7 +1154,7 @@
             (MenuUnstage, None),
             (MenuAddToIgnoreList, ignore_items)
         ]
-        
+
     def show(self):
         if len(self.paths) == 0:
             return
@@ -1167,56 +1170,56 @@
     """
     The callback class used for the main context menu.  This inherits from
     and overrides the ContextMenuCallbacks class.
-    
-    """   
+
+    """
     def __init__(self, caller, base_dir, vcs_client, paths=[]):
-        """        
+        """
         @param  caller: The calling object
         @type   caller: RabbitVCS extension
-        
+
         @param  base_dir: The curent working directory
         @type   base_dir: string
 
         @param  vcs_client: The vcs client to be used
         @type   vcs_client: rabbitvcs.vcs.create_vcs_instance()
-        
+
         @param  paths: The selected paths
         @type   paths: list
-        
-        """  
+
+        """
         ContextMenuCallbacks.__init__(self, caller, base_dir, vcs_client, paths)
 
 class MainContextMenuConditions(ContextMenuConditions):
     """
-    Sub-class for ContextMenuConditions used for file manager extensions.  
-    Allows us to override some generic condition methods with condition logic 
+    Sub-class for ContextMenuConditions used for file manager extensions.
+    Allows us to override some generic condition methods with condition logic
     more suitable to the dialogs.
-    
+
     """
     def __init__(self, vcs_client, paths=[]):
-        """    
+        """
         @param  vcs_client: The vcs client to be used
         @type   vcs_client: rabbitvcs.vcs.create_vcs_instance()
-        
+
         @param  paths: The selected paths
         @type   paths: list
-        
-        """   
+
+        """
 
         self.vcs_client = vcs_client
         self.paths = paths
         self.statuses = {}
-        
+
         self.generate_statuses(paths)
         self.generate_path_dict(paths)
-        
+
     # FIXME: major bottleneck
     def generate_statuses(self, paths):
         self.statuses = {}
         for path in paths:
             if not path:
                 continue
-                
+
             statuses_tmp = self.vcs_client.statuses(path)
             for status in statuses_tmp:
                 self.statuses[status.path] = status
@@ -1229,25 +1232,25 @@
     Defines and composes the main context menu.
 
     """
-    def __init__(self, caller, base_dir, paths=[], 
+    def __init__(self, caller, base_dir, paths=[],
             conditions=None, callbacks=None):
-        """    
+        """
         @param  caller: The calling object
         @type   caller: RabbitVCS extension
-        
+
         @param  base_dir: The curent working directory
         @type   base_dir: string
-        
+
         @param  paths: The selected paths
         @type   paths: list
-        
+
         @param  conditions: The conditions class that determines menu item visibility
         @kind   conditions: ContextMenuConditions
-        
+
         @param  callbacks: The callbacks class that determines what actions are taken
         @kind   callbacks: ContextMenuCallbacks
-        
-        """        
+
+        """
         self.caller = caller
         self.paths = paths
         self.base_dir = base_dir
@@ -1260,17 +1263,17 @@
         self.callbacks = callbacks
         if self.callbacks is None:
             self.callbacks = MainContextMenuCallbacks(
-                self.caller, 
+                self.caller,
                 self.base_dir,
-                self.vcs_client, 
+                self.vcs_client,
                 paths
             )
-            
+
         ignore_items = get_ignore_list_items(paths)
 
         # The first element of each tuple is a key that matches a
         # ContextMenuItems item.  The second element is either None when there
-        # is no submenu, or a recursive list of tuples for desired submenus.        
+        # is no submenu, or a recursive list of tuples for desired submenus.
         self.structure = [
             (MenuDebug, [
                 (MenuBugs, None),
@@ -1382,22 +1385,22 @@
     """
     This is a test for developers to ensure that they've written all the
     necessary conditions and callbacks (and haven't made any typos).
-    
+
     What it does:
       - build a list of all the subclasses of MenuItem
       - build lists of the methods in ContextMenuConditions/ContextMenuCallbacks
       - checks to see whether all the MenuItems conditions and callbacks have
-        been assigned - if not, a message is printed 
+        been assigned - if not, a message is printed
     """
-    
+
     # These are some simple tests:
     import inspect
     import types
-    
+
     from . import contextmenuitems
-    
+
     menu_item_subclasses = []
-    
+
     # Let's create a list of all MenuItem subclasses
     for name in dir(contextmenuitems):
         entity = getattr(contextmenuitems, name)
@@ -1406,23 +1409,23 @@
             if (entity is not contextmenuitems.MenuItem and
                 contextmenuitems.MenuItem in mro):
                 menu_item_subclasses.append(entity)
-    
+
     condition_functions = []
-    
+
     # Now let's create a list of all of the functions in our conditions class
     for name in dir(ContextMenuConditions):
         entity = getattr(ContextMenuConditions, name)
         if type(entity) == types.UnboundMethodType and not name.startswith("__"):
             condition_functions.append(entity)
-    
+
     callback_functions = []
-    
+
     # ...and in our callbacks class
     for name in dir(ContextMenuCallbacks):
         entity = getattr(ContextMenuCallbacks, name)
         if type(entity) == types.UnboundMethodType and not name.startswith("__"):
             condition_functions.append(entity)
-    
+
     for cls in menu_item_subclasses:
         item = cls(ContextMenuConditions(), ContextMenuCallbacks(None, None, None, None))
         if not item.found_condition:
@@ -1431,7 +1434,7 @@
         if not item.callback:
             print("Did not find callback function in ContextMenuCallbacks " \
                   "for %s (type: %s)" % (item.identifier, cls))
-            
+
 
 if __name__ == "__main__":
     TestMenuItemFunctions()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/util/contextmenuitems.py rabbitvcs/rabbitvcs/util/contextmenuitems.py
--- rabbitvcs-0.17.1/rabbitvcs/util/contextmenuitems.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/util/contextmenuitems.py	2019-09-13 08:36:17.261343300 +0800
@@ -1,21 +1,21 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2010 by Jason Heeris <jason.heeris@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -23,12 +23,12 @@
 import os.path
 
 import os
-if "NAUTILUS_PYTHON_REQUIRE_GTK3" in os.environ and os.environ["NAUTILUS_PYTHON_REQUIRE_GTK3"]:
-    from gi.repository import Gtk as gtk
-else:
-    import gtk
-    
-import rabbitvcs.util.helper
+import gi
+gi.require_version("Gtk", "3.0")
+from gi.repository import Gtk
+
+from rabbitvcs.util import helper
+from rabbitvcs.util.strings import S
 
 from rabbitvcs import gettext
 _ = gettext.gettext
@@ -46,56 +46,56 @@
     "abstract" (in the language of Java) - it makes no sense to instantiate it
     directly. If you want to define a new kind of menu item, you need to
     subclass it like so:
-    
+
     class MenuPerformMagic:
         identifier = "RabbitVCS::Perform_Magic"
         label = _("Perform Magic")
         tooltip = _("Put on your robe and wizard hat")
-        icon = "rabbitvcs-wand" # or, say, gtk.STOCK_OPEN
-    
+        icon = "rabbitvcs-wand"
+
     There is some introspection magic that goes on to associate the items
     themselves with certain methods of a ContextMenuCondition object or a
     ContextMenuCallback object. This is done by looking at the identifier - the
     part of the identifier after "::" is converted to lowercase and the item
     looks for a method of that name (eg. in the example above,
     "perform_magic").
-    
+
     It is easy to override this, just define condition_name and callback_name
     to be what you need. If the item cannot find anything, it defaults to not
     assigning the callback and having the condition return False.
-    
+
     There a few ways to organise this (and maybe it would be better to have the
     GtkContextMenu class do it), but this is it for the moment.
     """
-    
+
     @staticmethod
     def default_condition(*args, **kwargs):
         return False
-    
+
     @staticmethod
     def make_default_name(identifier):
         return identifier.split(MenuItem.IDENTIFIER_SEPARATOR)[-1].lower()
-    
+
     IDENTIFIER_SEPARATOR = "::"
-    
+
     # These are all explicitly defined here to make it obvious what a subclass
     # needs to set up.
-    
+
     # This is relevant for GTK and Nautilus - they require unique identifiers
     # for all the elements of their menus. Make sure it starts with
     # "RabbitVCS::"
     identifier = None
-    
+
     # The label that appears on the menu item. It is up to the subclass to
     # designate it as translatable.
     label = None
-    
+
     # The tooltip for the menu item. It is up to the subclass to designate it as
     # translatable.
     tooltip = ""
-    
+
     # The icon that will appear on the menu item. This can be, say,
-    # "rabbitvcs-something" or gtk.STOCK_SOMETHING
+    # "rabbitvcs-something"
     icon = None
 
     # This is a string that holds the name of the function that is called when
@@ -118,22 +118,22 @@
     # it cannot find anything, it will set up a function that returns False.
     condition_name = None
     condition_args = ()
-    
+
     def __init__(self, conditions, callbacks):
         """
         Creates a new menu item for constructing the GTK context menu.
         """
-        
+
         self.signals = {}
-        
+
         default_name = MenuItem.make_default_name(self.identifier)
-        
+
         # These flags are used for sanity checks that developers can run to
         # ensure completeness of conditions and callbacks.
-        # See contextmenu.TestMenuItemFunctions() 
+        # See contextmenu.TestMenuItemFunctions()
         self.found_callback = False
         self.found_condition = False
-        
+
         # If no callback name is set, assign the default
         if self.callback_name is None:
             # log.debug("Using default callback name: %s" % default_name)
@@ -148,51 +148,51 @@
         self.condition = {
             "callback": MenuItem.default_condition,
             "args": self.condition_args
-            }            
+            }
 
         if self.condition_name is None:
             self.condition_name = default_name
-            
+
         condition = self._get_function(conditions, self.condition_name)
-        
+
         if condition:
             self.condition["callback"] = condition
             self.found_condition = True
 #        else:
 #            log.debug("Could not find condition for %s" % self.identifier)
-    
+
     def show(self):
         return self.condition["callback"](*self.condition["args"])
-    
+
     def _get_function(self, object, name):
-        
+
         function = None
-        
+
         if hasattr(object, name):
-            
+
             attr = getattr(object, name)
             if callable(attr):
                 function = attr
-        
+
         return function
-      
+
     def make_magic_id(self, id_magic = None):
         identifier = self.identifier
-        
+
         if id_magic:
             identifier = identifier + "-" + str(id_magic)
-            
+
         return identifier
-      
+
     def make_action(self, id_magic = None):
         """
-        Creates the GTK Action for the menu item. To avoid GTK "helpfully"
+        Creates the Action for the menu item. To avoid GTK "helpfully"
         preventing us from adding duplicates (eg. separators), you can pass in
         a string that will be appended and separated from the actual identifier.
         """
         identifier = self.make_magic_id(id_magic)
-        
-        return gtk.Action(identifier, self.make_label(), None, None)
+
+        return Action(identifier, self.make_label(), None, None)
 
     def make_thunar_action(self, id_magic = None):
         identifier = self.make_magic_id(id_magic)
@@ -201,36 +201,50 @@
             identifier,
             self.make_label(),
             self.tooltip,
-            self.icon 
+            self.icon
         )
-            
+
         return action
 
     def make_gtk_menu_item(self, id_magic = None):
         action = self.make_action(id_magic)
-            
+
         if self.icon:
-            # We use this instead of gtk.Action.set_icon_name because
-            # that method is not available until pygtk 2.16
-            action.set_menu_item_type(gtk.ImageMenuItem)
+            # We use this instead of Gtk.Action.set_icon_name because
+            # that method is not available until pyGtk 2.16
+            action.set_menu_item_type(Gtk.ImageMenuItem)
             menuitem = action.create_menu_item()
-            menuitem.set_image(gtk.image_new_from_icon_name(self.icon, gtk.ICON_SIZE_MENU))
+            menuitem.set_image(Gtk.image_new_from_icon_name(self.icon, Gtk.IconSize.MENU))
         else:
             menuitem = action.create_menu_item()
-            
+
         return menuitem
-        
+
     def make_gtk3_menu_item(self, id_magic = None):
         action = self.make_action(id_magic)
-        
+        menuitem = action.create_menu_item()
+
         if self.icon:
-            menuitem = action.create_menu_item()
-            menuitem.set_image(gtk.Image.new_from_icon_name(self.icon, gtk.IconSize.MENU))
-        else:
-            menuitem = action.create_menu_item()
-            
+            menuitem.set_image(Gtk.Image.new_from_icon_name(self.icon, Gtk.IconSize.MENU))
+
         return menuitem
-    
+
+    def make_thunarx_menu_item(self, id_magic = None):
+        # WARNING: this import is here because it will fail if it is not done
+        # inside a thunar process and therefore can't be in the module proper.
+        # This should only be used for Thunarx-3
+        identifier = self.make_magic_id(id_magic)
+
+        from gi.repository import Thunarx
+        menuitem = Thunarx.MenuItem(
+            name=identifier,
+            label=self.make_label(),
+            tooltip=self.tooltip,
+            icon=self.icon
+        )
+
+        return menuitem
+
     def make_nautilus_menu_item(self, id_magic = None):
         # WARNING: this import is here because it will fail if it is not done
         # inside a nautilus process and therefore can't be in the module proper.
@@ -239,14 +253,6 @@
         identifier = self.make_magic_id(id_magic)
 
         try:
-            import nautilus
-            menuitem = nautilus.MenuItem(
-                identifier,
-                self.make_label(),
-                self.tooltip,
-                self.icon
-            )
-        except ImportError:
             from gi.repository import Nautilus
             menuitem = Nautilus.MenuItem(
                 name=identifier,
@@ -254,32 +260,38 @@
                 tip=self.tooltip,
                 icon=self.icon
             )
-            
-                    
+        except ImportError:
+            import nautilus
+            menuitem = nautilus.MenuItem(
+                identifier,
+                self.make_label(),
+                self.tooltip,
+                self.icon
+            )
+
         return menuitem
 
     def make_label(self):
-        label = self.label.replace('_', '__')
-        
+        label = S(self.label).display().replace('_', '__')
         return label
 
 class MenuSeparator(MenuItem):
     identifier = "RabbitVCS::Separator"
     label = SEPARATOR
-       
+
     def make_insensitive(self, menuitem):
         menuitem.set_property("sensitive", False)
-               
+
     def make_thunar_action(self, id_magic = None):
         menuitem = super(MenuSeparator, self).make_thunar_action(id_magic)
         self.make_insensitive(menuitem)
         return menuitem
         # FIXME: I thought that this would work to create separators,
-        # but all I get are black "-"s...		
+        # but all I get are black "-"s...
         # I thought
         #~ identifier = self.make_magic_id(id_magic)
         #~ # This information is not actually used, but is necessary for
-        #~ # the required subclassing of GtkAction.
+        #~ # the required subclassing of Action.
         #~ action = ThunarSeparator(
             #~ identifier,
             #~ self.label,
@@ -287,18 +299,23 @@
             #~ self.icon,
         #~ )
         #~ return action
-               
+
     # Make separators insensitive
     def make_gtk_menu_item(self, id_magic = None):
-        menuitem = gtk.SeparatorMenuItem()
+        menuitem = Gtk.SeparatorMenuItem()
         menuitem.show()
         return menuitem
-    
+
+    def make_gtk3_menu_item(self, id_magic = None):
+        menuitem = Gtk.SeparatorMenuItem()
+        menuitem.show()
+        return menuitem
+
     def make_nautilus_menu_item(self, id_magic = None):
         menuitem = super(MenuSeparator, self).make_nautilus_menu_item(id_magic)
         self.make_insensitive(menuitem)
         return menuitem
-    
+
 class MenuDebug(MenuItem):
     identifier = "RabbitVCS::Debug"
     label = _("Debug")
@@ -313,7 +330,7 @@
     identifier = "RabbitVCS::Debug_Shell"
     label = _("Open Shell")
     icon = "gnome-terminal"
-    condition_name = "debug" 
+    condition_name = "debug"
 
 class MenuRefreshStatus(MenuItem):
     identifier = "RabbitVCS::Refresh_Status"
@@ -346,7 +363,7 @@
     label = _("Checkout...")
     tooltip = _("Check out a working copy")
     icon = "rabbitvcs-checkout"
-    
+
 class MenuUpdate(MenuItem):
     identifier = "RabbitVCS::Update"
     label = _("Update")
@@ -383,7 +400,7 @@
     identifier = "RabbitVCS::Repo_Browser"
     label = _("Repository Browser")
     tooltip = _("Browse a repository tree")
-    icon = gtk.STOCK_FIND
+    icon = "edit-find"
 
 class MenuCheckForModifications(MenuItem):
     identifier = "RabbitVCS::Check_For_Modifications"
@@ -438,7 +455,7 @@
     label = _("Show Changes...")
     tooltip = _("Show changes between paths and revisions")
     icon = "rabbitvcs-changes"
-    
+
 class MenuShowLog(MenuItem):
     identifier = "RabbitVCS::Show_Log"
     label = _("Show Log")
@@ -609,7 +626,7 @@
     identifier = "RabbitVCS::Open"
     label = _("Open")
     tooltip = _("Open a file")
-    icon = gtk.STOCK_OPEN
+    icon = "document-open"
     # Not sure why, but it was like this before...
     condition_name = "_open"
     callback_name = "_open"
@@ -618,38 +635,38 @@
     identifier = "RabbitVCS::Browse_To"
     label = _("Browse to")
     tooltip = _("Browse to a file or folder")
-    icon = gtk.STOCK_HARDDISK
+    icon = "drive-harddisk"
 
 class PropMenuRevert(MenuItem):
     identifier = "RabbitVCS::Property_Revert"
     label = _("Revert property")
     icon =  "rabbitvcs-revert"
     tooltip = _("Revert this property to its original state")
-    
+
 class PropMenuRevertRecursive(MenuItem):
     identifier = "RabbitVCS::Property_Revert_Recursive"
     label = _("Revert property (recursive)")
     icon =  "rabbitvcs-revert"
     tooltip = _("Revert this property to its original state (recursive)")
     condition_name = "property_revert"
-    
+
 class PropMenuDelete(MenuItem):
     identifier = "RabbitVCS::Property_Delete"
     label = _("Delete property")
     icon =  "rabbitvcs-delete"
     tooltip = _("Delete this property")
-    
+
 class PropMenuDeleteRecursive(MenuItem):
     identifier = "RabbitVCS::Property_Delete_Recursive"
     label = _("Delete property (recursive)")
     icon =  "rabbitvcs-delete"
     tooltip = _("Delete this property (recursive)")
     condition_name = "property_delete"
-    
+
 class PropMenuEdit(MenuItem):
     identifier = "RabbitVCS::Property_Edit"
     label = _("Edit details")
-    icon = gtk.STOCK_EDIT
+    icon = "rabbitvcs-editprops"
     tooltip = _("Show and edit property details")
 
 class MenuInitializeRepository(MenuItem):
@@ -700,7 +717,7 @@
     identifier = "RabbitVCS::Stage"
     label = _("Stage")
     icon = "rabbitvcs-add"
-    
+
 class MenuUnstage(MenuItem):
     identifier = "RabbitVCS::Unstage"
     label = _("Unstage")
@@ -720,17 +737,17 @@
 
     """
     ignore_items = []
-    
+
     # Used to weed out duplicate menu items
     added_ignore_labels = []
-    
+
     # These are ignore-by-filename items
     ignorebyfilename_index = 0
     for path in paths:
         basename = os.path.basename(path)
         if basename not in added_ignore_labels:
             key = "IgnoreByFileName%s" % str(ignorebyfilename_index)
-            
+
             class MenuIgnoreFilenameClass(MenuItem):
                 identifier = "RabbitVCS::%s" % key
                 label = basename
@@ -739,17 +756,17 @@
                 callback_args = (path)
                 condition_name = "ignore_by_filename"
                 condition_args = (path)
-            
+
             ignore_items.append((MenuIgnoreFilenameClass, None))
 
     # These are ignore-by-extension items
     ignorebyfileext_index = 0
     for path in paths:
-        extension = rabbitvcs.util.helper.get_file_extension(path)
-        
+        extension = helper.get_file_extension(path)
+
         ext_str = "*%s"%extension
         if ext_str not in added_ignore_labels:
-            
+
             class MenuIgnoreFileExtClass(MenuItem):
                 identifier = "RabbitVCS::%s" % key
                 label = ext_str
@@ -758,39 +775,50 @@
                 callback_args = (path, extension)
                 condition_name = "ignore_by_file_extension"
                 condition_args = (path, extension)
-            
+
             ignore_items.append((MenuIgnoreFileExtClass, None))
 
     return ignore_items
 
-class RabbitVCSAction(gtk.Action):
+class Action(object):
+    def __init__(self, name, label, tooltip, icon_name):
+        self.name = name
+        self.label = label
+        self.tooltip = tooltip
+        self.icon_name = icon_name
+
+    def __repr__(self):
+        return self.get_name()
+
+    def create_menu_item(self):
+        item = Gtk.ImageMenuItem()
+        if self.label:
+            item.set_label(self.label)
+        if self.tooltip:
+            item.set_tooltip_text(self.tooltip)
+        if self.icon_name:
+            item.set_image(Gtk.image_new_from_icon_name(self.icon_name, Gtk.IconSize.MENU))
+        return item
+
+class RabbitVCSAction(Action):
     """
-    Sub-classes gtk.Action so that we can have submenus
+    Sub-classes Action so that we can have submenus.
+    This is needed for context menus that use Gtk actions
     """
 
     __gtype_name__ = "RabbitVCSAction"
 
-    def __init__(self, name, label, tooltip, stock_id):
-        gtk.Action.__init__(self, name, label, tooltip, stock_id)
+    def __init__(self, name, label, tooltip, icon_name):
+        Action.__init__(self, name, label, tooltip, icon_name)
         self.sub_actions = None
-        self.stock_id = stock_id
-
-    def __repr__(self):
-        return self.get_name()
 
     def set_sub_actions(self, sub_actions):
         self.sub_actions = sub_actions
 
-    def do_create_menu_item(self):
-        menu_item = gtk.ImageMenuItem()
-        if self.stock_id:
-            try:
-                self.set_icon_name(self.stock_id)
-            except AttributeError as e:
-                menu_item.set_image(gtk.image_new_from_icon_name(self.stock_id, gtk.ICON_SIZE_MENU))
-
+    def create_menu_item(self):
+        menu_item = super(RabbitVCSAction, self).create_menu_item()
         if self.sub_actions is not None:
-            menu = gtk.Menu()
+            menu = Gtk.Menu()
             menu_item.set_submenu(menu)
 
             for sub_action in self.sub_actions:
@@ -803,6 +831,6 @@
 # FIXME: apparently it's possible to get real GtkSeparators in a Thunar
 # menu, but this doesn't seem to work.
 class ThunarSeparator(RabbitVCSAction):
-		
-	def do_create_menu_item(self):
-		return gtk.SeparatorMenuItem()
+
+    def create_menu_item(self):
+        return Gtk.SeparatorMenuItem()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/util/decorators.py rabbitvcs/rabbitvcs/util/decorators.py
--- rabbitvcs-0.17.1/rabbitvcs/util/decorators.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/util/decorators.py	2019-09-13 08:36:17.261343300 +0800
@@ -1,21 +1,21 @@
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -26,21 +26,17 @@
 
 Decorators should be named as verbs (present or paste tense).
 
-See: 
+See:
 
   - https://linkchecker.svn.sourceforge.net/svnroot/linkchecker/trunk/linkchecker/linkcheck/decorators.py
   - http://wiki.python.org/moin/PythonDecoratorLibrary
-  
+
 """
 from __future__ import absolute_import
 
 import os
 
-if "NAUTILUS_PYTHON_REQUIRE_GTK3" in os.environ and os.environ["NAUTILUS_PYTHON_REQUIRE_GTK3"]:
-    from gi.repository import Gtk as gtk
-else:
-    import gtk
-    gtk.gdk.threads_init()
+from gi.repository import GLib
 
 import time
 import warnings
@@ -51,29 +47,29 @@
 
 def update_func_meta(fake_func, real_func):
     """
-    Set meta information (eg. __doc__) of fake function to that of the real 
+    Set meta information (eg. __doc__) of fake function to that of the real
     function.
-    
+
     @rtype: function
     @return Fake function with metadata of the real function.
     """
-    
+
     fake_func.__module__ = real_func.__module__
     fake_func.__name__ = real_func.__name__
     fake_func.__doc__ = real_func.__doc__
     fake_func.__dict__.update(real_func.__dict__)
-    
+
     return fake_func
 
 def deprecated(func):
     """
     A decorator which can be used to mark functions as deprecated.
     It emits a warning when the function is called.
-    
+
     @type   func: function
     @param  func: The function to be designated as deprecated.
     """
-    
+
     def newfunc(*args, **kwargs):
         """
         Print deprecated warning and execute original function.
@@ -81,19 +77,19 @@
         warnings.warn("Call to deprecated function %s." % func.__name__,
                       category=DeprecationWarning)
         return func(*args, **kwargs)
-        
+
     return update_func_meta(newfunc, func)
-    
+
 def timeit(func):
     """
     This is a decorator which times a function and prints the time it took in
     milliseconds to stdout.
-    
+
     Based on the timeit function from LinkChecker.
-    
+
     @type   func: function
     @param  func: The function to be timed.
-    
+
     """
 
     def newfunc(*args, **kwargs):
@@ -103,67 +99,84 @@
         duration = (time.time() - start_time) * 1000.0
         log.info("%s() took %0.4f milliseconds" % (func.__name__, duration))
         return result
-        
+
     return update_func_meta(newfunc, func)
 
 def disable(func):
     """
     Disable a function.
-    
+
     @type   func: function
     @param  func: The function to be disabled.
-    
+
     """
 
     def newfunc(*args, **kwargs):
         return
-        
+
     return update_func_meta(newfunc, func)
 
 def gtk_unsafe(func):
     """
     Used to wrap a function that makes calls to GTK from a thread in
-    gtk.gdk.threads_enter() and gtk.gdk.threads_leave().
-    
+    the main thread's idle loop.
     """
-    
-    import gtk
-    
+
+    from rabbitvcs.util import helper
+
     def newfunc(*args, **kwargs):
-        gtk.gdk.threads_enter()
-        result = func(*args, **kwargs)
-        gtk.gdk.threads_leave()
-        return result
-        
+        return helper.run_in_main_thread(func, *args, **kwargs)
+
     return update_func_meta(newfunc, func)
 
 def debug_calls(caller_log, show_caller=False):
     """
     Given a log to write messages to, wrap a function and log its invocation
     and return. Use like:
-    
+
     @debug_calls(my_modules_log)
     def actual_function(...):
         ...
-    
+
     Warning: do not use with DBUS decorated methods, as this will play havoc
     with introspection.
     """
-    
+
     # We need a function within a function to be able to use the log argument.
     def real_debug(func):
-        
+
         def newfunc(*args, **kwargs):
             caller_log.debug("Calling: %s (%s)" %
                                 (func.__name__,
                                  threading.currentThread().getName()))
-            
+
             result = func(*args, **kwargs)
             caller_log.debug("Returned: %s (%s)" %
                                 (func.__name__,
                                  threading.currentThread().getName()))
             return result
-        
+
         return update_func_meta(newfunc, func)
-    
+
     return real_debug
+
+def structure_map(func):
+    """
+    Descend recursively into object if it is a list, a tuple, a set or a dict
+    and build the equivalent structure with func results.
+    Do not apply function to None.
+    """
+    def newfunc(obj, *args, **kwargs):
+        if obj is None:
+            return obj
+        if isinstance(obj, list):
+            return [newfunc(item, *args, **kwargs) for item in obj]
+        if isinstance(obj, tuple):
+            return tuple(newfunc(item, *args, **kwargs) for item in obj)
+        if isinstance(obj, set):
+            return {newfunc(item, *args, **kwargs) for item in obj}
+        if isinstance(obj, dict):
+            return {key: newfunc(obj[key], *args, **kwargs) for key in obj}
+        return func(obj, *args, **kwargs)
+
+    return update_func_meta(newfunc, func)
diff -uNr rabbitvcs-0.17.1/rabbitvcs/util/helper.py rabbitvcs/rabbitvcs/util/helper.py
--- rabbitvcs-0.17.1/rabbitvcs/util/helper.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/util/helper.py	2019-09-13 08:36:17.265343405 +0800
@@ -38,24 +38,19 @@
 import time
 import shutil
 import hashlib
+import threading
+import codecs
 
-# A hacky way to get this working with python2 or 3
-try:
-    from urlparse import urlparse, urlunparse
-    from urllib import quote, quote_plus, unquote, unquote_plus
-except ImportError:
-    from urllib.parse import urlparse, urlunparse, quote, quote_plus, unquote, unquote_plus
+from gi.repository import GLib
 
-    
+import six
 from six.moves import filter
 from six.moves import range
-
-try:
-    from gi.repository import GObject as gobject
-except ImportError:
-    import gobject
+import six.moves.urllib.parse
 
 import rabbitvcs.util.settings
+from rabbitvcs.util.decorators import structure_map
+from rabbitvcs.util.strings import *
 
 from rabbitvcs.util.log import Log
 log = Log("rabbitvcs.util.helper")
@@ -63,26 +58,93 @@
 from rabbitvcs import gettext
 ngettext = gettext.ngettext
 
-DATETIME_FORMAT = "%Y-%m-%d %H:%M" # for log files
-LOCAL_DATETIME_FORMAT = locale.nl_langinfo(locale.D_T_FMT) # for UIs
-
-DT_FORMAT_THISWEEK = "%a %I:%M%p"
-DT_FORMAT_THISYEAR = "%b %d %Y"
-DT_FORMAT_ALL = "%b %d %Y"
+try:
+    from html import escape as html_escape
+except ImportError:
+    from cgi import escape as html_escape
 
-LINE_BREAK_CHAR = u'\u23CE'
+import gi
+from gi.repository import GObject
 
 from rabbitvcs import gettext
 _ = gettext.gettext
 
+LOG_DATETIME_FORMAT = "%Y-%m-%d %H:%M" # for log files
+
+DT_FORMAT_TIME = _("%I:%M%P")
+DT_FORMAT_THISWEEK = _("%a %I:%M%p")
+DT_FORMAT_THISYEAR = _("%b %d")
+DT_FORMAT_ALL = _("%b %d %Y")
+
+LINE_BREAK_CHAR = six.unichr(0x23CE)
+
+
+def compare_version(version1, version2, length = None):
+    if not length:
+        length = max(len(version1), len(version2))
+    for i in range(length):
+        x = int(version1[i]) if i in version1 else 0
+        y = int(version2[i]) if i in version2 else 0
+        r = x - y
+        if r:
+            return r
+    return 0
+
+def gobject_threads_init():
+    """
+    Call GObject.threads_init() only if not deprecated.
+    """
+
+    if compare_version(GObject.pygobject_version, [3, 10, 2]) < 0:
+        GObject.threads_init()
+
+@structure_map
+def to_bytes(s, encoding=UTF8_ENCODING):
+    """
+    Convert string (whatever type it is) to bytes in the given encoding.
+    """
+    if isinstance(s, six.text_type):
+        return S(s).bytes(encoding)
+    if isinstance(s, bytearray):
+        if encoding.lower() == UTF8_ENCODING:
+            return s
+        return bytearray(S(s).bytes(encoding))
+    if isinstance(s, bytes) and encoding.lower() != UTF8_ENCODING:
+        return S(s).bytes(encoding)
+    return s
+
+def run_in_main_thread(func, *args, **kwargs):
+    """
+    Execute function in main thread's idle loop.
+    """
+
+    def dofunc(event, func, args, kwargs):
+        try:
+            event.result = func(*args, **kwargs)
+        except Exception as e:
+            event.exception = e
+        event.set()
+
+    if isinstance(threading.current_thread(), threading._MainThread):
+        return func(*args, **kwargs)
+    event = threading.Event()
+    event.result = None
+    event.exception = None
+    GLib.idle_add(dofunc, event, func, args, kwargs)
+    event.wait()
+    if event.exception:
+        raise event.exception
+    return event.result
+
 def get_tmp_path(filename):
     day = datetime.datetime.now().day
-    m = hashlib.md5(str(day) + str(os.geteuid())).hexdigest()[0:10]
-    
+    day_string = S(str(day) + str(os.geteuid())).bytes()
+    m = hashlib.md5(day_string).hexdigest()[0:10]
+
     tmpdir = "/tmp/rabbitvcs-%s" %m
     if not os.path.isdir(tmpdir):
         os.mkdir(tmpdir)
-    
+
     return "%s/%s" % (tmpdir, filename)
 
 def process_memory(pid):
@@ -97,9 +159,9 @@
                              stdout=subprocess.PIPE)
 
     (output, stdin) = psproc.communicate()
-    
+
     mem_in_kb = 0
-    
+
     try:
         mem_in_kb = int(output)
     except ValueError:
@@ -109,27 +171,29 @@
 
     return mem_in_kb
 
-def format_long_text(text, cols=None):
+def format_long_text(text, cols = None, line1only = False):
     """ Nicely formats text containing linebreaks to display in a single line
-    by replacing newlines with U+23CE. If the param "cols" is given, the text
+    by replacing newlines with U+23CE, or keeping only the first non-empty
+    line. If the param "cols" is given, the text
     beyond cols is replaced by "...".
     """
-    text = text.strip().replace(u"\n", LINE_BREAK_CHAR)
+    text = S(text.strip()).unicode().replace(six.u("\n"), LINE_BREAK_CHAR)
+    if line1only:
+        i = text.find(LINE_BREAK_CHAR)
+        if i >= 0:
+            text = text[:i]
     if cols and len(text) > cols:
-        text = u"%s..." % text[0:cols]
+        text = six.u("%s...") % text[0:cols]
 
     return text
 
 def format_datetime(dt, format=None):
     if format:
-        enc = locale.getpreferredencoding(False)
-        if enc is None or len(enc) == 0:
-            enc = "UTF8"
-        return dt.strftime(format).decode(enc)
+        return S(dt.strftime(format), None).unicode()
 
     now = datetime.datetime.now()
     delta = now - dt
-    
+
     returner = ""
     if dt.year == 1900:
         returner = _("(no date)")
@@ -140,7 +204,7 @@
             elif delta.seconds >= 60 and delta.seconds < 600:
                 returner = _("%d minute(s) ago") % (delta.seconds/60)
             elif delta.seconds >= 600 and delta.seconds < 43200:
-                returner = dt.strftime("%I:%M%P")
+                returner = dt.strftime(DT_FORMAT_TIME)
             else:
                 returner = dt.strftime(DT_FORMAT_THISWEEK)
         elif delta.days > 0 and delta.days < 7:
@@ -150,26 +214,23 @@
         else:
             returner = dt.strftime(DT_FORMAT_ALL)
 
-    enc = locale.getpreferredencoding(False)
-    if enc is None or len(enc) == 0:
-        enc = "UTF8"
-    return returner.decode(enc)
+    return S(returner).unicode()
 
 def in_rich_compare(item, list):
     """ Tests whether the item is in the given list. This is mainly to work
     around the rich-compare bug in pysvn. This is not identical to the "in"
     operator when used for substring testing.
     """
-    
+
     in_list = False
-    
+
     if list is not None:
         for thing in list:
             try:
                 in_list = item == thing
             except AttributeError as e:
                 pass
-    
+
     return in_list
 
 # FIXME: this function is duplicated in settings.py
@@ -178,12 +239,12 @@
     Returns the location of the hidden folder we use in the home dir.
     This is used for storing things like previous commit messages and
     peviously used repositories.
-    
+
     @rtype:     string
     @return:    The location of our main user storage folder.
-    
+
     """
-    
+
     # Make sure we adher to the freedesktop.org XDG Base Directory
     # Specifications. $XDG_CONFIG_HOME if set, by default ~/.config
     xdg_config_home = os.environ.get(
@@ -191,76 +252,76 @@
         os.path.join(os.path.expanduser("~"), ".config")
     )
     config_home = os.path.join(xdg_config_home, "rabbitvcs")
-    
+
     # Make sure the directories are there
     if not os.path.isdir(config_home):
         # FIXME: what if somebody places a file in there?
         os.makedirs(config_home, 0o700)
 
     return config_home
-    
+
 def get_user_path():
     """
     Returns the location of the user's home directory.
     /home/$USER
-    
+
     @rtype:     string
     @return:    The location of the user's home directory.
-    
+
     """
-    
+
     return os.path.abspath(os.path.expanduser("~"))
 
 def get_repository_paths_path():
     """
     Returns a valid URI for the repository paths file
-    
+
     @rtype:     string
     @return:    The location of the repository paths file.
-    
+
     """
     return os.path.join(get_home_folder(), "repos_paths")
 
 def get_repository_paths():
     """
     Gets all previous repository paths stored in the user's home folder
-    
+
     @rtype:     list
     @return:    A list of previously used repository paths.
-    
+
     """
-    
+
     returner = []
     paths_file = get_repository_paths_path()
     if os.path.exists(paths_file):
         returner = [x.strip() for x in open(paths_file, "r").readlines()]
-        
+
     return returner
 
 def get_previous_messages_path():
     """
     Returns a valid URI for the previous messages file
-    
+
     @rtype:     string
     @return:    The location of the previous messages file.
-    
+
     """
-    
+
     return os.path.join(get_home_folder(), "previous_log_messages")
 
 def get_previous_messages():
     """
     Gets all previous messages stored in the user's home folder
-    
+
     @rtype:     list
     @return:    A list of previous used messages.
-    
+
     """
-    
+
     path = get_previous_messages_path()
     if not os.path.exists(path):
         return
-        
+
     lines = open(path, "r").readlines()
 
     cur_entry = ""
@@ -283,7 +344,7 @@
         returner.append((date, msg.rstrip()))
 
     returner.reverse()
-    
+
     return returner
 
 def get_exclude_paths_path():
@@ -293,13 +354,13 @@
     path = get_exclude_paths_path()
     if not os.path.exists(path):
         return []
-        
+
     f = open(path, "r")
     paths = []
     for l in f:
         paths.append(l.strip())
     f.close()
-    
+
     return paths
 
 def encode_revisions(revision_array):
@@ -307,30 +368,30 @@
     Takes a list of integer revision numbers and converts to a TortoiseSVN-like
     format. This means we have to determine what numbers are consecutives and
     collapse them into a single element (see doctest below for an example).
-    
+
     @type revision_array:   list of integers
     @param revision_array:  A list of revision numbers.
-    
+
     @rtype:                 string
     @return                 A string of revision numbers in TortoiseSVN-like format.
-    
+
     >>> encode_revisions([4,5,7,9,10,11,12])
     '4-5,7,9-12'
-    
+
     >>> encode_revisions([])
     ''
-    
+
     >>> encode_revisions([1])
     '1'
     """
-    
+
     # Let's get a couple of cases out of the way
     if len(revision_array) == 0:
         return ""
-        
+
     if len(revision_array) == 1:
         return str(revision_array[0])
-    
+
     # Instead of repeating a set of statements we'll just define them as an
     # inner function.
     def append(start, last, list):
@@ -338,38 +399,38 @@
             result = "%s" % start
         else:
             result = "%s-%s" % (start, last)
-            
+
         list.append(result)
-    
+
     # We need a couple of variables outside of the loop
     start = revision_array[0]
     last = revision_array[0]
     current_position = 0
     returner = []
-    
+
     while True:
         if current_position + 1 >= len(revision_array):
             append(start, last, returner)
             break;
-        
+
         current = revision_array[current_position]
         next = revision_array[current_position + 1]
-        
+
         if not current + 1 == next:
             append(start, last, returner)
             start = next
             last = next
-        
+
         last = next
         current_position += 1
-        
+
     return ",".join(returner)
 
 def decode_revisions(string, head):
     """
     Takes a TortoiseSVN-like revision string and returns a list of integers.
     EX. 4-5,7,9-12 -> [4,5,7,9,10,11,12]
-    
+
     TODO: This function is a first draft.  It may not be production-worthy.
     """
     returner = []
@@ -383,21 +444,21 @@
                 returner.append(subel)
         else:
             returner.append(int(el))
-            
+
     return returner
 
 def get_diff_tool():
     """
     Gets the path to the diff_tool, and whether or not to swap lhs/rhs.
-    
+
     @rtype:     dictionary
     @return:    A dictionary with the diff tool path and swap boolean value.
     """
-    
+
     sm = rabbitvcs.util.settings.SettingsManager()
     diff_tool = sm.get("external", "diff_tool")
     diff_tool_swap = sm.get("external", "diff_tool_swap")
-    
+
     return {
         "path": diff_tool,
         "swap": diff_tool_swap
@@ -413,27 +474,27 @@
 
     sm = rabbitvcs.util.settings.SettingsManager()
     return  sm.get("external", "merge_tool")
-    
+
 def launch_diff_tool(path1, path2=None):
     """
     Launches the diff tool of choice.
-    
+
       1.  Generate a standard diff between the path and the latest revision.
       2.  Write the diff text to a tmp file
       3.  Copy the given file (path) to the tmp directory
       4.  Do a reverse patch to get a version of the file that is in the repo.
       5.  Now you have two files and you can send them to the diff tool.
-    
+
     @type   paths: list
     @param  paths: Paths to the given files
 
     """
-    
+
     diff = get_diff_tool()
-    
+
     if diff["path"] == "":
         return
-    
+
     if not os.path.exists(diff["path"]):
         return
 
@@ -442,10 +503,10 @@
         (lhs, rhs) = (path1, path2)
     else:
         patch = os.popen("svn diff --diff-cmd 'diff' '%s'" % path1).read()
-        
+
         tmp_file = get_tmp_path("tmp.patch")
         open(tmp_file, "w").write(patch)
-        
+
         tmp_path = get_tmp_path(os.path.split(path1)[-1])
         if os.path.isfile(path1):
             shutil.copy(path1, tmp_path)
@@ -458,10 +519,10 @@
             "patch --reverse '%s' < %s" % (tmp_path, tmp_file)
         )
         (lhs, rhs) = (tmp_path, path1)
-        
+
     if diff["swap"]:
         (lhs, rhs) = (rhs, lhs)
-    
+
     os.spawnl(
         os.P_NOWAIT,
         diff["path"],
@@ -469,14 +530,14 @@
         lhs,
         rhs
     )
-    
+
 def launch_merge_tool(base="", mine="", theirs="", merged=""):
     merge_tool = get_merge_tool()
-    
+
     if(mine == None or mine == "" or not os.path.exists(mine) or
        theirs == None or theirs == "" or not os.path.exists(theirs)):
         return
-    
+
     if "%base" in merge_tool:
         merge_tool = merge_tool.replace("%base", base)
 
@@ -491,29 +552,29 @@
 
     log.debug("merge_tool: %s"%merge_tool)
     os.popen(merge_tool)
-    
+
 def get_file_extension(path):
     """
     Wrapper that retrieves a file path's extension.
-    
+
     @type   path:   string
     @param  path:   A filename or path.
-    
+
     @rtype:         string
     @return:        A file extension.
-    
+
     """
     return os.path.splitext(path)[1]
-    
+
 def open_item(path):
     """
     Use GNOME default opener to handle file opening.
-    
+
     @type   path: string
     @param  path: A file path.
-    
+
     """
-    
+
     if path == "" or path is None:
         return
 
@@ -524,23 +585,28 @@
         openers.append("open")
         subprocess.Popen(["open", os.path.abspath(path)])
     else:
+        openers.append("gio")
         openers.append("gvfs-open")
         openers.append("xdg-open")
-        openers.append("gio open")
 
     for o in openers:
         for p in set(os.environ['PATH'].split(':')):
             if os.path.exists("%s/%s" % (p, o)):
-                subprocess.Popen([o, os.path.abspath(path)])
+                command = [o]
+                if o == "gio":
+                    command.append("open")
+                command.append(os.path.abspath(path))
+
+                subprocess.Popen(command)
                 return
-    
+
 def browse_to_item(path):
     """
     Browse to the specified path in the file manager
-    
+
     @type   path: string
     @param  path: A file path.
-    
+
     """
 
     import platform
@@ -553,19 +619,19 @@
             "nautilus", "--no-desktop", "--browser",
             os.path.dirname(os.path.abspath(path))
         ])
-    
+
 def delete_item(path):
     """
     Send an item to the trash.
-    
+
     @type   path: string
     @param  path: A file path.
     """
-    
+
     abspath = os.path.abspath(path)
     permanent_delete = False
     try:
-        
+
         import platform
         if platform.system() == 'Darwin':
             retcode = subprocess.call(["mv", abspath, os.getenv("HOME") + "/.Trash"])
@@ -574,27 +640,27 @@
         else:
             # If the gvfs-trash program is not found, an OSError exception will
             # be thrown, and rm will be used instead
-            retcode = subprocess.call(["gvfs-trash", abspath])
+            retcode = subprocess.call(["gio trash", abspath])
             if retcode:
                 permanent_delete = True
     except OSError:
         permanent_delete = True
-    
+
     if permanent_delete:
         if os.path.isdir(abspath):
             shutil.rmtree(abspath, True)
         else:
             os.remove(abspath)
-    
+
 def save_log_message(message):
     """
     Saves a log message to the user's home folder for later usage
-    
+
     @type   message: string
     @param  message: A log message.
-    
+
     """
-    
+
     messages = []
     path = get_previous_messages_path()
     if os.path.exists(path):
@@ -607,16 +673,16 @@
         for i, m in enumerate(messages):
             if message != m[1]:
                 tmp.append(m)
-        
+
         messages = tmp
-             
+
         # Don't allow the number of messages to pile up past the limit
         while len(messages) > limit:
             messages.pop()
 
-    t = time.strftime(DATETIME_FORMAT)
+    t = time.strftime(LOG_DATETIME_FORMAT)
     messages.insert(0, (t, message))
-    
+
     f = open(get_previous_messages_path(), "w")
     s = ""
     for m in messages:
@@ -626,7 +692,7 @@
 %s
 """%(m[0], m[1], s)
 
-    f.write(s.encode("utf-8"))
+    f.write(s)
     f.close()
 
 def save_repository_path(path):
@@ -634,50 +700,50 @@
     Saves a repository path to the user's home folder for later usage
     If the given path has already been saved, remove the old one from the list
     and append the new one to the end.
-    
+
     @type   path: string
     @param  path: A repository path.
-    
+
     """
-    
+
     paths = get_repository_paths()
     if path in paths:
         paths.pop(paths.index(path))
     paths.insert(0, path)
-    
+
     limit = get_repository_paths_limit()
     while len(paths) > limit:
         paths.pop()
-    
+
     f = open(get_repository_paths_path(), "w")
-    f.write("\n".join(paths).encode("utf-8"))
+    f.write(S("\n".join(paths)))
     f.close()
-    
+
 def launch_ui_window(filename, args=[], block=False):
     """
     Launches a UI window in a new process, so that we don't have to worry about
     nautilus and threading.
-    
+
     @type   filename:   string
     @param  filename:   The filename of the window, without the extension
-    
+
     @type   args:       list
     @param  args:       A list of arguments to be passed to the window.
-    
+
     @rtype:             integer
     @return:            The pid of the process (if launched)
     """
-    
+
     # Hackish.  Get's the helper module's path, then assumes it is in
     # the lib folder.  Removes the /lib part of the path.
     basedir, head = os.path.split(
                         os.path.dirname(
                             os.path.realpath(__file__)))
-    
+
     env = os.environ
-    if "NAUTILUS_PYTHON_REQUIRE_GTK3" in env:
-        del env["NAUTILUS_PYTHON_REQUIRE_GTK3"]
-    
+    if "REQUIRE_GTK3" in env:
+        del env["REQUIRE_GTK3"]
+
     if not head == "util":
         log.warning("Helper module (%s) not in \"util\" dir" % __file__)
 
@@ -710,13 +776,13 @@
 
 def get_common_directory(paths):
     common = os.path.commonprefix(abspaths(paths))
-    
+
     while not os.path.exists(common) or os.path.isfile(common):
         common = os.path.split(common)[0]
-        
+
         if common == "":
             break
-        
+
     return common
 
 def abspaths(paths):
@@ -724,25 +790,25 @@
     for path in paths:
         paths[index] = os.path.realpath(os.path.abspath(path))
         index += 1
-    
+
     return paths
 
 def pretty_timedelta(time1, time2, resolution=None):
     """
     Calculate time delta between two C{datetime} objects.
     (the result is somewhat imprecise, only use for prettyprinting).
-    
+
     Was originally based on the function pretty_timedelta from:
-	http://trac.edgewall.org/browser/trunk/trac/util/datefmt.py
+        http://trac.edgewall.org/browser/trunk/trac/util/datefmt.py
     """
-    
+
     if time1 > time2:
         time2, time1 = time1, time2
     diff = time2 - time1
     age_s = int(diff.days * 86400 + diff.seconds)
     if resolution and age_s < resolution:
         return ""
-    
+
     # I do not see a way to make this less repetitive - to make the
     # strings fully translatable (i.e. also for languages that have more
     # or less than two plural forms) we have to state all the strings
@@ -768,6 +834,22 @@
         r = age_s / (3600 * 24 * 365)
         return ngettext("%i year", "%i years",r) % r
 
+def utc_offset(timestamp=None):
+    """
+        Compute the UTC offset of current locale for a timestamp in a
+        portable way, taking care of daylight saving. Positive is east of
+        Greenwich. Result in seconds. If no timestamp is given, the current
+        time is used.
+    """
+
+    if timestamp is None:
+        timestamp = time.time()
+
+    timestamp = int(timestamp)
+    utc = datetime.datetime.utcfromtimestamp(timestamp)
+    local = datetime.datetime.fromtimestamp(timestamp)
+    return int((local - utc).total_seconds())
+
 def _commonpath(l1, l2, common=[]):
     """
     Helper method for the get_relative_path method
@@ -776,28 +858,28 @@
     if len(l2) < 1: return (common, l1, l2)
     if l1[0] != l2[0]: return (common, l1, l2)
     return _commonpath(l1[1:], l2[1:], common+[l1[0]])
-    
+
 def get_relative_path(from_path, to_path):
     """
     Method that returns the relative path between the specified paths
     """
-    
+
     nice_path1 = from_path.rstrip(os.path.sep).split(os.path.sep)
     nice_path2 = to_path.rstrip(os.path.sep).split(os.path.sep)
-    
+
     (common,l1,l2) = _commonpath(nice_path1, nice_path2)
-    
+
     p = []
     if len(l1) > 0:
         p = ['..'] * len(l1)
     p = p + l2
-    
+
     return os.sep.join(p)
 
 def launch_repo_browser(uri):
     sm = rabbitvcs.util.settings.SettingsManager()
     repo_browser = sm.get("external", "repo_browser")
-    
+
     if repo_browser is not None:
         subprocess.Popen([
             repo_browser,
@@ -820,54 +902,85 @@
         return path + "@" + str(revision)
     else:
         return path
-        
+
 def url_join(path, *args):
     return "/".join([path.rstrip("/")] + list(args))
 
+def _quote(text):
+    return six.moves.urllib.parse.quote(text,
+                                        encoding=UTF8_ENCODING,
+                                        errors=SURROGATE_ESCAPE)
+
+def _quote_plus(text):
+    return six.moves.urllib.parse.quote_plus(text,
+                                             encoding=UTF8_ENCODING,
+                                             errors=SURROGATE_ESCAPE)
+
+def _unquote(text):
+    return six.moves.urllib.parse.unquote(text,
+                                          encoding=UTF8_ENCODING,
+                                          errors=SURROGATE_ESCAPE)
+
+def _unquote_plus(text):
+    return six.moves.urllib.parse.unquote_plus(text,
+                                               encoding=UTF8_ENCODING,
+                                               errors=SURROGATE_ESCAPE)
+
+quote = _quote
+quote_plus = _quote_plus
+unquote = _unquote
+unquote_plus = _unquote_plus
+
+try:
+    unquote("")
+except TypeError:
+    quote = six.moves.urllib.parse.quote
+    quote_plus = six.moves.urllib.parse.quote_plus
+    unquote = six.moves.urllib.parse.unquote
+    unquote_plus = six.moves.urllib.parse.unquote_plus
+
 def quote_url(url_text):
-    (scheme, netloc, path, params, query, fragment) = urlparse(url_text)
+    (scheme, netloc, path, params, query, fragment) = six.moves.urllib.parse.urlparse(url_text)
     # netloc_quoted = quote(netloc)
     path_quoted = quote(path)
     params_quoted = quote(query)
     query_quoted = quote_plus(query)
     fragment_quoted = quote(fragment)
-    
-    url_quoted = urlunparse(
-                            (scheme,
-                             netloc,
-                             path_quoted,
-                             params_quoted,
-                             query_quoted,
-                             fragment_quoted))
+
+    url_quoted = six.moves.urllib.parse.urlunparse((scheme,
+                                                    netloc,
+                                                    path_quoted,
+                                                    params_quoted,
+                                                    query_quoted,
+                                                    fragment_quoted))
 
     return url_quoted
 
 def unquote_url(url_text):
-    (scheme, netloc, path, params, query, fragment) = urlparse(url_text)
+    (scheme, netloc, path, params, query, fragment) = six.moves.urllib.parse.urlparse(url_text)
     # netloc_unquoted = unquote(netloc)
-    path_unquoted = unquote(path).decode('utf-8')
+    path_unquoted = unquote(path)
     params_unquoted = unquote(query)
     query_unquoted = unquote_plus(query)
     fragment_unquoted = unquote(fragment)
-    
-    url_unquoted = urlunparse(
-                            (scheme,
-                             netloc,
-                             path_unquoted,
-                             params_unquoted,
-                             query_unquoted,
-                             fragment_unquoted))
+
+    url_unquoted = six.moves.urllib.parse.urlunparse((scheme,
+                                                      netloc,
+                                                      path_unquoted,
+                                                      params_unquoted,
+                                                      query_unquoted,
+                                                      fragment_unquoted))
 
     return url_unquoted
 
 
 def pretty_filesize(bytes):
     if bytes >= 1073741824:
-        return str(bytes / 1073741824) + ' GB'
+        return str(int(bytes / 1073741824)) + ' GB'
     elif bytes >= 1048576:
-        return str(bytes / 1048576) + ' MB'
+        return str(int(bytes / 1048576)) + ' MB'
     elif bytes >= 1024:
-        return str(bytes / 1024) + ' KB'
+        return str(int(bytes / 1024)) + ' KB'
     elif bytes < 1024:
         return str(bytes) + ' bytes'
 
@@ -885,7 +998,7 @@
     """
     A non-recursive generator function that walks through a tree (and all
     children) yielding results.
-    
+
     The tree should be of the form:
       [(NodeOne, None),
        (NodeTwo,
@@ -896,31 +1009,31 @@
          ]
        (NodeThree, None),
         etc...]
-    
+
     If show_levels is True, the values returned are (level, value) where level
     is zero for the top level items in the tree. Otherwise, just "value" is
     returned.
-    
+
     If a callable "preprocess" is supplied, it is applied BEFORE the filter,
     as each element is encountered.
-    
+
     If a callable "filter" is supplied, it is applied to whatever "preprocess"
     returned, and if it returns False for an item, the item and its children
     will be skipped.
-    
+
     If "start" is given, the walk will be applied only to that node and its
     children. No preprocessing or filtering will be applied to other elements.
     """
     annotated_tree = [(0, element) for element in tree]
-    
+
     to_process = deque(annotated_tree)
-    
+
     # If we're not given a starting point, the top is the start
     found_starting_point = not start
-    
+
     while to_process:
         (level, (node, children)) = to_process.popleft()
-        
+
         if not found_starting_point and (node == start):
             # If we're given a starting point and we've found it, clear the list
             # and start from here
@@ -935,10 +1048,10 @@
                 value = preprocess(node)
             else:
                 value = node
-            
+
             if filter and not filter(value):
                 continue
-            
+
             if show_levels:
                 yield (level, value)
             else:
@@ -953,7 +1066,7 @@
     if path.startswith("/"):
         return "file://%s" % path
     return path
-    
+
 def parse_patch_output(patch_file, base_dir, strip=0):
     """ Runs the GNU 'patch' utility, parsing the output. This is actually a
     generator which yields values as each section of the patch is applied.
@@ -986,11 +1099,12 @@
     p = "-p%s" % strip
     patch_proc = subprocess.Popen(["patch", "-N", "-t", p, "-i", str(patch_file), "--directory", base_dir],
                                       stdout = subprocess.PIPE,
-                                      stderr = subprocess.PIPE,
+                                      stderr = subprocess.STDOUT,
                                       env = env)
 
     # Intialise things...
-    line = patch_proc.stdout.readline()
+    out = codecs.getreader(UTF8_ENCODING)(patch_proc.stdout, SURROGATE_ESCAPE)
+    line = out.readline()
     patch_match = PATCHING_RE.match(line)
 
     current_file = None
@@ -1000,7 +1114,7 @@
         # There was output, but unexpected. Almost certainly an error of some
         # sort.
         patch_proc.wait()
-        output = line + patch_proc.stdout.read()
+        output = line + out.read()
         raise rabbitvcs.vcs.ExternalUtilError("patch", output)
         # Note the excluded case: empty line. This falls through, skips the loop
         # and returns.
@@ -1010,9 +1124,9 @@
 
     while current_file:
 
-        line = patch_proc.stdout.readline()
+        line = out.readline().rstrip(" \t\r\n")
         while not line and patch_proc.poll() is None:
-            line = patch_proc.stdout.readline()
+            line = out.readline().rstrip(" \t\r\n")
 
         # Does patch tell us we're starting a new file?
         patch_match = PATCHING_RE.match(line)
@@ -1047,3 +1161,84 @@
     patch_proc.wait() # Don't leave process running...
     return
 
+
+def HSLtoRGB(h, s, l):
+    """
+    Convert a color from the HSL space to RGB.
+
+    @type   h: (int, float)
+    @param  h: Hue in degrees.
+
+    @type   s: float
+    @param  s: Saturation in range 0.0 to 1.0
+
+    @type   l: float
+    @param  l: Luminance in range 0.0 to 1.0
+    """
+
+    if not 0.0 <= s <= 1.0:
+        raise ValueError("Saturation should be >= 0.0 and <= 1.0")
+    if not 0.0 <= l <= 1.0:
+        raise ValueError("Luminance should be >= 0.0 and <= 1.0")
+
+    if s == 0.0:
+        return (0, 0, 0)
+
+    sextant = h % 360.0 / 60.0
+    c = (1.0 - abs(2.0 * l - 1.0)) * s
+    x = (1.0 - abs(sextant % 2.0 - 1.0)) * c
+    m = l - c / 2.0
+    i = int(sextant)
+    r = [c, x, 0.0, 0.0, x, c][i]
+    g = [x, c, c, x, 0.0, 0.0][i]
+    b = [0.0, 0.0, x, c, c, x][i]
+    return (int((v + m) * 255.0) for v in (r, g, b))
+
+
+def html_color(r, g, b, a=None):
+    fmt = "%02X"
+    alpha = a or 0
+    if r < 0x10 and g < 0x10 and b < 0x10 and alpha < 0x10:
+        fmt = "%01X"
+    color = (fmt * 3) % (r, g, b)
+    if not a is None:
+        color += fmt % a
+    return "#" + color
+
+
+"""
+In Python 3, Gdk.init_check() encodes sys.argv without handling surrogates,
+causing an UnicodeEncodeError exception while importing Gdk.
+The following class implements a mechanism to avoid that:
+- The first Gdk import performed by a program should be preceded by
+  a SanitizeArgv object creation.
+- After Gdk import, call this object's method restore().
+For this reason, the current module MAY NOT import Gdk, directly or
+indirectly.
+"""
+
+class SanitizeArgv():
+    def __init__(self):
+        self.argmap = None
+        if len(sys.argv) and isinstance(sys.argv[0], six.text_type):
+            argmap = []
+            newargv = []
+            for arg in sys.argv:
+                newarg = S(arg).display()
+                newargv.append(newarg)
+                argmap.append((newarg, arg))
+                if arg != newarg:
+                    self.argmap = argmap
+            if self.argmap:
+                sys.argv = newargv
+
+    def restore(self):
+        if self.argmap:
+            newargv = []
+            i = 0
+            for arg in sys.argv:
+                while arg != self.argmap[i][0]:
+                    i += 1
+                newargv.append(self.argmap[i][1])
+                i += 1
+            sys.argv = newargv
diff -uNr rabbitvcs-0.17.1/rabbitvcs/util/highlighter.py rabbitvcs/rabbitvcs/util/highlighter.py
--- rabbitvcs-0.17.1/rabbitvcs/util/highlighter.py	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/rabbitvcs/util/highlighter.py	2019-09-13 08:36:17.265343405 +0800
@@ -0,0 +1,160 @@
+#
+# This is an extension to the Nautilus file manager to allow better
+# integration with the Subversion source control system.
+#
+# Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
+# Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
+# Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
+#
+# RabbitVCS is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# RabbitVCS is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
+#
+
+"""
+Syntax highlighter based on the pygments module.
+"""
+
+import six
+from rabbitvcs.util.strings import S
+from rabbitvcs.util.log import Log
+
+logger = Log("rabbitvcs.util.highlighter")
+
+HAS_PYGMENTS = True
+try:
+    import pygments
+    import pygments.formatters
+    import pygments.formatter
+    import pygments.lexers
+    import pygments.util
+except:
+    HAS_PYGMENTS = False
+
+escape_markup_table = {
+    ord("&"): six.u("&amp;"),
+    ord("<"): six.u("&lt;"),
+    ord(">"): six.u("&gt;"),
+    ord('"'): six.u("&quot;"),
+    ord("'"): six.u("&apos;")
+}
+
+
+def mklist(arg):
+    if not isinstance(arg, list):
+        arg = [arg]
+    return arg
+
+def no_highlight(lines):
+    return [S(l).unicode().translate(escape_markup_table) for l in mklist(lines)]
+
+
+if not HAS_PYGMENTS:
+    def highlight(filename, sourcelines):
+        return no_highlight(sourcelines)
+else:
+    # Pygments custom formatter generating Pango makup language.
+
+    class PangoMarkupFormatter(pygments.formatter.Formatter):
+        def __init__(self, bylines=False, **options):
+            super(PangoMarkupFormatter, self).__init__(**options)
+            self.bylines = bylines
+            self.styles = {}
+            for token, style in self.style:
+                start = end = ""
+                if style["color"]:
+                    start += ' foreground="#%s"' % style["color"]
+                if style["bgcolor"]:
+                    start += ' background="#%s"' % style["bgcolor"]
+                if style["bold"]:
+                    start += ' weight="bold"'
+                if style["italic"]:
+                    start += ' style="italic"'
+                if style["underline"]:
+                    start += ' underline="single"'
+                if style["sans"]:
+                    start += ' face="sans"'
+                if style["roman"]:
+                    start += ' face="serif"'
+                elif style["mono"]:
+                    start += ' face="monospace"'
+
+                if start == ' weight="bold"':
+                    start, end = "<b>", "</b>"
+                elif start == ' style="italic"':
+                    start, end = "<i>", "</i>"
+                elif start == ' underline="single"':
+                    start, end = "<u>", "</u>"
+                elif start == ' face="monospace"':
+                    start, end = "<tt>", "</tt>"
+                elif start:
+                    start = "<span%s>" % start
+                    end = "</span>"
+                self.styles[token] = (start, end)
+
+        def format(self, tokensource, outfile):
+            self.lastval = ""
+            self.lasttype = None
+
+            def flush(self):
+                if self.lastval:
+                    stylebegin, styleend = self.styles[self.lasttype]
+                    outfile.write(stylebegin + self.lastval + styleend)
+                    self.lastval = ""
+
+            def format_single(self, ttype, value):
+                value = value.translate(escape_markup_table)
+
+                if ttype != self.lasttype:
+                    flush(self)
+                    self.lasttype = ttype
+
+                self.lastval += value
+
+
+            for ttype, value in tokensource:
+                lines = [value]
+                if self.bylines:
+                    lines = value.splitlines()
+                    if S(value[-1:]) in ["\r", "\n"]:
+                        lines.append(value[0:0])
+
+                while not ttype in self.styles:
+                    ttype = ttype.parent
+
+                if lines:
+                    format_single(self, ttype, lines[0])
+                    for line in lines[1:]:
+                        flush(self)
+                        outfile.write(six.u("\n"))
+                        format_single(self, ttype, line)
+
+            flush(self)
+
+
+    def highlight(filename, sourcelines):
+        sourcelines = mklist(sourcelines)
+        source = "\n".join(sourcelines)
+        try:
+            lexer = pygments.lexers.guess_lexer_for_filename(filename, source)
+        except pygments.util.ClassNotFound:
+            return no_highlight(sourcelines)
+
+        formatter = PangoMarkupFormatter(bylines=True)
+        lines = pygments.highlight(source, lexer, formatter).splitlines()
+
+        # Trailing empty lines may have been lost.
+        n = len(sourcelines) - len(lines)
+        if n > 0:
+            lines += [""] * n
+
+        return lines
diff -uNr rabbitvcs-0.17.1/rabbitvcs/util/log.py rabbitvcs/rabbitvcs/util/log.py
--- rabbitvcs-0.17.1/rabbitvcs/util/log.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/util/log.py	2019-09-13 08:36:17.265343405 +0800
@@ -1,21 +1,21 @@
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -23,13 +23,13 @@
 """
 Provides a simple wrapper around the python logger.
 
-Right now there is the base Log class, and three specialized classes that 
+Right now there is the base Log class, and three specialized classes that
 inherit from the Log class: ConsoleLog, FileLog, and DualLog.  ConsoleLog logs
 messages to the standard output (command line), FileLog outputs to a log file,
 and DualLog outputs to both.
 
 The programmer does not need to think about the logger types because this will
-be specified in the user's settings.  So to set up your module to log do the 
+be specified in the user's settings.  So to set up your module to log do the
 following:
 
 Usage:
@@ -47,6 +47,7 @@
 import logging.handlers
 
 from rabbitvcs.util.settings import SettingsManager, get_home_folder
+from rabbitvcs.util.strings import *
 
 LEVELS = {
     "debug":    logging.DEBUG,
@@ -66,7 +67,7 @@
     DEFAULT_LEVEL = "debug"
     settings.set("logging", "level", DEFAULT_LEVEL.title())
     changed = True
-    
+
 if not DEFAULT_LOG_TYPE:
     DEFAULT_LOG_TYPE = "Console"
     settings.set("logging", "type", DEFAULT_LOG_TYPE)
@@ -85,115 +86,115 @@
     """
     Provides a wrapper around the logging module to simplify some logging tasks.
     This base class should generally not be called.
-    
+
     """
-    
+
     def __init__(self, logger="", level=DEFAULT_LEVEL):
         self.logger = logging.getLogger(logger)
         self.level = level
         self.logger.setLevel(LEVELS[level])
         self.handler = None
-    
+
     def set_level(self, level=DEFAULT_LEVEL):
         """
         Set the mimimum level to be logged.
-        
+
         @type   level: string
         @param  level: The minimum level to log.  (debug, info, warning, error, critical)
-        
+
         """
-        
+
         self.level = level
         self.logger.setLevel(LEVELS[level])
-    
+
     def debug(self, msg=""):
         """
         Pass a debug level log message (Numeric value: 10)
-        
+
         @type   msg: string
         @param  msg: The message to pass
-        
+
         """
-        
+
         self.logger.debug(msg)
-    
+
     def info(self, msg=""):
         """
         Pass an info level log message (Numeric value: 20)
-        
+
         @type   msg: string
         @param  msg: The message to pass
-        
+
         """
-        
+
         self.logger.info(msg)
-    
+
     def warning(self, msg=""):
         """
         Pass a warning level log message (Numeric value: 30)
-        
+
         @type   msg: string
         @param  msg: The message to pass
-        
+
         """
-        
+
         self.logger.warning(msg)
-        
+
     def error(self, msg=""):
         """
         Pass an error level log message (Numeric value: 40)
-        
+
         @type   msg: string
         @param  msg: The message to pass
-        
+
         """
-        
+
         self.logger.error(msg)
-    
+
     def critical(self, msg=""):
         """
         Pass a critical level log message (Numeric value: 50)
-        
+
         @type   msg: string
         @param  msg: The message to pass
-        
+
         """
-        
+
         self.logger.critical(msg)
 
     def exception(self, msg=""):
         """
         Pass a exception level log message (Numeric value: 50)
-        
+
         @type   msg: string
         @param  msg: The message to pass
-        
+
         """
-        
+
         self.logger.exception(msg)
-    
+
     def exception_info(self, msg, exc_info):
         """
         Pass an exception info tuple (as per sys.exc_info() format, (type,
         value, traceback).
-        
+
         @type exc_info: (type, value, traceback)
         @param exc_info: exception info
         """
         self.logger.debug(msg, exc_info=exc_info)
-    
+
     def set_handler(self, handler, format=DEFAULT_FORMAT):
         """
         Set how the logging module should handle log messages.
-        
+
         @type   handler: logging.Handler
         @param  handler: The class that handles log messages
-        
+
         @type   format: string
         @param  format: The formatting to be used when displaying messages
-        
+
         """
-        
+
         self.handler = handler
         self.handler.setLevel(LEVELS[self.level])
         self.handler.setFormatter(logging.Formatter(format))
@@ -203,24 +204,24 @@
     """
     Inherits from BaseLog and provides a simple interface to log calls to the
     command line/standard output.
-    
+
     Usage:
         clog = ConsoleLog("rabbitvcs.ui.commit")
         clog.debug("This function needs refactoring")
         clog.error("You just screwed the pooch!")
-    
+
     """
-    
+
     def __init__(self, logger="", level=DEFAULT_LEVEL):
         """
         @type   logger: string
         @param  logger: A keyword describing the source of the log messages
-        
+
         @type   level: string
-        @param  level: The minimum level to log.  (debug, info, warning, error, critical) 
-        
+        @param  level: The minimum level to log.  (debug, info, warning, error, critical)
+
         """
-        
+
         BaseLog.__init__(self, logger, level)
         self.set_handler(logging.StreamHandler(), CONSOLE_FORMAT)
 
@@ -228,27 +229,27 @@
     """
     Inherits from BaseLog and provides a simple interface to log calls to file
     which is automatically rotated every day and keeps seven days worth of data.
-    
+
     Usage:
         flog = FileLog("rabbitvcs.ui.commit")
         flog.debug("This function needs refactoring")
         flog.error("You just screwed the pooch!")
-    
+
     """
 
     def __init__(self, logger="", level=DEFAULT_LEVEL):
         """
         @type   logger: string
         @param  logger: A keyword describing the source of the log messages
-        
+
         @type   level: string
-        @param  level: The minimum level to log.  (debug, info, warning, error, critical) 
-        
+        @param  level: The minimum level to log.  (debug, info, warning, error, critical)
+
         """
 
         BaseLog.__init__(self, logger, level)
         self.set_handler(
-            logging.handlers.TimedRotatingFileHandler(LOG_PATH, "D", 1, 7, "utf-8"), 
+            logging.handlers.TimedRotatingFileHandler(LOG_PATH, "D", 1, 7, UTF8_ENCODING),
             FILE_FORMAT
         )
 
@@ -257,27 +258,27 @@
     Inherits from BaseLog and provides a simple interface to log calls to both the
     command line/standard output and a file which is automatically rotated every
     day.
-    
+
     Usage:
         dlog = DualLog("rabbitvcs.ui.commit")
         dlog.debug("This function needs refactoring")
         dlog.error("You just screwed the pooch!")
-    
+
     """
 
     def __init__(self, logger="", level=DEFAULT_LEVEL):
         """
         @type   logger: string
         @param  logger: A keyword describing the source of the log messages
-        
+
         @type   level: string
-        @param  level: The minimum level to log.  (debug, info, warning, error, critical) 
-        
+        @param  level: The minimum level to log.  (debug, info, warning, error, critical)
+
         """
-        
+
         BaseLog.__init__(self, logger, level)
         self.set_handler(
-            logging.handlers.TimedRotatingFileHandler(LOG_PATH, "D", 1, 7, "utf-8"), 
+            logging.handlers.TimedRotatingFileHandler(LOG_PATH, "D", 1, 7, UTF8_ENCODING),
             FILE_FORMAT
         )
         self.set_handler(logging.StreamHandler(), CONSOLE_FORMAT)
@@ -285,7 +286,7 @@
 class NullHandler(logging.Handler):
     """
     Handles log messages and doesn't do anything with them
-    
+
     """
 
     def emit(self, record):
@@ -294,8 +295,8 @@
 class NullLog(BaseLog):
     """
     If the user does not want to generate a log file, use the NullLog.  It calls
-    the NullHandler class as its handler.    
-    
+    the NullHandler class as its handler.
+
     """
 
     def __init__(self, *args, **kwargs):
@@ -309,17 +310,17 @@
     Log = ConsoleLog
 elif DEFAULT_LOG_TYPE == "Both":
     Log = DualLog
-    
+
 def reload_log_settings():
     """
     Refreshes the settings manager and returns a new log instance
-    
+
     """
-    
+
     settings = SettingsManager()
     DEFAULT_LEVEL = settings.get("logging", "level").lower()
     DEFAULT_LOG_TYPE = settings.get("logging", "type")
-    
+
     Log = NullLog
     if DEFAULT_LOG_TYPE == "File":
         Log = FileLog
@@ -327,5 +328,5 @@
         Log = ConsoleLog
     elif DEFAULT_LOG_TYPE == "Both":
         Log = DualLog
-    
+
     return Log
diff -uNr rabbitvcs-0.17.1/rabbitvcs/util/settings.py rabbitvcs/rabbitvcs/util/settings.py
--- rabbitvcs-0.17.1/rabbitvcs/util/settings.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/util/settings.py	2019-09-13 08:36:17.265343405 +0800
@@ -1,21 +1,21 @@
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -34,31 +34,35 @@
 import shutil
 import configobj
 import validate
+import re
 
 from rabbitvcs import package_prefix
 
+MULTILINE_ESCAPE_RE = re.compile(r'''([\\'"])''')
+MULTILINE_UNESCAPE_RE = re.compile(r"\\(.)")
+
 def get_home_folder():
-    """ 
+    """
     Returns the location of the hidden folder we use in the home dir.
     This is used for storing things like previous commit messages and
     previously used repositories.
-    
+
     FIXME: This is a copy of the helper module's function, because I can't
     have a circular module reference (helper imports Settings right now).
-    
+
     @rtype:     string
     @return:    The location of our main user storage folder.
-    
+
     """
-    
-    # Make sure we adher to the freedesktop.org XDG Base Directory 
-    # Specifications. $XDG_CONFIG_HOME if set, by default ~/.config 
+
+    # Make sure we adher to the freedesktop.org XDG Base Directory
+    # Specifications. $XDG_CONFIG_HOME if set, by default ~/.config
     xdg_config_home = os.environ.get(
-        "XDG_CONFIG_HOME", 
+        "XDG_CONFIG_HOME",
         os.path.join(os.path.expanduser("~"), ".config")
     )
     config_home = os.path.join(xdg_config_home, "rabbitvcs")
-    
+
     # Make sure the directories are there
     if not os.path.isdir(config_home):
         # FIXME: what if somebody places a file in there?
@@ -76,45 +80,45 @@
         "/usr/share/rabbitvcs/configspec.ini",
         "/usr/local/share/rabbitvcs/configspec.ini"
     ]
-    
+
     for path in configspec_paths:
         if os.path.exists(path):
             return path
-    
+
     raise IOError("Cannot find a configspec.ini file")
 
 SETTINGS_SPEC = find_configspec()
 
 class SettingsManager:
     """
-    This class provides an shallow interface for the rest of the program to use 
+    This class provides an shallow interface for the rest of the program to use
     to interact with our configuration file.
-    
+
     Usage::
-    
+
         Get settings:
             sm = SettingsManager()
             diff_tool = sm.get("external", "diff_tool")
-            
+
         Set settings:
             sm = SettingsManager()
             sm.set("external", "diff_tool", "/usr/bin/meld")
             sm.write()
     """
-    
+
     def __init__(self):
-        
+
         self.settings = configobj.ConfigObj(
             infile=SETTINGS_FILE,
             create_empty=True,
             indent_type="    ",
             configspec=SETTINGS_SPEC
         )
-        
+
         self.validator = validate.Validator()
-        
+
         valid = self.settings.validate(self.validator)
-                
+
         # We cannot use "if not valid" here, since validate() returns a dict
         # if validation fails!
         # See:
@@ -127,30 +131,30 @@
             # One option is to copy it to a different file and recreate it...
             log.warning("User configuration not valid. Backing up and recreating.")
             self.backup_and_rewrite_config()
-        
+
 
     def get(self, section=None, keyword=None):
         """
         Get the settings for a section and/or keyword
         If no arguments are given, it just returns all settings
-        
+
         @type section:  string
         @param section: A settings section.
-        
+
         @type keyword:  string
         @param keyword: A particular setting in a section.
-        
+
         @rtype:         dictionary or string
         @return:        Either a dictionary or string with setting(s).
-        
+
         """
-        
+
         if section is None:
             return self.settings
-            
+
         if keyword is None:
             return self.settings[section]
-        
+
         returner = ""
         try:
             returner = self.settings[section][keyword]
@@ -158,68 +162,75 @@
             print("Error: section %s:%s doesn't exist" % (section, keyword))
 
         return returner
-        
+
     def set(self, section, keyword, value=""):
         """
         Set settings for a particular section and keyword
 
         @type section:  string
         @param section: A settings section.
-        
+
         @type keyword:  string
         @param keyword: A particular setting in a section.
-        
+
         @type value:    string or dictionary
         @param value:   Setting value.
 
         """
-        
+
         if section not in self.settings:
             self.settings[section] = {}
 
         self.settings[section][keyword] = value
-            
+
+    # Multilines are escaped to allow them containing '''
+    def get_multiline(self, section=None, keyword=None):
+        return MULTILINE_UNESCAPE_RE.sub(r"\1", self.get(section, keyword))
+
+    def set_multiline(self, section, keyword, value=""):
+        self.set(section, keyword, MULTILINE_ESCAPE_RE.sub(r"\\\1", value))
+
     def set_comments(self, section, comments=[]):
         """
         Set multi-line comments for a section
-        
+
         @type section:      string
         @param section:     A settings section.
-        
+
         @type comments:     list
         @param comments:    A list of strings.
-        
+
         """
 
         self.settings.comments[section] = comments
-        
+
     def set_inline_comments(self, section, comments=""):
         """
         Set inline comments for a section
-        
+
         @type section:      string
         @param section:     A settings section.
-        
+
         @type comments:     string
         @param comments:    A single line comment.
-        
+
         """
 
         self.settings.inline_comments[section] = comments
-        
+
     def write(self):
         """
         Write the settings and comments to the settings file
-        
+
         """
-        
+
         self.settings.write()
-        
+
     def clear(self):
         """
         Clear the settings object so that all sections/keywords are gone
         This function does not write-to-file.  Only clears from memory.
-        
+
         """
         self.settings = configobj.ConfigObj(indent_type="    ")
         self.settings.filename = SETTINGS_FILE
@@ -229,53 +240,53 @@
         """
         Specify a set of default settings and write to file.
         Called when there is no settings.conf present.
-        
+
         """
-        
+
         self.settings = configobj.ConfigObj(
             DEFAULT_SETTINGS,
             indent_type="    "
         )
         self.settings.filename = SETTINGS_FILE
-    
+
     def get_default(self, section, keyword):
         """
         Get the default settings for a section and/or keyword
         If no arguments are given, it just returns all settings
-        
+
         @type section:  string
         @param section: A settings section.
-        
+
         @type keyword:  string
         @param keyword: A particular setting in a section.
-        
+
         @rtype:         dictionary or string
         @return:        Either a dictionary or string with setting(s).
-        
+
         """
-        
+
         if section is None:
             return DEFAULT_SETTINGS
-            
+
         if keyword is None:
             return DEFAULT_SETTINGS[section]
-        
+
         returner = None
         try:
             returner = DEFAULT_SETTINGS[section][keyword]
         except KeyError:
             print("Error: section %s:%s doesn't exist" % (section, keyword))
-            
+
         return returner
 
     def backup_and_rewrite_config(self) :
         """
         Backs up the user configuration file (for debugging) and rewrites a
         valid config file.
-        
+
         The name of the backup file is the name of the settings file plus an
         incremental count.
-        
+
         """
         # We need to check that the file doesn't already exist, in case this has
         # happened before.
@@ -284,21 +295,21 @@
 
         while not new_file_free:
             new_name = "%s.%02i" % (SETTINGS_FILE, renumber)
-            
+
             # FIXME: is this too paranoid?
             if not os.path.exists(new_name):
-                    
+
                     new_file_free = True
-                    
+
                     created = False
-                    
+
                     try:
                         os.rename(SETTINGS_FILE, new_name)
                         created = True
                     except IOError:
                         # Paranoid again?
                         print("Could not back up user configuration.")
-                        
+
                     if created:
                         self.settings.reset()
                         self.write()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/util/strings.py rabbitvcs/rabbitvcs/util/strings.py
--- rabbitvcs-0.17.1/rabbitvcs/util/strings.py	1970-01-01 08:00:00.000000000 +0800
+++ rabbitvcs/rabbitvcs/util/strings.py	2019-09-13 08:36:17.265343405 +0800
@@ -0,0 +1,230 @@
+#
+# This is an extension to the Nautilus file manager to allow better
+# integration with the Subversion source control system.
+#
+# Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
+# Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
+# Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
+#
+# RabbitVCS is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# RabbitVCS is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
+#
+
+"""
+
+Additional strings support.
+
+"""
+
+import sys
+import codecs
+import re
+import six
+import locale
+
+__all__ = ["S", "IDENTITY_ENCODING", "UTF8_ENCODING", "SURROGATE_ESCAPE"]
+
+unicode_null_string = six.u("")
+non_alpha_num_re = re.compile("[^A-Za-z0-9]+")
+SURROGATE_BASE = 0xDC00
+RE_SURROGATE = re.compile(six.u("[") + six.unichr(SURROGATE_BASE + 0x80) +
+                          six.u("-") + six.unichr(SURROGATE_BASE + 0xFF) +
+                          six.u("]"))
+RE_UTF8 = re.compile("^[Uu][Tt][Ff][ _-]?8$")
+
+#   Codec that maps ord(byte) == ord(unicode_char).
+
+IDENTITY_ENCODING = "latin-1"
+
+
+
+#   An UTF-8 codec that implements surrogates, even in Python 2.
+
+UTF8_ENCODING = "rabbitvcs-utf8"
+
+def utf8_decode(input, errors="strict"):
+    return codecs.utf_8_decode(input, errors, True)
+
+
+def utf8_encode(input, errors="strict"):
+    output = b''
+    pos = 0
+    end = len(input)
+    eh = None
+    while pos < end:
+        n = end
+        m = RE_SURROGATE.search(input, pos)
+        if m:
+            n = m.start()
+        if n > pos:
+            p, m = codecs.utf_8_encode(input[pos:n], errors)
+            output += p
+            pos = n
+        if pos < end:
+            e = UnicodeEncodeError(UTF8_ENCODING,
+                                   input, pos, pos + 1,
+                                   "surrogates not allowed")
+            if not eh:
+                eh = codecs.lookup_error(errors)
+            p, n = eh(e)
+            output += p
+            if n <= pos:
+                n = pos + 1
+            pos = n
+    return (output, len(input))
+
+class Utf8IncrementalEncoder(codecs.IncrementalEncoder):
+    def encode(self, input, final=False):
+        return utf8_encode(input, self.errors)[0]
+
+class Utf8IncrementalDecoder(codecs.BufferedIncrementalDecoder):
+    _buffer_decode = codecs.utf_8_decode
+
+class Utf8StreamWriter(codecs.StreamWriter):
+    def encode(self, input, errors='strict'):
+        return utf8_encode(input, errors)
+
+class Utf8StreamReader(codecs.StreamReader):
+    decode = codecs.utf_8_decode
+
+
+def utf8_search(encoding):
+    encoding = non_alpha_num_re.sub("-", encoding).strip("-").lower()
+    if encoding != UTF8_ENCODING:
+        return None
+    return codecs.CodecInfo(
+                   name=UTF8_ENCODING,
+                   encode=utf8_encode,
+                   decode=utf8_decode,
+                   incrementalencoder=Utf8IncrementalEncoder,
+                   incrementaldecoder=Utf8IncrementalDecoder,
+                   streamwriter=Utf8StreamWriter,
+                   streamreader=Utf8StreamReader
+    )
+
+codecs.register(utf8_search)
+
+
+#   Emulate surrogateescape codecs error handler because it is not available
+#   Before Python 3.1
+
+SURROGATE_ESCAPE = "rabbitvcs-surrogateescape"
+
+def rabbitvcs_surrogate_escape(e):
+    if not isinstance(e, UnicodeError):
+        raise e
+    input = e.object[e.start:e.end]
+    if isinstance(e, UnicodeDecodeError):
+        output = [six.unichr(b) if b < 0x80 else                             \
+                  six.unichr(SURROGATE_BASE + b) for b in bytearray(input)]
+        return (unicode_null_string.join(output), e.end)
+    if isinstance(e, UnicodeEncodeError):
+        output = b""
+        for c in input:
+            b = ord(c) - SURROGATE_BASE
+            if not 0x80 <= b <= 0xFF:
+                raise e
+            output += six.int2byte(b)
+        return (output, e.end)
+    raise e
+
+codecs.register_error(SURROGATE_ESCAPE, rabbitvcs_surrogate_escape)
+
+
+class S(str):
+    """
+    Stores a string in native form: unicode with surrogates in Python 3 and
+        utf-8 in Python 2.
+    Provides the following methods:
+    encode: overloaded to use UTF8_ENCODING and SURROGATE_ESCAPE error handler.
+    decode: overloaded to use UTF8_ENCODING and SURROGATE_ESCAPE error handler.
+    bytes: get the string as bytes.
+    unicode: get the string as unicode.
+    display: get the string in native form, without surrogates.
+    """
+
+    if str == bytes:
+        # Python 2.
+        def __new__(cls, value, encoding=UTF8_ENCODING, errors=SURROGATE_ESCAPE):
+            if isinstance(value, bytearray):
+                value = bytes(value)
+            if isinstance(value, str):
+                encoding, errors = S._codeargs(encoding, errors)
+                if encoding.lower() != UTF8_ENCODING:
+                    value = value.decode(encoding, errors)
+            if isinstance(value, six.text_type):
+                value = value.encode(UTF8_ENCODING, SURROGATE_ESCAPE)
+            elif not isinstance(value, str):
+                value = str(value)
+            return str.__new__(cls, value)
+
+        def encode(self, encoding=UTF8_ENCODING, errors=SURROGATE_ESCAPE):
+            encoding, errors = self._codeargs(encoding, errors)
+            if encoding.lower() == UTF8_ENCODING:
+                return str(self)
+            value = super(S, self).decode(UTF8_ENCODING, SURROGATE_ESCAPE)
+            return value.encode(encoding, errors)
+
+        def decode(self, encoding=UTF8_ENCODING, errors=SURROGATE_ESCAPE):
+            encoding, errors = self._codeargs(encoding, errors)
+            return super(S, self).decode(encoding, errors)
+
+        def display(self, encoding=None, errors='replace'):
+            encoding, errors = self._codeargs(encoding, errors)
+            if encoding.lower() == UTF8_ENCODING:
+                return str(self)
+            value = super(S, self).decode(UTF8_ENCODING, 'replace')
+            return value.encode(encoding, errors)
+
+    else:
+        # Python 3.
+        def __new__(cls, value, encoding=UTF8_ENCODING, errors=SURROGATE_ESCAPE):
+            if isinstance(value, bytearray):
+                value = bytes(value)
+            if isinstance(value, bytes):
+                encoding, errors = S._codeargs(encoding, errors)
+                value = value.decode(encoding, errors)
+            elif not isinstance(value, str):
+                value = str(value)
+            return str.__new__(cls, value)
+
+        def encode(self, encoding=UTF8_ENCODING, errors=SURROGATE_ESCAPE):
+            encoding, errors = self._codeargs(encoding, errors)
+            return super(S, self).encode(encoding, errors)
+
+        def decode(self, encoding=UTF8_ENCODING, errors=SURROGATE_ESCAPE):
+            return str(self);
+
+        def display(self, encoding=None, errors='replace'):
+            return RE_SURROGATE.sub(six.unichr(0xFFFD), self)
+
+    def bytes(self, encoding=UTF8_ENCODING, errors=SURROGATE_ESCAPE):
+        return self.encode(encoding, errors)
+
+    def unicode(self):
+        return self.decode()
+
+    def valid(self, encoding=None, errors=SURROGATE_ESCAPE):
+        return self.display(encoding, errors) == self
+
+    @staticmethod
+    def _codeargs(encoding, errors):
+        if not encoding:
+            encoding = locale.getlocale(locale.LC_MESSAGES)[1]
+            if not encoding:
+                encoding = sys.getdefaultencoding()
+        if RE_UTF8.match(encoding):
+            encoding = UTF8_ENCODING
+        if errors.lower() == 'strict':
+            errors = SURROGATE_ESCAPE
+        return encoding, errors
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/__init__.py rabbitvcs/rabbitvcs/vcs/__init__.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/__init__.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/__init__.py	2019-09-13 08:36:17.265343405 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -40,41 +40,27 @@
 VCS_MERCURIAL = 'mercurial'
 VCS_DUMMY = 'unknown'
 
+VCS_FOLDERS = {}
+if not settings.get("HideItem", "svn"):
+    VCS_FOLDERS[".svn"] = VCS_SVN
+if not settings.get("HideItem", "git"):
+    VCS_FOLDERS[".git"] = VCS_GIT
+
 def _guess(path):
     # Determine the VCS instance based on the path
     if path:
-        path_to_check = path
-        folders = {
-            ".svn": VCS_SVN,
-            ".git": VCS_GIT,
-            ".hg": VCS_DUMMY, # Disable this for now
-            ".bzr": VCS_DUMMY,
-            ".CVS": VCS_DUMMY
-        }
-        
+        path_to_check = path.split("@")[0]
+
         while path_to_check != "/" and path_to_check != "":
-            for folder, client in list(folders.items()):
+            for folder, client in list(VCS_FOLDERS.items()):
                 if os.path.isdir(os.path.join(path_to_check, folder)):
                     cache = {
                         "vcs": client,
                         "repo_path": path_to_check
                     }
-                    return cache                
+                    return cache
             path_to_check = os.path.split(path_to_check)[0]
 
-    # Attempt 2 - assume it's a path like "local.txt@1"
-    path_to_check = "./" + path.split("@")[0]
-
-    while path_to_check != "/" and path_to_check != "":
-        for folder, client in list(folders.items()):
-            if os.path.isdir(os.path.join(path_to_check, folder)):
-                cache = {
-                    "vcs": client,
-                    "repo_path": path_to_check
-                }
-                return cache                
-        path_to_check = os.path.split(path_to_check)[0]            
-
     return {
         "vcs": VCS_DUMMY,
         "repo_path": path
@@ -92,10 +78,10 @@
 class VCS:
     clients = {}
     exclude_paths = []
-    
+
     def __init__(self):
         self.exclude_paths = get_exclude_paths()
-    
+
     def dummy(self):
         if VCS_DUMMY in self.clients:
             return self.clients[VCS_DUMMY]
@@ -103,7 +89,7 @@
             from rabbitvcs.vcs.dummy import Dummy
             self.clients[VCS_DUMMY] = Dummy()
             return self.clients[VCS_DUMMY]
-    
+
     def svn(self):
         if settings.get("HideItem", "svn"):
             return self.dummy()
@@ -149,7 +135,7 @@
                     else:
                         repo_path = git.find_repository_path(path)
                         git.set_repository(repo_path)
-                
+
                 self.clients[VCS_GIT] = git
                 return self.clients[VCS_GIT]
             except Exception as e:
@@ -216,23 +202,23 @@
             return self.mercurial(guess["repo_path"], is_repo_path=False)
         else:
             return self.dummy()
-    
+
     def should_exclude(self, path):
         for exclude_path in self.exclude_paths:
             if path.startswith(exclude_path):
                 return True
-        
+
         return False
-    
+
     def guess(self, path):
         return guess(path)
-    
+
     # Methods that call client methods
 
     def statuses(self, path, recurse=True, invalidate=False):
         client = self.client(path)
         return client.statuses(path, recurse=recurse, invalidate=invalidate)
-    
+
     def status(self, path, summarize=True, invalidate=False):
         client = self.client(path)
         return client.status(path, summarize, invalidate)
@@ -249,7 +235,7 @@
     def is_versioned(self, path):
         client = self.client(path)
         return client.is_versioned(path)
-    
+
     def is_locked(self, path):
         client = self.client(path)
         return client.is_locked(path)
@@ -283,8 +269,8 @@
 class ExternalUtilError(Exception):
     """ Represents an error caused by unexpected output from an external
     program.
-    """ 
-        
+    """
+
     def __init__(self, program, output):
         """ Initialises the error with the external tool and the unexpected
         output.
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/branch.py rabbitvcs/rabbitvcs/vcs/branch.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/branch.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/branch.py	2019-09-13 08:36:17.265343405 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -30,7 +30,7 @@
         self.tracking = tracking
         self.revision = revision
         self.message = message
-    
+
     def __str__(self):
         tracking = self.tracking and " (tracking)" or ""
         return "<BranchEntry %s:%s%s>" % (self.name, self.revision, tracking)
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/dummy/__init__.py rabbitvcs/rabbitvcs/vcs/dummy/__init__.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/dummy/__init__.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/dummy/__init__.py	2019-09-13 08:36:17.265343405 +0800
@@ -31,27 +31,27 @@
 class Dummy:
     def __init__(self):
         pass
-    
+
     def status(self, path, summarize=True, invalidate=False):
         return rabbitvcs.vcs.status.Status.status_unknown(path)
-    
+
     def is_working_copy(self, path):
         return False
-    
+
     def is_in_a_or_a_working_copy(self, path):
         return False
 
     def is_versioned(self, path):
         return False
-    
+
     def get_items(self, paths, statuses=[]):
         return []
-    
+
     def is_locked(self, path):
         return False
-    
+
     def statuses(self, path, recurse=True, invalidate=False):
         return []
-        
+
     def revision(self, kind, number=None):
         return None
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/README rabbitvcs/rabbitvcs/vcs/git/README
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/README	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/README	2019-09-13 08:36:17.265343405 +0800
@@ -3,5 +3,5 @@
 
 Dependencies
 ------------
-* dulwich >= 0.9.7
+* dulwich >= 0.19.0
 * python >= 2.4
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/__init__.py rabbitvcs/rabbitvcs/vcs/git/__init__.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/__init__.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/__init__.py	2019-09-13 08:36:17.265343405 +0800
@@ -1,21 +1,21 @@
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -31,14 +31,14 @@
 from .gittyup.client import GittyupClient
 from .gittyup import objects
 
-import rabbitvcs.util.helper
+from rabbitvcs.util import helper
+from rabbitvcs.util.strings import S
 
 import rabbitvcs.vcs
 import rabbitvcs.vcs.status
 import rabbitvcs.vcs.log
 from rabbitvcs.vcs.branch import BranchEntry
 from rabbitvcs.util.log import Log
-import six
 
 log = Log("rabbitvcs.vcs.git")
 
@@ -54,29 +54,28 @@
     def __init__(self, kind, value=None):
         self.kind = kind.upper()
         self.value = value
-        
+
         if self.kind == "HEAD":
             self.value = "HEAD"
-        
+
         self.is_revision_object = True
 
-    def __unicode__(self):
+    def __str__(self):
         if self.value:
-            return six.text_type(self.value)
-        else:
-            return self.kind
-            
+            return S(self.value)
+        return  S(self.kind)
+
+    def __unicode__(self):
+        return self.__str__().unicode()
+
     def short(self):
         if self.value:
-            return six.text_type(self.value)[0:7]
+            return S(self.value)[0:7]
         else:
             return self.kind
 
-    def __str__(self):
-        return self.__unicode__()
-
     def __repr__(self):
-        return self.__unicode__()
+        return self.__str__()
 
     def primitive(self):
         return self.value
@@ -92,7 +91,7 @@
         "untracked":    gittyup.objects.UntrackedStatus,
         "missing":      gittyup.objects.MissingStatus
     }
-    
+
     STATUS_REVERSE = {
         gittyup.objects.NormalStatus:       "normal",
         gittyup.objects.AddedStatus:        "added",
@@ -123,7 +122,7 @@
         "added",
         "removed"
     ]
-    
+
     STATUSES_FOR_STAGE = [
         "untracked"
     ]
@@ -146,24 +145,27 @@
         self.client.set_repository(path)
         self.config = self.client.config
 
+    def config_get(self, key1, key2):
+        return self.client._config_get(key1, key2)
+
     def get_repository(self):
         return self.client.get_repository()
 
     def find_repository_path(self, path):
         return self.client.find_repository_path(path)
-    
+
     #
     # Status Methods
     #
-    
+
     def statuses(self, path, recurse=False, invalidate=False):
         """
         Generates a list of GittyupStatus objects for the specified file.
-        
+
         @type   path: string
         @param  path: The file to look up.  If the file is a directory, it will
             return a recursive list of child path statuses
-        
+
         """
 
         if path in self.cache:
@@ -171,7 +173,7 @@
                 del self.cache[path]
             else:
                 return self.cache.find_path_statuses(path)
-        
+
         gittyup_statuses = self.client.status(path)
 
         if not len(gittyup_statuses):
@@ -191,11 +193,11 @@
 
                 rabbitvcs_status = rabbitvcs.vcs.status.GitStatus(st)
                 self.cache[st.path] = rabbitvcs_status
-                
+
                 statuses.append(rabbitvcs_status)
-            
+
             return statuses
-    
+
     def status(self, path, summarize=True, invalidate=False):
         if path in self.cache:
             if invalidate:
@@ -205,9 +207,9 @@
                 if summarize:
                     st.summary = st.single
                 return st
-        
+
         all_statuses = self.statuses(path, invalidate=invalidate)
-        
+
         if summarize:
             path_status = None
             for st in all_statuses:
@@ -223,7 +225,7 @@
             path_status = all_statuses[0]
 
         return path_status
-    
+
     def is_working_copy(self, path):
         if (os.path.isdir(path) and
                 os.path.isdir(os.path.join(path, ".git"))):
@@ -239,7 +241,7 @@
     def is_versioned(self, path):
         if self.is_working_copy(path):
             return True
-       
+
         st = self.status(path)
         try:
             return st.is_versioned()
@@ -255,21 +257,21 @@
     def get_items(self, paths, statuses=[]):
         """
         Retrieves a list of files that have one of a set of statuses
-        
+
         @type   paths:      list
         @param  paths:      A list of paths or files.
-        
+
         @type   statuses:   list
         @param  statuses:   A list of statuses.
-        
+
         @rtype:             list
         @return:            A list of GittyupStatus objects.
-        
+
         """
 
         if paths is None:
             return []
-        
+
         items = []
         for path in paths:
             st = self.statuses(path, recurse=True, invalidate=True)
@@ -298,7 +300,7 @@
         """
         if value is None:
             return Revision("WORKING")
-        
+
         value_upper = value.upper()
         if value_upper == "HEAD" or value_upper == "BASE":
             return Revision("HEAD")
@@ -318,100 +320,100 @@
         @param  recurse: Recursively add a directory's children
 
         """
-        
+
         return self.stage(paths)
 
     def is_tracking(self, name):
         return self.client.is_tracking("refs/heads/%s" % name)
-        
+
 
     #
     # Action Methods
     #
-    
+
     def initialize_repository(self, path, bare=False):
         """
         Initialize a Git repository
-        
+
         @type   path: string
         @param  path: The folder to initialize as a repository
 
         @type   bare: boolean
         @param  bare: Whether the repository should be "bare" or not
-        
+
         """
-        
+
         return self.client.initialize_repository(path, bare)
-    
+
     def stage(self, paths):
         """
         Stage files to be committed or tracked
-        
+
         @type   paths: list
         @param  paths: A list of files
-        
+
         """
-        
+
         return self.client.stage(paths)
-    
+
     def stage_all(self):
         """
         Stage all files in a repository to be committed or tracked
-        
+
         """
-        
+
         return self.client.stage_all()
-    
+
     def unstage(self, paths):
         """
         Unstage files so they are not committed or tracked
-        
+
         @type   paths: list
         @param  paths: A list of files
-        
+
         """
-        
+
         return self.client.unstage(paths)
-    
+
     def unstage_all(self):
         """
         Unstage all files so they are not committed or tracked
-        
+
         @type   paths: list
         @param  paths: A list of files
-        
+
         """
-        
+
         return self.client.unstage_all()
-    
+
     def branch(self, name, revision=Revision("head"), track=False):
         """
         Create a new branch
-        
+
         @type   name: string
         @param  name: The name of the new branch
-        
+
         @type   revision: git.Revision
         @param  revision: A revision to branch from.
-        
+
         @type   track: boolean
         @param  track: Whether or not to track the new branch, or just create it
-        
+
         """
-        
+
         return self.client.branch(name, revision.primitive(), track)
-    
+
     def branch_delete(self, name):
         """
         Delete a branch
-        
+
         @type   name: string
         @param  name: The name of the branch
-        
+
         """
-        
+
         return self.client.branch_delete(name)
-        
+
     def branch_rename(self, old_name, new_name):
         """
         Rename a branch
@@ -425,17 +427,17 @@
         """
 
         return self.client.branch_rename(old_name, new_name)
-        
+
     def branch_list(self, revision=None):
         """
         List all branches
-        
+
         """
-        
+
         revision_str = None
         if revision:
             revision_str = revision.primitive()
-        
+
         results = self.client.branch_list(revision_str)
         branches = []
         for result in results:
@@ -445,9 +447,9 @@
                 result["revision"],
                 result["message"]
             ))
-        
+
         return branches
-    
+
     def get_active_branch(self):
         results = self.client.branch_list()
         for result in results:
@@ -460,85 +462,85 @@
                 )
 
         return None
-    
+
     def checkout(self, paths=[], revision=Revision("HEAD")):
         """
         Checkout a series of paths from a tree or commit.  If no tree or commit
         information is given, it will check out the files from head.  If no
         paths are given, all files will be checked out from head.
-        
+
         @type   paths: list
         @param  paths: A list of files to checkout
-        
+
         @type   revision: git.Revision
         @param  revision: The revision object or branch to checkout
 
         """
-        
+
         return self.client.checkout(paths, revision.primitive())
-        
+
     def clone(self, host, path, bare=False, origin="origin"):
         """
         Clone a repository
-        
+
         @type   host: string
         @param  host: The url of the git repository
-        
+
         @type   path: string
         @param  path: The path to clone to
-        
+
         @type   bare: boolean
         @param  bare: Create a bare repository or not
-        
+
         @type   origin: string
         @param  origin: Specify the origin of the repository
 
         """
-        
+
         return self.client.clone(host, path, bare, origin)
-        
-    def commit(self, message, parents=None, committer=None, commit_time=None, 
-            commit_timezone=None, author=None, author_time=None, 
+
+    def commit(self, message, parents=None, committer=None, commit_time=None,
+            commit_timezone=None, author=None, author_time=None,
             author_timezone=None, encoding=None, commit_all=False):
         """
         Commit staged files to the local repository
-        
+
         @type   message: string
         @param  message: The log message
-        
+
         @type   parents: list
         @param  parents: A list of parent SHAs.  Defaults to head.
-        
+
         @type   committer: string
-        @param  committer: The person committing.  Defaults to 
+        @param  committer: The person committing.  Defaults to
             "user.name <user.email>"
-        
+
         @type   commit_time: int
         @param  commit_time: The commit time.  Defaults to time.time()
-        
+
         @type   commit_timezone: int
-        @param  commit_timezone: The commit timezone.  
+        @param  commit_timezone: The commit timezone.
             Defaults to (-1 * time.timezone)
-        
+
         @type   author: string
-        @param  author: The author of the file changes.  Defaults to 
+        @param  author: The author of the file changes.  Defaults to
             "user.name <user.email>"
-            
+
         @type   author_time: int
         @param  author_time: The author time.  Defaults to time.time()
-        
+
         @type   author_timezone: int
-        @param  author_timezone: The author timezone.  
+        @param  author_timezone: The author timezone.
             Defaults to (-1 * time.timezone)
-        
+
         @type   encoding: string
         @param  encoding: The encoding of the commit.  Defaults to UTF-8.
-        
+
         @type   commit_all: boolean
         @param  commit_all: Stage all changed files before committing
-        
+
         """
-        
+
         return self.client.commit(message, parents, committer, commit_time,
             commit_timezone, author, author_time, author_timezone, encoding,
             commit_all)
@@ -546,69 +548,69 @@
     def remove(self, paths):
         """
         Remove path from the repository.  Also deletes the local file.
-        
+
         @type   paths: list
         @param  paths: A list of paths to remove
-        
+
         """
-        
+
         return self.client.remove(paths)
-    
+
     def move(self, source, dest):
         """
         Move a file within the repository
-        
+
         @type   source: string
         @param  source: The source file
-        
+
         @type   dest: string
         @param  dest: The destination.  If dest exists as a directory, source
             will be added as a child.  Otherwise, source will be renamed to
             dest.
-            
+
         """
-        
+
         return self.client.move(source, dest)
-        
+
     def pull(self, repository="origin", refspec="master", options=None):
         """
-        Fetch objects from a remote repository and merge with the local 
+        Fetch objects from a remote repository and merge with the local
             repository
-            
+
         @type   repository: string
         @param  repository: The name of the repository
-        
+
         @type   refspec: string
         @param  refspec: The branch name to pull from
-        
+
         """
-        
+
         return self.client.pull(repository, refspec, options)
 
-    def push(self, repository="origin", refspec="master", tags=True):
+    def push(self, repository="origin", refspec="master", tags=True, force_with_lease=False):
         """
         Push objects from the local repository into the remote repository
             and merge them.
-            
+
         @type   repository: string
         @param  repository: The name of the repository
-        
+
         @type   refspec: string
         @param  refspec: The branch name to pull from
-        
+
         @type   tags: boolean
         @param  tags: True to include tags in push, False to omit
 
         """
 
-        return self.client.push(repository, refspec, tags)
+        return self.client.push(repository, refspec, tags, force_with_lease)
 
     def fetch_all(self):
         """
         Fetch objects from all remote repositories.  This will not merge the files
         into the local working copy, use pull for that.
         """
-        
+
         return self.client.fetch_all()
 
     def fetch(self, repository, branch=None):
@@ -617,149 +619,149 @@
         into the local working copy, use pull for that.
 
         If branch if provided, fetch only for that branch.
-        
+
         @type   repository: string
         @param  repository: The git remote from which to fetch
 
         @type   branch: string
         @param  branch: The branch from which to fetch
-        
+
         """
-        
+
         return self.client.fetch(repository, branch)
-        
+
     def merge(self, branch):
         return self.client.merge(branch.primitive())
 
     def remote_add(self, name, host):
         """
         Add a remote repository
-        
+
         @type   name: string
         @param  name: The name to give to the remote repository
-        
+
         @type   host: string
         @param  host: The git url to add
-        
+
         """
-        
+
         return self.client.remote_add(name, host)
-        
+
     def remote_delete(self, name):
         """
         Remove a remote repository
-        
+
         @type   name: string
         @param  name: The name of the remote repository to remove
 
         """
-        
+
         return self.client.remote_delete(name)
-        
+
     def remote_rename(self, current_name, new_name):
         """
         Rename a remote repository
-        
+
         @type   current_name: string
         @param  current_name: The current name of the repository
-        
+
         @type   new_name: string
         @param  new_name: The name to give to the remote repository
-        
+
         """
-        
+
         return self.client.remote_rename(current_name, new_name)
-        
+
     def remote_set_url(self, name, url):
         """
         Change a remote repository's url
-        
+
         @type   name: string
         @param  name: The name of the repository
-        
+
         @type   url: string
         @param  url: The url for the repository
-        
+
         """
-        
+
         return self.client.remote_set_url(name, url)
-        
+
     def remote_list(self):
         """
         Return a list of the remote repositories
-        
+
         @rtype  list
         @return A list of dicts with keys: remote, url, fetch
-            
+
         """
-        
+
         return self.client.remote_list()
-        
+
     def tag(self, name, message, revision):
         """
         Create a tag object
-        
+
         @type   name: string
         @param  name: The name to give the tag
-        
+
         @type   message: string
         @param  message: A log message
-        
+
         @type   revision: git.Revision
         @param  revision: The revision to tag.  Defaults to HEAD
-        
+
         """
-        
+
         return self.client.tag(name, message, revision.primitive())
 
     def tag_delete(self, name):
         """
         Delete a tag
-        
+
         @type   name: string
         @param  name: The name of the tag to delete
-        
+
         """
-        
+
         return self.client.tag_delete(name)
 
     def tag_list(self):
         """
         Return a list of Tag objects
-        
+
         """
-        
+
         return self.client.tag_list()
 
 
     def log(self, path=None, skip=0, limit=None, revision=Revision("HEAD"), showtype="all"):
         """
         Returns a revision history list
-        
+
         @type   path    string
         @param  path    If a path is specified, return commits that contain
                         changes to the specified path only
-        
+
         @type   revision git.Revision
         @param  revision Determines which branch to find commits for
-        
+
         @type   start_point sha1 hash string
         @param  start_point Start at a given revision
-        
+
         @type   limit   int
         @param  limit   If given, returns a limited number of commits
-        
+
         @type   refspec string
         @param  refspec Return commits in this refspec only
-        
+
         @type   showtype string
         @type   showtype Determines which revisions to show.  "all" shows all revisions,
             "branch" shows just the branch given in refspec
-        
+
         @returns    A list of commits
-        
+
         """
-        
+
         # The strptime method relies on locales to work, and may not work with non en_US locales
         # Temporarily change the locale to en_US so strptime can work consistently
         # Then change it back at the end of the method
@@ -773,38 +775,40 @@
         for item in items:
             revision = self.revision(item["commit"])
             date = datetime.strptime(item["commit_date"][0:-6], "%a %b %d %H:%M:%S %Y")
-            
-            author = _("(no author)")
-            if "committer" in item:
-                author = item["committer"]
+
+            try:
+                author = item.get("author", False) or item["committer"]
                 pos = author.find("<")
                 if pos != -1:
-                    author = author[0:pos-1]
+                    author = author[0:pos]
+                author = author.strip()
+            except KeyError:
+                author = _("(no author)")
 
             message = ""
             if "message" in item:
                 message = item["message"]
-            
+
             changed_paths = []
             if "changed_paths" in item:
                 for changed_path in item["changed_paths"]:
                     action = "+%s/-%s" % (changed_path["additions"], changed_path["removals"])
-                
+
                     changed_paths.append(rabbitvcs.vcs.log.LogChangedPath(
                         changed_path["path"],
                         action,
                         "", ""
                     ))
-            
+
             parents = []
             if "parents" in item:
                 for parent in item["parents"]:
                     parents.append(self.revision(parent))
-            
+
             head = False
             if item["commit"] == self.client.head():
                 head = True
-            
+
             returner.append(rabbitvcs.vcs.log.Log(
                 date,
                 revision,
@@ -814,15 +818,15 @@
                 parents,
                 head
             ))
-            
+
         locale.setlocale(locale.LC_ALL, current_locale)
-            
+
         return returner
 
     def diff_summarize(self, path1, revision_obj1, path2=None, revision_obj2=None):
         """
         Returns a diff summary between the path(s)/revision(s)
-        
+
         @type   path1: string
         @param  path1: The absolute path to a file
 
@@ -834,28 +838,28 @@
 
         @type   revision_obj2: git.Revision()
         @param  revision_obj2: The revision object for path2
-               
+
         """
-        
+
         summary_raw = self.client.diff_summarize(path1, revision_obj1.primitive(),
             path2, revision_obj2.primitive())
-        
+
         summary = []
         for item in summary_raw:
             summary.append(rabbitvcs.vcs.log.LogChangedPath(item["path"], item["action"], "", ""))
-        
+
         return summary
-    
+
     def annotate(self, path, revision_obj=Revision("head")):
         """
         Returns an annotation for a specified file
-            
+
         @type   path: string
         @param  path: The absolute path to a tracked file
-        
+
         @type   revision: string
         @param  revision: HEAD or a sha1 hash
-        
+
         """
 
         return self.client.annotate(path, revision_obj.primitive())
@@ -863,13 +867,13 @@
     def show(self, path, revision_obj):
         """
         Returns a particular file at a given revision object.
-        
+
         @type   path: string
         @param  path: The absolute path to a file
 
         @type   revision_obj: git.Revision()
         @param  revision_obj: The revision object for path
-        
+
         """
 
         return self.client.show(path, revision_obj.primitive())
@@ -877,7 +881,7 @@
     def diff(self, path1, revision_obj1, path2=None, revision_obj2=None):
         """
         Returns the diff between the path(s)/revision(s)
-        
+
         @type   path1: string
         @param  path1: The absolute path to a file
 
@@ -889,7 +893,7 @@
 
         @type   revision_obj2: git.Revision()
         @param  revision_obj2: The revision object for path2
-               
+
         """
 
         return self.client.diff(path1, revision_obj1.primitive(), path2,
@@ -909,7 +913,7 @@
 
         any_failures = False
 
-        for file, success, rej_file in rabbitvcs.util.helper.parse_patch_output(patch_file, base_dir, 1):
+        for file, success, rej_file in helper.parse_patch_output(patch_file, base_dir, 1):
 
             fullpath = os.path.join(base_dir, file)
 
@@ -940,13 +944,13 @@
     def export(self, path, dest_path, revision):
         """
         Exports a file or directory from a given revision
-        
+
         @type   path: string
         @param  path: The source file/folder to export
-        
+
         @type   dest_path: string
         @param  dest_path: The path to put the exported file(s)
-        
+
         @type   revision: git.Revision
         @param  revision: The revision/tree/commit of the source file being exported
 
@@ -954,38 +958,38 @@
 
         return self.client.export(path, dest_path, revision.primitive())
 
-    def clean(self, path, remove_dir=True, remove_ignored_too=False, 
+    def clean(self, path, remove_dir=True, remove_ignored_too=False,
             remove_only_ignored=False, dry_run=False, force=True):
-        
+
         return self.client.clean(path, remove_dir, remove_ignored_too,
             remove_only_ignored, dry_run, force)
 
     def reset(self, path, revision, type=None):
         """
         Reset repository to a specified state
-        
+
         @type   path: string
         @param  path: The repository file/folder
-        
+
         @type   revision: git.Revision
         @param  revision: The revision/tree/commit to reset to
-        
+
         @type   type: string
         @param  type: The type of reset to do.  Can be mixed, soft, hard, merge
         """
-    
+
         return self.client.reset(path, revision.primitive(), type)
 
     def get_ignore_files(self, path):
         paths = []
         paths.append(self.client.get_local_ignore_file(path))
         paths += self.client.get_global_ignore_files()
-        
+
         return paths
-    
+
     def get_config_files(self, path):
         paths = [self.client.get_local_config_file()]
-        
+
         return paths
 
     def set_callback_notify(self, func):
@@ -993,12 +997,12 @@
 
     def set_callback_progress_update(self, func):
         self.client.set_callback_progress_update (func)
-    
+
     def set_callback_get_user(self, func):
         self.client.set_callback_get_user(func)
-        
+
     def set_callback_get_cancel(self, func):
         self.client.set_callback_get_cancel(func)
-    
+
     def set_callback_cancel(self, func):
         self.client.callback_cancel = func
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/client.py rabbitvcs/rabbitvcs/vcs/git/gittyup/client.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/client.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/gittyup/client.py	2019-09-13 08:36:17.265343405 +0800
@@ -10,8 +10,10 @@
 import shutil
 import fnmatch
 import time
+import struct
 from datetime import datetime
 from mimetypes import guess_type
+import time
 
 import subprocess
 
@@ -27,8 +29,8 @@
 from .objects import *
 from .command import GittyupCommand
 
-import Tkinter
-import tkMessageBox
+from rabbitvcs.util import helper
+from rabbitvcs.util.strings import *
 
 import six.moves.tkinter
 import six.moves.tkinter_messagebox
@@ -36,6 +38,7 @@
 
 ENCODING = "UTF-8"
 
+RE_STATUS = re.compile("^([\sA-Z\?]+)\s(?:\S+\s->\s)?(.*?)$")
 
 
 def callback_notify_null(val):
@@ -44,11 +47,11 @@
 def callback_get_user():
     from pwd import getpwuid
     pwuid = getpwuid(os.getuid())
-    
+
     user = pwuid[0]
     fullname = pwuid[4]
     host = os.getenv("HOSTNAME")
-    
+
     return (fullname, "%s@%s" % (user, host))
 
 def callback_get_cancel():
@@ -69,6 +72,8 @@
     return os.path.join(tmpdir, filename)
 
 class GittyupClient:
+    UTF8 = UTF8_ENCODING
+
     def __init__(self, path=None, create=False):
         self.callback_notify = callback_notify_null
         self.callback_progress_update = None
@@ -76,7 +81,7 @@
         self.callback_get_cancel = callback_get_cancel
 
         self.global_ignore_patterns = []
-        
+
         self.git_version = None
 
         self.numberOfCommandStages = 0
@@ -114,9 +119,9 @@
     def _get_index(self):
         if not self.repo.has_index():
             self._initialize_index()
-        
+
         return self.repo.open_index()
-    
+
     def _get_tree_at_head(self):
         try:
             tree = self.repo[self.repo[self.repo.head()].tree]
@@ -135,21 +140,24 @@
         tree_index = {}
         if tree:
             for item in self.repo.object_store.iter_tree_contents(tree.id):
-                tree_index[item[0]] = (item[1], item[2])
+                tree_index[item[0].decode(self.UTF8)] = (item[1], item[2].decode(self.UTF8))
+
         return tree_index
 
     def _get_git_version(self):
         """
         Gets the local git version
         """
-        
+
         if self.git_version:
             return self.git_version
         else:
             try:
-                proc = subprocess.Popen(["git", "--version"], stdout=subprocess.PIPE)
+                proc = subprocess.Popen(["git", "--version"],
+                                        stdout=subprocess.PIPE,
+                                        universal_newlines=True)
                 response = proc.communicate()[0].split()
-                version = response[2].split(".")
+                version = [int(x) for x in response[2].split(".")]
                 self.git_version = version
                 return self.git_version
             except Exception as e:
@@ -158,7 +166,7 @@
     def _version_greater_than(self, version1, version2):
         len1 = len(version1)
         len2 = len(version2)
-        
+
         max = 5
 
         # Pad the version lists so they are the same length
@@ -198,21 +206,21 @@
         """
         Get ignore patterns from $GIT_DIR/info/exclude then from
         core.excludesfile in gitconfig.
-        
+
         """
         patterns = []
-        
+
         files = self.get_global_ignore_files()
         for path in files:
             patterns += self.get_ignore_patterns_from_file(path)
 
         return patterns
-    
+
     def get_global_ignore_files(self):
         """
         Returns a list of ignore files possible for this repository
         """
-    
+
         try:
             git_dir = os.environ["GIT_DIR"]
         except KeyError:
@@ -222,7 +230,7 @@
 
         excludefile = os.path.join(git_dir, "info", "exclude")
         files.append(excludefile)
-        
+
         try:
             core_excludesfile = self._config_get(("core", ), "excludesfile")
             if core_excludesfile:
@@ -231,22 +239,22 @@
             pass
 
         return files
-    
+
     def get_local_ignore_file(self, path):
         if not os.path.exists(path):
             return []
-        
+
         if os.path.isfile(path):
             path = os.path.basename(path)
-    
+
         return os.path.join(path, ".gitignore")
-    
+
     def get_ignore_patterns_from_file(self, path):
         """
         Read in an ignore patterns file (i.e. .gitignore, $GIT_DIR/info/exclude)
         and return a list of patterns
         """
-        
+
         patterns = []
         if os.path.isfile(path):
             file = open(path, "r")
@@ -260,7 +268,7 @@
                 pass
 
             file.close()
-        
+
         return patterns
 
     def get_local_config_file(self):
@@ -268,7 +276,7 @@
             git_dir = os.environ["GIT_DIR"]
         except KeyError:
             git_dir = os.path.join(self.repo.path, ".git")
-            
+
         return git_dir + "/config"
 
     def _ignore_file(self, patterns, filename):
@@ -281,7 +289,7 @@
                 return True
 
         return False
-    
+
     def _read_directory_tree(self, path, show_ignored_files=False):
         files = []
         directories = []
@@ -300,12 +308,12 @@
 
             for filename in filenames:
                 files.append(os.path.join(rel_root, filename))
-        
+
             for _d in dirs:
                 directories.append(os.path.join(rel_root, _d))
 
             directories.append(rel_root)
-        
+
         #Remove duplicates in list
         directories=list(set(directories))
         return (sorted(files), directories)
@@ -316,14 +324,14 @@
             blob = dulwich.objects.Blob.from_string(file.read())
         finally:
             file.close()
-        
+
         return blob
 
     def _write_blob_to_file(self, path, blob):
         dirname = os.path.dirname(path)
         if not os.path.isdir(dirname):
             os.makedirs(dirname)
-    
+
         file = open(path, "wb")
         try:
             file.write(blob.data)
@@ -353,25 +361,32 @@
 
     def _get_config_user(self):
         try:
-            config_user_name = self._config_get(("user", ), "name")
-            config_user_email = self._config_get(("user", ), "email")
+            config_user_name = S(self._config_get(("user", ), "name"))
+            config_user_email = S(self._config_get(("user", ), "email"))
             if config_user_name == "" or config_user_email == "":
                 raise KeyError()
         except KeyError:
             (config_user_name, config_user_email) = self.callback_get_user()
-            
+
             if config_user_name == None and config_user_email == None:
                 return None
-            
+
         self._config_set(("user", ), "name", config_user_name)
         self._config_set(("user", ), "email", config_user_email)
         self.config.write_to_path()
         return "%s <%s>" % (config_user_name, config_user_email)
 
+    def string_unescape(self, s):
+        # Portable utf-8 string unescape.
+        if isinstance(s, six.text_type):
+            s = s.encode(IDENTITY_ENCODING)
+        s = S(s.decode("unicode_escape"), IDENTITY_ENCODING)
+        return S(s.bytes(IDENTITY_ENCODING))
+
     #
     # Start Public Methods
     #
-    
+
     def initialize_repository(self, path, bare=False):
         mkdir_p(path)
 
@@ -392,48 +407,51 @@
         return self.repo.path
 
     def find_repository_path(self, path):
-        path_to_check = path
+        path_to_check = S(path)
         while path_to_check != "/" and path_to_check != "":
             if os.path.isdir(os.path.join(path_to_check, ".git")):
                 return path_to_check
-            
+
             path_to_check = os.path.split(path_to_check)[0]
-        
+
         return None
 
     def get_relative_path(self, path):
+        path = S(path)
         if path == self.repo.path:
-            return ""
-
+            return "."
         return util.relativepath(self.repo.path, path)
-    
+
     def get_absolute_path(self, path):
+        path = S(path)
+        if path == ".":
+            return self.repo.path
         return os.path.join(self.repo.path, path).rstrip("/")
 
     def track(self, name):
-        self.repo.refs.set_symbolic_ref("HEAD", name)
+        self.repo.refs.set_symbolic_ref(b"HEAD", name)
 
     def is_tracking(self, name):
-        return (self.repo.refs.read_ref("HEAD")[5:] == name)
+        return (self.repo.refs.read_ref(b"HEAD")[5:] == name)
 
     def tracking(self):
-        return self.repo.refs.read_ref("HEAD")[5:]
-    
+        return self.repo.refs.read_ref(b"HEAD")[5:]
+
     def head(self):
-        return self.repo.refs["HEAD"]
+        return self.repo.refs[b"HEAD"]
 
     def stage(self, paths):
         """
         Stage files to be committed or tracked
-        
+
         @type   paths: list
         @param  paths: A list of files
-        
+
         """
         index = self._get_index()
         to_stage = []
 
-        if type(paths) in (str, six.text_type):
+        if isinstance(paths, (str, six.text_type)):
             paths = [paths]
 
         for path in paths:
@@ -445,15 +463,15 @@
                 "path": absolute_path,
                 "mime_type": guess_type(absolute_path)[0]
             })
-            to_stage.append(relative_path)
+            to_stage.append(S(relative_path))
         self.repo.stage(to_stage)
-    
+
     def stage_all(self):
         """
         Stage all files in a repository to be committed or tracked
-        
+
         """
-        
+
         index = self._get_index()
         for status in self.status():
             if status in [AddedStatus, RemovedStatus, ModifiedStatus]:
@@ -469,25 +487,25 @@
     def unstage(self, paths):
         """
         Unstage files so they are not committed or tracked
-        
+
         @type   paths: list
         @param  paths: A list of files
-        
+
         """
-        
+
         index = self._get_index()
         tree = self._get_tree_index()
 
-        if type(paths) in (str, six.text_type):
+        if isinstance(paths, (str, six.text_type)):
             paths = [paths]
 
         for path in paths:
-            relative_path = self.get_relative_path(path)
+            relative_path = S(self.get_relative_path(path)).bytes()
             if relative_path in index:
                 if relative_path in tree:
                     (ctime, mtime, dev, ino, mode, uid, gid, size, blob_id, flags) = index[relative_path]
                     (mode, blob_id) = tree[relative_path]
-                    
+
                     # If the file is locally modified, set these vars to 0
                     # I'm not sure yet why this needs to happen, but it does
                     # in order for the file to appear modified and not normal
@@ -500,7 +518,7 @@
                         uid = 0
                         gid = 0
                         size = 0
-                    
+
                     index[relative_path] = (ctime, mtime, dev, ino, mode, uid, gid, size, blob_id, flags)
                 else:
                     del index[relative_path]
@@ -514,26 +532,26 @@
             "mime_type": guess_type(path)[0]
         })
         index.write()
-            
+
     def unstage_all(self):
         """
         Unstage all files so they are not committed or tracked
-        
+
         @type   paths: list
         @param  paths: A list of files
-        
+
         """
-        
+
         index = self._get_index()
         for status in self.status():
             abs_path = self.get_absolute_path(status.path)
             if os.path.isfile(abs_path):
                 self.unstage(abs_path)
-    
+
     def get_staged(self):
         """
         Gets a list of files that are staged
-        
+
         """
 
         staged = []
@@ -557,34 +575,34 @@
     def is_staged(self, path, staged_files=None):
         """
         Determines if the specified path is staged
-        
+
         @type   path: string
         @param  path: A file path
-        
+
         @rtype  boolean
-        
+
         """
-        
+
         if not staged_files:
             staged_files = self.get_staged()
-        
+
         relative_path = self.get_relative_path(path)
         return (relative_path in staged_files)
-    
+
     def branch(self, name, commit_sha=None, track=False):
         """
         Create a new branch
-        
+
         @type   name: string
         @param  name: The name of the new branch
-        
+
         @type   commit_sha: string
         @param  commit_sha: A commit sha to branch from.  If None, branches
                     from head
-        
+
         @type   track: boolean
         @param  track: Whether or not to track the new branch, or just create it
-        
+
         """
 
         cmd = ["git", "branch"]
@@ -597,25 +615,25 @@
         cmd += [name, commit_sha]
 
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
 
     def branch_delete(self, name):
         """
         Delete a branch
-        
+
         @type   name: string
         @param  name: The name of the branch
-        
+
         """
-        
+
         ref_name = "refs/heads/%s" % name
         refs = self.repo.get_refs()
         if ref_name in refs:
             if self.is_tracking(ref_name):
                 self.track("refs/heads/master")
-        
+
             del self.repo.refs[ref_name]
 
     def branch_rename(self, old_name, new_name):
@@ -629,7 +647,7 @@
         @param  new_name: The name of the new branch
 
         """
-        
+
         old_ref_name = "refs/heads/%s" % old_name
         new_ref_name = "refs/heads/%s" % new_name
         refs = self.repo.get_refs()
@@ -637,13 +655,13 @@
             self.repo.refs[new_ref_name] = self.repo.refs[old_ref_name]
             if self.is_tracking(old_ref_name):
                 self.track(new_ref_name)
-            
+
             del self.repo.refs[old_ref_name]
 
     def branch_list(self, commit_sha=None):
         """
         List all branches
-        
+
         """
         """
         refs = self.repo.get_refs()
@@ -652,7 +670,7 @@
             if ref.startswith("refs/heads"):
                 branch = Branch(ref[11:], branch_sha, self.repo[branch_sha])
                 branches.append(branch)
-        
+
         return branches
         """
         cmd = ["git", "branch", "-lv", "--no-abbrev", "-a"]
@@ -660,7 +678,7 @@
             cmd += ["--contains", commit_sha]
 
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
 
@@ -668,25 +686,27 @@
         for line in stdout:
             if not line:
                 continue
-            
+
             components = line.split()
             if components[0] != "*":
                 components.insert(0, "")
             tracking = components.pop(0) == "*" and True or False
             if components[0] == "(no":
                 name = components.pop(0) + " " + components.pop(0)
+            elif components[0] == "(HEAD":
+                continue            # Detached head is not a branch.
             else:
                name = components.pop(0)
             revision = components.pop(0)
             message = " ".join(components)
-            
+
             branches.append({
                 "tracking": tracking,
                 "name": name,
                 "revision": revision,
                 "message": message
             })
-        
+
         return branches
 
     def checkout(self, paths=[], revision="HEAD"):
@@ -694,10 +714,10 @@
         Checkout a series of paths from a tree or commit.  If no tree or commit
         information is given, it will check out the files from head.  If no
         paths are given, all files will be checked out from head.
-        
+
         @type   paths: list
         @param  paths: A list of files to checkout
-        
+
         @type   revision: string
         @param  revision: The sha or branch to checkout
 
@@ -709,24 +729,24 @@
         cmd = ["git", "checkout", "-m", revision] + paths
 
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
-        
-    
+
+
     def clone(self, host, path, bare=False, origin="origin"):
         """
         Clone a repository
-        
+
         @type   host: string
         @param  host: The url of the git repository
-        
+
         @type   path: string
         @param  path: The path to clone to
-        
+
         @type   bare: boolean
         @param  bare: Create a bare repository or not
-        
+
         @type   origin: string
         @param  origin: Specify the origin of the repository
 
@@ -737,17 +757,17 @@
         more = ["-o", "origin","--progress"]
         if bare:
             more.append("--bare")
-    
+
         base_dir = os.path.split(path)[0]
-    
+
         cmd = ["git", "clone", host, path] + more
-        
+
         isUsername = False
         isPassword = False
         self.modifiedHost = host
 
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=base_dir, notify=self.notify_and_parse_progress, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=base_dir, notify=self.notify_and_parse_progress, cancel=self.get_cancel()).execute()
 
             if stdout[1].find('could not read Username') > -1:
                 # Prompt for username if it does not exist in the url.
@@ -764,7 +784,7 @@
                 cmd = ["git", "clone", self.modifiedHost, path] + more
 
                 # Try again.
-                (status, stdout, stderr) = GittyupCommand(cmd, cwd=base_dir, notify=self.notify_and_parse_progress, cancel=self.get_cancel).execute()
+                (status, stdout, stderr) = GittyupCommand(cmd, cwd=base_dir, notify=self.notify_and_parse_progress, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
 
@@ -776,48 +796,48 @@
 
             # Write original url back to config.
             self._config_set("remote \"origin\"", "url", host)
-            self.config.write_to_path()            
-    
-    def commit(self, message, parents=None, committer=None, commit_time=None, 
-            commit_timezone=None, author=None, author_time=None, 
+            self.config.write_to_path()
+
+    def commit(self, message, parents=None, committer=None, commit_time=None,
+            commit_timezone=None, author=None, author_time=None,
             author_timezone=None, encoding=None, commit_all=False):
         """
         Commit staged files to the local repository
-        
+
         @type   message: string
         @param  message: The log message
-        
+
         @type   parents: list
         @param  parents: A list of parent SHAs.  Defaults to head.
-        
+
         @type   committer: string
-        @param  committer: The person committing.  Defaults to 
+        @param  committer: The person committing.  Defaults to
             "user.name <user.email>"
-        
+
         @type   commit_time: int
         @param  commit_time: The commit time.  Defaults to time.time()
-        
+
         @type   commit_timezone: int
-        @param  commit_timezone: The commit timezone.  
-            Defaults to (-1 * time.timezone)
-        
+        @param  commit_timezone: The commit timezone.
+            Defaults to local timezone.
+
         @type   author: string
-        @param  author: The author of the file changes.  Defaults to 
+        @param  author: The author of the file changes.  Defaults to
             "user.name <user.email>"
-            
+
         @type   author_time: int
         @param  author_time: The author time.  Defaults to time.time()
-        
+
         @type   author_timezone: int
-        @param  author_timezone: The author timezone.  
-            Defaults to (-1 * time.timezone)
-        
+        @param  author_timezone: The author timezone.
+            Defaults to commit timezone.
+
         @type   encoding: string
         @param  encoding: The encoding of the commit.  Defaults to UTF-8.
-        
+
         @type   commit_all: boolean
         @param  commit_all: Stage all changed files before committing
-        
+
         """
         if commit_all:
             self.stage_all()
@@ -827,22 +847,30 @@
         if encoding is None:
             encoding = ENCODING
 
-        commit_id = self.repo.do_commit(message=message, committer=committer,
-                commit_timestamp=commit_time, commit_timezone=commit_timezone,
-                author=author, author_timestamp=author_time,
-                author_timezone=author_timezone, encoding=encoding,
-                merge_heads=parents)
+        if commit_timezone is None:
+            commit_timezone = helper.utc_offset()
 
-        branch_full = self.repo.refs.read_ref("HEAD")
+        commit_id = self.repo.do_commit(**helper.to_bytes({
+                    "message": message,
+                    "committer": committer,
+                    "commit_timestamp": commit_time,
+                    "commit_timezone": commit_timezone,
+                    "author": author,
+                    "author_timestamp": author_time,
+                    "author_timezone": author_timezone,
+                    "encoding": encoding,
+                    "merge_heads": parents}, encoding))
+
+        branch_full = self.repo.refs.read_ref(b"HEAD")
 
         if branch_full is not None:
-            branch_components = re.search("refs/heads/(.+)", branch_full)
+            branch_components = re.search(b"refs/heads/(.+)", branch_full)
 
             if (branch_components != None):
                 branch = branch_components.group(1)
 
-                self.notify("[" + commit_id + "] -> " + branch)
-                self.notify("To branch: " + branch)
+                self.notify("[%s] -> %s" % (S(commit_id), S(branch)))
+                self.notify("To branch: " + S(branch))
 
         #Print tree changes.
         #dulwich.patch.write_tree_diff(sys.stdout, self.repo.object_store, commit.tree, commit.id)
@@ -852,39 +880,38 @@
     def remove(self, paths):
         """
         Remove path from the repository.  Also deletes the local file.
-        
+
         @type   paths: list
         @param  paths: A list of paths to remove
-        
+
         """
-        
-        if type(paths) in (str, six.text_type):
+
+        if isinstance(paths, (str, six.text_type)):
             paths = [paths]
 
         index = self._get_index()
-        
+
         for path in paths:
             relative_path = self.get_relative_path(path)
             if relative_path in index:
                 del index[relative_path]
                 os.remove(path)
 
-        index.write()        
-    
+        index.write()
+
     def move(self, source, dest):
         """
         Move a file within the repository
-        
+
         @type   source: string
         @param  source: The source file
-        
+
         @type   dest: string
         @param  dest: The destination.  If dest exists as a directory, source
             will be added as a child.  Otherwise, source will be renamed to
             dest.
-            
         """
-        
+
         index = self._get_index()
         relative_source = self.get_relative_path(source)
         relative_dest = self.get_relative_path(dest)
@@ -893,36 +920,38 @@
         source_files = []
         if os.path.isdir(source):
             for name in index:
+                name = name.decode(self.UTF8)
                 if name.startswith(relative_source):
                     source_files.append(name)
         else:
-            source_files.append(self.get_relative_path(source))
+            source_files.append(relative_source)
 
         # Rename the affected index entries
         for source_file in source_files:
-            new_path = source_file.replace(relative_source, relative_dest)            
+            new_path = source_file.replace(relative_source, relative_dest)
             if os.path.isdir(dest):
                 new_path = os.path.join(new_path, os.path.basename(source_file))
 
-            index[new_path] = index[source_file]
+            source_file = source_file.encode(self.UTF8)
+            index[new_path.encode(self.UTF8)] = index[source_file]
             del index[source_file]
 
         index.write()
-        
+
         # Actually move the file/folder
         shutil.move(source, dest)
 
     def pull(self, repository="origin", refspec="master", options=None):
         """
-        Fetch objects from a remote repository and merge with the local 
+        Fetch objects from a remote repository and merge with the local
             repository
-            
+
         @type   repository: string
         @param  repository: The name of the repository
-        
+
         @type   refspec: string
         @param  refspec: The branch name to pull from
-        
+
         """
         self.numberOfCommandStages = 2
 
@@ -944,7 +973,7 @@
         isPassword = False
 
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify_and_parse_git_push, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify_and_parse_git_push, cancel=self.get_cancel()).execute()
             if stdout[0].find('could not read Username') > -1:
                 # Prompt for username if it does not exist in the url.
                 isUsername, originalRemoteUrl = self.promptUsername(remoteKey)
@@ -957,7 +986,7 @@
 
             if isUsername == True or isPassword == True:
                 # Try again.
-                (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify_and_parse_git_push, cancel=self.get_cancel).execute()
+                (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify_and_parse_git_push, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
 
@@ -967,20 +996,20 @@
             self._config_set(remoteKey, "url", originalRemoteUrl)
             self.config.write_to_path()
 
-    def push(self, repository="origin", refspec="master", tags=True):
+    def push(self, repository="origin", refspec="master", tags=True, force_with_lease=False):
         """
         Push objects from the local repository into the remote repository
             and merge them.
-            
+
         @type   repository: string
         @param  repository: The name of the repository
-        
+
         @type   refspec: string
         @param  refspec: The branch name to pull from
 
         @type   tags: boolean
         @param  tags: True to include tags in push, False to omit
-        
+
         """
 
         self.numberOfCommandStages = 2
@@ -988,6 +1017,8 @@
         cmd = ["git", "push", "--progress"]
         if tags:
             cmd.extend(["--tags"])
+        if force_with_lease:
+            cmd.extend(["--force-with-lease"])
         cmd.extend([repository, refspec])
 
         # Setup the section name in the config for the remote target.
@@ -996,7 +1027,7 @@
         isPassword = False
 
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify_and_parse_git_push, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify_and_parse_git_push, cancel=self.get_cancel()).execute()
             if stdout[0].find('could not read Username') > -1:
                 # Prompt for username if it does not exist in the url.
                 isUsername, originalRemoteUrl = self.promptUsername(remoteKey)
@@ -1009,7 +1040,7 @@
 
             if isUsername == True or isPassword == True:
                 # Try again.
-                (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify_and_parse_git_push, cancel=self.get_cancel).execute()
+                (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify_and_parse_git_push, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
 
@@ -1031,7 +1062,7 @@
                 if remoteKey.find("://") == -1:
                     # Write url temporarily back to config.
                     self._config_set(remoteKey, "url", newRemoteUrl)
-                    self._config_seteable.write_to_path()
+                    self.config.write_to_path()
                 else:
                     # Change the url in memory, since we don't have a config yet.
                     self.modifiedHost = newRemoteUrl
@@ -1071,7 +1102,7 @@
 
         if remoteKey.find("://") == -1:
             # Get existing url from config, otherwise just use what was provided (the url from cloning, etc).
-            originalRemoteUrl = self._config_get(remoteKey, "url")
+            originalRemoteUrl = S(self._config_get(remoteKey, "url"))
 
         if originalRemoteUrl.find('@') == -1:
             # No username or password. Prompt for both. Create dialog.
@@ -1113,7 +1144,7 @@
             window.mainloop()
 
             isUsername = True
-    
+
         return isUsername, originalRemoteUrl
 
     def promptPassword(self, remoteKey):
@@ -1128,7 +1159,7 @@
 
         if remoteKey.find("://") == -1:
             # Get existing url from config, otherwise just use what was provided (the url from cloning, etc).
-            originalRemoteUrl = self._config_get(remoteKey, "url")
+            originalRemoteUrl = S(self._config_get(remoteKey, "url"))
 
         # If the url contains a username (@) without a password (:), then prompt for a password.
         if originalRemoteUrl.find('@') > -1 and originalRemoteUrl.rfind(':') <= 5:
@@ -1179,190 +1210,190 @@
         """
         Fetch objects from a remote repository.  This will not merge the files
             into the local working copy, use pull for that.
-        
+
         @type   repository: string
         @param  repository: The git repository from which to fetch
-        
+
         @type   branch: string
         @param  branch: The git branch from which to fetch
         """
-        
+
         cmd = ["git", "fetch", repository]
         if branch:
             cmd.append(branch)
 
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
-    
+
     def fetch_all(self):
         cmd = ["git", "fetch", "--all"]
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
-            
+
     def merge(self, branch):
         cmd = ["git", "merge", branch]
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
-    
+
     def remote_add(self, name, host):
         """
         Add a remote repository
-        
+
         @type   name: string
         @param  name: The name to give to the remote repository
-                
+
         @type   host: string
         @param  host: The git url to add
-        
+
         """
-        
+
         cmd = ["git", "remote", "add", name, host]
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
-    
+
     def remote_rename(self, current_name, new_name):
         """
         Rename a remote repository
-        
+
         @type   current_name: string
         @param  current_name: The current name of the repository
-        
+
         @type   new_name: string
         @param  new_name: The name to give to the remote repository
-        
+
         """
-        
+
         cmd = ["git", "remote", "rename", current_name, new_name]
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
-    
+
     def remote_set_url(self, name, url):
         """
         Change a remote repository's url
-        
+
         @type   name: string
         @param  name: The name of the repository
-        
+
         @type   url: string
         @param  url: The url for the repository
-        
+
         """
-        
+
         cmd = ["git", "remote", "set-url", name, url]
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
-    
+
     def remote_delete(self, name):
         """
         Remove a remote repository
-        
+
         @type   name: string
         @param  name: The name of the remote repository to remove
 
         """
-        
+
         cmd = ["git", "remote", "rm", name]
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
-    
+
     def remote_list(self):
         """
         Return a list of the remote repositories
-        
+
         @rtype  list
         @return A list of dicts with keys: remote, url, fetch
-            
+
         """
-        
+
         cmd = ["git", "remote", "-v"]
 
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
             stdout = []
-            
+
         returner = []
         for line in stdout:
             components = line.split()
             if components:
                 name = components[0]
                 host = components[1]
-                
+
                 add = True
                 for item in returner:
                     if item["name"] == name:
                         add = False
-                
-                if add: 
+
+                if add:
                     returner.append({
                         "name": name,
                         "host": host
                     })
-                    
+
         return returner
-    
+
     def tag(self, name, message, revision="HEAD"):
         """
         Create a tag object
-        
+
         @type   name: string
         @param  name: The name to give the tag
-        
+
         @type   message: string
         @param  message: A log message
-                
+
         @type   revision: string
         @param  revision: The revision to tag.  Defaults to HEAD
-        
+
         """
         dulwich.porcelain.tag(self.repo, name, objectish=revision, message=message)
 
     def tag_delete(self, name):
         """
         Delete a tag
-        
+
         @type   name: string
         @param  name: The name of the tag to delete
-        
+
         """
-        
-        ref_name = "refs/tags/%s" % name
+
+        ref_name = S("refs/tags/%s" % name).bytes()
         refs = self.repo.get_refs()
         if ref_name in refs:
             del self.repo.refs[ref_name]
-    
+
     def tag_list(self):
         """
         Return a list of Tag objects
-        
+
         """
-    
+
         refs = self.repo.get_refs()
 
         tags = []
-        for ref,tag_sha in list(refs.items()):
-            if ref.startswith("refs/tags"):
+        for ref, tag_sha in list(refs.items()):
+            if S(ref).startswith("refs/tags"):
                 if type(self.repo[tag_sha]) == dulwich.objects.Commit:
                     tag = CommitTag(ref[10:], tag_sha, self.repo[tag_sha])
                 else:
                     tag = Tag(tag_sha, self.repo[tag_sha])
                 tags.append(tag)
-        
+
         return tags
 
     def status_porcelain(self, path):
@@ -1381,21 +1412,21 @@
             (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
-        
+
         statuses = []
         modified_files = []
         for line in stdout:
-            components = re.match("^([\sA-Z\?]+)\s(.*?)$", line)
+            components = RE_STATUS.match(line)
             if components:
                 status = components.group(1)
                 strip_status = status.strip()
-                path = components.group(2).decode("string_escape").decode("UTF-8")
+                path = self.string_unescape(components.group(2))
                 if path[0] == '"' and path[-1] == '"':
                     path = path[1:-1]
-               
+
                 if status == " D":
                     statuses.append(MissingStatus(path))
-                elif strip_status in ["M", "R", "U"]:
+                elif any(c in strip_status for c in ["M", "R", "U"]):
                     statuses.append(ModifiedStatus(path))
                 elif strip_status in ["A", "C"]:
                     statuses.append(AddedStatus(path))
@@ -1403,7 +1434,7 @@
                     statuses.append(RemovedStatus(path))
                 elif strip_status == "??":
                     statuses.append(UntrackedStatus(path))
-                
+
                 modified_files.append(path)
                 try:
                     del files_hash[path]
@@ -1449,11 +1480,11 @@
             ignore_file=False
             untracked_file=False
             for ignored_path in ignored_directories:
-                if ignored_path in file:
+                if S(ignored_path) in file:
                     ignore_file=True
                     break
             for untracked_path in untracked_directories:
-                if untracked_path in file:
+                if S(untracked_path) in file:
                     untracked_file=True
                     break
             if untracked_file==True:
@@ -1475,7 +1506,7 @@
                 if untracked_path in d:
                     d_status = UntrackedStatus(d)
                     break
-            
+
             dirPattern = "/%s/" % d
             if len(d) == 0:
                 dirPattern = "/"
@@ -1496,9 +1527,9 @@
         return statuses
 
     def status_dulwich(self, path):
-        tree = self._get_tree_index()        
+        tree = self._get_tree_index()
         index = self._get_index()
-        
+
         if os.path.isdir(path):
             (files, directories) = self._read_directory_tree(path)
         else:
@@ -1508,7 +1539,7 @@
         files_hash = {}
         for file in files:
             files_hash[file] = True
-        
+
         statuses = []
         # Calculate statuses for files in the current HEAD
         modified_files = []
@@ -1547,12 +1578,12 @@
                 inTreeIndex = tree[name]
             except Exception as e:
                 inTreeIndex = False
-            
+
             try:
                 inIndex = index[name]
             except Exception as e:
                 inIndex = False
-            
+
             if inIndex and not inTreeIndex:
                 modified_files.append(name)
                 statuses.append(AddedStatus(name))
@@ -1567,7 +1598,7 @@
 
             patterns += self.get_ignore_patterns_from_file(self.get_local_ignore_file(self.repo.path))
             patterns += self.global_ignore_patterns
-            
+
             if not self._ignore_file(patterns, os.path.basename(name)):
                 statuses.append(UntrackedStatus(name))
             else:
@@ -1576,12 +1607,12 @@
         # Determine status of folders based on child contents
         for d in directories:
             d_status = NormalStatus(d)
-            
+
             for file in modified_files:
                 if os.path.join(d, os.path.basename(file)) == file:
                     d_status = ModifiedStatus(d)
                     break
-            
+
             statuses.append(d_status)
 
         return statuses
@@ -1593,15 +1624,12 @@
     def status(self, path):
         # TODO - simply get this from the status implementation / avoid global state
         self.ignored_paths = []
-        version = self._get_git_version()
-        if version and self._version_greater_than(version, [1,7,-1]):
-            return self.status_porcelain(path)
-        else:
-            return self.status_dulwich(path)
+
+        return self.status_porcelain(path)
 
     def log(self, path="", skip=0, limit=None, revision="", showtype="all"):
-        
-        cmd = ["git", "--no-pager", "log", "--numstat", "--parents", "--pretty=fuller", 
+
+        cmd = ["git", "--no-pager", "log", "--numstat", "--parents", "--pretty=fuller",
             "--date-order", "--date=default", "-m"]
 
         if showtype == "all":
@@ -1618,7 +1646,7 @@
                 cmd.append(revision)
 
         if path == self.repo.path:
-            path = ""        
+            path = ""
         if path:
             cmd += ["--", path]
 
@@ -1636,33 +1664,33 @@
         for line in stdout:
             if line == "":
                 continue
-            
+
             if line[0:6] == "commit":
                 match = pattern_from.search(line)
                 commit_line = re.sub(" \(from.*\)","", line).split(" ")
-                fromPath = ""                
+                fromPath = ""
                 if match:
                     fromPath = match.group(1)
                 if revision:
                     if "changed_paths" not in revision:
-                        revision["changed_paths"] = {}                
+                        revision["changed_paths"] = {}
                     if last_commitId != commit_line[1]:
                         revisions.append(revision)
                         revision = {}
                     else:
                         del revision["message"]
 
-                
+
                 if len(fromPath) > 0:
                     if "changed_paths" not in revision:
-                        revision["changed_paths"] =[]  
+                        revision["changed_paths"] =[]
                     changed_file = {
                         "additions": "-",
                         "removals": "-",
                         "path": "Diff with parent : %s " % fromPath
                     }
                     revision["changed_paths"].append(changed_file)
-                
+
                 changed_file = {}
                 revision["commit"] = commit_line[1]
                 last_commitId = revision["commit"]
@@ -1683,7 +1711,7 @@
                     revision["message"] = ""
                 else:
                     revision["message"] += "\n"
-                    
+
                 revision["message"] = revision["message"] + message
             elif line[0].isdigit() or line[0] in "-":
                 file_line = line.split("\t")
@@ -1694,7 +1722,7 @@
                     changed_file = {
                         "additions": file_line[0],
                         "removals": file_line[1],
-                        "path": file_line[2].decode('string_escape').decode("UTF-8")
+                        "path": self.string_unescape(file_line[2])
                     }
                     if changed_file['path'][0] == '"' and changed_file['path'][-1] == '"':
                         changed_file['path'] = changed_file['path'][1:-1]
@@ -1704,17 +1732,17 @@
             revisions.append(revision)
 
         return revisions
-        
+
     def annotate(self, path, revision_obj="HEAD"):
         """
         Returns an annotation for a specified file
-            
+
         @type   path: string
         @param  path: The absolute path to a tracked file
-        
+
         @type   revision: string
         @param  revision: HEAD or a sha1 hash
-        
+
         """
 
         relative_path = self.get_relative_path(path)
@@ -1722,7 +1750,7 @@
         cmd = ["git", "annotate", "-l", revision_obj, relative_path]
 
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
             stdout = []
@@ -1739,7 +1767,7 @@
             code = message[1]
             if len(components) == 5:
                 code = components[4]
-                
+
             returner.append({
                 "revision": components[0],
                 "author": components[1][1:],
@@ -1747,19 +1775,19 @@
                 "line": code,
                 "number": message[0]
             })
-        
+
         return returner
 
     def show(self, path, revision_obj):
         """
         Returns a particular file at a given revision object.
-        
+
         @type   path: string
         @param  path: The absolute path to a file
 
         @type   revision_obj: git.Revision()
         @param  revision_obj: The revision object for path
-        
+
         """
         if not revision_obj:
             revision_obj = "HEAD"
@@ -1768,7 +1796,7 @@
 
         cmd = ["git", "show", "%s:%s" % (revision_obj, relative_path)]
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
             stdout = []
@@ -1778,7 +1806,7 @@
     def diff(self, path1, revision_obj1, path2=None, revision_obj2=None, summarize=False):
         """
         Returns the diff between the path(s)/revision(s)
-        
+
         @type   path1: string
         @param  path1: The absolute path to a file
 
@@ -1790,7 +1818,7 @@
 
         @type   revision_obj2: git.Revision()
         @param  revision_obj2: The revision object for path2
-               
+
         """
         relative_path1 = None
         relative_path2 = None
@@ -1800,6 +1828,10 @@
             relative_path2 = self.get_relative_path(path2)
 
         cmd = ["git", "diff"]
+
+        if summarize:
+            cmd.append("--name-status")
+
         if revision_obj1:
             cmd += [revision_obj1]
         if revision_obj2 and path2:
@@ -1809,16 +1841,13 @@
         if relative_path2 and relative_path2 != relative_path1:
             cmd += [relative_path2]
 
-        if summarize:
-            cmd.append("--name-status")
-            
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
             stdout = []
-        
-        return "\n".join(stdout)
+
+        return ''.join(x + "\n" for x in stdout)
 
     def diff_summarize(self, path1, revision_obj1, path2=None, revision_obj2=None):
         results = self.diff(path1, revision_obj1, path2, revision_obj2, True)
@@ -1826,87 +1855,87 @@
         for line in results.split("\n"):
             if not line:
                 continue
-                
-            (action, path) = line.split("\t")
+
+            (action, path) = (line + "\t").split("\t")[:2]
             summary.append({
                 "action": action,
                 "path": path
             })
-        
+
         return summary
 
     def export(self, path, dest_path, revision):
         """
         Exports a file or directory from a given revision
-        
+
         @type   path: string
         @param  path: The source file/folder to export
-        
+
         @type   dest_path: string
         @param  dest_path: The path to put the exported file(s)
-        
+
         @type   revision: string
         @param  revision: The revision/tree/commit of the source file being exported
 
         """
-        
+
         tmp_file = get_tmp_path("rabbitvcs-git-export.tar")
         cmd1 = ["git", "archive", "--format", "tar", "-o", tmp_file, revision, path]
         cmd2 = ["tar", "-xf", tmp_file, "-C", dest_path]
-        
+
         mkdir_p(dest_path)
 
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd1, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
-            (status, stdout, stderr) = GittyupCommand(cmd2, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd1, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd2, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
             stdout = []
-            
+
         self.notify("%s at %s exported to %s" % (path, revision, dest_path))
-        return "\n".join(stdout)      
-    
-    def clean(self, path, remove_dir=True, remove_ignored_too=False, 
+        return "\n".join(stdout)
+
+    def clean(self, path, remove_dir=True, remove_ignored_too=False,
             remove_only_ignored=False, dry_run=False, force=True):
-        
+
         cmd = ["git", "clean"]
         if remove_dir:
             cmd.append("-d")
-        
+
         if remove_ignored_too:
             cmd.append("-x")
-        
+
         if remove_only_ignored:
             cmd.append("-X")
-        
+
         if dry_run:
             cmd.append("-n")
-        
+
         if force:
             cmd.append("-f")
-    
+
         relative_path = self.get_relative_path(path)
         cmd.append(relative_path)
-        
+
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
             return
 
-    def reset(self, path, revision, type=None):        
+    def reset(self, path, revision, type=None):
         relative_path = self.get_relative_path(path)
-        
+
         cmd = ["git", "reset"]
         if type:
             cmd.append("--%s" % type)
-        
+
         cmd.append(revision)
         if relative_path:
             cmd.append(relative_path)
 
         try:
-            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel).execute()
+            (status, stdout, stderr) = GittyupCommand(cmd, cwd=self.repo.path, notify=self.notify, cancel=self.get_cancel()).execute()
         except GittyupCommandError as e:
             self.callback_notify(e)
             return
@@ -1919,13 +1948,13 @@
 
     def set_callback_get_user(self, func):
         self.callback_get_user = func
-    
+
     def set_callback_get_cancel(self, func):
         self.callback_get_cancel = func
-    
+
     def notify(self, data):
         self.callback_notify(data)
-    
+
     def notify_and_parse_progress(self, data):
         # When progress is requested to a git command, it will
         # respond with the current operation, and that operations current progress
@@ -1981,7 +2010,7 @@
         # Extract the percentage, which will be all numerals directly
         # prior to '%'.
         message_components = re.search("^(.+): +([0-9]+)%", message)
-        
+
         if message_components == None:
             print("Error: failed to parse git string: " + data)
             return
@@ -1999,7 +2028,7 @@
         # If we're using a number of stages, adjust the fraction acordingly.
         if self.numberOfCommandStages > 0:
             fraction = (self.numberOfCommandStagesExecuted + fraction) / self.numberOfCommandStages
-            
+
         # If we've finished the current stage (100%).
         if "done" in message:
             self.numberOfCommandStagesExecuted += 1
@@ -2153,7 +2182,7 @@
             return_data = data
 
         self.notify_and_parse_progress (return_data)
-    
+
     def get_cancel(self):
         return self.callback_get_cancel
 
@@ -2169,4 +2198,4 @@
         window.geometry("+%d+%d" % (x, y))
 
         # Draw the window frame immediately after setting correct window position.
-        window.deiconify()
\ No newline at end of file
+        window.deiconify()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/command.py rabbitvcs/rabbitvcs/vcs/git/gittyup/command.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/command.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/gittyup/command.py	2019-09-13 08:36:17.265343405 +0800
@@ -6,10 +6,14 @@
 import subprocess
 import fcntl
 import select
+import codecs
 import os
 
 from .exceptions import GittyupCommandError
 
+from rabbitvcs.util.strings import *
+
+
 def notify_func(data):
     pass
 
@@ -19,30 +23,33 @@
 class GittyupCommand:
     def __init__(self, command, cwd=None, notify=None, cancel=None):
         self.command = command
-        
+
         self.notify = notify_func
         if notify:
             self.notify = notify
 
-        self.get_cancel = cancel_func
+        self.cancel = cancel_func
         if cancel:
-            self.get_cancel = cancel
+            self.cancel = cancel
 
         self.cwd = cwd
         if not self.cwd:
             self.cwd = os.getcwd()
-    
+
     def get_lines(self, val):
         returner = []
         lines = val.rstrip("\n").split("\n")
         for line in lines:
             returner.append(line.rstrip("\x1b[K\n"))
-        
-        return returner 
+
+        return returner
 
     def execute(self):
         env = os.environ.copy()
         env["LANG"] = "C";
+        env["PYTHONIOENCODING"] = "UTF-8"
+        env["GIT_TERMINAL_PROMPT"] = "0"
+        env["GIT_SSL_CERT_PASSWORD_PROTECTED"] = ""
         proc = subprocess.Popen(self.command,
                                 cwd=self.cwd,
                                 stdin=None,
@@ -50,21 +57,21 @@
                                 stdout=subprocess.PIPE,
                                 env=env,
                                 close_fds=True,
-                                preexec_fn=os.setsid,
-                                universal_newlines=True)
+                                preexec_fn=os.setsid)
 
+        out = codecs.getreader(UTF8_ENCODING)(proc.stdout, SURROGATE_ESCAPE)
         stdout = []
 
         while True:
-            line = proc.stdout.readline()
+            line = out.readline()
 
             if line == '':
                 break
-            line = line.rstrip('\n') # Strip trailing newline.
+            line = line.rstrip("\r\n") # Strip trailing newline.
             self.notify(line)
             stdout.append(line)
 
-            if self.get_cancel():
+            if self.cancel():
                 proc.kill()
 
         return (0, stdout, None)
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/objects.py rabbitvcs/rabbitvcs/vcs/git/gittyup/objects.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/objects.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/gittyup/objects.py	2019-09-13 08:36:17.265343405 +0800
@@ -30,7 +30,7 @@
     identifier = "modified"
 
 class KilledStatus(GittyupStatus):
-    identifier = "killed"    
+    identifier = "killed"
 
 class UntrackedStatus(GittyupStatus):
     identifier = "untracked"
@@ -114,7 +114,7 @@
     @property
     def message(self):
         return self.obj.message
-    
+
     @property
     def tagger(self):
         return self.obj.tagger
@@ -122,14 +122,14 @@
     @property
     def tag_time(self):
         return self.obj.tag_time
-    
+
     @property
     def tag_timezone(self):
         return self.obj.tag_timezone
 
 class CommitTag(Commit):
     def __init__(self, name, sha, obj):
-        self.name = name
+        self._name = name
         self.sha = sha
         self.obj = obj
 
@@ -138,8 +138,8 @@
 
     @property
     def name(self):
-        return self.name
-    
+        return self._name
+
     def __eq__(self, other):
         return (self.name == other)
 
@@ -150,7 +150,7 @@
     @property
     def message(self):
         return self.obj.message
-    
+
     @property
     def tagger(self):
         return self.obj.committer
@@ -158,7 +158,7 @@
     @property
     def tag_time(self):
         return self.obj.commit_time
-    
+
     @property
     def tag_timezone(self):
         return self.obj.commit_timezone
@@ -169,7 +169,7 @@
 
 class Branch(Commit):
     def __init__(self, name, sha, obj):
-        self.name = name
+        self._name = name
         self.sha = sha
         self.obj = obj
 
@@ -178,7 +178,7 @@
 
     @property
     def name(self):
-        return self.obj.name
-    
+        return self._name
+
     def __eq__(self, other):
         return (self.name == other)
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/branch.py rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/branch.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/branch.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/branch.py	2019-09-13 08:36:17.265343405 +0800
@@ -29,10 +29,10 @@
     os.mkdir(DIR)
     g = GittyupClient()
     g.initialize_repository(DIR)
-    
+
     touch(DIR + "/test1.txt")
     touch(DIR + "/test2.txt")
-    
+
     g.stage([DIR+"/test1.txt", DIR+"/test2.txt"])
     g.commit("This is a commit")
 
@@ -46,14 +46,14 @@
     # Track branch1
     g.track("refs/heads/branch1")
     assert (g.is_tracking("refs/heads/branch1"))
-    
+
     # Rename branch1 to branch1b
     g.branch_rename("branch1", "branch1b")
     assert "branch1b" in [x['name'] for x in g.branch_list()]
 
     # Make sure we are now tracking branch1b
     assert (g.is_tracking("refs/heads/branch1b"))
-    
+
     # Delete branch1b
     g.branch_delete("branch1b")
     assert ("branch1b" not in g.branch_list())
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/commit.py rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/commit.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/commit.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/commit.py	2019-09-13 08:36:17.265343405 +0800
@@ -30,15 +30,15 @@
     os.mkdir(DIR)
     g = GittyupClient()
     g.initialize_repository(DIR)
-    
+
     touch(DIR + "/test1.txt")
     touch(DIR + "/test2.txt")
-    
+
     g.stage([DIR+"/test1.txt", DIR+"/test2.txt"])
     g.commit("First commit", commit_all=True)
-    
+
     change(DIR + "/test1.txt")
     g.stage([DIR+"/test1.txt"])
     g.commit("Second commit", author="Alex Plumb <alexplumb@gmail.com>")
-    
+
     print("commit.py pass")
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/move.py rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/move.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/move.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/move.py	2019-09-13 08:36:17.265343405 +0800
@@ -28,13 +28,13 @@
         raise SystemExit("This test script has already been run.  Please call this script with --cleanup to start again")
 
     g = GittyupClient(DIR, create=True)
-    
+
     touch(DIR + "/test.txt")
-    
+
     # Stage and commit the file
     g.stage([DIR+"/test.txt"])
     g.commit("Adding test.txt")
-    
+
     st = g.status()
 
     # Move file explicity test
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/remote.py rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/remote.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/remote.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/remote.py	2019-09-13 08:36:17.265343405 +0800
@@ -33,10 +33,10 @@
 
     assert (len(l) == 1)
     assert (l[0]["host"] == "git://github.com/adamplumb/sprout.git")
-    
+
     g.remote_delete("origin")
     l = g.remote_list()
-    
+
     assert (len(l) == 0)
 
     print("remote.py pass")
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/remove.py rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/remove.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/remove.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/remove.py	2019-09-13 08:36:17.265343405 +0800
@@ -30,19 +30,19 @@
     os.mkdir(DIR)
     g = GittyupClient()
     g.initialize_repository(DIR)
-    
+
     touch(DIR + "/test.txt")
-    
+
     # Stage and commit the file
     g.stage([DIR+"/test.txt"])
     g.commit("Adding test.txt")
-    
+
     g.remove([DIR+"/test.txt"])
     st = g.status()
     assert (not os.path.exists(DIR+"/test.txt"))
     assert (g.is_staged(DIR+"/test.txt"))
     assert (st[0] == RemovedStatus)
-    
+
     g.unstage([DIR+"/test.txt"])
     st = g.status()
     assert (not os.path.exists(DIR+"/test.txt"))
@@ -54,5 +54,5 @@
     assert (os.path.exists(DIR+"/test.txt"))
     assert (not g.is_staged(DIR+"/test.txt"))
     assert (st[0] == NormalStatus)
-    
+
     print("remove.py pass")
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/run_all.py rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/run_all.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/run_all.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/run_all.py	2019-09-13 08:36:17.265343405 +0800
@@ -10,7 +10,7 @@
         subprocess.call(["python", module, "--cleanup"])
 
 modules = [
-    "branch.py", 
+    "branch.py",
     "stage.py",
     "commit.py",
     "tag.py",
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/stage.py rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/stage.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/stage.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/stage.py	2019-09-13 08:36:17.265343405 +0800
@@ -30,30 +30,30 @@
     os.mkdir(DIR)
     g = GittyupClient()
     g.initialize_repository(DIR)
-    
+
     touch(DIR + "/test1.txt")
     touch(DIR + "/test2.txt")
-    
+
     # Stage both files
     g.stage([DIR+"/test1.txt", DIR+"/test2.txt"])
     st = g.status(DIR)
     assert (st[0] == AddedStatus), st
     assert (st[1] == AddedStatus)
     assert (st[0].is_staged)
-    
+
     # Unstage both files
     g.unstage([DIR+"/test1.txt", DIR+"/test2.txt"])
     st = g.status(DIR)
     assert (st[0] == UntrackedStatus)
     assert (st[1] == UntrackedStatus)
     assert (not st[0].is_staged)
-    
+
     # Untracked files should not be staged
     g.stage_all()
     st = g.status(DIR)
     assert (st[0] == UntrackedStatus)
     assert (st[1] == UntrackedStatus)
-    
+
     # test1.txt is changed, so it should get staged and set as Modified
     g.stage([DIR+"/test1.txt"])
     g.commit("Test commit")
@@ -73,5 +73,5 @@
     assert (not g.is_staged(DIR+"/" + st[1].path))
     assert (st[0] == ModifiedStatus)
     assert (st[1] == UntrackedStatus)
-    
+
     print("stage.py pass")
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/tag.py rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/tag.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/git/gittyup/tests/tag.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/git/gittyup/tests/tag.py	2019-09-13 08:36:17.265343405 +0800
@@ -30,16 +30,16 @@
     os.mkdir(DIR)
     g = GittyupClient()
     g.initialize_repository(DIR)
-    
+
     touch(DIR + "/test1.txt")
     touch(DIR + "/test2.txt")
-    
+
     g.stage([DIR+"/test1.txt", DIR+"/test2.txt"])
     commit_id = g.commit("First commit", commit_all=True)
-    
+
     tag_id = g.tag("tag1", "Tagging as tag1", track=True)
     assert (g.is_tracking("refs/tags/tag1"))
-    
+
     assert (len(g.tag_list()) == 1)
-    
+
     print("tag.py pass")
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/log.py rabbitvcs/rabbitvcs/vcs/log.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/log.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/log.py	2019-09-13 08:36:17.265343405 +0800
@@ -1,37 +1,35 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
 
-import rabbitvcs.util.helper
 import rabbitvcs.vcs
 
-DATETIME_FORMAT = rabbitvcs.util.helper.LOCAL_DATETIME_FORMAT
 
 class LogChangedPath:
     path = ""
     action = ""
     copy_from_path = ""
     copy_from_revision = ""
-    
+
     def __init__(self, path, action, copy_from_path, copy_from_revision):
         self.path = path
         self.action = action
@@ -45,10 +43,10 @@
     message = None
     parents = []
     head = False
-    
+
     # A list of LogChangedFiles elements
     changed_paths = []
-    
+
     def __init__(self, date, revision, author, message, changed_paths, parents=[], head=False):
         self.date = date
         self.revision = revision
@@ -57,9 +55,9 @@
         self.changed_paths = changed_paths
         self.parents = parents
         self.head = head
-        
+
     def get_date(self):
         return self.date
-        
+
     def set_date(self, date):
         self.date = date
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/mercurial/__init__.py rabbitvcs/rabbitvcs/vcs/mercurial/__init__.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/mercurial/__init__.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/mercurial/__init__.py	2019-09-13 08:36:17.265343405 +0800
@@ -1,21 +1,21 @@
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -30,7 +30,7 @@
 
 from mercurial import commands, ui, hg
 
-import rabbitvcs.util.helper
+from rabbitvcs.util.strings import S
 
 import rabbitvcs.vcs
 import rabbitvcs.vcs.status
@@ -38,7 +38,6 @@
 import rabbitvcs.vcs.mercurial.util
 from rabbitvcs.vcs.branch import BranchEntry
 from rabbitvcs.util.log import Log
-import six
 
 log = Log("rabbitvcs.vcs.mercurial")
 
@@ -54,29 +53,28 @@
     def __init__(self, kind, value=None):
         self.kind = kind.upper()
         self.value = value
-        
+
         if self.kind == "HEAD":
             self.value = "HEAD"
-        
+
         self.is_revision_object = True
 
-    def __unicode__(self):
+    def __str__(self):
         if self.value:
-            return six.text_type(self.value)
-        else:
-            return self.kind
-            
+            return S(self.value)
+        return S(self.kind)
+
+    def __unicode__(self):
+        return self.__str__().unicode()
+
     def short(self):
         if self.value:
-            return six.text_type(self.value)[0:7]
+            return S(self.value)[0:7]
         else:
             return self.kind
 
-    def __str__(self):
-        return self.__unicode__()
-
     def __repr__(self):
-        return self.__unicode__()
+        return self.__str__()
 
     def primitive(self):
         return self.value
@@ -90,7 +88,7 @@
         "untracked":    "?",
         "missing":      "!"
     }
-    
+
     STATUS_REVERSE = {
         "C":       "normal",
         "A":        "added",
@@ -113,7 +111,7 @@
         "added",
         "removed"
     ]
-    
+
     STATUSES_FOR_STAGE = [
         "untracked"
     ]
@@ -146,11 +144,11 @@
         while path_to_check != "/" and path_to_check != "":
             if os.path.isdir(os.path.join(path_to_check, ".hg")):
                 return path_to_check
-            
+
             path_to_check = os.path.split(path_to_check)[0]
-        
+
         return None
-    
+
     def get_relative_path(self, path):
         if path == self.repository_path:
             return ""
@@ -159,14 +157,14 @@
 
     def get_absolute_path(self, path):
         return os.path.join(self.repository_path, path).rstrip("/")
-    
+
     def statuses(self, path, recurse=True, invalidate=False):
         mercurial_statuses = self.repository.status(clean=True, unknown=True)
 
         # the status method returns a series of tuples filled with files matching
         # the statuses below
         tuple_order = ["modified", "added", "removed", "missing", "unknown", "ignored", "clean"]
-        
+
         # go through each tuple (each of which has a defined status), and
         # generate a flat list of rabbitvcs statuses
         statuses = []
@@ -176,18 +174,18 @@
             content = tuple_order[index]
             for item in status_tuple:
                 st_path = self.get_absolute_path(item)
-                
+
                 rabbitvcs_status = rabbitvcs.vcs.status.MercurialStatus({
                     "path": st_path,
                     "content": content
                 })
                 statuses.append(rabbitvcs_status)
-                
+
                 # determine the statuses of the parent folders
                 dir_content = content
                 if content in self.STATUSES_FOR_REVERT:
                     dir_content = "modified"
-                
+
                 path_to_check = os.path.dirname(st_path)
                 while True:
                     if path_to_check not in directories or directories[path_to_check] not in self.STATUSES_FOR_COMMIT:
@@ -197,7 +195,7 @@
                         })
                         statuses.append(rabbitvcs_status)
                         directories[path_to_check] = dir_content
-                    
+
                     if path_to_check == "" or path_to_check == self.repository_path:
                         break
 
@@ -206,7 +204,7 @@
             index += 1
 
         return statuses
-    
+
     def status(self, path, summarize=True, invalidate=False):
         all_statuses = self.statuses(path, invalidate=invalidate)
 
@@ -241,7 +239,7 @@
     def is_versioned(self, path):
         if self.is_working_copy(path):
             return True
-       
+
         st = self.status(path)
         try:
             return st.is_versioned()
@@ -250,14 +248,14 @@
             return False
 
         return False
-    
+
     def is_locked(self, path):
         return False
 
     def get_items(self, paths, statuses=[]):
         if paths is None:
             return []
-        
+
         items = []
         for path in paths:
             st = self.statuses(path, invalidate=True)
@@ -269,7 +267,7 @@
                     items.append(st_item)
 
         return items
-    
+
     #
     # Actions
     #
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/mercurial/util.py rabbitvcs/rabbitvcs/vcs/mercurial/util.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/mercurial/util.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/mercurial/util.py	2019-09-13 08:36:17.265343405 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/status.py rabbitvcs/rabbitvcs/vcs/status.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/status.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/status.py	2019-09-13 08:36:17.265343405 +0800
@@ -1,22 +1,22 @@
 from __future__ import absolute_import
 #
-# This is an extension to the Nautilus file manager to allow better 
+# This is an extension to the Nautilus file manager to allow better
 # integration with the Subversion source control system.
-# 
+#
 # Copyright (C) 2006-2008 by Jason Field <jason@jasonfield.com>
 # Copyright (C) 2007-2008 by Bruce van der Kooij <brucevdkooij@gmail.com>
 # Copyright (C) 2008-2010 by Adam Plumb <adamplumb@gmail.com>
-# 
+#
 # RabbitVCS is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
-# 
+#
 # RabbitVCS is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 # GNU General Public License for more details.
-# 
+#
 # You should have received a copy of the GNU General Public License
 # along with RabbitVCS;  If not, see <http://www.gnu.org/licenses/>.
 #
@@ -80,7 +80,7 @@
         status_calculating,
         status_error
     ]
-    
+
     authors = []
     revisions = []
 
@@ -103,8 +103,9 @@
             except ValueError as e:
                 self.revisions.append(status.revision)
                 revision_index = len(self.revisions) -1
-            
+
             self.cache[path] = (
+                status.__class__,
                 content_index,
                 metadata_index,
                 revision_index,
@@ -113,18 +114,20 @@
             )
         except Exception as e:
             log.debug(e)
-            
+
     def __getitem__(self, path):
         try:
-            (content_index, metadata_index, revision_index, author_index, date) = self.cache[path]
-            
+            (statusclass, content_index, metadata_index, revision_index, author_index, date) = self.cache[path]
+
             content = self.keys[content_index]
             metadata = self.keys[metadata_index]
             revision = self.revisions[revision_index]
             author = self.authors[author_index]
-            
-            return Status(path, content, metadata, revision=revision, 
+
+            status = Status(path, content, metadata, revision=revision,
                 author=author, date=date)
+            status.__class__ = statusclass
+            return status
         except Exception as e:
             log.debug(e)
 
@@ -134,7 +137,7 @@
         except KeyError as e:
             log.debug(e)
 
-            
+
     def __contains__(self, path):
         return path in self.cache
 
@@ -146,7 +149,7 @@
                     statuses.append(self.__getitem__(key))
         else:
             statuses.append(self.__getitem__(path))
-            
+
         return statuses
 
 class Status(object):
@@ -154,49 +157,49 @@
     @staticmethod
     def status_unknown(path):
         return Status(path, status_unknown, summary = status_unknown)
-    
+
     @staticmethod
     def status_error(path):
         return Status(path, status_error, summary = status_error)
-    
+
     @staticmethod
     def status_calc(path):
         return Status(path, status_calculating, summary = status_calculating)
-    
+
     vcs_type = rabbitvcs.vcs.VCS_DUMMY
- 
+
     clean_statuses = ['unchanged']
-    
+
     content_status_map = None
     metadata_status_map = None
-    
-    def __init__(self, path, content, metadata=None, summary=None, 
+
+    def __init__(self, path, content, metadata=None, summary=None,
             revision=None, author=None, date=None):
 
         """
         The status objects accepts the following items
-        
+
         @type   path: string
         @param  path: The path to the item
-        
+
         @type   content: string
         @param  content: The content status
-        
+
         @type   metadata: string
         @param  metadata: The property status
 
         @type   summary: string
         @param  summary: The summary status
-        
+
         @type   revision: string or int
         @param  revision: The last commit revision of the item
-        
+
         @type   author: string
         @param  author: The commit author
-        
+
         @type   date: int
         @param  date: The timestamp of the commit time
-        
+
         """
 
         self.path = path
@@ -215,7 +218,7 @@
         Given our text_status and a prop_status, simplify to a single "simple"
         status. If we don't know how to simplify our particular combination of
         status, call it an error.
-        """     
+        """
         # Content status dominates
         single = self.simple_content_status() or status_error
         if single in Status.clean_statuses:
@@ -225,10 +228,10 @@
 
     def simple_content_status(self):
         if self.content_status_map:
-            return self.content_status_map.get(self.content)
+            return self.content_status_map.get(self.content, self.content)
         else:
             return self.content
-        
+
     def simple_metadata_status(self):
         if self.metadata and self.metadata_status_map:
             return self.metadata_status_map.get(self.metadata)
@@ -237,38 +240,38 @@
 
     def make_summary(self, child_statuses = []):
         """ Summarises statuses for directories.
-        """    
+        """
         summary = status_unknown
-        
+
         status_set = set([st.single for st in child_statuses])
-        
+
         if not status_set:
             self.summary = self.single
-        
+
         if status_complicated in status_set:
             self.summary = status_complicated
         elif self.single in ["added", "modified", "deleted"]:
             # These take priority over child statuses
-            self.summary = self.single        
+            self.summary = self.single
         elif len(set(MODIFIED_CHILD_STATUSES) & status_set):
             self.summary = status_modified
         else:
             self.summary = self.single
-        
+
         return summary
-    
+
     def is_versioned(self):
         return self.single is not status_unversioned
-            
+
     def is_modified(self):
         # This may need to be more sophisticated... eg. is read-only modified?
-        # Unknown? etc... 
+        # Unknown? etc...
         return self.single is not status_normal
-    
+
     def has_modified(self):
         # Includes self being modified!
-        return self.summary is not status_normal    
-    
+        return self.summary is not status_normal
+
     def __repr__(self):
         return "<%s %s (%s) %s/%s>" % (_("RabbitVCS status for"),
                                         self.path,
@@ -281,7 +284,7 @@
         attrs['__type__'] = type(self).__name__
         attrs['__module__'] = type(self).__module__
         return attrs
-        
+
     def __setstate__(self, state_dict):
         del state_dict['__type__']
         del state_dict['__module__']
@@ -290,7 +293,7 @@
 class SVNStatus(Status):
 
     vcs_type = rabbitvcs.vcs.VCS_SVN
-    
+
     content_status_map = {
         'normal': status_normal,
         'added': status_added,
@@ -307,16 +310,16 @@
         'external': status_normal,
         'incomplete': status_complicated
     }
-    
+
     metadata_status_map = {
         'normal': status_normal,
         'none': status_normal,
         'modified': status_modified
         }
-    
+
 #external - an unversioned path populated by an svn:external property
 #incomplete - a directory doesn't contain a complete entries list
-    
+
     def __init__(self, pysvn_status):
         revision = author = date = None
         if pysvn_status.entry:
@@ -346,7 +349,7 @@
 class GitStatus(Status):
 
     vcs_type = 'git'
-    
+
     content_status_map = {
         'normal': status_normal,
         'added': status_added,
@@ -357,7 +360,7 @@
         'renamed': status_modified,
         'ignored': status_ignored
     }
-    
+
     metadata_status_map = {
         'normal': status_normal,
         None: status_normal
@@ -371,7 +374,7 @@
 
 class MercurialStatus(Status):
     vcs_type = 'mercurial'
-    
+
     content_status_map = {
         'clean': status_normal,
         'added': status_added,
@@ -381,7 +384,7 @@
         'modified': status_modified,
         'ignored': status_ignored
     }
-    
+
     metadata_status_map = {
         'normal': status_normal,
         None: status_normal
@@ -401,21 +404,22 @@
 ]
 
 class TestStatusObjects(unittest.TestCase):
-    
-    base = "/path/to/test"
-        
-    children = [
-        os.path.join(base, chr(x)) for x in range(97,123) 
-                ]
-    
+
+    @classmethod
+    def __initclass__(self):
+        self.base = "/path/to/test"
+        self.children = [
+            os.path.join(self.base, chr(x)) for x in range(97,123)
+        ]
+
     def testsingle_clean(self):
         status = Status(self.base, status_normal)
         self.assertEqual(status.single, status_normal)
-        
+
     def testsingle_changed(self):
         status = Status(self.base, status_modified)
         self.assertEqual(status.single, status_modified)
-        
+
     def testsingle_propclean(self):
         status = Status(self.base, status_normal, status_normal)
         self.assertEqual(status.single, status_normal)
@@ -423,7 +427,7 @@
     def testsingle_propchanged(self):
         status = Status(self.base, status_normal, status_modified)
         self.assertEqual(status.single, status_modified)
-        
+
     def testsummary_clean(self):
         top_status = Status(self.base, status_normal)
         child_sts = [Status(path, status_normal) for path in self.children]
@@ -433,60 +437,63 @@
     def testsummary_changed(self):
         top_status = Status(self.base, status_normal)
         child_sts = [Status(path, status_normal) for path in self.children]
-        
+
         child_sts[1] = Status(child_sts[1].path, status_modified)
-        
+
         top_status.make_summary(child_sts)
         self.assertEqual(top_status.summary, status_modified)
 
     def testsummary_added(self):
         top_status = Status(self.base, status_normal)
         child_sts = [Status(path, status_normal) for path in self.children]
-        
+
         child_sts[1] = Status(child_sts[1].path, status_added)
-        
+
         top_status.make_summary(child_sts)
         self.assertEqual(top_status.summary, status_modified)
 
     def testsummary_complicated(self):
         top_status = Status(self.base, status_normal)
         child_sts = [Status(path, status_normal) for path in self.children]
-        
+
         child_sts[1] = Status(child_sts[1].path, status_complicated)
-        
+
         top_status.make_summary(child_sts)
         self.assertEqual(top_status.summary, status_complicated)
 
     def testsummary_propchange(self):
         top_status = Status(self.base, status_normal)
         child_sts = [Status(path, status_normal) for path in self.children]
-        
+
         child_sts[1] = Status(child_sts[1].path,
                               status_normal,
                               status_modified)
-        
+
         top_status.make_summary(child_sts)
         self.assertEqual(top_status.summary, status_modified)
 
     def testsummary_bothchange(self):
         top_status = Status(self.base, status_normal)
         child_sts = [Status(path, status_normal) for path in self.children]
-        
+
         child_sts[1] = Status(child_sts[1].path,
                               status_complicated,
                               status_modified)
-        
+
         top_status.make_summary(child_sts)
         self.assertEqual(top_status.summary, status_complicated)
 
     def testsummary_topadded(self):
         top_status = Status(self.base, status_added)
         child_sts = [Status(path, status_normal) for path in self.children]
-        
+
         child_sts[1] = Status(child_sts[1].path, status_modified, status_modified)
-        
+
         top_status.make_summary(child_sts)
         self.assertEqual(top_status.summary, status_added)
 
+TestStatusObjects.__initclass__()
+
+
 if __name__ == "__main__":
     unittest.main()
diff -uNr rabbitvcs-0.17.1/rabbitvcs/vcs/svn/__init__.py rabbitvcs/rabbitvcs/vcs/svn/__init__.py
--- rabbitvcs-0.17.1/rabbitvcs/vcs/svn/__init__.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/rabbitvcs/vcs/svn/__init__.py	2019-09-13 08:36:17.265343405 +0800
@@ -36,10 +36,12 @@
 import rabbitvcs.vcs
 import rabbitvcs.vcs.status
 import rabbitvcs.vcs.log
-import rabbitvcs.util.helper
+from rabbitvcs.util import helper
 from rabbitvcs.util.log import Log
-from six.moves import map
+from rabbitvcs.util.decorators import structure_map
+from rabbitvcs.util.strings import *
 import six
+from six.moves import map
 from six.moves import range
 
 log = Log("rabbitvcs.vcs.svn")
@@ -50,6 +52,22 @@
 # Extra "action" for "commit completed"
 commit_completed = "commit_completed"
 
+@structure_map
+def pure_unicode(obj):
+    """
+    Map object string subclass components to real unicode type.
+
+    Pysvn (using PyCXX) does not like string subclasses as arguments and
+    requires unsubclassed string/unicode objects. In addition, it fails on
+    Python2 non-ascii byte strings when converting them to utf-8.
+    This function is called each time there is a risk of passing string or
+    unicode objects to the pysvn API.
+    """
+    if isinstance(obj, (six.string_types, six.text_type)):
+        obj = S(obj).unicode()
+    return obj
+
+
 class Revision:
     """
     Implements a simple revision object as a wrapper around the pysvn revision
@@ -68,7 +86,7 @@
     }
 
     def __init__(self, kind, value=None):
-        self.kind = six.text_type(kind).lower()
+        self.kind = S(kind).lower()
         self.value = value
         self.is_revision_object = True
 
@@ -93,20 +111,19 @@
         except Exception as e:
             log.exception(e)
 
-    def __unicode__(self):
+    def __str__(self):
         if self.value:
-            return six.text_type(self.value)
-        else:
-            return self.kind
+            return S(self.value)
+        return S(self.kind)
 
-    def short(self):
-        return self.__unicode__()
+    def __unicode__(self):
+        return self.__str__().unicode()
 
-    def __str__(self):
-        return self.__unicode__()
+    def short(self):
+        return self.__str__()
 
     def __repr__(self):
-        return self.__unicode__()
+        return self.__str__()
 
     def primitive(self):
         return self.__revision
@@ -194,6 +211,7 @@
         pysvn.wc_notify_action.skip:                    _("Skipped"),
         pysvn.wc_notify_action.update_delete:           _("Deleted"),
         pysvn.wc_notify_action.update_add:              _("Added"),
+        pysvn.wc_notify_action.update_started:          _("Updating"),
         pysvn.wc_notify_action.update_update:           _("Updated"),
         pysvn.wc_notify_action.update_completed:        _("Completed"),
         pysvn.wc_notify_action.update_external:         _("External"),
@@ -247,12 +265,13 @@
         Look up the status for path.
 
         """
-        
-        if path in self.cache:
+
+        spath = S(path)
+        if spath in self.cache:
             if invalidate:
-                del self.cache[path]
+                del self.cache[spath]
             else:
-                return self.cache.find_path_statuses(path)
+                return self.cache.find_path_statuses(spath)
 
         on_error = rabbitvcs.vcs.status.Status.status_unknown(path)
 
@@ -260,7 +279,7 @@
             return [on_error]
 
         try:
-            pysvn_statuses = self.client.status(path,
+            pysvn_statuses = self.client_status(path,
                                                 depth=pysvn.depth.infinity,
                                                 update=update)
             if not len(pysvn_statuses):
@@ -272,43 +291,48 @@
                 for st in pysvn_statuses:
                     # If not recursing, only return the item in question (if a file)
                     # or items directly under the path (if a directory)
-                    cmp_path = os.path.join(path, os.path.basename(st.path))
-                    if not recurse and cmp_path != st.path and st.path != path:
+                    st_path = S(st.path)
+                    cmp_path = os.path.join(path, os.path.basename(st_path))
+                    if not recurse and cmp_path != st_path and st_path != path:
                         continue
 
                     rabbitvcs_status = rabbitvcs.vcs.status.SVNStatus(st)
-                    self.cache[st.path] = rabbitvcs_status
+                    self.cache[st_path] = rabbitvcs_status
                     statuslist.append(rabbitvcs_status)
-                    
+
                 return statuslist
         except pysvn.ClientError as ex:
             # TODO: uncommenting these might not be a good idea
             #~ traceback.print_exc()
-            log.debug("Exception occured in SVN.status() for %s" % path)
+            log.debug("Exception occurred in SVN.status() for %s" % path)
             log.exception(ex)
             return [on_error]
 
     def client_info(self, path):
         if islink(path):
             path = realpath(path)
-        return self.client.info(path)
+        return self.client.info(pure_unicode(path))
+
+    def client_status(self, *args, **kwargs):
+        return self.client.status(*pure_unicode(args), **pure_unicode(kwargs))
 
     def find_repository_path(self, path):
         path_to_check = path
         while path_to_check != "/" and path_to_check != "":
             if os.path.isdir(os.path.join(path_to_check, ".svn")):
                 return path_to_check
-            
+
             path_to_check = os.path.split(path_to_check)[0]
-        
+
         return None
 
     def status(self, path, summarize=True, invalidate=False):
-        if path in self.cache:
+        spath = S(path)
+        if spath in self.cache:
             if invalidate:
-                del self.cache[path]
+                del self.cache[spath]
             else:
-                st = self.cache[path]
+                st = self.cache[spath]
                 if summarize:
                     st.summary = st.single
                 return st
@@ -318,10 +342,10 @@
         if summarize:
             path_status = None
             for st in all_statuses:
-                if st.path == path:
+                if S(st.path) == spath:
                     path_status = st
                     break
-            
+
             path_status.make_summary(all_statuses)
         else:
             path_status = all_statuses[0]
@@ -352,8 +376,9 @@
     def is_in_a_or_a_working_copy(self, path):
         if self.is_working_copy(path):
             return True
-
-        return (self.find_repository_path(os.path.split(path)[0]) != "")
+        if self.find_repository_path(os.path.split(path)[0]):
+            return True
+        return False
 
     def is_versioned(self, path):
         if self.is_working_copy(path):
@@ -366,7 +391,7 @@
                     return True
             except Exception as e:
                 log.exception("is_versioned exception for %s" % path)
-                
+
             return False
 
     def is_status(self, path, status_kind):
@@ -390,6 +415,7 @@
 
     def is_locked(self, path):
         is_locked = False
+        path = pure_unicode(path)
         try:
             is_locked = self.client.info2(path, recurse=False)[0][1].lock is not None
         except pysvn.ClientError as e:
@@ -412,7 +438,7 @@
         @return:            A list of statuses
 
         """
-        
+
         items = []
 
         for path in paths:
@@ -427,7 +453,7 @@
     def get_remote_updates(self, paths):
         if paths is None:
             return []
-        
+
         items = []
         for path in paths:
             try:
@@ -437,7 +463,7 @@
                 continue
 
             for st in sts:
-                        
+
                 if st.remote_content is None and st.remote_metadata is None:
                     continue
 
@@ -471,10 +497,11 @@
         if not path:
             return ""
 
-        info = self.client_info(path)
         returner = ""
+
         try:
-            returner = info["url"].encode('latin1')
+            info = self.client_info(path)
+            returner = S(info["url"], IDENTITY_ENCODING).bytes()
         except Exception as e:
             log.exception(e)
 
@@ -493,9 +520,10 @@
 
         """
 
-        info = self.client.info2(path, recurse=False)
         returner = ""
+
         try:
+            info = self.client.info2(pure_unicode(path), recurse=False)
             returner = info[0][1]["repos_root_URL"]
         except Exception as e:
             log.exception(e)
@@ -657,16 +685,16 @@
 
         try:
             self.client.propset(
-                prop_name,
-                props,
-                path,
+                pure_unicode(prop_name),
+                pure_unicode(props),
+                pure_unicode(path),
                 recurse=recurse
             )
             return True
         except pysvn.ClientError as e:
-            log.exception("pysvn.ClientError exception in svn.py propset() for %s" % path)
+            log.exception("pysvn.ClientError exception in svn.py propset() for %s" % S(path).display())
         except TypeError as e:
-            log.exception("TypeError exception in svn.py propset() %s" % path)
+            log.exception("TypeError exception in svn.py propset() %s" % S(path).display())
 
         return False
 
@@ -681,6 +709,7 @@
         @return:        A dictionary of properties.
 
         """
+        path = pure_unicode(path)
         if rev:
             returner = self.client.proplist(path, revision=rev)
         else:
@@ -709,7 +738,8 @@
 
         """
 
-        path = self.get_versioned_path(path)
+        path = self.get_versioned_path(pure_unicode(path))
+        prop_name = pure_unicode(prop_name)
         try:
             if rev:
                 returner = self.client.propget(
@@ -756,15 +786,15 @@
         returner = False
         try:
             self.client.propdel(
-                prop_name,
-                path,
+                pure_unicode(prop_name),
+                pure_unicode(path),
                 recurse=recurse
             )
             returner = True
         except pysvn.ClientError as e:
-            log.exception("pysvn.ClientError exception in svn.py propdel() for %s" % path)
+            log.exception("pysvn.ClientError exception in svn.py propdel() for %s" % S(path).display())
         except TypeError as e:
-            log.exception("TypeError exception in svn.py propdel() %s" % path)
+            log.exception("TypeError exception in svn.py propdel() %s" % S(path).display())
 
         return returner
 
@@ -841,8 +871,10 @@
         if rev is None:
             rev = self.revision("head")
 
-        self.client.revpropset(prop_name, prop_value, url,
-            revision=rev.primitive())
+        self.client.revpropset(pure_unicode(prop_name),
+                               pure_unicode(prop_value),
+                               pure_unicode(url),
+                               revision=rev.primitive())
 
     def revproplist(self, url, rev=None):
         """
@@ -862,7 +894,7 @@
         if rev is None:
             rev = self.revision("head")
 
-        return self.client.revproplist(url, rev.primitive())[1]
+        return self.client.revproplist(pure_unicode(url), rev.primitive())[1]
 
     def revpropget(self, url, prop_name, rev=None):
         """
@@ -886,8 +918,8 @@
             rev = self.revision("head")
 
         return self.client.revpropget(
-            prop_name,
-            url,
+            pure_unicode(prop_name),
+            pure_unicode(url),
             revision=rev.primitive()
         )
 
@@ -913,8 +945,8 @@
             rev = self.revision("head")
 
         return self.client.revpropdel(
-            prop_name,
-            url,
+            pure_unicode(prop_name),
+            pure_unicode(url),
             revision=rev.primitive(),
             force=force
         )
@@ -997,7 +1029,7 @@
 
         """
 
-        return self.client.add(paths, recurse)
+        return self.client.add(pure_unicode(paths), recurse)
 
     def add_backwards(self, path):
         """
@@ -1008,7 +1040,7 @@
         @param path: the path to add to version control
         @type path: string
         """
-        head, tail = path,""
+        head, tail = pure_unicode(path),""
         tails = list()
 
         # We need to add backwards-recursively, since patch could create
@@ -1040,8 +1072,8 @@
         @param  revision: A pysvn.Revision object.
 
         """
-        src = rabbitvcs.util.helper.urlize(src)
-        dest = rabbitvcs.util.helper.urlize(dest)
+        src = helper.urlize(pure_unicode(src))
+        dest = helper.urlize(pure_unicode(dest))
         return self.client.copy(src, dest, revision.primitive())
 
     def copy_all(self, sources, dest_url_or_path, copy_as_child=False,
@@ -1066,8 +1098,9 @@
         @param  ignore_externals: Omit externals
 
         """
-        
-        return self.client.copy2(sources, dest_url_or_path, copy_as_child,
+
+        return self.client.copy2(pure_unicode(sources),
+            pure_unicode(dest_url_or_path), copy_as_child,
             make_parents, None, ignore_externals)
 
     def checkout(self, url, path, recurse=True, revision=Revision("head"),
@@ -1093,10 +1126,11 @@
 
         """
 
-        url = rabbitvcs.util.helper.urlize(url)
+        url = helper.urlize(pure_unicode(url))
 
-        return self.client.checkout(url, path, recurse=recurse,
-            revision=revision.primitive(), ignore_externals=ignore_externals)
+        return self.client.checkout(url, pure_unicode(path),
+            recurse=recurse, revision=revision.primitive(),
+            ignore_externals=ignore_externals)
 
     def cleanup(self, path):
         """
@@ -1107,7 +1141,7 @@
 
         """
 
-        return self.client.cleanup(path)
+        return self.client.cleanup(pure_unicode(path))
 
     def revert(self, paths):
         """
@@ -1118,7 +1152,7 @@
 
         """
 
-        return self.client.revert(paths)
+        return self.client.revert(pure_unicode(paths))
 
     def commit(self, paths, log_message="", recurse=False, keep_locks=False):
         """
@@ -1137,7 +1171,7 @@
         @param  keep_locks: Whether or not to keep locks on commit.
 
         """
-        
+
         kwargs = {"keep_locks": keep_locks}
         try:
             # Simply setting recurse=False will not stop child files from getting
@@ -1147,8 +1181,9 @@
             kwargs["depth"] = (recurse and pysvn.depth.infinity or pysvn.depth.empty)
         except AttributeError:
             kwargs["recurse"] = recurse
-        
-        retval = self.client.checkin(paths, log_message, **kwargs)
+
+        retval = self.client.checkin(pure_unicode(paths),
+                                     pure_unicode(log_message), **kwargs)
         dummy_commit_dict = {
             "revision": retval,
             "action": rabbitvcs.vcs.svn.commit_completed
@@ -1177,40 +1212,40 @@
 
         """
 
-        log = self.client.log(url_or_path, revision_start.primitive(),
-            revision_end.primitive(), discover_changed_paths,
-            strict_node_history, limit)
+        log = self.client.log(pure_unicode(url_or_path),
+            revision_start.primitive(), revision_end.primitive(),
+            discover_changed_paths, strict_node_history, limit)
 
         returner = []
         for item in log:
             revision = Revision(pysvn.opt_revision_kind.number, item.revision.number)
             date = datetime.fromtimestamp(item.date) if hasattr(item, "date") else datetime(1900, 1, 1)
-            
+
             author = _("(no author)")
             if hasattr(item, "author"):
-                author = item["author"]        
+                author = item["author"]
 
             message = ""
             if hasattr(item, "message"):
                 message = item["message"]
-        
+
             changed_paths = []
             for changed_path in item.changed_paths:
                 copy_from_rev = ""
                 if hasattr(changed_path.copyfrom_revision, "number"):
                     copy_from_rev = self.revision("number", changed_path.copyfrom_revision.number)
-            
+
                 copy_from_path = ""
                 if hasattr(changed_path, "copy_from_path"):
                     copy_from_path = changed_path.copy_from_path
-                    
+
                 changed_paths.append(rabbitvcs.vcs.log.LogChangedPath(
                     changed_path.path,
                     changed_path.action,
                     copy_from_path,
-                    copy_from_rev                    
+                    copy_from_rev
                 ))
-        
+
             returner.append(rabbitvcs.vcs.log.Log(
                 date,
                 revision,
@@ -1219,7 +1254,7 @@
                 changed_paths,
                 None
             ))
-        
+
         return returner
 
     def export(self, src_url_or_path, dest_path, revision=Revision("head"),
@@ -1246,7 +1281,8 @@
 
         """
 
-        self.client.export(src_url_or_path, dest_path, force,
+        self.client.export(pure_unicode(src_url_or_path),
+            pure_unicode(dest_path), force,
             revision.primitive(), native_eol, ignore_externals, recurse)
 
     def import_(self, path, url, log_message, ignore=False):
@@ -1268,8 +1304,10 @@
 
         """
 
-        url = rabbitvcs.util.helper.urlize(url)
-        return self.client.import_(path, url, log_message, ignore)
+        url = helper.urlize(url)
+        return self.client.import_(pure_unicode(path),
+                                   pure_unicode(url),
+                                   pure_unicode(log_message), ignore)
 
     def lock(self, url_or_path, lock_comment, force=False):
 
@@ -1287,7 +1325,8 @@
 
         """
 
-        return self.client.lock(url_or_path, lock_comment, force)
+        return self.client.lock(pure_unicode(url_or_path),
+                                pure_unicode(lock_comment), force)
 
     def relocate(self, from_url, to_url, path, recurse=True):
 
@@ -1304,9 +1343,9 @@
         @param  path: The path of the local working copy
 
         """
-        
-        from_url = rabbitvcs.util.helper.urlize(from_url)
-        to_url = rabbitvcs.util.helper.urlize(to_url)
+
+        from_url = helper.urlize(pure_unicode(from_url))
+        to_url = helper.urlize(pure_unicode(to_url))
         return self.client.relocate(from_url, to_url, path, recurse)
 
     def move(self, src_url_or_path, dest_url_or_path):
@@ -1322,6 +1361,8 @@
 
         """
 
+        src_url_or_path = pure_unicode(src_url_or_path)
+        dest_url_or_path = pure_unicode(dest_url_or_path)
         if hasattr(self.client, "move2"):
             return self.client.move2([src_url_or_path], dest_url_or_path)
         else:
@@ -1348,7 +1389,8 @@
 
         """
 
-        return self.client.move2(sources, dest_url_or_path,
+        return self.client.move2(pure_unicode(sources),
+            pure_unicode(dest_url_or_path),
             move_as_child=move_as_child, make_parents=make_parents)
 
     def remove(self, url_or_path, force=False, keep_local=False):
@@ -1367,7 +1409,8 @@
 
         """
 
-        return self.client.remove(url_or_path, force, keep_local)
+        return self.client.remove(pure_unicode(url_or_path),
+                                  force, keep_local)
 
     def revert(self, paths, recurse=False):
         """
@@ -1381,7 +1424,7 @@
 
         """
 
-        return self.client.revert(paths, recurse)
+        return self.client.revert(pure_unicode(paths), recurse)
 
     def resolve(self, path, recurse=True):
         """
@@ -1395,7 +1438,7 @@
 
         """
 
-        return self.client.resolved(path, recurse)
+        return self.client.resolved(pure_unicode(path), recurse)
 
     def switch(self, path, url, revision=Revision("head")):
         """
@@ -1412,8 +1455,8 @@
 
         """
 
-        url = rabbitvcs.util.helper.urlize(url)
-        return self.client.switch(path, url, revision.primitive())
+        url = helper.urlize(pure_unicode(url))
+        return self.client.switch(pure_unicode(path), url, revision.primitive())
 
     def unlock(self, path, force=False):
         """
@@ -1427,7 +1470,7 @@
 
         """
 
-        return self.client.unlock(path, force)
+        return self.client.unlock(pure_unicode(path), force)
 
     def update(self, path, recurse=True, revision=Revision("head"),
             ignore_externals=False):
@@ -1448,8 +1491,9 @@
 
         """
 
-        return self.client.update(path, recurse, revision.primitive(),
-            ignore_externals)
+        return self.client.update(pure_unicode(path),
+                                  recurse, revision.primitive(),
+                                  ignore_externals)
 
     def annotate(self, url_or_path, from_revision=Revision("number", 1),
             to_revision=Revision("head")):
@@ -1467,8 +1511,9 @@
 
         """
 
-        return self.client.annotate(url_or_path, from_revision.primitive(),
-            to_revision.primitive())
+        return self.client.annotate(pure_unicode(url_or_path),
+                                    from_revision.primitive(),
+                                    to_revision.primitive())
 
     def merge_ranges(self, source, ranges_to_merge, peg_revision,
             target_wcpath, notice_ancestry=False, force=False, dry_run=False,
@@ -1503,10 +1548,10 @@
         TODO: Will firm up the parameter documentation later
 
         """
-        return self.client.merge_peg2(source,
+        return self.client.merge_peg2(pure_unicode(source),
                                       ranges_to_merge,
                                       peg_revision.primitive(),
-                                      target_wcpath,
+                                      pure_unicode(target_wcpath),
                                       notice_ancestry=notice_ancestry,
                                       force=force,
                                       dry_run=dry_run,
@@ -1520,7 +1565,7 @@
         return hasattr(self.client, "merge_peg2")
 
     def merge_trees(self, url_or_path1, revision1, url_or_path2, revision2,
-            local_path, force=False, recurse=True, record_only=False):
+            local_path, force=False, recurse=True, dry_run=False, record_only=False):
         """
         Merge two trees into one.
 
@@ -1545,6 +1590,9 @@
         @type   recurse: boolean
         @param  recurse: Merge children recursively
 
+        @type   dry_run: boolean
+        @param  dry_run: Do a test/dry run or not
+
         @type   record_only: boolean
         @param  record_only: unsure
 
@@ -1552,11 +1600,17 @@
 
         """
 
-        url_or_path1 = rabbitvcs.util.helper.urlize(url_or_path1)
-        url_or_path2 = rabbitvcs.util.helper.urlize(url_or_path2)
-        return self.client.merge(url_or_path1, revision1.primitive(),
-            url_or_path2, revision2.primitive(), local_path, force, recurse,
-            record_only)
+        url_or_path1 = helper.urlize(pure_unicode(url_or_path1))
+        url_or_path2 = helper.urlize(pure_unicode(url_or_path2))
+        return self.client.merge(url_or_path1,
+                                 revision1.primitive(),
+                                 url_or_path2,
+                                 revision2.primitive(),
+                                 pure_unicode(local_path),
+                                 force = force,
+                                 recurse = recurse,
+                                 dry_run = dry_run,
+                                 record_only = record_only)
 
     def has_merge_reintegrate(self):
         """
@@ -1583,8 +1637,10 @@
 
         """
 
-        return self.client.merge_reintegrate(url_or_path, revision.primitive(),
-            local_path, dry_run)
+        return self.client.merge_reintegrate(pure_unicode(url_or_path),
+                                             revision.primitive(),
+                                             pure_unicode(local_path),
+                                             dry_run = dry_run)
 
 
     def diff(self, tmp_path, url_or_path, revision1, url_or_path2, revision2,
@@ -1622,9 +1678,12 @@
 
         """
 
-        return self.client.diff(tmp_path, url_or_path, revision1.primitive(),
-            url_or_path2, revision2.primitive(), recurse, ignore_ancestry,
-            diff_deleted, ignore_content_type)
+        return self.client.diff(pure_unicode(tmp_path),
+                                pure_unicode(url_or_path),
+                                revision1.primitive(),
+                                pure_unicode(url_or_path2),
+                                revision2.primitive(), recurse, ignore_ancestry,
+                                diff_deleted, ignore_content_type)
 
     def diff_summarize(self, url_or_path1, revision1, url_or_path2, revision2,
             recurse=True, ignore_ancestry=False):
@@ -1654,13 +1713,16 @@
 
         """
 
-        return self.client.diff_summarize(url_or_path1, revision1.primitive(),
-            url_or_path2, revision2.primitive(), recurse, ignore_ancestry)
+        return self.client.diff_summarize(pure_unicode(url_or_path1),
+                                          revision1.primitive(),
+                                          pure_unicode(url_or_path2),
+                                          revision2.primitive(),
+                                          recurse, ignore_ancestry)
 
     def list(self, url_or_path, revision=Revision("HEAD"), recurse=True):
-        url_or_path = rabbitvcs.util.helper.urlize(url_or_path)
-        return self.client.list(url_or_path, revision=revision.primitive(),
-            recurse=recurse)
+        url_or_path = helper.urlize(url_or_path)
+        return self.client.list(pure_unicode(url_or_path),
+                                revision=revision.primitive(), recurse=recurse)
 
     def mkdir(self, url_or_path, log_message):
         """
@@ -1674,7 +1736,8 @@
 
         """
 
-        return self.client.mkdir(url_or_path, log_message)
+        return self.client.mkdir(pure_unicode(url_or_path),
+                                 pure_unicode(log_message))
 
     def apply_patch(self, patch_file, base_dir):
         """
@@ -1690,7 +1753,7 @@
 
         any_failures = False
 
-        for file, success, rej_file in rabbitvcs.util.helper.parse_patch_output(patch_file, base_dir):
+        for file, success, rej_file in helper.parse_patch_output(patch_file, base_dir):
 
             fullpath = os.path.join(base_dir, file)
 
@@ -1714,7 +1777,7 @@
                     "path" : rej_file,
                     "action" : _("Rejected Patch"),
                     "mime_type" : None
-                            }
+                }
 
             if self.client.callback_notify:
                 self.client.callback_notify(event_dict)
diff -uNr rabbitvcs-0.17.1/setup.py rabbitvcs/setup.py
--- rabbitvcs-0.17.1/setup.py	2017-07-21 08:12:25.000000000 +0800
+++ rabbitvcs/setup.py	2019-09-13 08:36:17.265343405 +0800
@@ -13,7 +13,7 @@
 # For more information see: http://docs.python.org/dist/dist.html
 #
 
-# TODO: this all feels just a little too shell scripty, refactoring it later 
+# TODO: this all feels just a little too shell scripty, refactoring it later
 # might be a good idea.
 
 # NOTES:
@@ -39,8 +39,8 @@
 
 # If the user passed --prefix=... then use the new prefix
 for c in sys.argv:
-    if c.startswith("--prefix"):
-        PREFIX = c.split("=")[1].lstrip().rstrip()
+    if c.startswith("--prefix="):
+        PREFIX = c.split("=", 1)[1].strip()
 
 #==============================================================================
 # Variables
@@ -50,7 +50,7 @@
 # This will eventually be passed to the setup function, but we already need them
 # for doing some other stuff so we have to declare them here.
 name                = "rabbitvcs"
-version             = "0.17.0"
+version             = "0.17.1"
 description         = "Easy version control"
 long_description    = """RabbitVCS is a set of graphical tools written to provide simple and straightforward access to the version control systems you use."""
 author              = "Adam Plumb"
@@ -122,8 +122,8 @@
 # Ready to install
 #==============================================================================
 
-# Calling the setup function will actually install RabbitVCS and also creates 
-# an .egg-info file in /usr/lib/python<version>/site-packages/ or 
+# Calling the setup function will actually install RabbitVCS and also creates
+# an .egg-info file in /usr/lib/python<version>/site-packages/ or
 # /usr/share/python-support/rabbitvcs when generating a Debian package.
 dist = setup(
     # The following arguments will be included in the .egg.info file,
@@ -163,8 +163,8 @@
 
     if os.uname()[0] != 'Darwin':
         print("Running gtk-update-icon-cache")
-        
+
         subprocess.Popen(
-            ["gtk-update-icon-cache", os.path.join(PREFIX, icon_theme_directory)], 
+            ["gtk-update-icon-cache", os.path.join(PREFIX, icon_theme_directory)],
             stdout=subprocess.PIPE
         ).communicate()[0]
