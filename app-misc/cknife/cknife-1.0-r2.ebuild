# Copyright 1999-2016 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Id$

EAPI=5

inherit java-pkg-2 git-2

DESCRIPTION="A webshell manager from China. Support multiple languages."
HOMEPAGE="https://github.com/Chora10/Cknife"
SRC_URI="https://raw.githubusercontent.com/qunxyz/pentesting-overlay/master/app-misc/cknife/files/Cknife-1.0-r2.tar.gz"

LICENSE="GPL-3"
SLOT="0"
KEYWORDS="~amd64 ~x86"
IUSE=""

DEPEND="virtual/jdk"
RDEPEND="virtual/jre"

src_install () {
	dodir /usr/share/${PN}/

	cp -R * "${ED}"/usr/share/${PN}/
	chmod 0777 /usr/share/${PN}/Cknife.db
	chmod 0777 /usr/share/${PN}/Config.ini

	# make_desktop_entry cknife "Cknife" cknife 'Application;Network;Security;'
	insinto /usr/share/applications
	doins "${FILESDIR}/cknife.desktop || \
		die "cannot copy .desktop file"
}