diff -uNr gnome-online-accounts-3.22.5-ori/src/goabackend/goaewsclient.c gnome-online-accounts-3.22.5/src/goabackend/goaewsclient.c
--- gnome-online-accounts-3.22.5-ori/src/goabackend/goaewsclient.c	2017-03-11 01:28:32.000000000 +0800
+++ gnome-online-accounts-3.22.5/src/goabackend/goaewsclient.c	2017-09-18 23:51:42.714053906 +0800
@@ -498,6 +498,7 @@
   data->session = soup_session_new_with_options (SOUP_SESSION_SSL_STRICT, FALSE,
                                                  NULL);
   soup_session_add_feature_by_type (data->session, SOUP_TYPE_AUTH_NTLM);
+  soup_session_add_feature_by_type (data->session, SOUP_SESSION_PROXY_RESOLVER);
   data->accept_ssl_errors = accept_ssl_errors;
 
   if (cancellable != NULL)
diff -uNr gnome-online-accounts-3.22.5-ori/src/goabackend/goahttpclient.c gnome-online-accounts-3.22.5/src/goabackend/goahttpclient.c
--- gnome-online-accounts-3.22.5-ori/src/goabackend/goahttpclient.c	2017-03-11 01:28:32.000000000 +0800
+++ gnome-online-accounts-3.22.5/src/goabackend/goahttpclient.c	2017-09-18 23:52:02.066294806 +0800
@@ -232,6 +232,7 @@
   data->session = soup_session_new_with_options (SOUP_SESSION_SSL_STRICT, FALSE,
                                                  NULL);
 
+  soup_session_add_feature_by_type (data->session, SOUP_SESSION_PROXY_RESOLVER);
   logger = soup_logger_new (SOUP_LOGGER_LOG_BODY, -1);
   soup_logger_set_printer (logger, http_client_log_printer, NULL, NULL);
   soup_session_add_feature (data->session, SOUP_SESSION_FEATURE (logger));
