# Copyright 1999-2016 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Id$

EAPI=7

PYTHON_COMPAT=( python3_{6..10} )

inherit eutils unpacker python-any-r1

DESCRIPTION="Switch hosts quickly!"
HOMEPAGE="https://github.com/oldj/SwitchHosts"
SRC_URI="https://github.com/oldj/SwitchHosts/releases/download/v${PV}/SwitchHosts_linux_amd64_${PV}.6086.deb -> ${P}.deb"

LICENSE="MIT"
SLOT="0"
KEYWORDS="amd64"
IUSE=""
RESTRICT="mirror strip"

DEPEND="${PYTHON_DEPS}"
RDEPEND=""

S="${WORKDIR}"

src_unpack() {
    ar x ${DISTDIR}/${A}
    unpack ${WORKDIR}/data.tar.xz
}

src_install() {
    doins -r opt
    doins -r usr
    fperms +x /opt/SwitchHosts/switchhosts
}

pkg_postinst() {
    xdg_desktop_database_update
}

pkg_postrm() {
    xdg_desktop_database_update
}
