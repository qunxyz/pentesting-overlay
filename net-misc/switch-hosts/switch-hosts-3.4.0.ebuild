# Copyright 1999-2016 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Id$

EAPI=5

inherit eutils unpacker versionator

DESCRIPTION="Switch hosts quickly!"
HOMEPAGE="https://oldj.github.io/SwitchHosts/"
SRC_URI="https://github.com/oldj/SwitchHosts/releases/download/v${PV}/SwitchHosts._linux_x64_${PV}.5450.zip -> ${P}.zip"

LICENSE="MIT"
SLOT="0"
KEYWORDS="~amd64"
IUSE=""
RESTRICT="mirror strip"

DEPEND=""
RDEPEND="gnome-base/gconf
    x11-libs/gtk+:2
    virtual/udev
    dev-libs/libgcrypt
    x11-libs/libnotify
    x11-libs/libXtst
    dev-libs/nss
    dev-lang/python
    gnome-base/gvfs
    x11-misc/xdg-utils
    net-print/cups
"

S=${WORKDIR}

src_install() {
	insinto /opt/${PN}
	doins -r ${S}/*
	fperms +x "/opt/${PN}/"{switchhosts,libEGL.so,libGLESv2.so,libffmpeg.so}
	dosym "/opt/${PN}/switchhosts" /usr/bin/switch-hosts
	doicon ${FILESDIR}/switch-hosts.png
	domenu ${FILESDIR}/SwitchHosts.desktop
}
