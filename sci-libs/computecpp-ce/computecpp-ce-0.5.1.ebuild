# Copyright 1999-2017 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2

EAPI=6
inherit eutils

CE_PKG="ComputeCpp-CE-${PV}-Ubuntu.16.04-64bit.tar.gz"

DESCRIPTION="Accelerates Complex C++ Applications on Heterogeneous Compute Systems using Open Standards."
HOMEPAGE="https://www.codeplay.com/products/computesuite"
SRC_URI="${CE_PKG}"
CE_URI="https://developer.codeplay.com/computecppce/latest/download"

LICENSE="Codeplay Software Ltd."
SLOT="0"
KEYWORDS="~amd64"
IUSE=""

RESTRICT="fetch strip"
QA_PREBUILT="*"

COMMON_DEPEND="sys-libs/ncurses[tinfo]
"
DEPEND="${COMMON_DEPEND}
"
RDEPEND="${DEPEND}"

S="${WORKDIR}/ComputeCpp-CE-${PV}-Ubuntu-16.04-64bit"

pkg_nofetch() {
	einfo "Please download '${CE_PKG}' from:"
	einfo "'${CE_URI}'"
	einfo "and move it to '${DISTDIR}'"
}

src_install() {
	insinto /usr
	dobin bin/*
	doins -r include lib
	dodoc -r doc
	
	#if [[ -f "/usr/lib/libncurses.so.5" && ! -h "/usr/lib/libtinfo.so.5" ]] ; then
	#	dosym "/usr/lib/libncurses.so.5" "/usr/lib/libtinfo.so.5"
	#fi
}
