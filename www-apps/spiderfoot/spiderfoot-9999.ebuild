# Copyright 1999-2016 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Id$

EAPI=5

PYTHON_COMPAT=( python2_7 )
inherit python-single-r1 git-2 systemd

DESCRIPTION="SpiderFoot is an open source intelligence automation tool. Its goal is to automate the process of gathering intelligence about a given target, which may be an IP address, domain name, hostname or network subnet."
HOMEPAGE="http://www.spiderfoot.net"
EGIT_REPO_URI="https://github.com/smicallef/spiderfoot.git"

LICENSE="GPL-3"
SLOT="0"
KEYWORDS="~amd64 ~x86"
IUSE=""

DEPEND=""
RDEPEND="dev-python/lxml
dev-python/netaddr
dev-python/m2crypto
dev-python/cherrypy
dev-python/mako
"

src_install () {
	dodir /usr/share/${PN}/

	cp -R * "${ED}"/usr/share/${PN}/
	systemd_dounit "${FILESDIR}/spiderfoot.service"

	newinitd "${FILESDIR}"/spiderfoot.initd $PN
	newconfd "${FILESDIR}"/spiderfoot.confd $PN
	insinto /etc/spiderfoot
	newins "${FILESDIR}/spiderfoot.conf" spiderfoot.conf
}