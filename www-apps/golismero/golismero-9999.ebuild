# Copyright 1999-2016 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2
# $Id$

EAPI=5

PYTHON_COMPAT=( python2_7 )
inherit python-single-r1 git-2

DESCRIPTION="GoLismero is an open source framework for security testing. It's currently geared towards web security, but it can easily be expanded to other kinds of scans."
HOMEPAGE="http://golismero-project.com/"
EGIT_REPO_URI="https://github.com/golismero/golismero.git"

LICENSE="GPL-3"
SLOT="0"
KEYWORDS="~amd64 ~x86"
IUSE=""

DEPEND=""
RDEPEND="dev-python/argcomplete
dev-python/simplejson
dev-python/docutils
dev-python/pymongo
net-analyzer/sslscan
"

src_install () {
	dodir /usr/share/${PN}/

	cp -R * "${ED}"/usr/share/${PN}/
	dosym /usr/share/${PN}/golismero.py /usr/bin/${PN}

	elog
	elog "If you have an API key for Shodan, or an OpenVAS server or SpiderFoot server you want to integrate with GoLismero, run the following commands:"
	elog
	elog "		mkdir ~/.golismero"
	elog "		touch ~/.golismero/user.conf"
	elog "		chmod 600 ~/.golismero/user.conf"
	elog "		touch ~/.golismero/user.conf"
	elog "		nano ~/.golismero/user.conf"
	elog
	elog "At the editor, add the following sections to the file, as appropriate:"
	elog
	elog "[shodan:Configuration]"
	elog "apikey = <INSERT YOUR SHODAN API KEY HERE>"
	elog
	elog "[openvas]"
	elog "host = <INSERT THE OPENVAS HOST HERE>"
	elog "user = <INSERT THE OPENVAS USERNAME HERE>"
	elog "*password = <INSERT THE OPENVAS PASSWORD HERE>"
	elog
	elog "[spiderfoot]"
	elog "url = <INSERT THE SPIDERFOOT URL HERE>"
	einfo
}